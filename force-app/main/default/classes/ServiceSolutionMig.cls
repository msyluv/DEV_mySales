public class ServiceSolutionMig {

    public static void saveMigData(String opptyId, String body){
        System.debug((Map<String,Object>) JSON.deserializeUntyped(body));
        Map<String,Object> bodyMap = (Map<String,Object>) JSON.deserializeUntyped(body);
        List<Service__c> lservice = [SELECT Id,Name,itemNumber__c,DeletionFlag__c,sService__r.Code__c,sService__r.Name,Service__r.Code__c                                ,Service__r.Name                                   ,DeliveryDepartment__c                             ,DeliveryDepartment__r.CostCenter__c               ,DeliveryDepartment__r.CostCenterName__c               ,sDeliveryDepartment__c                            ,sDeliveryDepartment__r.CostCenter__c              ,sDeliveryDepartment__r.CostCenterName__c              ,sSalesDepartment__c                               ,sSalesDepartment__r.CostCenter__c                 ,sSalesDepartment__r.CostCenterName__c                 ,SalesDepartment__c                                ,SalesDepartment__r.CostCenter__c                  ,SalesDepartment__r.CostCenterName__c                  ,WBSClass__c,SendSAP__c,WBSCode__c,ServiceBackup__c,ServiceNmBackup__c,DeliveryDepartmentBackup__c,SalesDepartmentBackup__c,DeliveryDepartmentNmBackup__c,SalesDepartmentNmBackup__c,sDeletionFlag__c FROM Service__c WHERE Opportunity__c = :opptyId AND SendSAP__c = false AND sDeletionFlag__c = false AND DeletionFlag__c = false AND Changed__c = true ORDER BY ItemNumber__c];
        List<Solution__c> lsolution = [SELECT Id, Name ,Service__c                                     ,Service__r.ServiceBackup__c ,Service__r.Service__r.Name                     ,Service__r.Service__r.Code__c                  ,Service__r.WBSCode__c           ,Service__r.DeliveryDepartment__r.CostCenter__c  ,Service__r.DeliveryDepartment__r.CostCenterName__c  ,Service__r.SalesDepartment__r.CostCenter__c    ,Service__r.SalesDepartment__r.CostCenterName__c    ,Service__r.Service__c                             ,Service__r.sService__r.Name                     ,Service__r.sDeliveryDepartment__r.CostCenter__c  ,Service__r.sDeliveryDepartment__r.CostCenterName__c  ,Service__r.sSalesDepartment__r.CostCenter__c    ,Service__r.sSalesDepartment__r.CostCenterName__c    ,Service__r.sService__r.Code__c                  ,Solution__c                                    ,Solution__r.Name                               ,Solution__r.Code__c                            ,toLabel(Solution__r.SolutionType__c)                    ,sSolution__c                                    ,sSolution__r.Name                               ,sSolution__r.Code__c                            ,toLabel(sSolution__r.SolutionType__c)                    ,BizAttribute__r.Code__c                        ,BizAttribute__c                                ,BizAttribute__r.Name ,sBizAttribute__r.Code__c                        ,sBizAttribute__c                                ,sBizAttribute__r.Name ,SolutionType__c ,sSolutionType__c ,ItemNumber__c                                  ,BusinessType__c                                ,sBusinessType__c                                ,WBSClass__c                                    ,sWBSClass__c                                    ,WBSCode__c                                     ,ProjectCode__c                                 ,SolutionBackup__c ,SolutionNmBackup__c ,BizAttributeBackup__c ,BizAttributeNmBackup__c ,Service__r.ServiceNmBackup__c ,Service__r.DeliveryDepartmentNmBackup__c ,Service__r.SalesDepartmentNmBackup__c ,SendSAP__c ,sDeletionFlag__c  ,DeletionFlag__c   ,Changed__c ,sPSType__c ,PSType__c FROM Solution__c  WHERE Service__r.Opportunity__c = :opptyId  AND SendSAP__c = false AND DeletionFlag__c = false AND Changed__c = true ORDER BY Service__r.ItemNumber__c];
        Opportunity oppty = [SELECT Id, Name,OpportunityCode__c,CompanyCode__c,cOriginAcc__r.AccountNumber,cPrimarySalesDepartment__r.CostCenter__c,cPrimarySalesDepartment__r.CostCenterName__c,SalesDepartment__r.CostCenterName__c,SalesDepartment__r.CostCenter__c,cRevenueStartDate__c,cRevenueEndDate__c,CloseDate,ProposalPM_User__c,ProposalPM_User__r.Name,ProposalPM__r.EvSapEmpNO__c,ProposalPM__r.EvEmpNO__c,OwnerId,Owner.EmployeeNumber,Owner.FederationIdentifier,Amount,toLabel(StageName),Description,cOriginAcc__r.Name,GroupInternal__c,KoreaDomestic__c,Account.Name,Owner.Name,ProposalPM__r.Name,VRBMethod__c,CurrencyIsoCode ,BusinessLevel__c ,FinalBusinessLevel__c,AccountId,BiddingMethod__c ,cPrimarySalesDepartment__r.DeptManagerEmail__c    ,SalesDepartment__r.DeptManagerEmail__c            ,CollaborationInOut__c     ,Collaboration__c          ,CollaborationBOId__c      ,CollaborationBOId__r.cPrimarySalesDepartment__c   ,CollaborationBOId__r.SalesDepartment__c           ,CollaborationBOId__r.Owner.Id                     ,CollaborationBOId__r.Owner.FederationIdentifier   ,CollaborationBOId__r.CompanyCode__c               ,ReuseReason__c                                    ,BusinessType__c,IsOriginal__c FROM Opportunity WHERE Id =: opptyId];
        
        //Map<String,String> createResultMap = OpportunityServiceSolutionMainController.saveProject_IF040(oppty, lservice, lsolution, bodyMap);
        
        //if(createResultMap.get('RESULT') == 'S') OpportunityServiceSolutionMainController.upsertOpportunityActivity(opptyId, 'Completed');
        //else System.debug('save Project 실패');
    }
}