/*!
 * cafe note v2.3.27
 * Copyright 2014, S-Core, Inc. All Right Reserved.
 *
 * System : SDS mySales
 * License ID : 2024IM-T034-CNV23-PN33-GV38
 * Release ID : b264eb58a0b93e5806dcd27b678d9622bf22d0dc
 * Release Date : 2024-01-29 16:03 57
 */
/*!
 * jQuery JavaScript Library v1.10.2
 * http://jquery.com/ 
 * 
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-07-03T13:48Z
 */
/*!
 * jQuery UI - v1.11.1 - 2014-08-13
 * http://jqueryui.com/ 
 *
 * Copyright 2014 jQuery Foundation and other contributors; Licensed MIT
 */
/*!
 * TinyColor v1.1.2
 * https://github.com/bgrins/TinyColor
 * Brian Grinstead, MIT License
 */
/*!
 * Bowser - a browser detector
 * https://github.com/ded/bowser
 * MIT License | (c) Dustin Diaz 2014
 */
!function(a,b){"use strict";function c(a,b){var c,d,f=a.length,g=[];for(c=0;c<f;c++){if(d=e[a[c]],!d)throw"Can not find a dependency module: "+a[c];g.push(d)}b.apply(null,g)}function d(a,b,d){if("string"!=typeof a)throw"invalid definition, module id must be defined";if("[object Array]"!==Object.prototype.toString.call(b))throw"Dependencies must be not null";if("[object Function]"!==Object.prototype.toString.call(d))throw"Implement function must be defined";c(b,function(){e[a]=d.apply(null,arguments)})}var e;a=a||window,e=a.Cafe&&a.Cafe.getModules?a.Cafe.getModules():{},d.amd=!0,function(a,b){function c(a){var b=a.length,c=la.type(a);return!la.isWindow(a)&&(!(1!==a.nodeType||!b)||("array"===c||"function"!==c&&(0===b||"number"==typeof b&&b>0&&b-1 in a)))}function e(a){var b=Aa[a]={};return la.each(a.match(na)||[],function(a,c){b[c]=!0}),b}function f(a,c,d,e){if(la.acceptData(a)){var f,g,h=la.expando,i=a.nodeType,j=i?la.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||d!==b||"string"!=typeof c)return k||(k=i?a[h]=ca.pop()||la.guid++:h),j[k]||(j[k]=i?{}:{toJSON:la.noop}),"object"!=typeof c&&"function"!=typeof c||(e?j[k]=la.extend(j[k],c):j[k].data=la.extend(j[k].data,c)),g=j[k],e||(g.data||(g.data={}),g=g.data),d!==b&&(g[la.camelCase(c)]=d),"string"==typeof c?(f=g[c],null==f&&(f=g[la.camelCase(c)])):f=g,f}}function g(a,b,c){if(la.acceptData(a)){var d,e,f=a.nodeType,g=f?la.cache:a,h=f?a[la.expando]:la.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){la.isArray(b)?b=b.concat(la.map(b,la.camelCase)):b in d?b=[b]:(b=la.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;for(;e--;)delete d[b[e]];if(c?!i(d):!la.isEmptyObject(d))return}(c||(delete g[h].data,i(g[h])))&&(f?la.cleanData([a],!0):la.support.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}function h(a,c,d){if(d===b&&1===a.nodeType){var e="data-"+c.replace(Ca,"-$1").toLowerCase();if(d=a.getAttribute(e),"string"==typeof d){try{d="true"===d||"false"!==d&&("null"===d?null:+d+""===d?+d:Ba.test(d)?la.parseJSON(d):d)}catch(a){}la.data(a,c,d)}else d=b}return d}function i(a){var b;for(b in a)if(("data"!==b||!la.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function j(){return!0}function k(){return!1}function l(){try{return Z.activeElement}catch(a){}}function m(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function n(a,b,c){if(la.isFunction(b))return la.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return la.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(Ra.test(b))return la.filter(b,a,c);b=la.filter(b,a)}return la.grep(a,function(a){return la.inArray(a,b)>=0!==c})}function o(a){var b=Xa.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function p(a,b){return la.nodeName(a,"table")&&la.nodeName(1===b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function q(a){return a.type=(null!==la.find.attr(a,"type"))+"/"+a.type,a}function r(a){var b=hb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function s(a,b){for(var c,d=0;null!=(c=a[d]);d++)la._data(c,"globalEval",!b||la._data(b[d],"globalEval"))}function t(a,b){if(1===b.nodeType&&la.hasData(a)){var c,d,e,f=la._data(a),g=la._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;d<e;d++)la.event.add(b,c,h[c][d])}g.data&&(g.data=la.extend({},g.data))}}function u(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!la.support.noCloneEvent&&b[la.expando]){e=la._data(b);for(d in e.events)la.removeEvent(b,d,e.handle);b.removeAttribute(la.expando)}"script"===c&&b.text!==a.text?(q(b).text=a.text,r(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),la.support.html5Clone&&a.innerHTML&&!la.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&eb.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}}function v(a,c){var d,e,f=0,g=typeof a.getElementsByTagName!==X?a.getElementsByTagName(c||"*"):typeof a.querySelectorAll!==X?a.querySelectorAll(c||"*"):b;if(!g)for(g=[],d=a.childNodes||a;null!=(e=d[f]);f++)!c||la.nodeName(e,c)?g.push(e):la.merge(g,v(e,c));return c===b||c&&la.nodeName(a,c)?la.merge([a],g):g}function w(a){eb.test(a.type)&&(a.defaultChecked=a.checked)}function x(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=zb.length;e--;)if(b=zb[e]+c,b in a)return b;return d}function y(a,b){return a=b||a,"none"===la.css(a,"display")||!la.contains(a.ownerDocument,a)}function z(a,b){for(var c,d,e,f=[],g=0,h=a.length;g<h;g++)d=a[g],d.style&&(f[g]=la._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&y(d)&&(f[g]=la._data(d,"olddisplay",D(d.nodeName)))):f[g]||(e=y(d),(c&&"none"!==c||!e)&&la._data(d,"olddisplay",e?c:la.css(d,"display"))));for(g=0;g<h;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function A(a,b,c){var d=sb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function B(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;f<4;f+=2)"margin"===c&&(g+=la.css(a,c+yb[f],!0,e)),d?("content"===c&&(g-=la.css(a,"padding"+yb[f],!0,e)),"margin"!==c&&(g-=la.css(a,"border"+yb[f]+"Width",!0,e))):(g+=la.css(a,"padding"+yb[f],!0,e),"padding"!==c&&(g+=la.css(a,"border"+yb[f]+"Width",!0,e)));return g}function C(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=lb(a),g=la.support.boxSizing&&"border-box"===la.css(a,"boxSizing",!1,f);if(e<=0||null==e){if(e=mb(a,b,f),(e<0||null==e)&&(e=a.style[b]),tb.test(e))return e;d=g&&(la.support.boxSizingReliable||e===a.style[b]),e=parseFloat(e)||0}return e+B(a,b,c||(g?"border":"content"),d,f)+"px"}function D(a){var b=Z,c=vb[a];return c||(c=E(a,b),"none"!==c&&c||(kb=(kb||la("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(b.documentElement),b=(kb[0].contentWindow||kb[0].contentDocument).document,b.write("<!doctype html><html><body>"),b.close(),c=E(a,b),kb.detach()),vb[a]=c),c}function E(a,b){var c=la(b.createElement(a)).appendTo(b.body),d=la.css(c[0],"display");return c.remove(),d}function F(a,b,c,d){var e;if(la.isArray(b))la.each(b,function(b,e){c||Bb.test(a)?d(a,e):F(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==la.type(b))d(a,b);else for(e in b)F(a+"["+e+"]",b[e],c,d)}function G(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(na)||[];if(la.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function H(a,b,c,d){function e(h){var i;return f[h]=!0,la.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Sb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function I(a,c){var d,e,f=la.ajaxSettings.flatOptions||{};for(e in c)c[e]!==b&&((f[e]?a:d||(d={}))[e]=c[e]);return d&&la.extend(!0,a,d),a}function J(a,c,d){for(var e,f,g,h,i=a.contents,j=a.dataTypes;"*"===j[0];)j.shift(),f===b&&(f=a.mimeType||c.getResponseHeader("Content-Type"));if(f)for(h in i)if(i[h]&&i[h].test(f)){j.unshift(h);break}if(j[0]in d)g=j[0];else{for(h in d){if(!j[0]||a.converters[h+" "+j[0]]){g=h;break}e||(e=h)}g=g||e}if(g)return g!==j[0]&&j.unshift(g),d[g]}function K(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a.throws)b=g(b);else try{b=g(b)}catch(a){return{state:"parsererror",error:g?a:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function L(){try{return new a.XMLHttpRequest}catch(a){}}function M(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}}function N(){return setTimeout(function(){$b=b}),$b=la.now()}function O(a,b,c){for(var d,e=(ec[b]||[]).concat(ec["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function P(a,b,c){var d,e,f=0,g=dc.length,h=la.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$b||N(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:la.extend({},b),opts:la.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$b||N(),duration:c.duration,tweens:[],createTween:function(b,c){var d=la.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Q(k,j.opts.specialEasing);f<g;f++)if(d=dc[f].call(j,a,k,j.opts))return d;return la.map(k,O,j),la.isFunction(j.opts.start)&&j.opts.start.call(a,j),la.fx.timer(la.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function Q(a,b){var c,d,e,f,g;for(c in a)if(d=la.camelCase(c),e=b[d],f=a[c],la.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=la.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function R(a,b,c){var d,e,f,g,h,i,j=this,k={},l=a.style,m=a.nodeType&&y(a),n=la._data(a,"fxshow");c.queue||(h=la._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,j.always(function(){j.always(function(){h.unqueued--,la.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[l.overflow,l.overflowX,l.overflowY],"inline"===la.css(a,"display")&&"none"===la.css(a,"float")&&(la.support.inlineBlockNeedsLayout&&"inline"!==D(a.nodeName)?l.zoom=1:l.display="inline-block")),c.overflow&&(l.overflow="hidden",la.support.shrinkWrapBlocks||j.always(function(){l.overflow=c.overflow[0],l.overflowX=c.overflow[1],l.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],ac.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(m?"hide":"show"))continue;k[d]=n&&n[d]||la.style(a,d)}if(!la.isEmptyObject(k)){n?"hidden"in n&&(m=n.hidden):n=la._data(a,"fxshow",{}),f&&(n.hidden=!m),m?la(a).show():j.done(function(){la(a).hide()}),j.done(function(){var b;la._removeData(a,"fxshow");for(b in k)la.style(a,b,k[b])});for(d in k)g=O(m?n[d]:0,d,j),d in n||(n[d]=g.start,m&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function S(a,b,c,d,e){return new S.prototype.init(a,b,c,d,e)}function T(a,b){var c,d={height:a},e=0;for(b=b?1:0;e<4;e+=2-b)c=yb[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function U(a){return la.isWindow(a)?a:9===a.nodeType&&(a.defaultView||a.parentWindow)}var V,W,X=typeof b,Y=a.location,Z=a.document,$=Z.documentElement,_=a.jQuery,aa=a.$,ba={},ca=[],da="1.10.2-custom",ea=ca.concat,fa=ca.push,ga=ca.slice,ha=ca.indexOf,ia=ba.toString,ja=ba.hasOwnProperty,ka=da.trim,la=function(a,b){return new la.fn.init(a,b,W)},ma=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,na=/\S+/g,oa=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,pa=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,qa=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ra=/^[\],:{}\s]*$/,sa=/(?:^|:|,)(?:\s*\[)+/g,ta=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ua=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,va=/^-ms-/,wa=/-([\da-z])/gi,xa=function(a,b){return b.toUpperCase()},ya=function(a){(Z.addEventListener||"load"===a.type||"complete"===Z.readyState)&&(za(),la.ready())},za=function(){Z.addEventListener?(Z.removeEventListener("DOMContentLoaded",ya,!1),a.removeEventListener("load",ya,!1)):(Z.detachEvent("onreadystatechange",ya),a.detachEvent("onload",ya))};la.fn=la.prototype={jquery:da,constructor:la,init:function(a,c,d){var e,f;if(!a)return this;if("string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:pa.exec(a),!e||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(e[1]){if(c=c instanceof la?c[0]:c,la.merge(this,la.parseHTML(e[1],c&&c.nodeType?c.ownerDocument||c:Z,!0)),qa.test(e[1])&&la.isPlainObject(c))for(e in c)la.isFunction(this[e])?this[e](c[e]):this.attr(e,c[e]);return this}if(f=Z.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return d.find(a);this.length=1,this[0]=f}return this.context=Z,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):la.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),la.makeArray(a,this))},selector:"",length:0,toArray:function(){return ga.call(this)},get:function(a){return null==a?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a){var b=la.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return la.each(this,a,b)},ready:function(a){return la.ready.promise().done(a),this},slice:function(){return this.pushStack(ga.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},map:function(a){return this.pushStack(la.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:fa,sort:[].sort,splice:[].splice},la.fn.init.prototype=la.fn,la.extend=la.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),"object"==typeof h||la.isFunction(h)||(h={}),j===i&&(h=this,--i);i<j;i++)if(null!=(f=arguments[i]))for(e in f)a=h[e],d=f[e],h!==d&&(k&&d&&(la.isPlainObject(d)||(c=la.isArray(d)))?(c?(c=!1,g=a&&la.isArray(a)?a:[]):g=a&&la.isPlainObject(a)?a:{},h[e]=la.extend(k,g,d)):d!==b&&(h[e]=d));return h},la.extend({expando:"jQuery"+(da+Math.random()).replace(/\D/g,""),noConflict:function(b){return a.$===la&&(a.$=aa),b&&a.jQuery===la&&(a.jQuery=_),la},isReady:!1,readyWait:1,holdReady:function(a){a?la.readyWait++:la.ready(!0)},ready:function(a){if(a===!0?!--la.readyWait:!la.isReady){if(!Z.body)return setTimeout(la.ready);la.isReady=!0,a!==!0&&--la.readyWait>0||(V.resolveWith(Z,[la]),la.fn.trigger&&la(Z).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===la.type(a)},isArray:Array.isArray||function(a){return"array"===la.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):"object"==typeof a||"function"==typeof a?ba[ia.call(a)]||"object":typeof a},isPlainObject:function(a){var c;if(!a||"object"!==la.type(a)||a.nodeType||la.isWindow(a))return!1;try{if(a.constructor&&!ja.call(a,"constructor")&&!ja.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(a){return!1}if(la.support.ownLast)for(c in a)return ja.call(a,c);for(c in a);return c===b||ja.call(a,c)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||Z;var d=qa.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=la.buildFragment([a],b,e),e&&la(e).remove(),la.merge([],d.childNodes))},parseJSON:function(b){return a.JSON&&a.JSON.parse?a.JSON.parse(b):null===b?b:"string"==typeof b&&(b=la.trim(b),b&&ra.test(b.replace(ta,"@").replace(ua,"]").replace(sa,"")))?new Function("return "+b)():void la.error("Invalid JSON: "+b)},parseXML:function(c){var d,e;if(!c||"string"!=typeof c)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(a){d=b}return d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||la.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&la.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(va,"ms-").replace(wa,xa)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;f<g&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;f<g&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:ka&&!ka.call("\ufeff ")?function(a){return null==a?"":ka.call(a)}:function(a){return null==a?"":(a+"").replace(oa,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?la.merge(d,"string"==typeof a?[a]:a):fa.call(d,a)),d},inArray:function(a,b,c){var d;if(b){if(ha)return ha.call(b,a,c);for(d=b.length,c=c?c<0?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if("number"==typeof d)for(;f<d;f++)a[e++]=c[f];else for(;c[f]!==b;)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;f<g;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;f<g;f++)e=b(a[f],f,d),null!=e&&(i[i.length]=e);else for(f in a)e=b(a[f],f,d),null!=e&&(i[i.length]=e);return ea.apply([],i)},guid:1,proxy:function(a,c){var d,e,f;return"string"==typeof c&&(f=a[c],c=a,a=f),la.isFunction(a)?(d=ga.call(arguments,2),e=function(){return a.apply(c||this,d.concat(ga.call(arguments)))},e.guid=a.guid=a.guid||la.guid++,e):b},access:function(a,c,d,e,f,g,h){var i=0,j=a.length,k=null==d;if("object"===la.type(d)){f=!0;for(i in d)la.access(a,c,i,d[i],!0,g,h)}else if(e!==b&&(f=!0,la.isFunction(e)||(h=!0),k&&(h?(c.call(a,e),c=null):(k=c,c=function(a,b,c){return k.call(la(a),c)})),c))for(;i<j;i++)c(a[i],d,h?e:e.call(a[i],i,c(a[i],d)));return f?a:k?c.call(a):j?c(a[0],d):g},now:function(){return(new Date).getTime()},swap:function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e}}),la.ready.promise=function(b){if(!V)if(V=la.Deferred(),"complete"===Z.readyState)setTimeout(la.ready);else if(Z.addEventListener)Z.addEventListener("DOMContentLoaded",ya,!1),a.addEventListener("load",ya,!1);else{Z.attachEvent("onreadystatechange",ya),a.attachEvent("onload",ya);var c=!1;try{c=null==a.frameElement&&Z.documentElement}catch(a){}c&&c.doScroll&&!function a(){if(!la.isReady){try{c.doScroll("left")}catch(b){return setTimeout(a,50)}za(),la.ready()}}()}return V.promise(b)},la.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){ba["[object "+b+"]"]=b.toLowerCase()}),W=la(Z),function(a,b){function c(a,b,c,d){var e,f,g,h,i,j,k,l,o,p;if((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(I&&!d){if(e=ta.exec(a))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&M(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return aa.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&x.getElementsByClassName&&b.getElementsByClassName)return aa.apply(c,b.getElementsByClassName(g)),c}if(x.qsa&&(!J||!J.test(a))){if(l=k=N,o=b,p=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=m(a),(k=b.getAttribute("id"))?l=k.replace(wa,"\\$&"):b.setAttribute("id",l),l="[id='"+l+"'] ",i=j.length;i--;)j[i]=l+n(j[i]);o=na.test(a)&&b.parentNode||b,p=j.join(",")}if(p)try{return aa.apply(c,o.querySelectorAll(p)),c}catch(a){}finally{k||b.removeAttribute("id")}}}return v(a.replace(ja,"$1"),b,c,d)}function d(){function a(c,d){return b.push(c+=" ")>z.cacheLength&&delete a[b.shift()],a[c]=d}var b=[];return a}function e(a){return a[N]=!0,a}function f(a){var b=G.createElement("div");try{return!!a(b)}catch(a){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function g(a,b){for(var c=a.split("|"),d=a.length;d--;)z.attrHandle[c[d]]=b}function h(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||X)-(~a.sourceIndex||X);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function i(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function j(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function k(a){return e(function(b){return b=+b,e(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function l(){}function m(a,b){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=z.preFilter;h;){d&&!(e=ka.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ma.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ja," ")}),h=h.slice(d.length));for(g in z.filter)!(e=ra[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return b?h.length:h?c.error(a):S(a,i).slice(0)}function n(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function o(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=P+" "+f;if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e)if(j=b[N]||(b[N]={}),(i=j[d])&&i[0]===k){if((h=i[1])===!0||h===y)return h===!0}else if(i=j[d]=[k],i[1]=a(b,c,g)||y,i[1]===!0)return!0}}function p(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function r(a,b,c,d,f,g){return d&&!d[N]&&(d=r(d)),f&&!f[N]&&(f=r(f,g)),e(function(e,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=e||u(b||"*",h.nodeType?[h]:h,[]),r=!a||!e&&b?p:q(p,m,a,h,i),s=c?f||(e?a:o||d)?[]:g:r;if(c&&c(r,s,h,i),d)for(j=q(s,n),d(j,[],h,i),k=j.length;k--;)(l=j[k])&&(s[n[k]]=!(r[n[k]]=l));if(e){if(f||a){if(f){for(j=[],k=s.length;k--;)(l=s[k])&&j.push(r[k]=l);f(null,s=[],j,i)}for(k=s.length;k--;)(l=s[k])&&(j=f?ca.call(e,l):m[k])>-1&&(e[j]=!(g[j]=l))}}else s=q(s===g?s.splice(o,s.length):s),f?f(null,g,s,i):aa.apply(g,s)})}function s(a){for(var b,c,d,e=a.length,f=z.relative[a[0].type],g=f||z.relative[" "],h=f?1:0,i=o(function(a){return a===b},g,!0),j=o(function(a){return ca.call(b,a)>-1},g,!0),k=[function(a,c,d){return!f&&(d||c!==D)||((b=c).nodeType?i(a,c,d):j(a,c,d))}];h<e;h++)if(c=z.relative[a[h].type])k=[o(p(k),c)];else{if(c=z.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;d<e&&!z.relative[a[d].type];d++);return r(h>1&&p(k),h>1&&n(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ja,"$1"),c,h<d&&s(a.slice(h,d)),d<e&&s(a=a.slice(d)),d<e&&n(a))}k.push(c)}return p(k)}function t(a,b){var d=0,f=b.length>0,g=a.length>0,h=function(e,h,i,j,k){var l,m,n,o=[],p=0,r="0",s=e&&[],t=null!=k,u=D,v=e||g&&z.find.TAG("*",k&&h.parentNode||h),w=P+=null==u?1:Math.random()||.1;for(t&&(D=h!==G&&h,y=d);null!=(l=v[r]);r++){if(g&&l){for(m=0;n=a[m++];)if(n(l,h,i)){j.push(l);break}t&&(P=w,y=++d)}f&&((l=!n&&l)&&p--,e&&s.push(l))}if(p+=r,f&&r!==p){for(m=0;n=b[m++];)n(s,o,h,i);if(e){if(p>0)for(;r--;)s[r]||o[r]||(o[r]=$.call(j));o=q(o)}aa.apply(j,o),t&&!e&&o.length>0&&p+b.length>1&&c.uniqueSort(j)}return t&&(P=w,D=u),s};return f?e(h):h}function u(a,b,d){for(var e=0,f=b.length;e<f;e++)c(a,b[e],d);return d}function v(a,b,c,d){var e,f,g,h,i,j=m(a);if(!d&&1===j.length){if(f=j[0]=j[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&x.getById&&9===b.nodeType&&I&&z.relative[f[1].type]){if(b=(z.find.ID(g.matches[0].replace(xa,ya),b)||[])[0],!b)return c;a=a.slice(f.shift().value.length)}for(e=ra.needsContext.test(a)?0:f.length;e--&&(g=f[e],!z.relative[h=g.type]);)if((i=z.find[h])&&(d=i(g.matches[0].replace(xa,ya),na.test(f[0].type)&&b.parentNode||b))){if(f.splice(e,1),a=d.length&&n(f),!a)return aa.apply(c,d),c;break}}return C(a,j)(d,b,!I,c,na.test(a)),c}var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+-new Date,O=a.document,P=0,Q=0,R=d(),S=d(),T=d(),U=!1,V=function(a,b){return a===b?(U=!0,0):0},W=typeof b,X=1<<31,Y={}.hasOwnProperty,Z=[],$=Z.pop,_=Z.push,aa=Z.push,ba=Z.slice,ca=Z.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},da="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ea="[\\x20\\t\\r\\n\\f]",fa="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ga=fa.replace("w","w#"),ha="\\["+ea+"*("+fa+")"+ea+"*(?:([*^$|!~]?=)"+ea+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ga+")|)|)"+ea+"*\\]",ia=":("+fa+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ha.replace(3,8)+")*)|.*)\\)|)",ja=new RegExp("^"+ea+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ea+"+$","g"),ka=new RegExp("^"+ea+"*,"+ea+"*"),ma=new RegExp("^"+ea+"*([>+~]|"+ea+")"+ea+"*"),na=new RegExp(ea+"*[+~]"),oa=new RegExp("="+ea+"*([^\\]'\"]*)"+ea+"*\\]","g"),pa=new RegExp(ia),qa=new RegExp("^"+ga+"$"),ra={ID:new RegExp("^#("+fa+")"),CLASS:new RegExp("^\\.("+fa+")"),TAG:new RegExp("^("+fa.replace("w","w*")+")"),ATTR:new RegExp("^"+ha),PSEUDO:new RegExp("^"+ia),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ea+"*(even|odd|(([+-]|)(\\d*)n|)"+ea+"*(?:([+-]|)"+ea+"*(\\d+)|))"+ea+"*\\)|)","i"),bool:new RegExp("^(?:"+da+")$","i"),needsContext:new RegExp("^"+ea+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ea+"*((?:-\\d)?\\d*)"+ea+"*\\)|)(?=[^-]|$)","i")},sa=/^[^{]+\{\s*\[native \w/,ta=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ua=/^(?:input|select|textarea|button)$/i,va=/^h\d$/i,wa=/'|\\/g,xa=new RegExp("\\\\([\\da-f]{1,6}"+ea+"?|("+ea+")|.)","ig"),ya=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{aa.apply(Z=ba.call(O.childNodes),O.childNodes),Z[O.childNodes.length].nodeType}catch(a){aa={apply:Z.length?function(a,b){_.apply(a,ba.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}B=c.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},x=c.support={},F=c.setDocument=function(a){var b=a?a.ownerDocument||a:O,c=b.defaultView;return b!==G&&9===b.nodeType&&b.documentElement?(G=b,H=b.documentElement,I=!B(b),c&&c.attachEvent&&c!==c.top&&c.attachEvent("onbeforeunload",function(){F()}),x.attributes=f(function(a){return a.className="i",!a.getAttribute("className")}),x.getElementsByTagName=f(function(a){return a.appendChild(b.createComment("")),!a.getElementsByTagName("*").length}),x.getElementsByClassName=f(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),x.getById=f(function(a){return H.appendChild(a).id=N,!b.getElementsByName||!b.getElementsByName(N).length}),x.getById?(z.find.ID=function(a,b){if(typeof b.getElementById!==W&&I){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},z.filter.ID=function(a){var b=a.replace(xa,ya);return function(a){return a.getAttribute("id")===b}}):(delete z.find.ID,z.filter.ID=function(a){var b=a.replace(xa,ya);return function(a){var c=typeof a.getAttributeNode!==W&&a.getAttributeNode("id");return c&&c.value===b}}),z.find.TAG=x.getElementsByTagName?function(a,b){if(typeof b.getElementsByTagName!==W)return b.getElementsByTagName(a)}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},z.find.CLASS=x.getElementsByClassName&&function(a,b){if(typeof b.getElementsByClassName!==W&&I)return b.getElementsByClassName(a)},K=[],J=[],(x.qsa=sa.test(b.querySelectorAll))&&(f(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||J.push("\\["+ea+"*(?:value|"+da+")"),a.querySelectorAll(":checked").length||J.push(":checked")}),f(function(a){var c=b.createElement("input");c.setAttribute("type","hidden"),a.appendChild(c).setAttribute("t",""),a.querySelectorAll("[t^='']").length&&J.push("[*^$]="+ea+"*(?:''|\"\")"),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(x.matchesSelector=sa.test(L=H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&f(function(a){x.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",ia)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),M=sa.test(H.contains)||H.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},V=H.compareDocumentPosition?function(a,c){if(a===c)return U=!0,0;var d=c.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(c);return d?1&d||!x.sortDetached&&c.compareDocumentPosition(a)===d?a===b||M(O,a)?-1:c===b||M(O,c)?1:E?ca.call(E,a)-ca.call(E,c):0:4&d?-1:1:a.compareDocumentPosition?-1:1}:function(a,c){var d,e=0,f=a.parentNode,g=c.parentNode,i=[a],j=[c];if(a===c)return U=!0,0;if(!f||!g)return a===b?-1:c===b?1:f?-1:g?1:E?ca.call(E,a)-ca.call(E,c):0;if(f===g)return h(a,c);for(d=a;d=d.parentNode;)i.unshift(d);for(d=c;d=d.parentNode;)j.unshift(d);for(;i[e]===j[e];)e++;return e?h(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},b):G},c.matches=function(a,b){return c(a,null,null,b)},c.matchesSelector=function(a,b){if((a.ownerDocument||a)!==G&&F(a),b=b.replace(oa,"='$1']"),x.matchesSelector&&I&&(!K||!K.test(b))&&(!J||!J.test(b)))try{var d=L.call(a,b);if(d||x.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(a){}return c(b,G,null,[a]).length>0},c.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},c.attr=function(a,c){(a.ownerDocument||a)!==G&&F(a);var d=z.attrHandle[c.toLowerCase()],e=d&&Y.call(z.attrHandle,c.toLowerCase())?d(a,c,!I):b;return e===b?x.attributes||!I?a.getAttribute(c):(e=a.getAttributeNode(c))&&e.specified?e.value:null:e},c.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},c.uniqueSort=function(a){var b,c=[],d=0,e=0;if(U=!x.detectDuplicates,E=!x.sortStable&&a.slice(0),a.sort(V),U){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return a},A=c.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=A(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d];d++)c+=A(b);return c},z=c.selectors={cacheLength:50,createPseudo:e,match:ra,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(xa,ya),a[3]=(a[4]||a[5]||"").replace(xa,ya),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||c.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&c.error(a[0]),a},PSEUDO:function(a){var c,d=!a[5]&&a[2];return ra.CHILD.test(a[0])?null:(a[3]&&a[4]!==b?a[2]=a[4]:d&&pa.test(d)&&(c=m(d,!0))&&(c=d.indexOf(")",d.length-c)-d.length)&&(a[0]=a[0].slice(0,c),a[2]=d.slice(0,c)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(xa,ya).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];
return b||(b=new RegExp("(^|"+ea+")"+a+"("+ea+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==W&&a.getAttribute("class")||"")})},ATTR:function(a,b,d){return function(e){var f=c.attr(e,a);return null==f?"!="===b:!b||(f+="","="===b?f===d:"!="===b?f!==d:"^="===b?d&&0===f.indexOf(d):"*="===b?d&&f.indexOf(d)>-1:"$="===b?d&&f.slice(-d.length)===d:"~="===b?(" "+f+" ").indexOf(d)>-1:"|="===b&&(f===d||f.slice(0,d.length+1)===d+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===P&&j[1],m=j[0]===P&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[P,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===P)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[P,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var d,f=z.pseudos[a]||z.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+a);return f[N]?f(b):f.length>1?(d=[a,a,"",b],z.setFilters.hasOwnProperty(a.toLowerCase())?e(function(a,c){for(var d,e=f(a,b),g=e.length;g--;)d=ca.call(a,e[g]),a[d]=!(c[d]=e[g])}):function(a){return f(a,0,d)}):f}},pseudos:{not:e(function(a){var b=[],c=[],d=C(a.replace(ja,"$1"));return d[N]?e(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:e(function(a){return function(b){return c(a,b).length>0}}),contains:e(function(a){return function(b){return(b.textContent||b.innerText||A(b)).indexOf(a)>-1}}),lang:e(function(a){return qa.test(a||"")||c.error("unsupported lang: "+a),a=a.replace(xa,ya).toLowerCase(),function(b){var c;do if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeName>"@"||3===a.nodeType||4===a.nodeType)return!1;return!0},parent:function(a){return!z.pseudos.empty(a)},header:function(a){return va.test(a.nodeName)},input:function(a){return ua.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||b.toLowerCase()===a.type)},first:k(function(){return[0]}),last:k(function(a,b){return[b-1]}),eq:k(function(a,b,c){return[c<0?c+b:c]}),even:k(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:k(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:k(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:k(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},z.pseudos.nth=z.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})z.pseudos[w]=i(w);for(w in{submit:!0,reset:!0})z.pseudos[w]=j(w);l.prototype=z.filters=z.pseudos,z.setFilters=new l,C=c.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=m(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d))}return f},x.sortStable=N.split("").sort(V).join("")===N,x.detectDuplicates=U,F(),x.sortDetached=f(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),f(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||g("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),x.attributes&&f(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||g("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),f(function(a){return null==a.getAttribute("disabled")})||g(da,function(a,b,c){var d;if(!c)return(d=a.getAttributeNode(b))&&d.specified?d.value:a[b]===!0?b.toLowerCase():null}),la.find=c,la.expr=c.selectors,la.expr[":"]=la.expr.pseudos,la.unique=c.uniqueSort,la.text=c.getText,la.isXMLDoc=c.isXML,la.contains=c.contains,la.clearCaches=function(){E=null,R=null,S=null,T=null,R=d(),S=d(),T=d()}}(a);var Aa={};la.Callbacks=function(a){a="string"==typeof a?Aa[a]||e(a):la.extend({},a);var c,d,f,g,h,i,j=[],k=!a.once&&[],l=function(b){for(d=a.memory&&b,f=!0,h=i||0,i=0,g=j.length,c=!0;j&&h<g;h++)if(j[h].apply(b[0],b[1])===!1&&a.stopOnFalse){d=!1;break}c=!1,j&&(k?k.length&&l(k.shift()):d?j=[]:m.disable())},m={add:function(){if(j){var b=j.length;!function b(c){la.each(c,function(c,d){var e=la.type(d);"function"===e?a.unique&&m.has(d)||j.push(d):d&&d.length&&"string"!==e&&b(d)})}(arguments),c?g=j.length:d&&(i=b,l(d))}return this},remove:function(){return j&&la.each(arguments,function(a,b){for(var d;(d=la.inArray(b,j,d))>-1;)j.splice(d,1),c&&(d<=g&&g--,d<=h&&h--)}),this},has:function(a){return a?la.inArray(a,j)>-1:!(!j||!j.length)},empty:function(){return j=[],g=0,this},disable:function(){return j=k=d=b,this},disabled:function(){return!j},lock:function(){return k=b,d||m.disable(),this},locked:function(){return!k},fireWith:function(a,b){return!j||f&&!k||(b=b||[],b=[a,b.slice?b.slice():b],c?k.push(b):l(b)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!f}};return m},la.extend({Deferred:function(a){var b=[["resolve","done",la.Callbacks("once memory"),"resolved"],["reject","fail",la.Callbacks("once memory"),"rejected"],["notify","progress",la.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return la.Deferred(function(c){la.each(b,function(b,f){var g=f[0],h=la.isFunction(a[b])&&a[b];e[f[1]](function(){var a=h&&h.apply(this,arguments);a&&la.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[g+"With"](this===d?c.promise():this,h?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?la.extend(a,d):d}},e={};return d.pipe=d.then,la.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=ga.call(arguments),g=f.length,h=1!==g||a&&la.isFunction(a.promise)?g:0,i=1===h?a:la.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?ga.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);e<g;e++)f[e]&&la.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}}),la.support=function(b){var c,d,e,f,g,h,i,j,k,l=Z.createElement("div");if(l.setAttribute("className","t"),l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=l.getElementsByTagName("*")||[],d=l.getElementsByTagName("a")[0],!d||!d.style||!c.length)return b;f=Z.createElement("select"),h=f.appendChild(Z.createElement("option")),e=l.getElementsByTagName("input")[0],d.style.cssText="top:1px;float:left;opacity:.5",b.getSetAttribute="t"!==l.className,b.leadingWhitespace=3===l.firstChild.nodeType,b.tbody=!l.getElementsByTagName("tbody").length,b.htmlSerialize=!!l.getElementsByTagName("link").length,b.style=/top/.test(d.getAttribute("style")),b.hrefNormalized="/a"===d.getAttribute("href"),b.opacity=/^0.5/.test(d.style.opacity),b.cssFloat=!!d.style.cssFloat,b.checkOn=!!e.value,b.optSelected=h.selected,b.enctype=!!Z.createElement("form").enctype,b.html5Clone="<:nav></:nav>"!==Z.createElement("nav").cloneNode(!0).outerHTML,b.inlineBlockNeedsLayout=!1,b.shrinkWrapBlocks=!1,b.pixelPosition=!1,b.deleteExpando=!0,b.noCloneEvent=!0,b.reliableMarginRight=!0,b.boxSizingReliable=!0,e.checked=!0,b.noCloneChecked=e.cloneNode(!0).checked,f.disabled=!0,b.optDisabled=!h.disabled;try{delete l.test}catch(a){b.deleteExpando=!1}e=Z.createElement("input"),e.setAttribute("value",""),b.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),b.radioValue="t"===e.value,e.setAttribute("checked","t"),e.setAttribute("name","t"),g=Z.createDocumentFragment(),g.appendChild(e),b.appendChecked=e.checked,b.checkClone=g.cloneNode(!0).cloneNode(!0).lastChild.checked,l.attachEvent&&(l.attachEvent("onclick",function(){b.noCloneEvent=!1}),l.cloneNode(!0).click());for(k in{submit:!0,change:!0,focusin:!0})l.setAttribute(i="on"+k,"t"),b[k+"Bubbles"]=i in a||l.attributes[i].expando===!1;l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle="content-box"===l.style.backgroundClip;for(k in la(b))break;return b.ownLast="0"!==k,la(function(){var c,d,e,f="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",g=Z.getElementsByTagName("body")[0];g&&(c=Z.createElement("div"),c.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",g.appendChild(c).appendChild(l),l.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=l.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",j=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",b.reliableHiddenOffsets=j&&0===e[0].offsetHeight,l.innerHTML="",l.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",la.swap(g,null!=g.style.zoom?{zoom:1}:{},function(){b.boxSizing=4===l.offsetWidth}),a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(l,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(l,null)||{width:"4px"}).width,d=l.appendChild(Z.createElement("div")),d.style.cssText=l.style.cssText=f,d.style.marginRight=d.style.width="0",l.style.width="1px",b.reliableMarginRight=!parseFloat((a.getComputedStyle(d,null)||{}).marginRight)),typeof l.style.zoom!==X&&(l.innerHTML="",l.style.cssText=f+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===l.offsetWidth,l.style.display="block",l.innerHTML="<div></div>",l.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==l.offsetWidth,b.inlineBlockNeedsLayout&&(g.style.zoom=1)),g.removeChild(c),c=l=e=d=null)}),c=f=g=h=d=e=null,b}({});var Ba=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Ca=/([A-Z])/g;la.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?la.cache[a[la.expando]]:a[la.expando],!!a&&!i(a)},data:function(a,b,c){return f(a,b,c)},removeData:function(a,b){return g(a,b)},_data:function(a,b,c){return f(a,b,c,!0)},_removeData:function(a,b){return g(a,b,!0)},acceptData:function(a){if(a.nodeType&&1!==a.nodeType&&9!==a.nodeType)return!1;var b=a.nodeName&&la.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute("classid")===b}}),la.fn.extend({data:function(a,c){var d,e,f=null,g=0,i=this[0];if(a===b){if(this.length&&(f=la.data(i),1===i.nodeType&&!la._data(i,"parsedAttrs"))){for(d=i.attributes;g<d.length;g++)e=d[g].name,0===e.indexOf("data-")&&(e=la.camelCase(e.slice(5)),h(i,e,f[e]));la._data(i,"parsedAttrs",!0)}return f}return"object"==typeof a?this.each(function(){la.data(this,a)}):arguments.length>1?this.each(function(){la.data(this,a,c)}):i?h(i,a,la.data(i,a)):null},removeData:function(a){return this.each(function(){la.removeData(this,a)})}}),la.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=la._data(a,b),c&&(!d||la.isArray(c)?d=la._data(a,b,la.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=la.queue(a,b),d=c.length,e=c.shift(),f=la._queueHooks(a,b),g=function(){la.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return la._data(a,c)||la._data(a,c,{empty:la.Callbacks("once memory").add(function(){la._removeData(a,b+"queue"),la._removeData(a,c)})})}}),la.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),arguments.length<d?la.queue(this[0],a):c===b?this:this.each(function(){var b=la.queue(this,a,c);la._queueHooks(this,a),"fx"===a&&"inprogress"!==b[0]&&la.dequeue(this,a)})},dequeue:function(a){return this.each(function(){la.dequeue(this,a)})},delay:function(a,b){return a=la.fx?la.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=la.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};for("string"!=typeof a&&(c=a,a=b),a=a||"fx";h--;)d=la._data(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var Da,Ea,Fa=/[\t\r\n\f]/g,Ga=/\r/g,Ha=/^(?:input|select|textarea|button|object)$/i,Ia=/^(?:a|area)$/i,Ja=/^(?:checked|selected)$/i,Ka=la.support.getSetAttribute,La=la.support.input;la.fn.extend({attr:function(a,b){return la.access(this,la.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){la.removeAttr(this,a)})},prop:function(a,b){return la.access(this,la.prop,a,b,arguments.length>1)},removeProp:function(a){return a=la.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(a){}})},addClass:function(a){var b,c,d,e,f,g=0,h=this.length,i="string"==typeof a&&a;if(la.isFunction(a))return this.each(function(b){la(this).addClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(na)||[];g<h;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Fa," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");c.className=la.trim(d)}return this},removeClass:function(a){var b,c,d,e,f,g=0,h=this.length,i=0===arguments.length||"string"==typeof a&&a;if(la.isFunction(a))return this.each(function(b){la(this).removeClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(na)||[];g<h;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Fa," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");c.className=a?la.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):la.isFunction(a)?this.each(function(c){la(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var b,d=0,e=la(this),f=a.match(na)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else c!==X&&"boolean"!==c||(this.className&&la._data(this,"__className__",this.className),this.className=this.className||a===!1?"":la._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;c<d;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(Fa," ").indexOf(b)>=0)return!0;return!1},val:function(a){var c,d,e,f=this[0];{if(arguments.length)return e=la.isFunction(a),this.each(function(c){var f;1===this.nodeType&&(f=e?a.call(this,c,la(this).val()):a,null==f?f="":"number"==typeof f?f+="":la.isArray(f)&&(f=la.map(f,function(a){return null==a?"":a+""})),d=la.valHooks[this.type]||la.valHooks[this.nodeName.toLowerCase()],d&&"set"in d&&d.set(this,f,"value")!==b||(this.value=f))});if(f)return d=la.valHooks[f.type]||la.valHooks[f.nodeName.toLowerCase()],d&&"get"in d&&(c=d.get(f,"value"))!==b?c:(c=f.value,"string"==typeof c?c.replace(Ga,""):null==c?"":c)}}}),la.extend({valHooks:{option:{get:function(a){var b=la.find.attr(a,"value");return null!=b?b:a.text}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||e<0,g=f?null:[],h=f?e+1:d.length,i=e<0?h:f?e:0;i<h;i++)if(c=d[i],(c.selected||i===e)&&(la.support.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!la.nodeName(c.parentNode,"optgroup"))){if(b=la(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=la.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=la.inArray(la(d).val(),f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}},attr:function(a,c,d){var e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return typeof a.getAttribute===X?la.prop(a,c,d):(1===g&&la.isXMLDoc(a)||(c=c.toLowerCase(),e=la.attrHooks[c]||(la.expr.match.bool.test(c)?Ea:Da)),d===b?e&&"get"in e&&null!==(f=e.get(a,c))?f:(f=la.find.attr(a,c),null==f?b:f):null!==d?e&&"set"in e&&(f=e.set(a,d,c))!==b?f:(a.setAttribute(c,d+""),d):void la.removeAttr(a,c))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(na);if(f&&1===a.nodeType)for(;c=f[e++];)d=la.propFix[c]||c,la.expr.match.bool.test(c)?La&&Ka||!Ja.test(c)?a[d]=!1:a[la.camelCase("default-"+c)]=a[d]=!1:la.attr(a,c,""),a.removeAttribute(Ka?c:d)},attrHooks:{type:{set:function(a,b){if(!la.support.radioValue&&"radio"===b&&la.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},propFix:{for:"htmlFor",class:"className"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return g=1!==h||!la.isXMLDoc(a),g&&(c=la.propFix[c]||c,f=la.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]},propHooks:{tabIndex:{get:function(a){var b=la.find.attr(a,"tabindex");return b?parseInt(b,10):Ha.test(a.nodeName)||Ia.test(a.nodeName)&&a.href?0:-1}}}}),Ea={set:function(a,b,c){return b===!1?la.removeAttr(a,c):La&&Ka||!Ja.test(c)?a.setAttribute(!Ka&&la.propFix[c]||c,c):a[la.camelCase("default-"+c)]=a[c]=!0,c}},la.each(la.expr.match.bool.source.match(/\w+/g),function(a,c){var d=la.expr.attrHandle[c]||la.find.attr;la.expr.attrHandle[c]=La&&Ka||!Ja.test(c)?function(a,c,e){var f=la.expr.attrHandle[c],g=e?b:(la.expr.attrHandle[c]=b)!=d(a,c,e)?c.toLowerCase():null;return la.expr.attrHandle[c]=f,g}:function(a,c,d){return d?b:a[la.camelCase("default-"+c)]?c.toLowerCase():null}}),La&&Ka||(la.attrHooks.value={set:function(a,b,c){return la.nodeName(a,"input")?void(a.defaultValue=b):Da&&Da.set(a,b,c)}}),Ka||(Da={set:function(a,c,d){var e=a.getAttributeNode(d);return e||a.setAttributeNode(e=a.ownerDocument.createAttribute(d)),e.value=c+="","value"===d||c===a.getAttribute(d)?c:b}},la.expr.attrHandle.id=la.expr.attrHandle.name=la.expr.attrHandle.coords=function(a,c,d){var e;return d?b:(e=a.getAttributeNode(c))&&""!==e.value?e.value:null},la.valHooks.button={get:function(a,c){var d=a.getAttributeNode(c);return d&&d.specified?d.value:b},set:Da.set},la.attrHooks.contenteditable={set:function(a,b,c){Da.set(a,""!==b&&b,c)}},la.each(["width","height"],function(a,b){la.attrHooks[b]={set:function(a,c){if(""===c)return a.setAttribute(b,"auto"),c}}})),la.support.hrefNormalized||la.each(["href","src"],function(a,b){la.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),la.support.style||(la.attrHooks.style={get:function(a){return a.style.cssText||b},set:function(a,b){return a.style.cssText=b+""}}),la.support.optSelected||(la.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),la.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){la.propFix[this.toLowerCase()]=this}),la.support.enctype||(la.propFix.enctype="encoding"),la.each(["radio","checkbox"],function(){la.valHooks[this]={set:function(a,b){if(la.isArray(b))return a.checked=la.inArray(la(a).val(),b)>=0}},la.support.checkOn||(la.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var Ma=/^(?:input|select|textarea)$/i,Na=/^key/,Oa=/^(?:mouse|contextmenu)|click/,Pa=/^(?:focusinfocus|focusoutblur)$/,Qa=/^([^.]*)(?:\.(.+)|)$/;la.event={global:{},add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r=la._data(a);if(r){for(d.handler&&(j=d,d=j.handler,f=j.selector),d.guid||(d.guid=la.guid++),(h=r.events)||(h=r.events={}),(l=r.handle)||(l=r.handle=function(a){return typeof la===X||a&&la.event.triggered===a.type?b:la.event.dispatch.apply(l.elem,arguments)},l.elem=a),c=(c||"").match(na)||[""],i=c.length;i--;)g=Qa.exec(c[i])||[],o=q=g[1],p=(g[2]||"").split(".").sort(),o&&(k=la.event.special[o]||{},o=(f?k.delegateType:k.bindType)||o,k=la.event.special[o]||{},m=la.extend({type:o,origType:q,data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&la.expr.match.needsContext.test(f),namespace:p.join(".")},j),(n=h[o])||(n=h[o]=[],n.delegateCount=0,k.setup&&k.setup.call(a,e,p,l)!==!1||(a.addEventListener?a.addEventListener(o,l,!1):a.attachEvent&&a.attachEvent("on"+o,l))),k.add&&(k.add.call(a,m),m.handler.guid||(m.handler.guid=d.guid)),f?n.splice(n.delegateCount++,0,m):n.push(m),la.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=la.hasData(a)&&la._data(a);if(q&&(k=q.events)){for(b=(b||"").match(na)||[""],j=b.length;j--;)if(h=Qa.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=la.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=k[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;f--;)g=m[f],!e&&p!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||la.removeEvent(a,n,q.handle),delete k[n])}else for(n in k)la.event.remove(a,n+b[j],c,d,!0);la.isEmptyObject(k)&&(delete q.handle,la._removeData(a,"events"))}},trigger:function(c,d,e,f){var g,h,i,j,k,l,m,n=[e||Z],o=ja.call(c,"type")?c.type:c,p=ja.call(c,"namespace")?c.namespace.split("."):[];if(i=l=e=e||Z,3!==e.nodeType&&8!==e.nodeType&&!Pa.test(o+la.event.triggered)&&(o.indexOf(".")>=0&&(p=o.split("."),o=p.shift(),p.sort()),h=o.indexOf(":")<0&&"on"+o,c=c[la.expando]?c:new la.Event(o,"object"==typeof c&&c),c.isTrigger=f?2:3,c.namespace=p.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=b,c.target||(c.target=e),d=null==d?[c]:la.makeArray(d,[c]),k=la.event.special[o]||{},f||!k.trigger||k.trigger.apply(e,d)!==!1)){if(!f&&!k.noBubble&&!la.isWindow(e)){for(j=k.delegateType||o,Pa.test(j+o)||(i=i.parentNode);i;i=i.parentNode)n.push(i),l=i;l===(e.ownerDocument||Z)&&n.push(l.defaultView||l.parentWindow||a)}for(m=0;(i=n[m++])&&!c.isPropagationStopped();)c.type=m>1?j:k.bindType||o,g=(la._data(i,"events")||{})[c.type]&&la._data(i,"handle"),g&&g.apply(i,d),g=h&&i[h],g&&la.acceptData(i)&&g.apply&&g.apply(i,d)===!1&&c.preventDefault();if(c.type=o,!f&&!c.isDefaultPrevented()&&(!k._default||k._default.apply(n.pop(),d)===!1)&&la.acceptData(e)&&h&&e[o]&&!la.isWindow(e)){l=e[h],l&&(e[h]=null),la.event.triggered=o;try{e[o]()}catch(a){}la.event.triggered=b,l&&(e[h]=l)}return c.result}},dispatch:function(a){a=la.event.fix(a);var c,d,e,f,g,h=[],i=ga.call(arguments),j=(la._data(this,"events")||{})[a.type]||[],k=la.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){for(h=la.event.handlers.call(this,a,j),c=0;(f=h[c++])&&!a.isPropagationStopped();)for(a.currentTarget=f.elem,g=0;(e=f.handlers[g++])&&!a.isImmediatePropagationStopped();)a.namespace_re&&!a.namespace_re.test(e.namespace)||(a.handleObj=e,a.data=e.data,d=((la.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),d!==b&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,c){var d,e,f,g,h=[],i=c.delegateCount,j=a.target;if(i&&j.nodeType&&(!a.button||"click"!==a.type))for(;j!=this;j=j.parentNode||this)if(1===j.nodeType&&(j.disabled!==!0||"click"!==a.type)){for(f=[],g=0;g<i;g++)e=c[g],d=e.selector+" ",f[d]===b&&(f[d]=e.needsContext?la(d,this).index(j)>=0:la.find(d,this,null,[j]).length),f[d]&&f.push(e);f.length&&h.push({elem:j,handlers:f})}return i<c.length&&h.push({elem:this,handlers:c.slice(i)}),h},fix:function(a){if(a[la.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Oa.test(e)?this.mouseHooks:Na.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new la.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||Z),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return null==a.pageX&&null!=c.clientX&&(e=a.target.ownerDocument||Z,f=e.documentElement,d=e.body,a.pageX=c.clientX+(f&&f.scrollLeft||d&&d.scrollLeft||0)-(f&&f.clientLeft||d&&d.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||d&&d.scrollTop||0)-(f&&f.clientTop||d&&d.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),a.which||g===b||(a.which=1&g?1:2&g?3:4&g?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==l()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){if(this===l()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(la.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(a){return la.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){a.result!==b&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=la.extend(new la.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?la.event.trigger(e,null,b):la.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},la.removeEvent=Z.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===X&&(a[d]=null),a.detachEvent(d,c))},la.Event=function(a,b){return this instanceof la.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?j:k):this.type=a,b&&la.extend(this,b),this.timeStamp=a&&a.timeStamp||la.now(),void(this[la.expando]=!0)):new la.Event(a,b)},la.Event.prototype={isDefaultPrevented:k,isPropagationStopped:k,isImmediatePropagationStopped:k,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=j,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=j,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=j,this.stopPropagation()}},la.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){la.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||la.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),la.support.submitBubbles||(la.event.special.submit={setup:function(){return!la.nodeName(this,"form")&&void la.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=la.nodeName(c,"input")||la.nodeName(c,"button")?c.form:b;d&&!la._data(d,"submitBubbles")&&(la.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),la._data(d,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&la.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return!la.nodeName(this,"form")&&void la.event.remove(this,"._submit")}}),la.support.changeBubbles||(la.event.special.change={setup:function(){return Ma.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(la.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),la.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),la.event.simulate("change",this,a,!0)})),!1):void la.event.add(this,"beforeactivate._change",function(a){var b=a.target;Ma.test(b.nodeName)&&!la._data(b,"changeBubbles")&&(la.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||la.event.simulate("change",this.parentNode,a,!0)}),la._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){return la.event.remove(this,"._change"),!Ma.test(this.nodeName)}}),la.support.focusinBubbles||la.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){la.event.simulate(b,a.target,la.event.fix(a),!0)};la.event.special[b]={setup:function(){0===c++&&Z.addEventListener(a,d,!0)},teardown:function(){0===--c&&Z.removeEventListener(a,d,!0)}}}),la.fn.extend({on:function(a,c,d,e,f){var g,h;if("object"==typeof a){"string"!=typeof c&&(d=d||c,c=b);for(g in a)this.on(g,c,d,a[g],f);return this}if(null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b)),e===!1)e=k;else if(!e)return this;return 1===f&&(h=e,e=function(a){return la().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=la.guid++)),this.each(function(){la.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,la(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof a){for(f in a)this.off(f,c,a[f]);return this}return c!==!1&&"function"!=typeof c||(d=c,c=b),d===!1&&(d=k),this.each(function(){la.event.remove(this,a,d,c)})},trigger:function(a,b){return this.each(function(){la.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return la.event.trigger(a,b,c,!0)}});var Ra=/^.[^:#\[\.,]*$/,Sa=/^(?:parents|prev(?:Until|All))/,Ta=la.expr.match.needsContext,Ua={children:!0,contents:!0,next:!0,prev:!0};la.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(la(a).filter(function(){for(b=0;b<e;b++)if(la.contains(d[b],this))return!0}));for(b=0;b<e;b++)la.find(a,d[b],c);return c=this.pushStack(e>1?la.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},has:function(a){var b,c=la(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if(la.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(n(this,a||[],!0))},filter:function(a){return this.pushStack(n(this,a||[],!1))},is:function(a){return!!n(this,"string"==typeof a&&Ta.test(a)?la(a):a||[],!1).length},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=Ta.test(a)||"string"!=typeof a?la(a,b||this.context):0;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&la.find.matchesSelector(c,a))){
c=f.push(c);break}return this.pushStack(f.length>1?la.unique(f):f)},index:function(a){return a?"string"==typeof a?la.inArray(this[0],la(a)):la.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){var c="string"==typeof a?la(a,b):la.makeArray(a&&a.nodeType?[a]:a),d=la.merge(this.get(),c);return this.pushStack(la.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),la.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return la.dir(a,"parentNode")},parentsUntil:function(a,b,c){return la.dir(a,"parentNode",c)},next:function(a){return m(a,"nextSibling")},prev:function(a){return m(a,"previousSibling")},nextAll:function(a){return la.dir(a,"nextSibling")},prevAll:function(a){return la.dir(a,"previousSibling")},nextUntil:function(a,b,c){return la.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return la.dir(a,"previousSibling",c)},siblings:function(a){return la.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return la.sibling(a.firstChild)},contents:function(a){return la.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:la.merge([],a.childNodes)}},function(a,b){la.fn[a]=function(c,d){var e=la.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=la.filter(d,e)),this.length>1&&(Ua[a]||(e=la.unique(e)),Sa.test(a)&&(e=e.reverse())),this.pushStack(e)}}),la.extend({filter:function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?la.find.matchesSelector(d,a)?[d]:[]:la.find.matches(a,la.grep(b,function(a){return 1===a.nodeType}))},dir:function(a,c,d){for(var e=[],f=a[c];f&&9!==f.nodeType&&(d===b||1!==f.nodeType||!la(f).is(d));)1===f.nodeType&&e.push(f),f=f[c];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Va,Wa,Xa="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Ya=/ jQuery\d+="(?:null|\d+)"/g,Za=new RegExp("<(?:"+Xa+")[\\s/>]","i"),$a=/^\s+/,_a=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ab=/<([\w:]+)/,bb=/<tbody/i,cb=/<|&#?\w+;/,db=/<(?:script|style|link)/i,eb=/^(?:checkbox|radio)$/i,fb=/checked\s*(?:[^=]|=\s*.checked.)/i,gb=/^$|\/(?:java|ecma)script/i,hb=/^true\/(.*)/,ib=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,jb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:la.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};jb.optgroup=jb.option,jb.tbody=jb.tfoot=jb.colgroup=jb.caption=jb.thead,jb.th=jb.td,la.fn.extend({text:function(a){return la.access(this,function(a){return a===b?la.text(this):this.empty().append((this[0]&&this[0].ownerDocument||Z).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=p(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=p(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?la.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||la.cleanData(v(c)),c.parentNode&&(b&&la.contains(c.ownerDocument,c)&&s(v(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&la.cleanData(v(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&la.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return la.clone(this,a,b)})},html:function(a){return la.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(Ya,""):b;if("string"==typeof a&&!db.test(a)&&(la.support.htmlSerialize||!Za.test(a))&&(la.support.leadingWhitespace||!$a.test(a))&&!jb[(ab.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(_a,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},1===c.nodeType&&(la.cleanData(v(c,!1)),c.innerHTML=a);c=0}catch(a){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=la.map(this,function(a){return[a.nextSibling,a.parentNode]}),b=0;return this.domManip(arguments,function(c){var d=a[b++],e=a[b++];e&&(d&&d.parentNode!==e&&(d=this.nextSibling),la(this).remove(),e.insertBefore(c,d))},!0),b?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b,c){a=ea.apply([],a);var d,e,f,g,h,i,j=0,k=this.length,l=this,m=k-1,n=a[0],o=la.isFunction(n);if(o||!(k<=1||"string"!=typeof n||la.support.checkClone)&&fb.test(n))return this.each(function(d){var e=l.eq(d);o&&(a[0]=n.call(this,d,e.html())),e.domManip(a,b,c)});if(k&&(i=la.buildFragment(a,this[0].ownerDocument,!1,!c&&this),d=i.firstChild,1===i.childNodes.length&&(i=d),d)){for(g=la.map(v(i,"script"),q),f=g.length;j<k;j++)e=i,j!==m&&(e=la.clone(e,!0,!0),f&&la.merge(g,v(e,"script"))),b.call(this[j],e,j);if(f)for(h=g[g.length-1].ownerDocument,la.map(g,r),j=0;j<f;j++)e=g[j],gb.test(e.type||"")&&!la._data(e,"globalEval")&&la.contains(h,e)&&(e.src?la._evalUrl(e.src):la.globalEval((e.text||e.textContent||e.innerHTML||"").replace(ib,"")));i=d=null}return this}}),la.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){la.fn[a]=function(a){for(var c,d=0,e=[],f=la(a),g=f.length-1;d<=g;d++)c=d===g?this:this.clone(!0),la(f[d])[b](c),fa.apply(e,c.get());return this.pushStack(e)}}),la.extend({clone:function(a,b,c){var d,e,f,g,h,i=la.contains(a.ownerDocument,a);if(la.support.html5Clone||la.isXMLDoc(a)||!Za.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(Va=Va||o(Z),Wa=Wa||Va.appendChild(Z.createElement("div")),Wa.innerHTML=a.outerHTML,Wa.removeChild(f=Wa.firstChild)),!(la.support.noCloneEvent&&la.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||la.isXMLDoc(a)))for(d=v(f),h=v(a),g=0;null!=(e=h[g]);++g)d[g]&&u(e,d[g]);if(b)if(c)for(h=h||v(a),d=d||v(f),g=0;null!=(e=h[g]);g++)t(e,d[g]);else t(a,f);return d=v(f,"script"),d.length>0&&s(d,!i&&v(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,l=a.length,m=o(b),n=[],p=0;p<l;p++)if(f=a[p],f||0===f)if("object"===la.type(f))la.merge(n,f.nodeType?[f]:f);else if(cb.test(f)){for(h=h||m.appendChild(b.createElement("div")),i=(ab.exec(f)||["",""])[1].toLowerCase(),k=jb[i]||jb._default,h.innerHTML=k[1]+f.replace(_a,"<$1></$2>")+k[2],e=k[0];e--;)h=h.lastChild;if(!la.support.leadingWhitespace&&$a.test(f)&&n.push(b.createTextNode($a.exec(f)[0])),!la.support.tbody)for(f="table"!==i||bb.test(f)?"<table>"!==k[1]||bb.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;e--;)la.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j);for(la.merge(n,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=m.lastChild}else n.push(b.createTextNode(f));for(h&&m.removeChild(h),la.support.appendChecked||la.grep(v(n,"input"),w),p=0;f=n[p++];)if((!d||la.inArray(f,d)===-1)&&(g=la.contains(f.ownerDocument,f),h=v(m.appendChild(f),"script"),g&&s(h),c))for(e=0;f=h[e++];)gb.test(f.type||"")&&c.push(f);return h=null,m},cleanData:function(a,b){for(var c,d,e,f,g=0,h=la.expando,i=la.cache,j=la.support.deleteExpando,k=la.event.special;null!=(c=a[g]);g++)if((b||la.acceptData(c))&&(e=c[h],f=e&&i[e])){if(f.events)for(d in f.events)k[d]?la.event.remove(c,d):la.removeEvent(c,d,f.handle);i[e]&&(delete i[e],j?delete c[h]:typeof c.removeAttribute!==X?c.removeAttribute(h):c[h]=null,ca.push(e))}},_evalUrl:function(a){return la.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})}}),la.fn.extend({wrapAll:function(a){if(la.isFunction(a))return this.each(function(b){la(this).wrapAll(a.call(this,b))});if(this[0]){var b=la(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return la.isFunction(a)?this.each(function(b){la(this).wrapInner(a.call(this,b))}):this.each(function(){var b=la(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=la.isFunction(a);return this.each(function(c){la(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){la.nodeName(this,"body")||la(this).replaceWith(this.childNodes)}).end()}});var kb,lb,mb,nb=/alpha\([^)]*\)/i,ob=/opacity\s*=\s*([^)]*)/,pb=/^(top|right|bottom|left)$/,qb=/^(none|table(?!-c[ea]).+)/,rb=/^margin/,sb=new RegExp("^("+ma+")(.*)$","i"),tb=new RegExp("^("+ma+")(?!px)[a-z%]+$","i"),ub=new RegExp("^([+-])=("+ma+")","i"),vb={BODY:"block"},wb={position:"absolute",visibility:"hidden",display:"block"},xb={letterSpacing:0,fontWeight:400},yb=["Top","Right","Bottom","Left"],zb=["Webkit","O","Moz","ms"];la.fn.extend({css:function(a,c){return la.access(this,function(a,c,d){var e,f,g={},h=0;if(la.isArray(c)){for(f=lb(a),e=c.length;h<e;h++)g[c[h]]=la.css(a,c[h],!1,f);return g}return d!==b?la.style(a,c,d):la.css(a,c)},a,c,arguments.length>1)},show:function(){return z(this,!0)},hide:function(){return z(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){y(this)?la(this).show():la(this).hide()})}}),la.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=mb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:la.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,i=la.camelCase(c),j=a.style;if(c=la.cssProps[i]||(la.cssProps[i]=x(j,i)),h=la.cssHooks[c]||la.cssHooks[i],d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c];if(g=typeof d,"string"===g&&(f=ub.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(la.css(a,c)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"!==g||la.cssNumber[i]||(d+="px"),la.support.clearCloneStyle||""!==d||0!==c.indexOf("background")||(j[c]="inherit"),h&&"set"in h&&(d=h.set(a,d,e))===b)))try{j[c]=d}catch(a){}}},css:function(a,c,d,e){var f,g,h,i=la.camelCase(c);return c=la.cssProps[i]||(la.cssProps[i]=x(a.style,i)),h=la.cssHooks[c]||la.cssHooks[i],h&&"get"in h&&(g=h.get(a,!0,d)),g===b&&(g=mb(a,c,e)),"normal"===g&&c in xb&&(g=xb[c]),""===d||d?(f=parseFloat(g),d===!0||la.isNumeric(f)?f||0:g):g}}),a.getComputedStyle?(lb=function(b){return a.getComputedStyle(b,null)},mb=function(a,c,d){var e,f,g,h=d||lb(a),i=h?h.getPropertyValue(c)||h[c]:b,j=a.style;return h&&(""!==i||la.contains(a.ownerDocument,a)||(i=la.style(a,c)),tb.test(i)&&rb.test(c)&&(e=j.width,f=j.minWidth,g=j.maxWidth,j.minWidth=j.maxWidth=j.width=i,i=h.width,j.width=e,j.minWidth=f,j.maxWidth=g)),i}):Z.documentElement.currentStyle&&(lb=function(a){return a.currentStyle},mb=function(a,c,d){var e,f,g,h=d||lb(a),i=h?h[c]:b,j=a.style;return null==i&&j&&j[c]&&(i=j[c]),tb.test(i)&&!pb.test(c)&&(e=j.left,f=a.runtimeStyle,g=f&&f.left,g&&(f.left=a.currentStyle.left),j.left="fontSize"===c?"1em":i,i=j.pixelLeft+"px",j.left=e,g&&(f.left=g)),""===i?"auto":i}),la.each(["height","width"],function(a,b){la.cssHooks[b]={get:function(a,c,d){if(c)return 0===a.offsetWidth&&qb.test(la.css(a,"display"))?la.swap(a,wb,function(){return C(a,b,d)}):C(a,b,d)},set:function(a,c,d){var e=d&&lb(a);return A(a,c,d?B(a,b,d,la.support.boxSizing&&"border-box"===la.css(a,"boxSizing",!1,e),e):0)}}}),la.support.opacity||(la.cssHooks.opacity={get:function(a,b){return ob.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=la.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===la.trim(f.replace(nb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=nb.test(f)?f.replace(nb,e):f+" "+e)}}),la(function(){la.support.reliableMarginRight||(la.cssHooks.marginRight={get:function(a,b){if(b)return la.swap(a,{display:"inline-block"},mb,[a,"marginRight"])}}),!la.support.pixelPosition&&la.fn.position&&la.each(["top","left"],function(a,b){la.cssHooks[b]={get:function(a,c){if(c)return c=mb(a,b),tb.test(c)?la(a).position()[b]+"px":c}}})}),la.expr&&la.expr.filters&&(la.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!la.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||la.css(a,"display"))},la.expr.filters.visible=function(a){return!la.expr.filters.hidden(a)}),la.each({margin:"",padding:"",border:"Width"},function(a,b){la.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+yb[d]+b]=f[d]||f[d-2]||f[0];return e}},rb.test(a)||(la.cssHooks[a+b].set=A)});var Ab=/%20/g,Bb=/\[\]$/,Cb=/\r?\n/g,Db=/^(?:submit|button|image|reset|file)$/i,Eb=/^(?:input|select|textarea|keygen)/i;la.fn.extend({serialize:function(){return la.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=la.prop(this,"elements");return a?la.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!la(this).is(":disabled")&&Eb.test(this.nodeName)&&!Db.test(a)&&(this.checked||!eb.test(a))}).map(function(a,b){var c=la(this).val();return null==c?null:la.isArray(c)?la.map(c,function(a){return{name:b.name,value:a.replace(Cb,"\r\n")}}):{name:b.name,value:c.replace(Cb,"\r\n")}}).get()}}),la.param=function(a,c){var d,e=[],f=function(a,b){b=la.isFunction(b)?b():null==b?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=la.ajaxSettings&&la.ajaxSettings.traditional),la.isArray(a)||a.jquery&&!la.isPlainObject(a))la.each(a,function(){f(this.name,this.value)});else for(d in a)F(d,a[d],c,f);return e.join("&").replace(Ab,"+")},la.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){la.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),la.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var Fb,Gb,Hb=la.now(),Ib=/\?/,Jb=/#.*$/,Kb=/([?&])_=[^&]*/,Lb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Mb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Nb=/^(?:GET|HEAD)$/,Ob=/^\/\//,Pb=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Qb=la.fn.load,Rb={},Sb={},Tb="*/".concat("*");try{Gb=Y.href}catch(a){Gb=Z.createElement("a"),Gb.href="",Gb=Gb.href}Fb=Pb.exec(Gb.toLowerCase())||[],la.fn.load=function(a,c,d){if("string"!=typeof a&&Qb)return Qb.apply(this,arguments);var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),la.isFunction(c)?(d=c,c=b):c&&"object"==typeof c&&(g="POST"),h.length>0&&la.ajax({url:a,type:g,dataType:"html",data:c}).done(function(a){f=arguments,h.html(e?la("<div>").append(la.parseHTML(a)).find(e):a)}).complete(d&&function(a,b){h.each(d,f||[a.responseText,b,a])}),this},la.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){la.fn[b]=function(a){return this.on(b,a)}}),la.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Gb,type:"GET",isLocal:Mb.test(Fb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Tb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":la.parseJSON,"text xml":la.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?I(I(a,la.ajaxSettings),b):I(la.ajaxSettings,a)},ajaxPrefilter:G(Rb),ajaxTransport:G(Sb),ajax:function(a,c){function d(a,c,d,e){var f,l,s,t,v,x=c;2!==u&&(u=2,i&&clearTimeout(i),k=b,h=e||"",w.readyState=a>0?4:0,f=a>=200&&a<300||304===a,d&&(t=J(m,w,d)),t=K(m,t,w,f),f?(m.ifModified&&(v=w.getResponseHeader("Last-Modified"),v&&(la.lastModified[g]=v),v=w.getResponseHeader("etag"),v&&(la.etag[g]=v)),204===a||"HEAD"===m.type?x="nocontent":304===a?x="notmodified":(x=t.state,l=t.data,s=t.error,f=!s)):(s=x,!a&&x||(x="error",a<0&&(a=0))),w.status=a,w.statusText=(c||x)+"",f?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=b,j&&o.trigger(f?"ajaxSuccess":"ajaxError",[w,m,f?l:s]),q.fireWith(n,[w,x]),j&&(o.trigger("ajaxComplete",[w,m]),--la.active||la.event.trigger("ajaxStop")))}"object"==typeof a&&(c=a,a=b),c=c||{};var e,f,g,h,i,j,k,l,m=la.ajaxSetup({},c),n=m.context||m,o=m.context&&(n.nodeType||n.jquery)?la(n):la.event,p=la.Deferred(),q=la.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!l)for(l={};b=Lb.exec(h);)l[b[1].toLowerCase()]=b[2];b=l[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?h:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(u<2)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;return k&&k.abort(b),d(0,b),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,m.url=((a||m.url||Gb)+"").replace(Jb,"").replace(Ob,Fb[1]+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=la.trim(m.dataType||"*").toLowerCase().match(na)||[""],null==m.crossDomain&&(e=Pb.exec(m.url.toLowerCase()),m.crossDomain=!(!e||e[1]===Fb[1]&&e[2]===Fb[2]&&(e[3]||("http:"===e[1]?"80":"443"))===(Fb[3]||("http:"===Fb[1]?"80":"443")))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=la.param(m.data,m.traditional)),H(Rb,m,c,w),2===u)return w;j=m.global,j&&0===la.active++&&la.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Nb.test(m.type),g=m.url,m.hasContent||(m.data&&(g=m.url+=(Ib.test(g)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=Kb.test(g)?g.replace(Kb,"$1_="+Hb++):g+(Ib.test(g)?"&":"?")+"_="+Hb++)),m.ifModified&&(la.lastModified[g]&&w.setRequestHeader("If-Modified-Since",la.lastModified[g]),la.etag[g]&&w.setRequestHeader("If-None-Match",la.etag[g])),(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Tb+"; q=0.01":""):m.accepts["*"]);for(f in m.headers)w.setRequestHeader(f,m.headers[f]);if(m.beforeSend&&(m.beforeSend.call(n,w,m)===!1||2===u))return w.abort();v="abort";for(f in{success:1,error:1,complete:1})w[f](m[f]);if(k=H(Sb,m,c,w)){w.readyState=1,j&&o.trigger("ajaxSend",[w,m]),m.async&&m.timeout>0&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,k.send(s,d)}catch(a){if(!(u<2))throw a;d(-1,a)}}else d(-1,"No Transport");return w},getJSON:function(a,b,c){return la.get(a,b,c,"json")},getScript:function(a,c){return la.get(a,b,c,"script")}}),la.each(["get","post"],function(a,c){la[c]=function(a,d,e,f){return la.isFunction(d)&&(f=f||e,e=d,d=b),la.ajax({url:a,type:c,dataType:f,data:d,success:e})}}),la.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return la.globalEval(a),a}}}),la.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),la.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=Z.head||la("head")[0]||Z.documentElement;return{send:function(b,e){c=Z.createElement("script"),c.async=!0,a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,b){(b||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,c.parentNode&&c.parentNode.removeChild(c),c=null,b||e(200,"success"))},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(b,!0)}}}});var Ub=[],Vb=/(=)\?(?=&|$)|\?\?/;la.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Ub.pop()||la.expando+"_"+Hb++;return this[a]=!0,a}}),la.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.jsonp!==!1&&(Vb.test(c.url)?"url":"string"==typeof c.data&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vb.test(c.data)&&"data");if(i||"jsonp"===c.dataTypes[0])return f=c.jsonpCallback=la.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,i?c[i]=c[i].replace(Vb,"$1"+f):c.jsonp!==!1&&(c.url+=(Ib.test(c.url)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||la.error(f+" was not called"),h[0]},c.dataTypes[0]="json",g=a[f],a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,Ub.push(f)),h&&la.isFunction(g)&&g(h[0]),h=g=b}),"script"});var Wb,Xb,Yb=0,Zb=a.ActiveXObject&&function(){var a;for(a in Wb)Wb[a](b,!0)};la.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&L()||M()}:L,Xb=la.ajaxSettings.xhr(),la.support.cors=!!Xb&&"withCredentials"in Xb,Xb=la.support.ajax=!!Xb,Xb&&la.ajaxTransport(function(c){if(!c.crossDomain||la.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();if(c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async),c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(a){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l;try{if(d&&(e||4===i.readyState))if(d=b,g&&(i.onreadystatechange=la.noop,Zb&&delete Wb[g]),e)4!==i.readyState&&i.abort();else{l={},h=i.status,j=i.getAllResponseHeaders(),"string"==typeof i.responseText&&(l.text=i.responseText);try{k=i.statusText}catch(a){k=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=l.text?200:404}}catch(a){e||f(-1,a)}l&&f(h,k,l,j)},c.async?4===i.readyState?setTimeout(d):(g=++Yb,Zb&&(Wb||(Wb={},la(a).unload(Zb)),Wb[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(b,!0)}}}});var $b,_b,ac=/^(?:toggle|show|hide)$/,bc=new RegExp("^(?:([+-])=|)("+ma+")([a-z%]*)$","i"),cc=/queueHooks$/,dc=[R],ec={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bc.exec(b),f=e&&e[3]||(la.cssNumber[a]?"":"px"),g=(la.cssNumber[a]||"px"!==f&&+d)&&bc.exec(la.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,la.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};la.Animation=la.extend(P,{tweener:function(a,b){la.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;d<e;d++)c=a[d],ec[c]=ec[c]||[],ec[c].unshift(b)},prefilter:function(a,b){b?dc.unshift(a):dc.push(a)}}),la.Tween=S,S.prototype={constructor:S,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(la.cssNumber[c]?"":"px")},cur:function(){var a=S.propHooks[this.prop];return a&&a.get?a.get(this):S.propHooks._default.get(this)},run:function(a){var b,c=S.propHooks[this.prop];return this.options.duration?this.pos=b=la.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):S.propHooks._default.set(this),this}},S.prototype.init.prototype=S.prototype,S.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=la.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){la.fx.step[a.prop]?la.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[la.cssProps[a.prop]]||la.cssHooks[a.prop])?la.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},S.propHooks.scrollTop=S.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},la.each(["toggle","show","hide"],function(a,b){var c=la.fn[b];la.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(T(b,!0),a,d,e)}}),la.fn.extend({fadeTo:function(a,b,c,d){return this.filter(y).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=la.isEmptyObject(a),f=la.speed(b,c,d),g=function(){var b=P(this,la.extend({},a),f);(e||la._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return"string"!=typeof a&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=la.timers,g=la._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&cc.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));!b&&d||la.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=la._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=la.timers,g=d?d.length:0;for(c.finish=!0,la.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),la.each({slideDown:T("show"),slideUp:T("hide"),slideToggle:T("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){la.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),la.speed=function(a,b,c){var d=a&&"object"==typeof a?la.extend({},a):{complete:c||!c&&b||la.isFunction(a)&&a,duration:a,easing:c&&b||b&&!la.isFunction(b)&&b};return d.duration=la.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in la.fx.speeds?la.fx.speeds[d.duration]:la.fx.speeds._default,null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){la.isFunction(d.old)&&d.old.call(this),d.queue&&la.dequeue(this,d.queue)},d},la.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},la.timers=[],la.fx=S.prototype.init,la.fx.tick=function(){var a,c=la.timers,d=0;for($b=la.now();d<c.length;d++)a=c[d],a()||c[d]!==a||c.splice(d--,1);c.length||la.fx.stop(),$b=b},la.fx.timer=function(a){a()&&la.timers.push(a)&&la.fx.start()},la.fx.interval=13,la.fx.start=function(){_b||(_b=setInterval(la.fx.tick,la.fx.interval))},la.fx.stop=function(){clearInterval(_b),_b=null},la.fx.speeds={slow:600,fast:200,_default:400},la.fx.step={},la.expr&&la.expr.filters&&(la.expr.filters.animated=function(a){return la.grep(la.timers,function(b){return a===b.elem}).length}),la.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){la.offset.setOffset(this,a,b)});var c,d,e={top:0,left:0},f=this[0],g=f&&f.ownerDocument;if(g)return c=g.documentElement,la.contains(c,f)?(typeof f.getBoundingClientRect!==X&&(e=f.getBoundingClientRect()),d=U(g),{top:e.top+(d.pageYOffset||c.scrollTop)-(c.clientTop||0),left:e.left+(d.pageXOffset||c.scrollLeft)-(c.clientLeft||0)}):e},la.offset={setOffset:function(a,b,c){var d=la.css(a,"position");"static"===d&&(a.style.position="relative");var e,f,g=la(a),h=g.offset(),i=la.css(a,"top"),j=la.css(a,"left"),k=("absolute"===d||"fixed"===d)&&la.inArray("auto",[i,j])>-1,l={},m={};k?(m=g.position(),e=m.top,f=m.left):(e=parseFloat(i)||0,f=parseFloat(j)||0),la.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(l.top=b.top-h.top+e),null!=b.left&&(l.left=b.left-h.left+f),"using"in b?b.using.call(a,l):g.css(l)}},la.fn.extend({position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===la.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),la.nodeName(a[0],"html")||(c=a.offset()),c.top+=la.css(a[0],"borderTopWidth",!0),c.left+=la.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-la.css(d,"marginTop",!0),left:b.left-c.left-la.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||$;a&&!la.nodeName(a,"html")&&"static"===la.css(a,"position");)a=a.offsetParent;return a||$})}}),la.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);la.fn[a]=function(e){return la.access(this,function(a,e,f){var g=U(a);return f===b?g?c in g?g[c]:g.document.documentElement[e]:a[e]:void(g?g.scrollTo(d?la(g).scrollLeft():f,d?f:la(g).scrollTop()):a[e]=f)},a,e,arguments.length,null)}}),la.each({Height:"height",Width:"width"},function(a,c){la.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){la.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!=typeof e),h=d||(e===!0||f===!0?"margin":"border");return la.access(this,function(c,d,e){var f;return la.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?la.css(c,d,h):la.style(c,d,e,h)},c,g?e:b,g,null)}})}),la.fn.size=function(){return this.length},la.fn.andSelf=la.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=la:"function"==typeof d&&d.amd&&d("jqueryCafe",[],function(){return la})}(window),d("utilities/ColorUtils",["jqueryCafe"],function(a){function b(b){var d;return b=b||"",d=c(b),!d||a.isEmptyObject(b)?null:(d.originalInput=b,d.roundA=y(100*d.a)/100,d.r<1&&(d.r=y(d.r)),d.g<1&&(d.g=y(d.g)),d.b<1&&(d.b=y(d.b)),d)}function c(a){var b={r:0,g:0,b:0},c=1;return"string"==typeof a&&(a=d(a)),a&&"object"==typeof a?(a.hasOwnProperty("r")&&a.hasOwnProperty("g")&&a.hasOwnProperty("b")?b=e(a.r,a.g,a.b):a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("v")?(a.s=s(a.s),a.v=s(a.v),b=g(a.h,a.s,a.v)):a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("l")&&(a.s=s(a.s),a.l=s(a.l),b=i(a.h,a.s,a.l)),a.hasOwnProperty("a")&&(c=a.a),isNaN(b.r)||isNaN(b.g)||isNaN(b.b)?null:(c=l(c),{r:z(255,A(b.r,0)),g:z(255,A(b.g,0)),b:z(255,A(b.b,0)),a:c})):null}function d(a){var b,c;if(a=a.replace(v,"").replace(w,"").toLowerCase(),b=!1,C[a])a=C[a],b=!0;else if("transparent"===a)return{r:0,g:0,b:0,a:0};return(c=B.rgb.exec(a))?{r:c[1],g:c[2],b:c[3]}:(c=B.rgba.exec(a))?{r:c[1],g:c[2],b:c[3],a:c[4]}:(c=B.hsl.exec(a))?{h:c[1],s:c[2],l:c[3]}:(c=B.hsla.exec(a))?{h:c[1],s:c[2],l:c[3],a:c[4]}:(c=B.hsv.exec(a))?{h:c[1],s:c[2],v:c[3]}:(c=B.hsva.exec(a))?{h:c[1],s:c[2],v:c[3],a:c[4]}:(c=B.hex8.exec(a))?{a:r(c[1]),r:p(c[2]),g:p(c[3]),b:p(c[4])}:(c=B.hex6.exec(a))?{r:p(c[1]),g:p(c[2]),b:p(c[3])}:(c=B.hex3.exec(a))?{r:p(c[1]+""+c[1]),g:p(c[2]+""+c[2]),b:p(c[3]+""+c[3])}:null}function e(a,b,c){return{r:255*o(a,255),g:255*o(b,255),b:255*o(c,255)}}function f(a,b,c){var d,e,f,g,h,i;if(a=o(a,255),b=o(b,255),c=o(c,255),d=A(a,b,c),e=z(a,b,c),h=d,i=d-e,g=0===d?0:i/d,d===e)f=0;else{switch(d){case a:f=(b-c)/i+(b<c?6:0);break;case b:f=(c-a)/i+2;break;case c:f=(a-b)/i+4;
}f/=6}return{h:f,s:g,v:h}}function g(a,b,c){var d,e,f,g,h,i,j,k,l;return a=6*o(a,360),b=o(b,100),c=o(c,100),d=x.floor(a),e=a-d,f=c*(1-b),g=c*(1-e*b),h=c*(1-(1-e)*b),i=d%6,j=[c,g,f,f,h,c][i],k=[h,c,c,g,f,f][i],l=[f,f,h,c,c,g][i],{r:255*j,g:255*k,b:255*l}}function h(a,b,c){var d,e,f,g,h,i;if(a=o(a,255),b=o(b,255),c=o(c,255),g=A(a,b,c),h=z(a,b,c),f=(g+h)/2,g===h)d=e=0;else{switch(i=g-h,e=f>.5?i/(2-g-h):i/(g+h),g){case a:d=(b-c)/i+(b<c?6:0);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return{h:d,s:e,l:f}}function i(a,b,c){function d(a,b,c){return c=c<0?c+1:c,c=c>1?c-1:c,c<1/6?a+6*(b-a)*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a}var e,f,g,h,i;return a=o(a,360),b=o(b,100),c=o(c,100),0===b?e=f=g=c:(h=c<.5?c*(1+b):c+b-c*b,i=2*c-h,e=d(i,h,a+1/3),f=d(i,h,a),g=d(i,h,a-1/3)),{r:255*e,g:255*f,b:255*g}}function j(a,b,c,d){var e=[u(y(a).toString(16)),u(y(b).toString(16)),u(y(c).toString(16))];return d&&e[0].charAt(0)===e[0].charAt(1)&&e[1].charAt(0)===e[1].charAt(1)&&e[2].charAt(0)===e[2].charAt(1)?e[0].charAt(0)+e[1].charAt(0)+e[2].charAt(0):e.join("")}function k(a,b,c,d){var e=[u(q(d)),u(y(a).toString(16)),u(y(b).toString(16)),u(y(c).toString(16))];return e.join("")}function l(a){return a=parseFloat(a),(isNaN(a)||a<0||a>1)&&(a=1),a}function m(a){return"string"==typeof a&&a.indexOf(".")!==-1&&1===parseFloat(a)}function n(a){return"string"==typeof a&&a.indexOf("%")!==-1}function o(a,b){var c;return m(a)&&(a="100%"),c=n(a),a=z(b,A(0,parseFloat(a))),c&&(a=parseInt(a*b,10)/100),x.abs(a-b)<1e-6?1:a%b/parseFloat(b)}function p(a){return parseInt(a,16)}function q(a){return y(255*parseFloat(a)).toString(16)}function r(a){return p(a)/255}function s(a){return a<=1&&(a=100*a+"%"),a}function t(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&(c[a[b]]=b);return c}function u(a){return 1===a.length?"0"+a:""+a}var v=/^[\s,#]+/,w=/\s+$/,x=Math,y=x.round,z=x.min,A=x.max,B=function(){var a="[-\\+]?\\d+%?",b="[-\\+]?\\d*\\.\\d+%?",c="(?:"+b+")|(?:"+a+")",d="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?",e="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?";return{rgb:new RegExp("rgb"+d),rgba:new RegExp("rgba"+e),hsl:new RegExp("hsl"+d),hsla:new RegExp("hsla"+e),hsv:new RegExp("hsv"+d),hsva:new RegExp("hsva"+e),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}(),C={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},D=t(C);return a.colorUtils={equals:function(a,b){return!(!a||!b)&&this.toRGBString(a)===this.toRGBString(b)},isColorName:function(a){return!!C[a]},toHSL:function(a,b){var c=this.toHSLA(a,b);return c?{h:c.h,s:c.s,l:c.l}:null},toHSLA:function(a,c){var d,e=c?a:b(a);return e?(d=h(e.r,e.g,e.b),{h:360*d.h,s:100*d.s,l:100*d.l,a:e.a}):null},toHSLString:function(a,c){var d,e,f,g,i=c?a:b(a);return i?(d=h(i.r,i.g,i.b),e=y(360*d.h),f=y(100*d.s),g=y(100*d.l),1===i.a?"hsl("+e+", "+f+"%, "+g+"%)":"hsla("+e+", "+f+"%, "+g+"%, "+i.roundA+")"):null},toHSVA:function(a,c){var d,e=c?a:b(a);return e?(d=f(e.r,e.g,e.b),{h:360*d.h,s:100*d.s,v:100*d.v,a:e.a}):null},toHSV:function(a,b){var c=this.toHSVA(a,b);return c?{h:c.h,s:c.s,v:c.v}:null},toHSVString:function(a,c){var d,e,g,h,i=c?a:b(a);return i?(d=f(i.r,i.g,i.b),e=y(360*d.h),g=y(100*d.s),h=y(100*d.v),1===i.a?"hsv("+e+", "+g+"%, "+h+"%)":"hsva("+e+", "+g+"%, "+h+"%, "+i.roundA+")"):null},toHEX:function(a,c,d){var e=d?a:b(a);return e?j(e.r,e.g,e.b,c):null},toHEXString:function(a,c,d){var e=d?a:b(a);return e?"#"+this.toHEX(e,c,!0):null},toHEX8:function(a,c){var d=c?a:b(a);return d?k(d.r,d.g,d.b,d.a):null},toHEX8String:function(a,c){var d=c?a:b(a);return d?"#"+this.toHEX8(d,!0):null},toRGBA:function(a,c){var d=c?a:b(a);return d?{r:y(d.r),g:y(d.g),b:y(d.b),a:d.a}:null},toRGB:function(a,b){var c=this.toRGBA(a,b);return c?{r:c.r,g:c.g,b:c.b}:null},toRGBString:function(a,c){var d=c?a:b(a);return d?1===d.a?"rgb("+y(d.r)+", "+y(d.g)+", "+y(d.b)+")":"rgba("+y(d.r)+", "+y(d.g)+", "+y(d.b)+", "+d.roundA+")":null},toName:function(a,c){var d=c?a:b(a);return d?0===d.a?"transparent":d.a<1?"":D[j(d.r,d.g,d.b,!0)]||"":""}},a.colorUtils}),d("utilities/EditorConstants",[],function(){function a(){function a(a){var b=a.getMonth()+1,c=a.getDate();return[a.getFullYear(),(b>9?"":"0")+b,(c>9?"":"0")+c].join("")}function b(){var a,b,c=d.length;for(a=0;a<c;a++)if(b=d[a],!b||!b.length||4!==b.length){c=-1;break}return c}var c,d,e,f,g,h,i,j,k,l,m;return F?F:(c="5636-2KZE-AAGV",d=c.split("-"),f=b(),e=d.join("").length,i=new Date,F={},g=d[1]+d[2],j=parseInt(g,36).toString().substring(0,8),k=j.slice(0,4),l=j.slice(4,6),m=j.slice(6,8),h=new Date(k+"-"+l+"-"+m).getTime()-i.getTime(),i=a(i),F.e=j,F.d={y:parseInt(k,10),m:parseInt(l,10),d:parseInt(m,10)},F.c=i,F.r=h<0?0:Math.ceil(h/864e5),F.u=f,F.k=e,F.t=E,I&&(F.fd=!0),F)}function c(a,c,d){var e,f,g,h,i,j,k={};if(!a)return k;for(e=a.split(/(?:\s|,)+/g),c=c===b||c,h=d===b||d,f=0,g=e.length;f<g;f++)i=c?e[f].toUpperCase():e[f].toLowerCase(),i.indexOf(":")!==-1&&2===(j=i.split(":")).length&&(i=j[0],h=j[1]),k[i]=h;return k}function d(a){var b,c=[];if(a)if(Object.keys)c=Object.keys(a);else for(b in a)c.push(b);return c}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I=!0;return I=!0,e={NATIVE_COMMAND:1,CUSTOM_COMMAND:2,CUSTOM_COMMAND_BLOCK:3,CUSTOM_COMMAND_RANGE:5,SYSTEM_COMMAND:4},f={ROOT_NODE:99,ELEM_NODE:1,ATTR_NODE:2,TEXT_NODE:3,CDATA_NODE:4,COMMENT_NODE:8,DOC_NODE:9,DOCTYPE_NODE:10},g={A:"A",ABBR:"ABBR",ACRONYM:"ACRONYM",ADDRESS:"ADDRESS",APPLET:"APPLET",AREA:"AREA",ARTICLE:"ARTICLE",ASIDE:"ASIDE",AUDIO:"AUDIO",B:"B",BASE:"BASE",BASEFONT:"BASEFONT",BDI:"BDI",BDO:"BDO",BIG:"BIG",BLOCKQUOTE:"BLOCKQUOTE",BODY:"BODY",BR:"BR",BUTTON:"BUTTON",CANVAS:"CANVAS",CAPTION:"CAPTION",CENTER:"CENTER",CITE:"CITE",CODE:"CODE",COL:"COL",COLGROUP:"COLGROUP",DATA:"DATA",DATALIST:"DATALIST",DD:"DD",DEL:"DEL",DETAILS:"DETAILS",DFN:"DFN",DIALOG:"DIALOG",DIR:"DIR",DIV:"DIV",DL:"DL",DT:"DT",EM:"EM",EMBED:"EMBED",FIELDSET:"FIELDSET",FIGCAPTION:"FIGCAPTION",FIGURE:"FIGURE",FONT:"FONT",FOOTER:"FOOTER",FORM:"FORM",FRAME:"FRAME",FRAMESET:"FRAMESET",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",HEAD:"HEAD",HEADER:"HEADER",HR:"HR",HTML:"HTML",I:"I",IFRAME:"IFRAME",IMG:"IMG",INPUT:"INPUT",INS:"INS",KBD:"KBD",LABEL:"LABEL",LEGEND:"LEGEND",LI:"LI",LINK:"LINK",MAIN:"MAIN",MAP:"MAP",MARK:"MARK",META:"META",METER:"METER",NAV:"NAV",NOFRAMES:"NOFRAMES",NOSCRIPT:"NOSCRIPT",OBJECT:"OBJECT",OL:"OL",OPTGROUP:"OPTGROUP",OPTION:"OPTION",OUTPUT:"OUTPUT",P:"P",PARAM:"PARAM",PICTURE:"PICTURE",PRE:"PRE",PROGRESS:"PROGRESS",Q:"Q",RP:"RP",RT:"RT",RUBY:"RUBY",S:"S",SAMP:"SAMP",SCRIPT:"SCRIPT",SECTION:"SECTION",SELECT:"SELECT",SMALL:"SMALL",SOURCE:"SOURCE",SPAN:"SPAN",STRIKE:"STRIKE",STRONG:"STRONG",STYLE:"STYLE",SUB:"SUB",SUMMARY:"SUMMARY",SUP:"SUP",SVG:"SVG",TABLE:"TABLE",TBODY:"TBODY",TD:"TD",TEMPLATE:"TEMPLATE",TEXTAREA:"TEXTAREA",TFOOT:"TFOOT",TH:"TH",THEAD:"THEAD",TIME:"TIME",TITLE:"TITLE",TR:"TR",TRACK:"TRACK",TT:"TT",U:"U",UL:"UL",VAR:"VAR",VIDEO:"VIDEO",WBR:"WBR"},A={TOGGLE:1,MENU:2,COLOR:3,ENABLED:4},h=["image/bmp","image/png","image/jpg","image/jpeg","image/gif"],i=["bmp","png","jpg","jpeg","gif"],j=["bmp","png","jpg","jpeg","gif","svg"],y=c("a,abbr,acronym,address,applet,area,article,aside,audio,b,base,basefont,bdi,bdo,big,blockquote,br,button,canvas,caption,center,cite,code,col,colgroup,datalist,dd,del,details,dfn,dialog,dir,div,dl,dt,em,embed,fieldset,figcaption,figure,font,footer,form,frame,frameset,h1,h2,h3,h4,h5,h6,head,header,hr,html,i,iframe,img,input,ins,kbd,keygen,label,legend,li,link,main,map,mark,menu,menuitem,meta,meter,nav,noframes,noscript,object,ol,optgroup,option,output,p,param,pre,progress,q,rp,rt,ruby,s,samp,script,section,select,small,source,span,strike,strong,style,sub,summary,sup,table,tbody,td,textarea,tfoot,th,thead,time,title,tr,track,tt,u,ul,var,video,wbr, #text, #comment"),k=c("address,applet,blockquote,button,center,dd,del,dir,div,dl,dt,fieldset,form,frameset,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,p,pre,script,table,tbody,td,tfoot,th,thead,tr,ul"),m=c("svg"),l=c("form,input,option,optgroup,select,button,datalist,textarea"),n=c("head,base,bgsound,link,meta,noframes,style,template,title"),s=c("a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),u="p,h1,h2,h3,h4,h5,h6,div,li,dt,dd,blockquote",t=c(u),z=c("address,article,aside,audio,blockquote,canvas,dd,div,dl,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,hr,noscript,ol,output,p,pre,section,table,tfoot,ul,video"),v=c("colgroup,dd,dt,li,option,options,p,td,tfoot,th,thead, tr"),x=c("area,base,basefont,br,col,command,embed,hr,img,input, isindex,keygen,link,menuitem,meta,param,source,track,wbr"),r="onafterprint,onanimationcancel,onanimationend,onanimationiteration,\t\tonbeforeinstallprompt,onbeforeprint,onbeforeunload,onblur,oncopy,ondeviceorientationabsolute,\t\tonDOMContentLoaded,onerror,onfocus,ongamepadconnected,onhashchange,onlanguagechange,onload,\t\tonmessage,onmessageerror,onoffline,ononline,onorientationchange,onpagehide,onpageshow,onpaste,\t\tonpopstate,onrejectionhandled,onstorage,ontransitioncancel,onunhandledrejection,onunload,\t\tonvrdisplayconnect,onvrdisplaydisconnect,onvrdisplaypresentchange,ondragdrop,onvrdisplayactivate,\t\tonvrdisplayblur,onvrdisplaydeactivate,onvrdisplayfocus,onvrdisplaypointerrestricted,\t\tonvrdisplaypointerunrestricted,onafterscriptexecute,onanimationstart,onbeforescriptexecute,ondrag,\t\tondragend,ondragenter,ondragleave,ondragover,ondragstart,ondrop,onfullscreenchange,onfullscreenerror,\t\tongotpointercapture,onkeydown,onkeypress,onkeyup,onlostpointercapture,onpointercancel,onpointerdown,\t\tonpointerenter,onpointerleave,onpointerlockchange,onpointerlockerror,onpointermove,onpointerout,\t\tonpointerover,onpointerup,onreadystatechange,onscroll,onselectionchange,onselectstart,ontouchcancel,\t\tontouchend,ontouchmove,ontouchstart,ontransitionend,ontransitionrun,ontransitionstart,onvisibilitychange,\t\tonwheel,onauxclick,onclick,oncompositionend,oncompositionstart,oncompositionupdate,oncontextmenu,oncut,\t\tondblclick,onDOMActivate,onDOMMouseScroll,onfocusin,onfocusout,ongesturechange,ongestureend,\t\tongesturestart,onmousedown,onmouseenter,onmouseleave,onmousemove,onmouseout,onmouseover,onmouseup,\t\tonmousewheel,onMozMousePixelScroll,onmsContentZoom,onMSGestureChange,onMSGestureEnd,onMSGestureHold,\t\tonMSGestureStart,onMSGestureTap,onMSInertiaStart,onMSManipulationStateChanged,onsecuritypolicyviolation,\t\tonselect,onshow,onwebkitmouseforcechanged,onwebkitmouseforcedown,onwebkitmouseforceup,\t\tonwebkitmouseforcewillbegin,tabindex,contenteditable,onactivate,onafterupdate,onbeforeactivate,\t\tonbeforecopy,onbeforecut,onbeforedeactivate,onbeforepaste,onbeforeupdate,oncellchange,oncontrolselect,\t\tondataavailable,ondatasetchanged,ondatasetcomplete,ondeactivate,onerrorupdate,onfilterchange,onhelp,\t\tonlayoutcomplete,onlosecapture,onmove,onmoveend,onmovestart,onpage,onpropertychange,onresize,onresizeend,\t\tonresizestart,onrowenter,onrowexit,onrowsdelete,onrowsinserted,onbeforeeditfocus,onchange,onabort,\t\tonbounce,onfinish,onstart,onreset,onsubmit,oncanplay,oncanplaythrough,ondurationchange,onemptied,\t\tonended,onloadeddata,onloadedmetadata,onloadstart,onpause,onplay,onplaying,onprogress,onratechange,\t\tonseeked,onseeking,onstalled,onsuspend,ontimeupdate,onvolumechange,onwaiting,\t\tonmssitemodejumplistitemremoved,onmsthumbnailclick,onstoragecommit,onstop",w=c("altGlyph,altGlyphDef,altGlyphItem,animate,animateColor,animateMotion,animateTransform,circle,clipPath,color-profile,cursor,defs,desc,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,font-face,font-face-format,font-face-name,font-face-src,font-face-uri,foreignObject,g,glyph,glyphRef,hkern,image,line,linearGradient,marker,mask,metadata,missing-glyph,mpath,path,pattern,polygon,polyline,radialGradient,rect,script,set,stop,svg,switch,symbol,text,textPath,tref,tspan,use,view,vkern,a,altGlyph,altGlyphDef,altGlyphItem,animate,animateColor,animateMotion,animateTransform,circle,clipPath,color-profile,cursor,defs,desc,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,font,font-face,font-face-format,font-face-name,font-face-src,font-face-uri,foreignObject,g,glyph,glyphRef,hkern,image,line,linearGradient,marker,mask,metadata,missing-glyph,mpath,path,pattern,polygon,polyline,radialGradient,rect,script,set,stop,style,svg,switch,symbol,text,textPath,title,tref,tspan,use,view,vkern"),p="strong,b,i,em,sub,sup,strike,u,font,span",q=c(p),o={LINK:!0,STYLE:!0},C={fontWeight:{styleName:"bold"},fontStyle:{styleName:"italic"},verticalAlign:{styleName:"subscript superscript"},textDecoration:{styleName:"strikethrough underline"},color:{styleName:"fontcolor"},backgroundColor:{styleName:"fontbgcolor"},fontFamily:{styleName:"fontfamily"},fontSize:{styleName:"fontsize"},"line-height":{styleName:"lineheight"},"text-align":{styleName:""}},D={bold:{reg:/bold/i,attrName:"fontWeight",tag:["STRONG","B"],wrap:"<strong></strong>",format:!0,buttonType:A.TOGGLE},italic:{reg:/italic/i,attrName:"fontStyle",tag:["I","EM"],wrap:"<em></em>",format:!0,buttonType:A.TOGGLE},subscript:{reg:/sub/i,attrName:"verticalAlign",tag:["SUB"],otherTag:"SUP",otherWrap:"<sup></sup>",wrap:"<sub></sub>",format:!0,buttonType:A.TOGGLE},superscript:{reg:/super/i,attrName:"verticalAlign",tag:["SUP"],otherTag:"SUB",otherWrap:"<sub></sub>",wrap:"<sup></sup>",format:!0,buttonType:A.TOGGLE},strikethrough:{reg:/line\-through/i,attrName:"textDecoration",tag:["STRIKE"],wrap:"<strike></strike>",format:!0,buttonType:A.TOGGLE},underline:{reg:/underline/i,attrName:"textDecoration",tag:["U"],wrap:"<u></u>",format:!0,buttonType:A.TOGGLE},fontcolor:{reg:"",attrName:"color",tag:["FONT"],commandName:"ForeColor",wrap:"<font></font>",format:!0,buttonType:A.COLOR},fontbgcolor:{reg:"",attrName:"backgroundColor",tag:["FONT"],commandName:"BackColor",wrap:"<font></font>",format:!0,buttonType:A.COLOR},link:{reg:/none/i,attrName:"",tag:["A"],format:!1,buttonType:A.TOGGLE},fontfamily:{reg:/none/i,attrName:"",tag:[""],commandName:"fontName",format:!0,buttonType:A.MENU},fontsize:{reg:/none/i,attrName:"",tag:[""],format:!0,buttonType:A.MENU},paragraphformat:{reg:/none/i,attrName:"",tag:[""],format:!0,buttonType:A.MENU},lineheight:{reg:"",attrName:"lineHeight",tag:[""],format:!0,buttonType:A.MENU}},G={width:20,height:20},H=["Arial","Courier","sans-serif","맑은 고딕","굴림","바탕","궁서","돋움"],B={ZERO_WIDTH_SPACE:"​",SPACE:" ",NBSP:" "},{verify:a,CommandTypes:e,CONTENTS_ID:"cafe-note-contents",CURSOR_ELEM_ID:"cafe-cursor",DUMY_PASTE_ELEM:"_cafe_paste_temp",NodeTypes:f,NodeNames:g,SupportImageType:h,SupportImageExtension:i,SupportImageExtensionAll:j,EDITOR_MIN_HEIGHT:100,INDENT_MARGIN:"20px",INDENT_STYLE:"margin-left",DEFAULT_FONT_SIZE:"10pt",DEFAULT_FONT_FAMILY:"'\\AD74 \\B9BC ', Gulim, Arial",DEFAULT_LINE_HEIGHT:"1.2",DEFAULT_FONT_FAMILY_JS:"'굴림', Gulim, Arial",BlockElements:k,ForeignElements:m,FormElements:l,HeadElements:n,HTMLElements:y,IgnoreHeadElements:o,InlineElements:s,StyleElementsStr:p,StyleElements:q,InvalidAttributes:r,LineElementsStr:u,LineBlockElements:t,LineElementsArr:d(t),LineBreakElements:z,SelfCloseElements:v,SVGElements:w,TAB_COUNT:8,VoidElements:x,DIV_CLASS:"cui-div",keys:d,toMap:c,INDENT_STRING:"    ",ButtonTypes:A,USERDATA_ATTRIBUTE_NAME:"data-cafe-userdata",NoImageData:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==",ComputedStyles:C,NodeStyles:D,DefaultImageSize:G,DefaultFontFormats:H,BASE64_ENCRIPTION_KEY:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",UNICODE_CHAR_CODE:B}}),d("utilities/ScriptLoader",["jqueryCafe"],function(a){function b(){var a=this;a.queue=[],a.queueLoadedCallback={},a.queueState={}}return b.prototype={loadScript:function(b,c){function d(){a(e).remove(),e.onreadystatechange=e.onload=e.onerror=e=null,c()}var e,f;e=document.createElement("script"),e.type="text/javascript",e.async=!0,e.src=b,e.readyState?e.onreadystatechange=function(){"loaded"!==e.readyState&&"complete"!==e.readyState||d()}:e.onload=function(){d()},e.onerror=function(){d()},f=document.getElementsByTagName("head")[0],f.appendChild(e)},addQueue:function(a,b){var c=this;c.queueState[a]||(c.queue.push(a),c.queueState[a]="QUEUE","function"==typeof b&&(c.queueLoadedCallback[a]=b))},loadScripts:function(b){function c(c){g.loadScript(c,function(){var d=a.inArray(c,g.queue);d!==-1&&g.queue.splice(d,1),g.queueState[c]="LOADED",g.queueLoadedCallback[c]&&g.queueLoadedCallback[c].call(g),g.loadScripts(b)})}var d,e,f,g=this;if(f=g.queue.length)for(e=0;e<f;e++){if(d=g.queue[e],"QUEUE"===g.queueState[d]){g.queueState[d]="LOADING",c(d),g.loadScripts(b);break}e===f&&g.loadScripts(b)}else"function"==typeof b&&b.call()},loadQueue:function(a){this.loadScripts(a)},loadContentAjax:function(b,c,d){b&&c&&a.ajax({url:b,async:!1,timeout:2e3,error:function(c,e){console&&console.log&&console.log("loading failed["+e+"]: "+b),d&&a.isFunction(d)&&d(c,e)},complete:function(a,b){c("success"===b?a.responseText:"")}})}},b}),d("utilities/UnitConverter",["jqueryCafe"],function(a){function b(){var a,b,c,d;return a=document.getElementsByTagName("body")[0],b=document.createElement("DIV"),b.setAttribute("id","_elem"),b.style.width="1in",b.style.height="1cm",b.style.left="-100%",a.appendChild(b),c=window.getComputedStyle(b),d=c.width,n=parseFloat(d),o=parseFloat(c.height),o=Math.ceil(100*o)/100,a.removeChild(b),n}function c(){return n===-1&&(n=b()),n}function d(){return o===-1&&b(),o}function e(a,b){var c,d;return c=parseFloat(a),b=b||2,d=Math.pow(10,b),parseInt(c*d,10)/d}function f(a,b){var d,f;return(b||/px$/i.test(p(a)))&&(d=parseFloat(a),f=d*(q/c()),f=e(f,0)),f}function g(a,b){var d,f;return(b||/pt$/i.test(p(a)))&&(d=parseFloat(a),f=d*c()/q,f=e(f,0)),f}function h(a,b){var d,f;return(b||/in(?:ch)?$/i.test(p(a)))&&(d=parseFloat(a),f=d*c(),f=e(f,0)),f}function i(a,b){var d,f;return(b||/cm$/i.test(p(a)))&&(d=parseFloat(a),f=d*r*c(),f=e(f,2)),f}function j(a,b){var d,f;return(b||/px$/i.test(p(a)))&&(f=parseFloat(a),d=f/c(),d=e(d,2)),d}function k(a,b){var c,f;return(b||/px$/i.test(p(a)))&&(f=parseFloat(a),c=f/d(),c=e(c,2)),c}function l(a){var b;return a=p(a),/pt$/i.test(a)?b=g(a,!0):/in(?:ch)?$/i.test(a)?b=h(a,!0):/cm$/i.test(a)?b=i(a,!0):/px$/i.test(a)&&(b=a),b}function m(a){return!!/(em|ex|ch|rem|vw|vh|vmin|vmax|%)$/i.test(p(a))}var n=-1,o=-1,p=a.trim,q=72,r=.393701;return{getDPI:c,toPX:l,convertPXToPT:f,convertINToPX:h,convertPTToPX:g,convertCMToPX:i,convertPXToIN:j,convertPXToCM:k,isRelativeLengthUnit:m}}),d("utilities/StyleParser",["jqueryCafe","utilities/UnitConverter"],function(a,b){function c(a){return a=o(a),/^[a-z]+[A-Z][a-z]+$/.test(a)&&(a=a.replace(/(.)([A-Z])/g,"$1-$2")),a.toLowerCase()}function d(a){var b=r.toPX(a);return b&&(b=b>0&&b<1?1:b,b+="px"),b}function e(a,b){var c,d=!1;return c=t[a],c&&q(b,c)!==-1&&(d=!0),d}function f(a){var b=a.split(/\s/),c=[b[0],b[0],b[0],b[0]];return b[1]&&(c[1]=b[1],c[3]=b[1]),b[2]&&(c[2]=b[2]),b[3]&&(c[3]=b[3]),c}function g(a,b,c){for(var d=["-top","-right","-bottom","-left"],e=d.length;e--;)a[b+d[e]]||(a[b+d[e]]=c[e])}function h(a){for(var b,c={},d=a.length;d--;)b=a[d],"string"==typeof b&&(b=b.toLowerCase(),c[b]=!0);return c}function i(a,b){var c,d=[],e="border-"+b;return a[e+"-size"]&&d.push(a[e+"-size"]),a[e+"-style"]&&d.push(a[e+"-style"]),a[e+"-color"]&&d.push(a[e+"-color"]),3===d.length&&(c=d.join(" "),a[e]||(a[e]=c),delete a[e+"-size"],delete a[e+"-style"],delete a[e+"-color"]),c}function j(a){i(a,"top"),i(a,"right"),i(a,"bottom"),i(a,"left")}function k(a,b,c){var d,e="border-"+b;d=a[e],d||(a[e]=c)}function l(a){var b=a.border;b&&"none"!==b&&(k(a,"top",b),k(a,"right",b),k(a,"bottom",b),k(a,"left",b),delete a.border)}function m(a,b){var d,e,f,g,h,i={};for(a+=";";a.length>0;)d=a.indexOf(";"),f=a.substring(0,d),/url\s*\(/i.test(f)&&(e=a.indexOf(")"),e!==-1&&e>d&&(e=a.indexOf(";",e),f=a.substring(0,e+1),d=e)),e=f.indexOf(":"),e!==-1&&(g=c(o(f.substring(0,e))),h=o(f.substring(e+1)),b||(h=h?h.toLowerCase():""),i[g]=h),a=a.substring(d+1);return i}function n(a,b){var c,e,f,g,h,i="(?:\\s|^)(?:-)?\\d*(?:\\.\\d+)?\\s*(?:pt|in|cm)($|[^a-z])",j=new RegExp(i,"gi"),k=new RegExp(i,"i");switch(/^border/i.test(a)&&/hairline/i.test(b)&&(b=b.replace(/hairline/i,"dotted")),/windowtext/i.test(b)&&(b=b.replace(/windowtext/i,"#000000")),a){case"border":case"border-left":case"border-right":case"border-top":case"border-bottom":case"border-left-style":case"border-right-style":case"border-top-style":case"border-bottom-style":case"border-left-width":case"border-right-width":case"border-top-width":case"border-bottom-width":case"height":case"margin-left":case"margin-right":case"margin-bottom":case"margin-top":case"text-indent":case"width":e=j.exec(b),e?(f=d(e[0]),c=b.replace(e[0]," "+f+" ")):c=b;break;case"border-width":case"margin":case"padding":for(e=b.split(/\s/),g=e.length,c=[],h=0;h<g;h++)k.test(e[h])&&(e[h]=d(e[h])),c.push(e[h]);c=0!==g?c.join(" "):b;break;case"font-weight":c=parseInt(b,10)>=700?"bold":b;break;default:c=b}return c}var o=a.trim,p=a.extend,q=a.inArray,r=b,s={"text-decoration":!0},t={"background-color":["transparent"],"font-weight":["normal","400"],"font-size":["medium"],"font-style":["normal"],"text-decoration":["none"]};return{parse:function(b,c){var d,i,k,o,p,q,r,t={},u=[],v=!1,w=!1,x=!1,y=!1;if(c?(u=c.styles||u,v=c.opType||v,w=c.useCompressIndent||!1,x=c.useCompressBorderDirection||!1,y=c.useDecompressBorder||!1):c={},!b||!a.isArray(u))return t;x&&(u=u.concat(["border-left-color","border-right-color","border-top-color","border-bottom-color","border-left-style","border-right-style","border-top-style","border-bottom-style","border-left-width","border-right-width","border-top-width","border-bottom-width","border-style","border-color","border-width"])),r=h(u),o=m(b,c.plain||!1);for(p in o)q=o[p],p.length>0&&q.length>0&&(!!r[p]^v||e(p,q)||(t[p]&&s[p]?t[p]+=" "+q:t[p]=q,t[p]=n(p,t[p])));return t.margin&&(k=f(t.margin),g(t,"margin",k),delete t.margin),t.padding&&(k=f(t.padding),g(t,"padding",k),delete t.padding),w&&(d=t["text-indent"],i=t["margin-left"],d&&i&&(t["margin-left"]=parseInt(d,10)+parseInt(i,10)+"px",delete t["text-indent"])),x&&j(t),y&&l(t),t},serialize:function(b,d){var e,f,g,i,j="",k="",l="",m=[],n=!1;if(d&&(m=d.styles||m,n=d.opType||n,k=d.prefix||k,l=d.suffix||l,i=d.plain||!1),!b||!a.isArray(m))return j;e=h(m);for(f in b)g=o(b[f]),g&&g.length>0&&(!i&&!!e[f]^n||(j+=k+c(f)+":"+g+";"+l));return j},mergeStyle:function(a,b,c){var d,e,f={};return c?(d=a,e=b):(d=b,e=a),p(f,d,e),f}}}),d("utilities/CSSParser",["jqueryCafe","utilities/StyleParser"],function(a,b){function c(a){var b,c,d,e,f,g=/<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gi;if(b=a.match(g))for(d="",f=b.length,c=0;c<f;c++)e=b[c],d+=e.replace(/<[\/]{0,1}(style)[^><]*>/gi,"");return d}function d(a){for(var b,c;(b=a.indexOf("/*"))!==-1;)c=a.indexOf("*/",b),a=e(a,b,c,2);return a=a.replace(/<!--/g,"").replace(/-->/g,"")}function e(a,b,c,d){var e,f;return e=a.substring(0,b),f=a.substring(c+d,a.length),e+f}function f(a){return a.replace(/@(?:[^{\;])+{(?:[^}])*}/gim,"")}function g(a){return a=a.replace(/mso-(?:[^;])+;(?:\\@\"\;)?/gi,""),a=a.replace(/\s*(\n|\r\n)$/gm,"")}function h(a,b){var c,d,e,f=a.indexOf("#");if(f!==-1){for(c=a.split(","),e=c.length,a=[];e--;)d=c[e],d.indexOf("#")===-1&&"_:-ms-lang(x)"!==q(d)||a.push(d);a=a.join(",")}return a=a.replace(/\n/gi,""),b&&(a=a.replace(/[\s\uFEFF\xA0]+,/gi,",")),q(a)}function i(a,b){return r.parse(a,b)}function j(a){var b;return b=/^\.(?:\w)+$/i.test(a)?"class":/^(?:\w)+$/i.test(a)?"tag":/^\#(?:\w)+$/i.test(a)?"id":"complex"}function k(a){var b,c,d,e=a.replace(/\s{2,}/," ").split(/\s/),f=e.length;for(d=j(e[0]),b=1;b<f&&"complex"!==d;b++)if(c=j(e[b]),d!==c){d="complex";break}return d}function l(b,c){var d,e,f,g,j,l,m,n,o={},t=0;for(c=c?a.extend({},s,c):s,e=b.split("}"),g=e.length,c.typeCheck&&(o.___types={class:[],complex:[],id:[],tag:[]});g--;)f=e[g],m=f.split("{"),j=h(m[0],c.trimSpace),l=q(m[1]),j.length>0&&l.length>0&&(d=i(l,c),o[j]?o[j]=r.mergeStyle(o[j],d):(o[j]=d,p.push(j),t++),c.typeCheck&&(n=k(j),o.___types[n].push(j)));return o.___seq=p,o.length=t,o}function m(a){var b,c,d,e,f,g,h={};for(b=a.split(/\s*\}\s*/gm),c=b.length;c--;)if(g=b[c],""!==g){if(d=g.split(/\s*\{\s*/gm),e=q(d[0]),f=q(d[1]),""!==f&&f.indexOf(":")===-1)return!1;e.length>0&&f.length>0&&(h[e]?h[e]=f+(/;$/.test(f)?"":";")+h[e]:(h[e]=f,p.push(e)))}return h.___seq=p,h}function n(a,b,e){var h,i;return b=b||{},p=[],h=e?a:c(a),h&&(h=d(h),h=f(h),b.usePlainParse?i=m(h):(h=g(h),i=l(h,b))),i}function o(b,c,d){var e,f,g,h="",i={plain:!1,prefix:"\t",rename:!1,suffix:"\n"};if(c&&(i=a.extend({},i,c)),d||(i.rename=!1),b.___seq)for(f=b.___seq.length;f--;)e=b.___seq[f],g=b[e],h+=i.rename?d[e]+" {\n"+b[e]+"}\n":e+" {\n"+r.serialize(g,i)+"}\n";else for(e in b)/^(?:length|___types|___seq)/i.test(e)||(g=b[e],h+=e+" {\n"+r.serialize(g,i)+"}\n");return h}var p,q=a.trim,r=b,s={unitconvert_properties:!0,compress:!0,typeCheck:!1,trimSpace:!1};return{parse:n,serialize:o}}),d("utilities/HTMLFilter",["jqueryCafe","utilities/EditorConstants","utilities/CSSParser"],function(a,c,d){function e(k,l){function m(a,b,c){return a.replace(b,function(a,b,d){var e,f=a,g=a.length;return e=d.substring(b+g),/<\!\[\s*endif\s*\]\-\->/gim.test(e)?f:(/^\s*-->/.test(e)?c&&(D=!0):f="<!--"+f+"-->",f)})}function n(){var a,b,c={};for(a in y)p(a)||(b=y[a],q(b,c))}function o(a,b){var c,d,e,f=0;for(f=0,c=a.length;f<c;f++)d=a[f].toLowerCase(),!b[d]&&y[d]&&(p(d)||(e=y[d],q(e,b)))}function p(b){return a.inArray(b,z)!==-1}function q(a,b){var c=a.id,d=a.dependencies;b[c]=!0,o(d,b),z.push(c)}function r(a){var b,c,d,e;for(b=a.find("[data-cafe-filter]"),d=b.length;d--;)switch(c=b.eq(d),e=c.attr("data-cafe-filter").toLowerCase()){case"remove":c.remove();break;case"unwrap":/^(?:P|H[1-6])$/i.test(c[0].nodeName)?c[0].removeAttribute("data-cafe-filter"):c.replaceWith(c[0].childNodes);break;case"pagebreak":c.attr("contenteditable","false");break;case"image":c.css("display","inline-block").css("visibility","visible").attr("unselectable","on").removeAttr("data-cui-selected").removeAttr("data-cafe-filter").removeAttr("data-cui-id"),c.css("border-top-width")||c.css("border-width","0px")}}function s(a){var b,c,d;for(b=a.find("[data-cui-filter]"),d=b.length;d--;)c=b.eq(d),c.removeAttr("data-cui-filter")}function t(a){a.find("table[data-cui-selected=true], th[data-cui-selected=true], td[data-cui-selected=true]").removeAttr("data-cui-selected")}var u,v,w=this,x=k||{},y={},z=[],A=[],B=!0,C=!1,D=!1;v=h(x.invalid_elements||g),v=v.split(f),u=x.useDefalutFilter===b||k.useDefalutFilter,w.filter=function(a,b){var c,d;return c=a,c&&(c=w.trimContent(c),d=w.parse(c),c=b?d:w.toString(d)),c},w.extractHeadComments=function(a){var b,c=/<head\b[^<]*(?:(?!<\/head>)<[^<]*)*<\/head>/gim,d=/<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gim,e={comments:[],contents:null},f="__CUI_TEMP_STYLE_",g=[];for(a=a.replace(d,function(a){var b=g.length;return g.push(a),f+b+"__"}),e.contents=a.replace(c,function(a){var b=a.replace(/<!--((?:.|\s)*?)-->/gi,function(a,b){var c,d;return/__CUI_TEMP_STYLE_/.test(b)&&(c=b.match(/__CUI_TEMP_STYLE_(\d+)__/),c[1]&&(d=parseInt(c[1],10),b=b.replace(f+d+"__",g[d]))),e.comments.push(b),""});return b}),b=g.length;b--;)e.contents=e.contents.replace(f+b+"__",g[b]);return e},w.trimContent=function(a){var b,c,d,e=a,f=v.length;for("object"==typeof a&&a.html&&(e=a.html()),C=!1;f--;)D=!1,b=v[f],/meta/i.test(b)||(c=new RegExp("<"+b+"\\b[^<]*(?:(?!<\\/"+b+">)<[^<]*)*<\\/"+b+">","gim"),d=m(e,c,!0),e!==d||D||(c=new RegExp("<"+b+"\\b[^<]*?>","gim"),d=m(e,c,!1)),e!==d&&(e=d,C=!0));return e=e.replace(/<img\b[^>]*>/gi,function(a){var b=/src(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/i.exec(a);return b&&b[1]&&/^cid:/i.test(b[1])&&(a=a.replace(b[0],"")),a})},w.colgroupFilter=function(a){return/<colgroup\b[^>]*>/i.test(a)&&!/<\/colgroup\>/i.test(a)&&(a=a.replace(/<colgroup>(?:<col\b[^>]*>\s*)+/gi,function(a){return a+"</colgroup>"})),/<col\b[^>]*>/i.test(a)&&(a=a.replace(/<col\b[^>]*>/gi,function(a){var b,c,d="",e=a.match(/span\s*=\s*[\'\"]?(\d+)[\'\"]?/i);if(e&&e[1])for(b=parseInt(e[1],10),c=a.replace(e[0],"");b--;)d+=c;else d=a;return d})),a},w.parseDom=function(a){var b,c,d;for(B&&w.initFilters(),c=0,b=z.length;c<b;c++)d=y[z[c]],d.action&&d.action(a);if(u&&A.length>0)for(c=0,b=A.length;c<b;c++)A[c](a,"raw");return a},w.filterNoAttributeSpanWithPseudoClass=function(b){var e,f,g,h,i,j,k,l,m,n=[],o=a("style",b);if(!o||0===o.length)return b;for(f=0;f<o.length;f++){g=d.parse(o[f].outerHTML,{
usePlainParse:!0});for(i in g)for(j=i.trim().split(","),e=0;e<j.length;e++)h=j[e].trim(),h&&h.indexOf(":")>-1&&n.push(h)}for(f=0;f<n.length;f++)try{for(m=n[f],l=b[0].querySelectorAll(m),e=0;e<l.length;e++)k=l[e],k.nodeType===c.NodeTypes.ELEM_NODE&&"SPAN"===k.nodeName&&0===k.attributes.length&&k.setAttribute(c.USERDATA_ATTRIBUTE_NAME,!0)}catch(a){}return b},w.filterEventAttributes=function(a){return l&&l.ie?(a=a.replace(/<[^>]*(onerror)\s*=\s*/gi,function(a){return a.replace(arguments[1],"data-cui-filter")}),a=a.replace(/<[^>]*(onload)\s*=\s*/gi,function(a){return a.replace(arguments[1],"data-cui-filter")})):a=a.replace(/<[^\/][^>]+>/gi,function(a){return a.replace(/(?:onerror|onload)\s*=\s*/gi,"data-cui-filter=")}),a},w.parse=function(b,c){var d,e,f,g,h,i={};if(f=a('<xbody data-cui-filter="true" ></xbody>'),"string"==typeof b)b=w.filterEventAttributes(b),f.append(j(b));else{if("object"!=typeof b||!b[0])return f;b.jquery?(f.remove(),f=b):(h="BODY"===b[0].nodeName?b[0].childNodes:b[0],f.append(h))}for(f=w.filterNoAttributeSpanWithPseudoClass(f),B&&w.initFilters(),e=0,d=z.length;e<d;e++)g=y[z[e]],g.action&&g.action(f,c,i);if(u&&A.length>0)for(e=0,d=A.length;e<d;e++)A[e](f,c);return i.hasInvalid&&(C=i.hasInvalid),f},w.toString=function(a,b){var d="";return"object"==typeof a&&a.html?d='<body id="'+c.CONTENTS_ID+'"'+(b||"")+">"+h(a.html())+"</body>":"string"==typeof a&&(d=a),d},w.addFilter=function(a,b,c){if(a){if(B=!0,i(a))return void A.push(a);!c&&i(b)&&(c=b,b=[]),null===b&&i(c)&&(b=[]),a=a.toLowerCase(),y[a]={id:a,dependencies:b,action:c}}},w.initFilters=function(){return B&&(z=[],n(),B=!1),z},w.clearFilter=function(){y={},B=!0},w.clone=function(){var a,b=new e(x);for(a in y)b.addFilter(a.id,a.dependencies,a.action);return b},w.getFilterCount=function(){var a,b=0;for(a in y)b++;return b},w.refresh=function(){z=[],B=!0,w.initFilters()},w.hasInvalid=function(){return C},w.addFilter(r),w.addFilter(s),w.addFilter(t)}var f=/(?:\s|\,)+/,g="script",h=a.trim,i=a.isFunction,j=a.parseHTML;return e}),d("utilities/NodeTracker",[],function(){return function(a,b){function c(a,b,c){var d,f;if(a){if(a[c])return a[c];if(a!==e){if(d=a[b])return d;for(f=a.parentNode;f&&f!==e;f=f.parentNode)if(d=f[b])return d}}}var d=a,e=b;this.current=function(a){return a&&(d=a),d},this.next=function(){return d=c(d,"nextSibling","firstChild")},this.nextSibling=function(){return d=d.nextSibling},this.prev=function(){return d=c(d,"previousSibling","lastChild")},this.prevSibling=function(){return d=d.previousSibling}}}),d("utilities/RuleSet",["jqueryCafe","utilities/EditorConstants","utilities/NodeTracker"],function(a,c,d){function e(a){this.init(a||{}),this.formElements=c.FormElements}function f(a,c){return a===b?c||!1:a}var g,h,i,j,k,l,m,n,o,p,q,r,s,t=c.toMap,u=c.NodeTypes,v="class, style, title";return i="font,#text",g="script,frameset,frame,svg,base,basefont,bgsound,link,meta,noframes,script,style,template,title,form,input,option,optgroup,select,button,datalist,textarea",h="onafterprint,onanimationcancel,onanimationend,onanimationiteration,onbeforeinstallprompt,onbeforeprint,onbeforeunload,onblur,oncopy,oncut,ondeviceorientationabsolute,onDOMContentLoaded,onerror,onfocus,ongamepadconnected,onhashchange,onlanguagechange,onload,onmessage,onmessageerror,onoffline,ononline,onorientationchange,onpagehide,onpageshow,onpaste,onpopstate,onrejectionhandled,onstorage,ontransitioncancel,onunhandledrejection,onunload,onvrdisplayconnect,onvrdisplaydisconnect,onvrdisplaypresentchange,ondragdrop,onvrdisplayactivate,onvrdisplayblur,onvrdisplayconnect,onvrdisplaydeactivate,onvrdisplaydisconnect,onvrdisplayfocus,onvrdisplaypointerrestricted,onvrdisplaypointerunrestricted,onvrdisplaypresentchange,onoffline,ononline,onafterscriptexecute,onanimationcancel,onanimationend,onanimationiteration,onanimationstart,onbeforescriptexecute,oncopy,oncut,onDOMContentLoaded,ondrag,ondragend,ondragenter,ondragleave,ondragover,ondragstart,ondrop,onfullscreenchange,onfullscreenerror,ongotpointercapture,onkeydown,onkeypress,onkeyup,onlostpointercapture,onpaste,onpointercancel,onpointerdown,onpointerenter,onpointerleave,onpointerlockchange,onpointerlockerror,onpointermove,onpointerout,onpointerover,onpointerup,onreadystatechange,onscroll,onselectionchange,onselectstart,ontouchcancel,ontouchend,ontouchmove,ontouchstart,ontransitioncancel,ontransitionend,ontransitionrun,ontransitionstart,onvisibilitychange,onwheel,onafterscriptexecute,onauxclick,onblur,onclick,oncompositionend,oncompositionstart,oncompositionupdate,oncontextmenu,oncopy,oncut,ondblclick,onDOMActivate,onDOMMouseScroll,onerror,onfocus,onfocusin,onfocusout,onfullscreenchange,onfullscreenerror,ongesturechange,ongestureend,ongesturestart,onkeydown,onkeypress,onkeyup,onmousedown,onmouseenter,onmouseleave,onmousemove,onmouseout,onmouseover,onmouseup,onmousewheel,onMozMousePixelScroll,onmsContentZoom,onMSGestureChange,onMSGestureEnd,onMSGestureHold,onMSGestureStart,onMSGestureTap,onMSInertiaStart,onMSManipulationStateChanged,onpaste,onscroll,onsecuritypolicyviolation,onselect,onshow,ontouchcancel,ontouchend,ontouchmove,ontouchstart,onwebkitmouseforcechanged,onwebkitmouseforcedown,onwebkitmouseforceup,onwebkitmouseforcewillbegin,onwheel,tabindex,contenteditable",k="a,b,br,cite,del,dfn,em,embed,i,img,ins,kbd,label,mark,s,samp,small,span,strong,strike,sub,sup,u,#text,#comment",j="li:ul,dt:dl,dd:dl",l="P",m="audio,bgsound,base,embed,iframe,meta,object,param,progress,source,title,track,video,noframes,script,style,template,title",n="base,bgsound,link,meta,noframes,style,template,title",o="applet,basefont,big,button,canvas,caption,datalist,dialog,figcaption,form,frame,frameset,input,keygen,menu,menuitem,meter,noframes,noscript,optgroup,option,output,rp,rt,ruby,select,textarea,time,tt,wbr",p="abbr,acronym,address,article,aside,bdi,bdo,center,code,details,figure,footer,header,kbd,main,nav,pre,q,samp,section,tfoot",q="applet,canvas,embed,iframe,object,svg",s="acronym,cite,del,dfn,dir,ins,summary,var,strong,b,i,em,sub,sup,strike,u",r="",e.prototype={settings:{},schema:{},init:function(b){var d=this;b=b||{},d.applySchema=f(b.apply_schema),d.removeComments=f(b.remove_comments),d.removeEmptyElement=f(b.remove_empty_element),d.removeHiddenElements=f(b.remove_hidden_elements),d.gatherHeadElement=f(b.gather_head_element),d.useCombineElement=f(b.use_combine_element),d.forceInsertTdchild=f(b.force_insert_tdchild,!1),d.useSingleLineElements=f(b.use_singleline_element),d.combineElements=t(f(b.combine_elements,i)),d.componentElements=t(f(b.component_elements,j)),d.invalidElements=t(f(b.invalid_elements,g)),d.invalidAttributes=t(f(b.invalid_attributes,h),!1),d.removeEmptyElements=t(f(b.remove_empty_elements,s)),d.commentElements=t(f(b.comment_elements,m)),d.moveElements=t(f(b.move_elements,n)),d.unwrapElements=t(f(b.unwrap_elements,p)),d.removeElements=t(f(b.remove_elements,o)),d.unsupprtedElements=t(f(b.unsupported_elements,q)),d.notifyElements=t(f(b.notify_elements,"script")),d.contentsElements=t(k+",map"),d.schema={},d.replaceMap={},d.appendEmptylinAtLast=b.append_emptyline_at_last,d.oldIE=b.old_ms_ie||!1,d.ie=b.ms_ie||!1,d.new_line_without_blank=b.new_line_without_blank||!1,d.blockquote=b.allow_blockquote?",blockquote":"",d.enable_object_contents=b.enable_object_contents,d.addRule=function(b,c,e,f){var g,h,i,j={};for(c=c||"",j.validAttributes=t((v+", "+c).toLowerCase()),"string"==typeof e&&(j.validChild=t(e.toUpperCase())),null===f?j.defaultChild=null:j.defaultChild=(f||"span").toUpperCase(),g=b.toUpperCase().split(/[\s,]+/),h=0,i=g.length;h<i;h++)d.schema[g[h]]=a.extend({},j)},d.addReplaceTag=function(a,b,c){var e={to:b.toUpperCase(),handle:c};d.replaceMap[a.toUpperCase()]=e},d.addRule("body, xbody","","h1,h2,h3,h4,h5,h6,hr,ol,p,table,ul,dl,fieldset"+d.blockquote,"p"),d.addRule("h1,h2,h3,h4,h5,h6,p,li,legend","",k+", map"),d.addRule("map","","area"),d.addRule("ol","reversed,start,type","h1,h2,h3,h4,h5,h6,li,ol,p,ul,dl,table,fieldset"),d.addRule("ul","","h1,h2,h3,h4,h5,h6,li,ol,p,ul,table,fieldset"),d.addRule("dt,dd,li","style,class",k+",hr,ol,ul,table"),d.blockquote&&d.addRule("blockquote","","h1,h2,h3,h4,h5,h6,ol,p,table,ul,dl,blockquote","p"),d.addRule("dl","style,class","dt,dd"),d.addRule("table","width, height, border, bordercolor, cellspacing, cellpadding","caption, colgroup, thead, tfoot, tbody, tr, col",null),d.addRule("colgroup","","col",null),d.addRule("tbody, thead, tfoot","","tr",null),d.addRule("tr","colspan,rowspan,height","td, th",null),d.addRule("td","colspan,rowspan,width","h1,h2,h3,h4,h5,h6,p,table,ul,ol,dl,fieldset"+d.blockquote,"p"),d.addRule("th","colspan,rowspan,width","h1,h2,h3,h4,h5,h6,p,table,ul,ol,dl,fieldset"+d.blockquote,"p"),d.addRule("a","href,target,rel,media,hreflang,type",k),d.addRule(k,"",k,null),d.addRule("span","",k+",map"),d.addRule("fieldset","",k+",h1,h2,h3,h4,h5,h6,ol,p,table,ul,dl,legend"),d.enable_object_contents||d.addRule("object","name, type, usemap, width, hieght","param",null),d.addReplaceTag("acronym","abbr"),d.addReplaceTag("cite","em"),d.addReplaceTag("del","strike"),d.addReplaceTag("dfn","em"),d.addReplaceTag("dir","ul"),d.addReplaceTag("ins","u"),d.addReplaceTag("summary","p"),d.addReplaceTag("label","span"),d.addReplaceTag("var","em"),d.addReplaceTag("font","span",function(a,b){var c,d,e,f,g,h="";if(g=b||a,d=a.getAttribute("size")){switch(parseInt(d,10)){case 1:d="7.5pt";break;case 2:d="9pt";break;case 3:d="12pt";break;case 4:d="13.5pt";break;case 5:d="18pt";break;case 6:d="24pt";break;default:d="36pt"}h=h+"font-size: "+d+";",g.removeAttribute("size")}return e=a.getAttribute("color"),e&&(h=h+"color: "+e+";",g.removeAttribute("color")),f=a.getAttribute("face"),f&&(h=h+"font-family: "+f+";",g.removeAttribute("face")),c=a.getAttribute("style"),c&&c.length>0&&(h+=c),g.setAttribute("style",h),g}),d.addReplaceTag("div","table",function(a,b,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s="",t=new RegExp("[^;]*;","gi");for(b||(b=d.createNode("table"),d.afterNode(a,b)),j=b.attributes,h=d.createNode("colgroup"),b.appendChild(h),i=d.createNode("col"),h.appendChild(i),e=d.createNode("tbody"),b.appendChild(e),f=d.createNode("tr"),e.appendChild(f),g=d.createNode("td"),f.appendChild(g),n=j.length;n--;){if(k=j[n],"string"==typeof k)l=k,m=b.getAttribute(l);else if(l=k.name,m=k.value,"style"===l)for(m&&!/\;\s*$/.test(m)&&(m+=";"),p=m.match(t),q=p?p.length:0,m="",r=0;r<q;r++)o=p[r],o.indexOf("orphans")<0&&o.indexOf("text-align")<0&&(m+=o+" ");g.setAttribute(l,m),"class"!==l&&b.removeAttribute(l)}for(s=b.getAttribute("class")||"",g.setAttribute("class",s),g.classList.add("cui-div-cell"),b.setAttribute("class",c.DIV_CLASS);a.firstChild;)g.appendChild(a.firstChild);return g})},getElementRule:function(a){var b,c=this;return a=a.toUpperCase(),b=c.schema[a]||{}},getAttributeRule:function(a){var b,c=this;return b=c.getElementRule(a),b.validAttributes},getComponentParent:function(a){var b,c=this;return a?(b=c.componentElements[a.toUpperCase()],b||l):l},getDefaultChild:function(a){var b,c=this;return b=c.getElementRule(a),b.defaultChild},getInvalidStyles:function(){return["float"]},isInvalidElement:function(a){var b=this.invalidElements[a.toUpperCase()];return!b&&/\:/i.test(a)&&(b=!0),b},isNotifyElement:function(a){return this.notifyElements[a.toUpperCase()]},isNotifyAttributes:function(a){return this.invalidAttributes[a.toLowerCase()]},isInvalidAttributes:function(a,c){var d=this.invalidAttributes[a.toLowerCase()];return d=d!==b&&d,!/([-A-Za-z0-9_]+)/i.test(a)||!(!d&&/^data\-/i.test(a))&&((!/contenteditable/i.test(a)||!/false/i.test(c))&&((!/tabindex/i.test(a)||!/^\-/.test(c))&&d))},removeHTMLTagAttributes:function(b,e){var f,g,h,i,j,k=b.attributes,l=!1,m=b;for(k["data-cui-media-source"]&&(l=!0,g=k["data-cui-media-source"].nodeValue,m=a.parseHTML(g)[0],i=new d(m)),j=m;l&&j&&j.nodeType!==u.TEXT_NODE;)if(j=this.removeQuotInAttribute(j),j.getAttribute("src")?h="src":j.getAttribute("data")&&(h="data"),h){if(g=j.getAttribute(h),g=g.replace(/\"/g,""),/data:text\/html/.test(g)&&(/base64/.test(g)&&(g=g.replace("data:text/html;base64,",""),g=this.base64Decoder(g)),/%3C/.test(g)&&(g=g.replace("data:text/html,",""),g=decodeURIComponent(g))),f=g.replace(/<[^>]*>?/g,""),g!==f&&(g=f,e.hasInvalidAttribute=!0),j.nodeName===c.NodeNames.IFRAME)for(;g.search(/javascript:/gi)!==-1;)g=g.replace(/javascript:/gi,"");""===g?j.removeAttribute(h):a(j).attr(h,g),j=i.next()}else j=i.next();return m=this.removeQuotInAttribute(m),m=a(m).prop("outerHTML"),l&&a(b).attr("data-cui-media-source",m),b},removeQuotInAttribute:function(a){var b;for(b=0;b<a.attributes.length;b++)a.setAttribute(a.attributes[b].name,a.attributes[b].value.replace(/\"/gi,""));return a},base64Decoder:function(a){var b="";if(window.atob)try{b=window.atob(a)}catch(c){b=this._base64Decoder(a)}else b=this._base64Decoder(a);return b},_base64Decoder:function(a){var b,d,e,f,g,h,i,j="",k=0,l=c.BASE64_ENCRIPTION_KEY;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");k<a.length;)f=l.indexOf(a.charAt(k++)),g=l.indexOf(a.charAt(k++)),h=l.indexOf(a.charAt(k++)),i=l.indexOf(a.charAt(k++)),b=f<<2|g>>4,d=(15&g)<<4|h>>2,e=(3&h)<<6|i,j+=String.fromCharCode(b),64!==h&&(j+=String.fromCharCode(d)),64!==i&&(j+=String.fromCharCode(e));return j},isValid:function(a){var b=this,c=a.parentNode;return!!b.isValidChild(c,a)&&!b.schema.invalid_elems[a.nodeName]},isCommentElement:function(a){var b=this;return b.commentElements[a]},isComponentElement:function(a){var b=this;return b.componentElements[a]},isMovableElement:function(a){var b=this;return b.moveElements[a]},isOfficeElement:function(a){return/^\w[\d\w]*\:\w+/i.test(a)},isReplace:function(a){return this.replaceMap[a.toUpperCase()]},isRemoveElement:function(a){return this.removeElements[a.toUpperCase()]},isRemoveEmptyElement:function(a){return this.removeEmptyElements[a.toUpperCase()]},isUnsupportedElement:function(a){return this.unsupprtedElements[a.toUpperCase()]},isUnwrapElement:function(a){return this.unwrapElements[a.toUpperCase()]},replaceNode:function(a,b){var c,d,e,f,g,h,i,j,k,l=this,m=a.nodeName,n=l.replaceMap[m];if(n)if(a.ownerDocument){for(c=a.ownerDocument.createElement(n.to),f=a.attributes,h=0,g=f.length;h<g;h++)if(e=f[h],"string"==typeof e?(i=e,j=a.getAttribute(i)):(i=e.name,j=e.value),!l.isInvalidAttributes(i))try{c.setAttribute(i,j)}catch(a){}for(n.handle&&n.handle(a,c,b);a.firstChild;)c.appendChild(a.firstChild);d=a.parentNode||a.parentElement,d.insertBefore(c,a),d.removeChild(a),a=c}else"DIV"===a.nodeName&&(k=a),a.nodeName=n.to,n.handle&&(a=n.handle(a,null,b)),k&&k.parentNode&&k.parentNode.removeChild(k);return a},isOldIE:function(){return this.oldIE},isIE:function(){return this.ie},isCombine:function(a){return this.combineElements[a.toUpperCase()]},isStyleElement:function(a){return this.contentsElements[a.toUpperCase()]},isValidChild:function(a,b){var c,d=this;if(b.nodeType===u.COMMENT_NODE)return!0;c=d.getElementRule(a.nodeName);try{if(c&&c.validChild[b.nodeName.toUpperCase()])return!0}catch(a){return!1}return!1}},e}),d("utilities/Node",["jqueryCafe","utilities/EditorConstants","utilities/StyleParser","utilities/NodeTracker"],function(a,c,d,e){function f(a,b){this.nodeName=a,this.nodeType=b,this.nodeType===j.ELEM_NODE?(this.attributes=[],this.attrMap={},this.style={}):this.nodeType===j.TEXT_NODE&&(this.textContent="")}function g(a){for(var b="";a--;)b+=p;return b}function h(a){var b,c="";if(a){for(b in a)c+=a[b]?a[b].indexOf('"')>0?b+"='"+a[b]+"' ":b+'="'+a[b]+'" ':b+" ";c.length>0&&(c=c.substring(0,c.length-1))}return c}function i(a,b){var c,d=a.firstChild,f=[];for(c=new e(d,a);d&&d!==a;)b(d)&&f.push(d),d=c.next();return f}var j=c.NodeTypes,k=c.VoidElements,l=c.toMap("table, colgroup, col, thead, tbody, tfoot, caption, tr, th, td"),m=c.LineBlockElements,n=d,o=a("<temp></temp>"),p=c.INDENT_STRING;return f.prototype={parentNode:null,firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,isProduce:!1,append:function(a){var b=this;return a.parentNode&&a.remove(),a.parentNode=b,null===b.firstChild?b.firstChild=a:(b.lastChild.nextSibling=a,a.previousSibling=b.lastChild),b.lastChild=a,a},appendChild:function(a){return this.append(a)},after:function(a){var b=this,c=b.parentNode;return a.parentNode&&a.remove(),c.insertAfter(a,b),a},attr:function(a,c){var d,e,f,g=this,h=!1,i=!1;if(g.nodeType!==j.ELEM_NODE)return b;if(a=a?a.toLowerCase():"",a&&(c||null===c)){for(d=g.attributes.length;d--;)if(e=g.attributes[d],e.name===a){i=!0,e.value=c;break}null===c?(i&&g.attributes.splice(d,1),delete g.attrMap[a]):(i||g.attributes.push({name:a,value:c}),"style"===a&&(c.indexOf("&quot;")>-1&&(h=!0,c=c.replace(/&quot;/g,'"')),g.style=n.parse(c,{plain:!0}),c=n.serialize(g.style),h&&(c=c.replace(/\"/g,"&quot;"))),g.attrMap[a]=c)}else a&&(f=g.attrMap[a]);return f},getAttribute:function(a){return this.attr(a)},removeAttribute:function(a){return this.attr(a,null)},setAttribute:function(a,b){a&&(b||null===b)&&this.attr(a,b)},before:function(a){var b=this,c=b.parentNode;return a.parentNode&&a.remove(),c.insertBefore(a,b),a},children:function(a){for(var c,d=this,e=d.firstChild,f=[];e;)c=a===b||a===e.nodeName,c&&f.push(e),e=e.nextSibling;return f},combine:function(a,b){var c,d=this,e=d.nodeType;if(b||d.isCombinable(a))if(e===j.TEXT_NODE&&a.nodeType===e)d.textContent=d.textContent+a.textContent,a.remove();else if(e===j.ELEM_NODE){for(c=a.firstChild;c;)d.append(c),c=c.nextSibling;a.remove()}return d},isCombinable:function(a){var b,c,d,e=this;if(a.parentNode!==e.parentNode)return!1;if(e.nodeName!==a.nodeName)return!1;if(e.nextSibling!==a&&e.previousSibling!==a)return!1;if(e.nodeType===j.TEXT_NODE)return!0;if(e.nodeType!==j.ELEM_NODE)return!1;if(e.attributes.length!==a.attributes.length)return!1;for(b in e.attrMap)if(c=e.attrMap[b],d=a.attrMap[b],c!==d)return!1;return!0},css:function(a,c){var d,e=this;return e.nodeType!==j.ELEM_NODE?b:(a&&c?(e.style[a]=c,d=n.serialize(e.style),d=d.replace(/&quot;/gi,'"'),e.attrMap.style=d,d=null):a&&(d=e.style[a]),d)},clone:function(a){var b,c,d,e,g,h=this;if(b=new f(h.nodeName,h.nodeType),h.attributes)for(b.attributes=[],d=0,c=h.attributes.length;d<c;d++)e=h.attributes[d],b.attr(e.name,e.value);if(a&&(g=h.firstChild))for(;g;)b.append(g.clone(a)),g=g.nextSibling;return b},closest:function(a){var b,c,d=this,e=!1;for(a=a||m,b=d.parentNode;b&&"BODY"!==b.nodeName;){if(c=b.nodeName,a[c]){e=!0;break}b=b.parentNode}return e?b:null},getNodesByTagName:function(a){return a=a.toUpperCase(),i(this,function(b){return b.nodeName===a})},getNodesByAttr:function(a){return a=a.toLowerCase(),i(this,function(b){return!(b.nodeType!==j.ELEM_NODE||!b.attr(a))})},getNodes:function(a,b){return a=a.toUpperCase(),b=b.toLowerCase(),i(this,function(c){return!(c.nodeType!==j.ELEM_NODE||c.nodeName!==a||!c.attr[b])})},findElements:function(a,b){return i(a,b)},hasLineChildren:function(a){var b,c,d=this,f=new e(d),g=!1;for(c=f.next();c;){if(b=c.nodeName,/^(?:p|li|ol|ul|h1|h2|h3|h4|h5|h6|div)$/i.test(b)){g=!0;break}if(c===a)break;c=f.next()}return g},toCommentNode:function(){var a,b,c=this;return a=c.toString(),b=f.create("#comment",j.COMMENT_NODE),b.textContent=a,c.parentNode.insertBefore(b,c),c.remove(),b},remove:function(){var a,b=this,c=b.parentNode,d=b.nextSibling,e=b.previousSibling;if(c){switch(a=(d?2:0)+(e?1:0)){case 3:e.nextSibling=d,d.previousSibling=e;break;case 2:c.firstChild=d,d.previousSibling=null;break;case 1:c.lastChild=e,e.nextSibling=null;break;default:c.lastChild=null,c.firstChild=null}b.parentNode=null,b.nextSibling=null,b.previousSibling=null}return b},removeChild:function(a){return a?a.remove():a},replace:function(a,b){var c=this,d=c.firstChild;if(a.parent&&a.remove(),c.parentNode.insertBefore(a,c),b===!0&&d)for(;d;)a.append(d),d=d.next;return c.remove(),c},wrap:function(a){var b=this,c=b.parentNode;return"string"==typeof a&&(a=f.create(a,j.ELEM_NODE)),a.parentNode&&a.remove(),c.insertBefore(a,b),a.append(b),a},insertAfter:function(a,b){var c=this;return a.parentNode&&a.remove(),b.parentNode===c&&(b===c.lastChild?c.lastChild=a:b.nextSibling.previousSibling=a,a.previousSibling=b,a.nextSibling=b.nextSibling,b.nextSibling=a),a.parentNode=c,a},insertBefore:function(a,b){var c=this;return a.parentNode&&a.remove(),b.parentNode===c&&(b===c.firstChild?c.firstChild=a:b.previousSibling.nextSibling=a,a.previousSibling=b.previousSibling,a.nextSibling=b,b.previousSibling=a),a.parentNode=c,a},isEmpty:function(a){var c=this,d=!1,f=c.firstChild,g=new e(f,c);if(a[c.nodeName])return!1;if(c.nodeType===j.ELEM_NODE&&null===f)return!0;for(;f&&f!==c;){switch(f.nodeType){case j.ELEM_NODE:d=a[f.nodeName],d=d===b||!d,f.isInserted&&(d=!1);break;case j.TEXT_NODE:d=0===f.textContent.length;break;case j.COMMENT_NODE:d=!1}if(!d)break;f=g.next()}return d},isHidden:function(){var a=this;return!!a.attr("hidden")||(!!/hidden/i.test(a.css("visibility"))||!!/none/i.test(a.css("display")))},unwrap:function(){for(var a,b=this,c=b.firstChild;c;)a=c.nextSibling,b.parentNode.insertBefore(c,b),c=a;b.remove()},_trim:function(a){var b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;return a.replace(b,"")},toElements:function(){},toFormatString:function(a){var b,c,d,e,f=this,i="",n=!1,p="",q=f.nodeName;if(a=a||0,c=g(a),f.nodeType===j.TEXT_NODE)o.empty(),i=o.append(f.textContent).html();else if(f.nodeType===j.ELEM_NODE)if(e=h(f.attrMap),e=e.length>0?" "+e:e,i="<"+q+e,d=f.firstChild,m[q]){if(i=c+i+">",d)for(;d;)i+=d.toFormatString(a),d=d.nextSibling;i+="</"+q+">\n"}else if(l[q])if("COL"===q)i+="/>";else{if("TABLE"===q&&d&&(b=d.closest(),b&&"LI"===b.nodeName&&b===f.parentNode&&(n=!0,a++,c="\n"+g(a))),i=c+i+("COLGROUP"!==q?">\n":">"),d)for(;d;)i+=d.toFormatString(a+1),d=d.nextSibling;n&&(c=g(a),a--,p=g(a)),i+=("COLGROUP"!==q?c:"")+"</"+q+">\n"+p}else if(/^(?:UL|OL)$/i.test(q)){if("LI"===f.parentNode.nodeName?(a++,c=g(a),i="\n"+c+i+">\n"):i=c+i+">\n",d)for(;d;)i+=d.toFormatString(a+1),d=d.nextSibling;i+=c+"</"+q+">\n","LI"===f.parentNode.nodeName&&(i+=g(a-1))}else if(k[q])i+="/>","HR"===q&&(i+="\n");else{if(i+=">",d)for(;d;)i+=d.toFormatString(a),d=d.nextSibling;i+="</"+q+">"}else if(f.nodeType===j.COMMENT_NODE)i="<!--"+f._trim(f.textContent)+"-->",/^(TD|TH|BODY|DIV)$/i.test(f.parentNode.nodeName)&&(i=c+i+"\n");else if(d=f.firstChild)for(;d;)i+=d.toFormatString(a),d=d.nextSibling;return i},toString:function(){var a,b,c,d=this,e="";if(b=d.nodeType,b===j.ELEM_NODE){if(c=h(d.attrMap),c=c.length>0?" "+c:c,e+="<"+d.nodeName+c+">",!k[d.nodeName]){for(a=d.firstChild;a;)e+=a.toString(),a=a.nextSibling;e+="</"+d.nodeName+">"}}else if(b===j.TEXT_NODE)e=d.textContent;else if(b===j.COMMENT_NODE)e="<!--"+d.textContent+"-->";else if(b===j.ROOT_NODE)for(a=d.firstChild;a;)e+=a.toString(),a=a.nextSibling;return e}},f.create=function(a,b,c){var d,e,g;if(b=b||j.ELEM_NODE,a=3!==b?a.toUpperCase():a,d=new f(a,b),d.attrMap={},c)for(d.attributes=c,e=d.attributes.length;e--;)g=c[e],d.attr(g.name,g.value);else d.attributes=[],d.attrMap={},d.styles={};return d},f}),d("utilities/TreeBuilder",["jqueryCafe","utilities/EditorConstants","utilities/Node","utilities/NodeTracker","utilities/RuleSet"],function(a,c,d,e,f){function g(a){return/^[\s\uFEFF\xA0]+$/.test(a)}function h(){var a=[];return a.current=function(){return this[this.length-1]},a.prev=function(){return this.length-2>=0?this[this.length-2]:null},a.lastOpenBlock=function(a){var b,c,d=this.length;for(a=a||r;d--;)if(c=this[d].node,this[d].open===!0&&a[c.nodeName]){b=this[d];break}return b},a.lastOpen=function(a){for(var c,d,e=this.length;e--;)if(d=this[e].node,this[e].open===!0&&(a===b||a===d.nodeName)){c=this[e];break}return c},a.remove=function(a){var c=this.length;a!==b&&c>a&&this.splice(a,1)},a.clean=function(){this.length=0},a.isEmpty=function(){return 0===this.length},a}function i(a){this.schema=new f(a||{})}var j,k,l,m,n,o,p=c.toMap,q=c.NodeTypes,r=c.BlockElements,s=c.SelfCloseElements,t=c.VoidElements,u=c.LineBlockElements;return k=p("script, style"),n=p("col, colgroup, table, tbody, td, tr, th, thead, tfoot"),j=p("address, article, aside, center, details, dialog, dir, div, dl, fieldset, figcaption, figure, footer, header, hgroup, main, menu, nav, ol, p, section, summary, ul",!0),m=p("b,big,code,em,font,i,s,small,strike,strong,tt,u"),l=p("html, head, body"),o=p("OL, UL, TABLE, TBODY, THEAD, TFOOT, TR"),i.prototype={startTagReg:/<(?:([A-Za-z0-9\-_\:\.]+)((?:\s+[^"'>]+(?:(?:"[^"]*")|(?:'[^']*')|[^>]*))*|\/|\s+)>)/m,endTagReg:/<\/([^>]+)>/m,officeStartReg:/^<\w\:\w+/m,PITagReg:/^<\?([^\s\/<>]+) ?([\w\W]*?)[?/]>/m,attrReg:/([-A-Za-z0-9_]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,root:null,state:null,elemHandles:{},attrHandles:{},addElementHandler:function(a,b){var c=this;a&&b&&(a=a.toUpperCase(),c.elemHandles[a]={nodes:[],handle:b})},addAttrHanadler:function(a,b){var c=this;c.attrHandles[a]={nodes:[],handle:b}},parse:function(a,b){var c,d,e,f,g,h,i,j=this,m=!1;for(j._init(b||{}),a&&(a=a.replace(/\&nbsp;/g," "));a.length>0;)f=a.charAt(0),"<"===f&&(f=a.charAt(1),"!"===f?"<!--"===a.substring(0,4)?(i=a.indexOf("-->"),i!==-1&&(j._onCommentElement(a.substring(4,i)),a=a.substring(i+3),m=!1)):/<\!\[CDATA\[/i.test(a.substring(0,9))?(i=a.indexOf("]]>"),i!==-1&&(j._onCommentElement(a.substring(0,i+3)),a=a.substring(i+3),m=!1)):/<!DOCTYPE/i.test(a.substring(0,9))&&(i=a.indexOf(">"),i!==-1&&(a=a.substring(i+1),m=!1)):"?"===f?(d=a.match(j.PITagReg),d&&(a=a.substring(d[0].length),m=!1)):"/"===f?(d=a.match(j.endTagReg),d&&(a=a.substring(d[0].length),e=d[1].split(/\s+/)[0],j._onEndElement(e),m=!1)):(d=a.match(j.startTagReg),d&&0===a.indexOf(d[0])&&(k[d[1]]?(g=new RegExp("<\\/"+d[1]+"(?:[^>]*)>","im"),g.test(a)?(h=RegExp.leftContext?RegExp.leftContext.substring(d[0].length):"",a=RegExp.rightContext):(h=a.substring(d[0].length),a=""),j._onSpecialElement(d[1],d[2],h)):(a=a.substring(d[0].length),c=d[1].toUpperCase(),l[c]?0===j._getLastStack().length&&j._pushItem(j.root):j._onStartElement(c,d[2])),m=!1))),m&&(i=a.indexOf("<"),i===-1?(j._onTextElement(a),a=""):0===i?(j._onTextElement(a.substring(0,1)),a=a.substring(1)):(j._onTextElement(a.substring(0,i)),a=a.substring(i))),m=!0;return j._closeAllTableStack(),j.root},_appendNodeItem:function(a,b,c,d){var e,f,g,h,i,j=this,k=j.styleStack,l=j._getLastStack(),n=a.nodeName;return e=j._getLastOpen(),c=c!==!1,e?(h=e.node,g=h.lastChild,g&&a.nodeType===q.TEXT_NODE&&g.nodeType===q.TEXT_NODE?(g.textContent+=a.textContent,b=!1):h.append(a)):a.nodeType===q.ELEM_NODE&&(f=l.current(),f&&"BODY"===f.node.nodeName&&(h=f.node,h.append(a))),b&&j._pushItem(a),c&&m[n]?(i=a.clone(),k.push({index:j.styleStack.length,node:i,open:!0,origin:a})):u[n]&&d!==!0&&j._inheritStyleElement(),a},_appendTableItem:function(a){var b=this,c=b.tableStackContainer.current(),d=c.lastOpen(),e={index:c.length,node:a,open:!0};d&&("COLGROUP"===d.nodeName&&"COL"!==a.nodeName&&(b._closeElement("COLGROUP",c),d=c.lastOpen()),d.node.append(a)),"COL"!==a.nodeName&&c.push(e)},_init:function(a){this.state="init",this.stack=h(),this.styleStack=h(),this.tableStackContainer=h(),this.htmlNode=d.create("HTML",q.ROOT_NODE),this.headNode=d.create("HEAD",q.ROOT_NODE),this.root=d.create("BODY",q.ROOT_NODE),this._pushItem(this.root),this.schema.inherit_style_element=!0,this.schema.invalid_attributes=a.invalid_attributes||{}},_closeElement:function(a,b){var c,d,e=this;d=b||e._getLastStack(),c=d.lastOpen(a),c&&(c.open=!1,d.pop()),m[a]&&e._closeStyleElement(a)},_closeStack:function(a){var b,c=this,d=c._getLastStack();a&&a.index&&(d.length=a.index,b=a.node.nodeName),m[b]&&c._closeStyleElement(b)},_closeStyleElement:function(a){var b,c=this;b=c.styleStack.lastOpen(a),b&&c.styleStack.remove(b.index)},_inheritStyleElement:function(){var a,b,c,d=this,e=d.styleStack;if((a=e.length)>0)for(b=0;b<a;b++)c=d._appendNodeItem(e[b].node.clone(),!0,!1),c&&(c.isInheritedStyleElement=!0)},_pushItem:function(a){var b=this,c=b._getLastStack(),d={index:c.length,node:a,open:!0};return c.push(d),d},_onAttr:function(a,b){var c=this,d=[];return b.replace(c.attrReg,function(a,b,e,f,g){var h;return b=b.toLowerCase(),h=e||f||g||b,c.schema.isInvalidAttributes(b,h)?/^data\-/i.test(b)&&d.push({name:b,value:h}):d.push({name:b,value:h}),""}),d},_onCommentElement:function(a){var b,c,e,f=this;f.schema.removeComments||(b=d.create("#comment",q.COMMENT_NODE),b.textContent=a,c=f._getLastStack(!0),e=c.current().node,e.append(b))},_onEndElement:function(a){var c,e,f=this;a=a.toUpperCase(),n[a]?f._onEndTableElement(a):s[a]?(e=f._getLastOpen(a),f._closeStack(e),"P"===a&&e===b&&(e=d.create(a,q.ELEM_NODE),e.emptyElement=!0,f._appendNodeItem(e,!1,!1,!0))):t[a]?"BR"===a&&(c=d.create(a,q.ELEM_NODE),f._appendNodeItem(c)):f._closeElement(a),m[a]===!0&&f._closeStyleElement(a)},_onSpecialElement:function(a,b,c){var e,f,g=this;f=d.create("#text",q.TEXT_NODE),f.textContent=c,e=d.create(a,q.ELEM_NODE,b),e.append(f),g._appendNodeItem(e)},_onStartElement:function(a,b){var c,e,f,g,h,i=this;b&&(c=i._onAttr(a,b)),n[a]?i._onStartTableElement(a,c):(e=d.create(a,q.ELEM_NODE,c),h=i._getLastStack(),j[a]&&(g=h.lastOpen("P"),i._closeStack(g)),s[a]&&(g=h.lastOpen(a),"LI"===a&&g?(f=h.lastOpenBlock({OL:!0,UL:!0}),f&&f.index<g.index&&i._closeStack(g)):i._closeStack(g)),i._isRequireStyleElements(e)&&i._inheritStyleElement(),i._appendNodeItem(e,!t[a]))},_onStartTableElement:function(a,b){var c,e,f,g,h=this;"TABLE"===a?(h.state="table_head",g=h._createTableStack()):g=h.tableStackContainer.current(),/^(?:COLGROUP)$/.test(a)&&(c=g.lastOpen("COLGROUP"),c&&h._closeElement("COLGROUP",g)),"table_head"===h.state&&/^(?:THEAD|TFOOT|TBODY|TR)$/.test(a)&&(h._closeElement("COLGROUP",g),h.state="table_body"),"COL"===a&&"table_head"===h.state&&(c=g.lastOpen("COLGROUP"),c||h._createBlockElement("COLGROUP")),"table_head"!==h.state&&"table_body"!==h.state||(/^(?:th|td|tr|tbody|thead|tfoot)$/i.test(a)?(f=h._getLastOpen(a,g),f&&h._closeElement(a,g)):s[a]&&(f=h._getLastOpen(a,g),h._closeStack(f,g)),h.styleStack.clean(),e=d.create(a,q.ELEM_NODE,b),h._appendTableItem(e))},_onEndTableElement:function(a){var b,c=this,d=c.tableStackContainer,e=d.current();"TABLE"===a?(1===d.length&&(c.state="body_in"),c._closeTableStack()):e&&(b=e.lastOpen(a),b&&(b.open=!1,e.pop()))},_isRequireStyleElements:function(a){var c,d,e=this,f=!1,g=e.state,h=e.styleStack,i=e._getLastStack(),j=i.current(),k=h.current(),l=a.nodeName,m=!1,n=j.node.isInheritedStyleElement;if(!/^table_/i.test(g)&&h.length>0&&n===b&&!u[l]){for(c=k.origin,d=j.node;d&&"BODY"!==d.nodeName;){if(d===c){m=!0;break}d=d.parentNode}f=!m}return f},_onTextElement:function(a){var b,c,e,f,h,i=this,j=i._getLastStack(),k=j.current();if(c=k?k.node:null)if(e=g(a),h=c.nodeName,e)o[h]||(i.root.firstChild||/^table_/i.test(i.state))&&(b=d.create("#text",q.TEXT_NODE),b.textContent=a,i._isRequireStyleElements(b)&&i._inheritStyleElement(),i._appendNodeItem(b));else{if("UL"===h||"OL"===h)i._createBlockElement("LI");else if(/^table_/i.test(i.state)&&(f=j.lastOpenBlock(n),f&&!/^(?:TD|TH)$/i.test(f.node.nodeName)))return;b=d.create("#text",q.TEXT_NODE),a=a.replace(/&#(?:820[3-5]|65279);/gi,"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;"),b.textContent=a,i._isRequireStyleElements(b)&&i._inheritStyleElement(),i._appendNodeItem(b)}},_getLastStack:function(a){var b,c=this,d=c.tableStackContainer,e=d.length,f=/^table_/i.test(c.state),g=!1;if(a)b=f?d[e-1]:c.stack;else if(f){for(;e--;)if(b=d[e],c._isOpenedCell(b)){g=!0;break}b=g?b:c.stack}else b=c.stack;return b},_getLastOpen:function(a,b){var c=this,d=b||c._getLastStack();return d.lastOpen(a)},_getLastOpenBlock:function(a,b){var c=this,d=b||c._getLastStack();return d.lastOpenBlock(a)},_isOpenedCell:function(a){var b,c=this,d=a||c.tableStackContainer.current();return!(!d||!(b=d.lastOpenBlock({TD:!0,TH:!0})))},_createTableStack:function(){for(var a=this,b=a.tableStackContainer,c=h();!b.isEmpty()&&!a._isOpenedCell();)a._closeTableStack();return b.push(c),c},_closeTableStack:function(){var a,b,c,d,e,f,g,h,i,j=this;a=j.tableStackContainer.current(),b=j.tableStackContainer.prev(),c=null!==b?b.lastOpenBlock({TD:!0,TH:!0}):null,d=j._getLastStack(!0),e=j._getLastOpenBlock(p("p,h1,h2,h3,h4,h5,h6"),d),
f=d.lastOpen(),g=a[0].node,h=j._getLastStack(),i=j._getLastOpenBlock(p("li"),h),i=i?i.node:null,!c&&!e&&f&&f.node&&f.node!==g?f.node.append(g):c?i?i.append(g):c.node.append(g):j.root.append(g),j.tableStackContainer.pop()},_closeAllTableStack:function(){for(var a=this,b=a.tableStackContainer;!b.isEmpty();)a._closeTableStack()},_createBlockElement:function(a){var b,c=this;return a=a?a.toUpperCase():"P",b=d.create(a,q.ELEM_NODE),b.isInserted=!0,c._appendNodeItem(b,!0),b},serialize:function(a,b){return b?a.toFormatString():a.toString()}},i}),d("utilities/ParsingHelper",["jqueryCafe","utilities/EditorConstants","utilities/TreeBuilder","utilities/Node","utilities/NodeTracker","utilities/StyleParser"],function(a,c,d,e,f,g){function h(){}var i,j=c.NodeTypes,k=c.toMap,l=k("body,tr,td,th,tbody,thead,tfoot,table"),m=k("border-collapse,border-spacing,caption-side,color,cursor,empty-cells,font-style,font-variant,font-weight,letter-spacing,line-height,list-style-image,list-style-position,list-style-type,orphans,overflow-wrap,resize,text-align,text-indent,text-shadow,text-transform,visibility,white-space,word-spacing,word-break,word-wrap,font-family,font-size",!1),n=c.LineBlockElements,o=c.LineBreakElements,p=c.keys(o).join(","),q=k("b,cite,dfn,em,i,ins,s,strike,strong,sup,sub,u"),r=!1;return h.prototype={init:function(a,b){a.ownerDocument?(r=!0,i=a.ownerDocument):(r=!1,i=null),this.oldIE=b.isOldIE||!1,this.IE=b.isIE||!1,this.forceBRToEmptyLine=b.forceBRToEmptyLine||!1},final:function(){i=null},afterNode:function(b,c){return r?a(b).after(c):b.after(c),c},appendNode:function(b,c){return r?a(b).append(c):b.append(c),c},appendNodes:function(b,c){var d;if(r)a(b).append(c);else for(;0!==c.length;)d=c.shift(),b.append(d);return b},applyBlockStyle:function(a){var b,c,d,e,f,h=this,i=h.getAllChildren(a),k="style",l="SPAN",m=a.getAttribute(k),n=h.filterInheritedStyle(m),o=g.serialize(n);if(o&&0!==o.length)for(c=0,d=i.length;c<d;c++)if(b=i[c],b.nodeName===l||/^(?:table|ul|ol)$/i.test(b.nodeName))f=g.parse(b.getAttribute(k),{plain:!0}),f=h.mergedStyle(f,n),b.setAttribute(k,f);else{if(b.nodeType===j.COMMENT_NODE)continue;e=h.wrapNode(b,l),e.setAttribute(k,o)}},applyInhertedStyle:function(a,b){var c,d,e,f,g,h,i=this,k="style",l="SPAN";if(e=a.getAttribute(k),e=i.filterInheritedStyle(e,!0),h=a.parentNode&&/^(?:body|xbody|x-link)$/i.test(a.parentNode.nodeName),q[a.nodeName])l=a.nodeName;else if(!e||0===e.length)return;for(f=a.firstChild;f;)f.nodeType!==j.TEXT_NODE||/^(?:\u00A0|\s)+$/i.test(f.textContent)||b.push(f),f=f.nextSibling;for(c=0,d=b.length;c<d;c++)if(f=b[c],f.parentNode===a){if(f.nodeType===j.ELEM_NODE)g=i.createNode(l),i.moveChild(f,g),f.appendChild(g);else if(f.nodeType===j.TEXT_NODE){if(h&&/^(?:\u00A0|\s)+$/i.test(f.textContent))continue;g=i.wrapNode(f,l)}else{if(f.nodeType===j.COMMENT_NODE||f.nodeType===j.DOC_NODE)continue;g=i.wrapNode(f,l)}e&&e.length>0&&g.setAttribute(k,e)}},inheritedStyles:function(a){var b,c,d,e=this,f=a.nodeName,h=a.firstChild,i="style",j=a.getAttribute(i)||"";h&&h===a.lastChild&&h.nodeName===f&&j.length>0&&(c=e.filterInheritedStyle(j),b=g.parse(h.getAttribute(i),{plain:!0}),d=e.mergedStyle(b,c),h.setAttribute(i,d),e.removeJSObj(c),c=null)},mergedStyle:function(a,b){var c,d,e=this;a=a||{};for(c in b)a[c]||(a[c]=b[c]);return d=g.serialize(a),e.removeJSObj(a),a=null,d},removeJSObj:function(a){var b;for(b in a)delete a[b]},beforeNode:function(b,c){return r?a(b).before(c):b.before(c),c},cloneAttribute:function(a,b){var c,d=a.attributes,e=d?d.length:0;for(c=0;c<e;c++)b.setAttribute(d[c].name,d[c].value);return b},cloneNode:function(a){var b,c,d,e,f;if(a){if(r)for(b=i.createElement(a.nodeName),c=a.attributes,e=0,f=c.length;e<f;e++){d=c[e];try{b.setAttribute(d.name,d.value)}catch(a){}}else b=a.clone();return b}},closestParent:function(a,b){var c,d=a.parentNode,e=!1;for(b=b||{};d;){if(c=d.nodeName,b[c]){e=!0;break}d=d.parentNode}return e?d:null},combine:function(a,b,c){var d,e=this,f=a.nodeType,g=a.parentNode||a.parentElement;if(c||e.isCombinable(a,b))if(f===j.TEXT_NODE&&f===b.nodeType)a.textContent=a.textContent+b.textContent,g.removeChild(b);else if(f===j.ELEM_NODE){for(d=b.firstChild;d;)a.appendChild(d),d=d.nextSibling;g.removeChild(b)}},createComment:function(a){var b,c,d,f,g,h="";if(r){if(b=a.outerHTML,"META"===a.nodeName&&0===b.length){for(d=a.attributes,f=d.length;f--;)g=d[f],h+=" "+g.name+'="'+g.value+'"';b="<meta"+h+">"}b=b.replace(/-->/g,"--&gt;").replace(/<!--/g,"&lt;!--"),c=i.createComment(b)}else b=a.toString(),b=b.replace(/-->/g,"--&gt;").replace(/<!--/g,"&lt;!--"),c=e.create("#comment",j.COMMENT_NODE),b=b.replace(/\&amp;/gi,"&").replace(/\&lt;/gi,"<").replace(/\&gt;/g,">").replace(/\&quot;/g,'"'),c.textContent=b;return c},createEmptyLineNode:function(a){var b,c,d,f,g=this;if(r?(c=i.createElement("p"),g.oldIE||g.IE&&!g.forceBRToEmptyLine?b=i.createTextNode(" "):(b=i.createElement("br"),g.forceBRToEmptyLine&&g.IE&&b.setAttribute("cui-ebr","true"))):(c=e.create("p",j.ELEM_NODE),g.oldIE||g.IE&&!g.forceBRToEmptyLine?b=g.createTextNode(" "):(b=e.create("br",j.ELEM_NODE),g.forceBrToEmptyLine&&g.IE&&b.setAttribute("cui-ebr","true"))),a){for(f=a;f&&f.firstChild;)f=f.firstChild;f.appendChild(b),d=a}else d=b;return c.appendChild(d),c.isInserted=!0,c},createElements:function(b){var c=[];return r&&b&&(c=a(b)),c[0]},createNode:function(a){var b;return b=r?i.createElement(a):e.create(a,j.ELEM_NODE),b.isInserted=!0,b},createTextNode:function(a){var b;return r?b=i.createTextNode(a):(b=e.create("#text",j.TEXT_NODE),b.textContent=a),b},css:function(b,c,d){return r?(d=null===d?"":d,a(b).css(c,d)):b.css(c,d),b},filterInheritedStyle:function(a,b){var c,d,e=g.parse(a,{plain:!0}),f={};for(c in m)d=e[c],d&&(f[c]=d);for(c in e)delete e[c];return e=null,b?g.serialize(f):f},findElementByTagName:function(b,c){var d;return d=r?a(b).find(c):b.getNodesByTagName(c),d[0]},getLeafNode:function(a,b){for(var c=a,d=b?"firstChild":"lastChild";c&&c[d];)c=c[d];return c},getChildren:function(b,c){var d,e,f,g=[];if(r)g=a(b).find(c.join(","));else for(e=0,f=c.length;e<f;e++)d=b.getNodesByTagName(c[e]),d.length>0&&(g=g.concat(d));return g},getTextChildren:function(a){var b,c=a.firstChild,d=[];for(b=new f(c,a);c&&c!==a;)3===c.nodeType&&d.push(c),c=b.next();return d},getAllChildren:function(a){for(var b=[],c=a.firstChild;c;)b.push(c),c=c.nextSibling;return b},hasClass:function(a,b){var c,d,e=a.getAttribute("class"),f=!1;for(e=e?e.split(/\s+/):[],c=e.length;c--;)if(d=e[c],d===b){f=!0;break}return f},hasBlockElement:function(a){var b;return 1===a.nodeType&&(b=r?a.querySelectorAll(p):a.findElements(a,function(a){return o[a.nodeName]}),b.length>=1)},hashHandle:function(a){var b=0,c=a.length,d=0;if(!c)return b;for(;d<c;++d)b=(b<<5)-b+a.charCodeAt(d),b|=0;return b},hasStyle:function(b,c,d){var e,f=!1;return b&&c&&d&&(d=d.toLowerCase(),c=c.toLowerCase(),e=r?b.style?b.style[c]:a(b).css(c):b.css(c),e=e&&e.toLowerCase(),f=d===e),f},isCombinable:function(a,b){var c,d,e,f,g;if(a.parentNode!==b.parentNode)return!1;if(a.nodeName!==b.nodeName)return!1;if(a.nextSibling!==b&&a.previousSibling!==b)return!1;if(a.nodeType===j.TEXT_NODE)return!0;if(a.nodeType!==j.ELEM_NODE)return!1;if(e=a.attributes,e.length!==b.attributes.length)return!1;for(f=0,g=e.length;f<g;f++)if(c=e[f],d="string"==typeof c?c:c.name,a.getAttribute(d)!==b.getAttribute(d))return!1;return!0},isEmptyNode:function(a,c,d){var e=!1,g=a.firstChild,h=new f(g,a);if(c[a.nodeName])return!1;if(a.nodeType===j.ELEM_NODE&&null===g)return!0;for(;g&&g!==a;){switch(g.nodeType){case j.ELEM_NODE:e=c[g.nodeName],e=e===b||!e,g.isInserted&&(e=!1);break;case j.TEXT_NODE:e=d?/^[\s\uFEFF\xA0]$/.test(g.textContent):0===g.textContent.length;break;case j.COMMENT_NODE:e=!1}if(!e)break;g=h.next()}return e},isHiddenNode:function(b){var c,d;return!!b&&(d=b.nodeType,d!==j.TEXT_NODE&&d!==j.COMMENT_NODE&&(r?(c=a(b),!!c.attr("hidden")||(!!/hidden/i.test(c.css("visibility"))||!!/none/i.test(c.css("display")))):b.isHidden()))},isRemovableSpan:function(a){var b,c,d,e,f=a.parentNode,g=a.nodeName,h=a.attributes,i=h?h.length:0,j=!0;if(f&&g===f.nodeName&&!/OL|UL|BLOCKQUOTE/.test(g)&&(b=f.attributes,i===b.length)){for(c=0;c<i;c++)if(d=h[c],e=b[c],d.name!==e.name||d.value!==e.value){j=!1;break}return j}return!1},moveNodes:function(a,b,c){var d,e,f=this,g=b.length,h=c?f.afterNode:f.beforeNode;if(g>0&&b[0]===a&&(c=!0,h=f.afterNode),c)for(e=0;e<g;e++)d=b[e],a!==d&&(h(a,d),a=d);else for(e=g-1;e>=0;e--)d=b[e],h(a,d);return b[g-1]},moveChild:function(a,b){for(var c,d=a.firstChild;d;)c=d,d=c.nextSibling,b.appendChild(c);return b},removeNode:function(a){var b;a.remove&&!r?a.remove():a.removeChild&&(b=a.parentNode)&&b.removeChild(a)},removeNodeFunc:function(a,b){var c,d,e,f=this,g=a.parentNode;return c=a,n[g.nodeName]&&a===g.lastChild&&a===g.firstChild&&(d=f.IE?f.createTextNode(r?" ":"&nbsp;"):f.createNode("BR"),f.appendNode(g,d)),a.nextSibling?a=b.nextSibling():(e=f.getLeafNode(a),e&&b.current(e),a=b.next(),a&&a.parentNode===c&&(a=null)),f.removeNode(c),c=null,a},replaceNode:function(a,b){var c=this,d=a.parentNode;r?(d.insertBefore(b,a),c.removeNode(a)):a.replace(b)},splitNode:function(a){var b,c=this,d=a.parentNode,e=a.nextSibling;if(l[d.nodeName])c.beforeNode(d,a);else{for(b=c.cloneNode(d),c.afterNode(d,b);e;)c.appendNode(b,e),e=e.nextSibling;c.beforeNode(b,a)}return a},toHash:function(a){var b,c,d=this,e=a.attributes,f="";for(f+=a.nodeName+"_",b=0,c=e.length;b<c;b++)f+=" "+e[b].name+"_"+e[b].value;return f=d.hashHandle(f)},unwrapNode:function(a){var b,c=this;if(r){for(b=a.parentNode;a.firstChild;)b.insertBefore(a.firstChild,a);c.removeNode(a)}else a.unwrap()},wrapNode:function(a,b){var c,d;return r?(c=a.parentNode||a.parentElement,d=i.createElement(b),c.insertBefore(d,a),d.appendChild(a)):d=a.wrap(b),d}},h}),d("utilities/HtmlParser",["jqueryCafe","utilities/TreeBuilder","utilities/EditorConstants","utilities/Node","utilities/NodeTracker","utilities/RuleSet","utilities/ParsingHelper","utilities/StyleParser"],function(a,b,c,d,e,f,g,h){function i(a,b,c){var d,e,f,g,h;for(d=a.attributes||[],e=d.length;e--;)if(f=d[e],g="string"==typeof f?f:f.name,h=a.getAttribute(g),b.isInvalidAttributes(g,h)){try{a.setAttribute(g,"")}catch(a){}finally{a.removeAttribute(g)}!c.hasInvalidAttribute&&b.isNotifyAttributes(g)&&(c.hasInvalidAttribute=!0)}else/^(?:data\-|class|style|id|lang|src)/i.test(g)||j(a,g);a.getAttribute("style")&&!b.isIE()&&a.setAttribute("style",a.getAttribute("style").replace(/\"/gm,"'")),a=b.removeHTMLTagAttributes(a,c)}function j(a,b){var c,d,e=b.toLowerCase(),f=a.getAttribute(b);switch(e){case"align":/^(?:div|col|colgroup|table|tbody|td|tr|th|thead)$/i.test(a.nodeName)||(c="text-align",d=!0);break;case"bgcolor":c="background-color",d=!0;break;case"width":case"height":c=e,f=f.indexOf("%")===-1?f+" px":f;break;case"src":"IMG"===a.nodeName&&/^cid:/i.test(f)&&(d=!0);break;case"frame":case"rules":case"spellcheck":case"sortable":case"summary":d=!0}c&&G.css(a,c,f),d&&a.removeAttribute(b)}function k(a){var b,c,d="style",e=a.getAttribute(d),f=e?h.parse(e,{plain:!0}):{},g=/^(?:0\.\d+\s*pt)$/gi;for(b in f)c=f[b],/border/.test(b)&&g.test(c)&&(f[b]=c.replace(g,"1px"));e=h.serialize(f),e&&e.length>0&&a.setAttribute(d,e)}function l(a){var b,c,d;if(b=E?a.childNodes:a.children(),b&&0!==b.length)return d=m(b),d.COLGROUP&&(c=G.moveNodes(a.firstChild,d.COLGROUP,!0)),d.THEAD&&(c=G.moveNodes(c,d.THEAD,!0)),d.TBODY&&(c=G.moveNodes(c,d.TBODY,!0)),d.TFOOT&&G.moveNodes(a.lastChild,d.TFOOT,!0),!0}function m(a){var b,c,d,e=a.length,f=[],g={};for(d=0;d<e;d++)b=a[d],c=b.nodeName,"COLGROUP"!==c||b.childNodes.length?g[c]?g[c].push(b):g[c]=[b]:f.push(d);if(f.length)for(d=f.length-1;d>=0;d--)G.removeNode(a[f[d]]);return g}function n(a){var b,d=G.closestParent(a,c.LineBlockElements);return!(!d||"BR"!==a.nodeName)&&(b=G.closestParent(d,{TD:!0,TH:!0}),d=b?b:d,G.getLeafNode(d)===a)}function o(a){return/\u0009/.test(a)&&(a=a.replace(/\u0009/g,I)),/\u0020\u0020/.test(a)&&(a=a.replace(/\u0020\u0020/g,R+S)),a}function p(a,b){var d,e,f,g,h,i,j,k,l=c.LineBlockElements,m=a.firstChild,n=/\n/;for(g=G.filterInheritedStyle(b,!0);m;){if(h=m.nodeName,i=m.nodeType,i===K.TEXT_NODE)d=m.textContent,d=o(d),e=d&&n.test(d)?d.split("\n"):[d],f=q(m,e,g,f),f!==m&&(G.removeNode(m),m=f),/\n$/.test(d)&&(f=null);else if(l[h]){for(g&&m.setAttribute("data-pre-style",g),d=G.getTextChildren(m),j=0,k=d.length;j<k;j++)d[j].textContent=o(d[j].textContent);f=null}else l[h]||/(?:^TABLE$|^UL$|^OL$|^HR$|^P$)/i.test(h)?f=null:(f||(f=G.wrapNode(m,"P"),g&&f.setAttribute("data-pre-style",g)),f.appendChild(m),m=f);m=m.nextSibling}}function q(a,b,c,d){var e,f,g,h,i,j,k=!d;for(f=0,g=b.length;f<g;f++)h=b[f],j=h,i=G.createTextNode(j),k?(G.beforeNode(a,i),i=G.wrapNode(i,"P")):(d.appendChild(i),k=!0,i=d),c&&i.setAttribute("data-pre-style",c);return e=a.previousSibling||a}function r(a,b){var c,d="";for(c=0;c<Q;c++)d+=c%2?a:b?" ":S;return d}function s(a){var b=a.textContent;/(\n\s+)$/.test(b)?b=b.replace(/(\n\s+)$/g,""):/(\n\s*(\S))/g.test(b)&&(b=b.replace(/\n\s+(\S)/g," $1"),b=b.replace(/\s+/g," "),/\s+$/.test(b)&&(b=b.replace(/\s+$/,""))),/\u0020/.test(b)&&(b=b.replace(/\u0020/g,R)),/\u00A0\u00A0/.test(b)&&(b=b.replace(/\u00A0\u00A0/g,R+S)),/(\S)\u00A0(\S)/.test(b)&&(b=b.replace(/(\S)\u00A0(\S)/g,"$1"+S+"$2")),/(\S)\u00A0(\S)/.test(b)&&(b=b.replace(/(\S)\u00A0(\S)/g,"$1"+S+"$2")),/\u0020\n|\u0020$/.test(b)&&(b=b.replace(/\u0020(\n)|\u0020$/g,R+"$1")),a.textContent=b}function t(b){var d,e,f,g,h,i,j=b.startContainer;for(j.nodeType===c.NodeTypes.ELEM_NODE&&c.StyleElements[j.nodeName]&&(g=j.cloneNode()),f=a(j).parents(c.StyleElementsStr),d=f.length-1;d>=0;d--)e=f[d].cloneNode(),h||(h=e),i&&i.appendChild(e),i=e;return g&&(e&&e!==g?i.appendChild(g):e||(h=g)),h}function u(b,f,g,h,j){var m,o,q,u,w,y,A,D,J,L,M,Q,S,X,Y,Z,$,_,aa,ba=/[\u200B\uFEFF]/gi,ca=c.keys(c.LineBlockElements),da=function(a,b){return""===a.replace(/\u00A0/g,"")&&1===a.length?0===b||b===M-1?a:a.replace(/\u00A0/g," "):a};for(F=b.ownerDocument,E=!!F,B(b,!0),G.hasBlockElement(b)&&C(b,G),o=b.firstChild,m=new e(o,b),E?(g.headNode=F.createElement("head"),H=R):(g.headNode=d.create("head",K.ELEM_NODE),H="&nbsp;"),I=r(H);o&&o!==b;){if(q=o.nodeName.toUpperCase(),u=o.parentNode,J=o.nodeType,"DIV"!==q&&u===b&&Y&&(Y=null),J===K.TEXT_NODE){if(u&&/body$|fieldset/i.test(u.nodeName)&&/^[\s\uFEFF\xA0\n]+$/gi.test(o.textContent)){o=G.removeNodeFunc(o,m);continue}if(/^(?:(?:&#(?:10|xa);)|\u000A)+$/g.test(o.textContent)&&(o.textContent=o.textContent.replace(/^(?:(?:&#(?:10|xa);)|\u000A)+$/g,H)),L=o.textContent,ba.test(L)){if(1===L.length){o=G.removeNodeFunc(o,m);continue}o.textContent=L.replace(ba,"")}if(u&&u.firstChild===o&&u.lastChild===o&&"SPAN"===u.nodeName&&0===u.attributes.length){G.unwrapNode(u);continue}j?s(o):(M=L.length,o.textContent=L.replace(/[^\S\r\n]{1,}/g,da))}if(J===K.ELEM_NODE&&i(o,f,g),"TABLE"===q){if(!l(o)&&!a(o).find("TD, TH").length){o=G.removeNodeFunc(o,m);continue}}else/^(?:TD|TH|UL|OL|DL)$/i.test(q)?B(o):"DIV"===q&&o.firstChild!==o.lastChild&&B(o);if(f.isNotifyElement(q)&&(g.hasInvalidElement=!0),"DIV"===q&&!Y&&o.firstChild&&o.firstChild===o.lastChild&&"DIV"===o.firstChild.nodeName&&(Y={}),f.isRemoveElement(q))o=G.removeNodeFunc(o,m);else if((f.isOldIE()||!f.new_line_without_blank&&f.isIE())&&"BR"===q&&n(o))w=G.createTextNode(E?R:"&nbsp;"),G.replaceNode(o,w),o=w,m.current(o);else if(f.isUnsupportedElement(q))w=v(o),G.replaceNode(o,w),o=w;else if(f.isUnwrapElement(q))w=o,"PRE"===q?p(w,w.getAttribute("style")):(B(w),G.applyBlockStyle(w)),o=m.next(),G.unwrapNode(w);else if(f.removeHiddenElements&&G.isHiddenNode(o))o=G.removeNodeFunc(o,m,!0);else if(f.removeEmptyElement&&f.isRemoveEmptyElement(q)&&G.isEmptyNode(o,T))o=G.removeNodeFunc(o,m);else if(f.isMovableElement(q))w=o,G.hasClass(o,"cui-content-default")?o=G.removeNodeFunc(o,m):(o=m.nextSibling(),f.isCommentElement(q)&&(A=G.createComment(w),G.removeNode(w),w=A,E||w.remove()),g.headNode.appendChild(w));else if(f.gatherHeadElement&&O[q])w=o,o=m.nextSibling(),E||w.remove(),G.hasClass(o,"cui-content-default")||g.headNode.appendChild(w);else{if(f.useCombineElement&&f.isCombine(q)){if(A=o.nextSibling,A&&G.isCombinable(o,A)){G.combine(o,A,!0);continue}}else{if(f.isCommentElement(q)){w=G.createComment(o),G.replaceNode(o,w),m.current(w),o=w;continue}if(f.isReplace(q)){"DIV"===q&&(G.hasClass(o,"3DWordSection1")||G.hasClass(o,"WordSection1"))?(B(o),w=o,o=m.next(),G.unwrapNode(w)):"DIV"===q&&!G.hasBlockElement(o)&&o.firstChild?(Z=o.firstChild,/^font$/i.test(Z.nodeName)&&o.lastChild===Z&&null===Z.firstChild&&G.hasStyle(o,"display","inline")?(w=o,m.next(),o=m.next(),G.removeNode(w)):(w=G.createNode("P"),G.cloneAttribute(o,w),G.moveChild(o,w),G.replaceNode(o,w),o=w),m.current(o)):"DIV"===q&&Y?(X=G.toHash(o),$=o.childNodes&&1===o.childNodes.length,Y[X]?($&&0===o.attributes.length?Y[X]++:Y=null,w=o,o=m.next(),G.unwrapNode(w),o.children&&o.children.length||(Y=null)):($&&0===o.attributes.length?Y[X]=1:Y=null,o=f.replaceNode(o,G),"TD"!==o.nodeName&&(o=G.findElementByTagName(o,"TD")),m.current(o))):(o=f.replaceNode(o,G),m.current(o));continue}if(f.isOfficeElement(q)){o.firstChild?(w=o,o=m.next(),G.unwrapNode(w)):o=G.removeNodeFunc(o,m);continue}if(f.isInvalidElement(q)||N[q]){o=G.removeNodeFunc(o,m,!0);continue}}if(!f.isValidChild(u,o))if(y=f.getDefaultChild(u.nodeName),o.nodeType===K.COMMENT_NODE){if(f.removeComments){o=G.removeNodeFunc(o,m);continue}}else{if(J===K.TEXT_NODE&&W[u.nodeName]){o=G.removeNodeFunc(o,m);continue}if(y&&U[q]){if(S=G.getChildren(o,ca),f.useSingleLineElements&&0===S.length&&(D=o.previousSibling,D&&D.nodeName===y&&D.isInserted&&D.appendChild(o)),o.parentNode.nodeName!==y){if("P"===y&&S.length>0){G.applyInhertedStyle(o,S),w=o,o=m.next(),o.nodeType===c.NodeTypes.TEXT_NODE&&"\n"===o.nodeValue?o.remove():(G.inheritedStyles(w),G.unwrapNode(w));continue}A=o.nextSibling,S=z(f,A),u=G.wrapNode(o,y),u.isInserted=!0,S.length>0&&(G.appendNodes(u,S),S=null)}}else{if(V[q]){if(Q=G.closestParent(o,{LI:!0,TD:!0,TH:!0}),c.LineBlockElements[q]&&Q&&"LI"===Q.nodeName){w=o,A=o.nextSibling,A&&A.parentNode.insertBefore(G.createNode("BR"),A),G.applyBlockStyle(w),o=m.next(),G.unwrapNode(w);continue}o=u.firstChild===o?G.beforeNode(u,o):u.lastChild===o?G.afterNode(u,o):G.splitNode(o);continue}if(f.isReplace(q)&&null!==y){o=f.replaceNode(o,G),m.current(o);continue}if(!f.isComponentElement(q)){o.firstChild&&!P[q]?(w=o,o=m.next(),G.unwrapNode(w)):o=G.removeNodeFunc(o,m,!0);continue}y=f.getComponentParent(q),D=o.previousSibling,A=o.nextSibling,D&&D.nodeName===y?G.appendNode(D,o):A&&A.nodeName===y?G.beforeNode(A.firstChild,o):G.wrapNode(o,y)}}if("SPAN"===q&&0===o.attributes.length||G.isRemovableSpan(o))w=o,o=m.next(),G.unwrapNode(w);else{if(f.forceInsertTdchild&&/^(?:td|th)$/i.test(q)&&(o.firstChild||G.appendNode(o,G.createEmptyLineNode())),!f.isIE()&&/^(?:td|th)$/i.test(q)&&k(o),"A"===q&&(_=o.getAttribute("href"))&&(f.isIE()&&(w=document.createElement("div"),w.innerHTML=_,_=w.innerText),/^(\s*)j(\s*)a(\s*)v(\s*)a(\s*)s(\s*)c(\s*)r(\s*)i(\s*)p(\s*)t(\s*):/gim.test(_)&&(o.setAttribute("href","#"),g.hasInvalidElement=!0)),E&&f.isIE()&&"P"===q&&!/<\/P>$/i.test(o.outerHTML))try{w=G.createElements(o.outerHTML+"</P>"),G.replaceNode(o,w),m.current(w)}catch(a){console&&console.log(a.toString())}o=m.next()}}}if(x(b,f,ca),o=b.firstChild,o&&o===b.lastChild&&o.nodeType===K.COMMENT_NODE&&b.appendChild(G.createEmptyLineNode()),f.appendEmptylinAtLast){for(o=b.lastChild;o&&o.nodeType===K.COMMENT_NODE&&o.previousSibling;)o=o.previousSibling;o&&/^(?:TABLE|HR)$/.test(o.nodeName)&&(h&&/^(?:TABLE)$/.test(o.nodeName)?(aa=t(h),w=G.createEmptyLineNode(aa)):w=G.createEmptyLineNode(),b.appendChild(w))}return b.firstChild||b.lastChild||(w=G.createEmptyLineNode(),b.appendChild(w)),b}function v(a){var b,c,e,f,g="IMG";if(b=E?F.createElement(g):d.create(g,K.ELEM_NODE),a.attributes)for(c=0,e=a.attributes.length;c<e;c++)f=a.attributes[c],b.setAttribute(L+f.name,f.value);return b.setAttribute(L+"tag",a.nodeName),b.setAttribute("src",M),b}function w(a,b){var d,e;1===b.nodeType&&c.LineBlockElements[b.nodeName]&&(d=a?G.createTextNode(E?R:"&nbsp;"):G.createNode("BR"),b.appendChild(d),a||(e=d.previousSibling,e&&3===e.nodeType&&/^(?:[\u200B\uFEFF\s\n])+$/.test(e.textContent)&&G.removeNode(e)))}function x(a,b,c){var d,e,f,g,h,i=b.isIE(),j=G.getChildren(a,c),k=!1,l=!0,m=a.firstChild,n="data-pre-style";if(m&&m===a.lastChild&&G.isEmptyNode(m,T))return w(i,m),a;for(e=0,f=j.length;e<f;e++)d=j[e],g=d.getAttribute(n),g&&(G.isEmptyNode(d,T)?g=null:(h=G.createNode("span"),G.moveChild(d,h),d.appendChild(h),h.setAttribute("style",g)),d.removeAttribute(n)),("LI"===d.nodeName||d.firstChild||null===d.previousSibling&&null===d.nextSibling)&&!g&&G.isEmptyNode(d,T)&&(k=!0,w(i,d));for(;m;){if(1===m.nodeType&&m.firstChild){l=!1;break}m=m.nextSibling}return l&&a.lastChild&&(1===a.lastChild.nodeType?w(i,a.lastChild):a.lastChild.nodeType===K.COMMENT_NODE&&a.appendChild(G.createEmptyLineNode())),a}function y(a){var b,c;return 1===a.nodeType&&(E?b=a.querySelectorAll("p,li,ul,ol,h1,h2,h3,h4,h5,h6,div").length:(c=G.getLeafNode(a),b=a.hasLineChildren(c)?1:0),0!==b)}function z(a,b){for(var c,d=[];b;){if(c=b.nodeName,3===b.nodeType||b.nodeType>=8&&b.nodeType<=10)d.push(b);else{if(!a.isStyleElement(c))break;if(y(b))break;d.push(b)}b=b.nextSibling}return d}function A(a,b){var c=b?"previousSibling":"nextSibling",d=a[c],e=d?a.nodeName:"";return/(?:p|h[1-6]|ul|ol|table|pre)/i.test(e)}function B(a,b){for(var c,d=a.firstChild;d;)if(d.nodeType===K.TEXT_NODE&&/^[\s\uFEFF\xA0\n]+$/gi.test(d.textContent)){if(b&&!A(d,!0)&&!A(d,!1)){d=d.nextSibling;continue}c=d,d=d.nextSibling,a.removeChild(c)}else d=d.nextSibling}function C(a,b){for(var d,e,f=a.firstChild;f;)e=f.nodeName,c.InlineElements[e]&&!b.hasBlockElement(f)&&b.isEmptyNode(f,T,!0)?(d=f,f=f.nextSibling,a.removeChild(d)):f=f.nextSibling}function D(a){this.defaultSchema=a||new f}var E,F,G,H,I,J=c.toMap,K=c.NodeTypes,L="data-cui-",M=c.NoImageData,N=c.FormElements,O=c.HeadElements,P=c.SVGElements,Q=c.TAB_COUNT,R=c.UNICODE_CHAR_CODE.NBSP,S=c.UNICODE_CHAR_CODE.SPACE,T=J("iframe video audio object script area base basefont br col frame hr img input isindex link meta param embed source track"),U=J("a, area, b, br, cite, del, dfn, em, embed, i, img, ins, kbd, label, map, s, samp, small, span, strong, strike, sub, sup, u, #text, #comment"),V=J("table, ul, ol, p, h1, h2, h3, h4, h5, h6"),W=J("br, map, colgroup, img, hr, table, tbody, tfoot, thead, tr");return G=new g,D.prototype={attrHandles:{},attrHandleList:[],elemHandles:{},elemHandleList:[],headNode:null,bodyNode:null,_hasInvalidAttribute:!1,_hasInvalidElement:!1,_init:function(){},addElementHandler:function(a,b,c,d){var e=this;a&&b&&c&&d&&(e.elemHandleList.dirty=!0,a=a.toLowerCase(),c=c.toUpperCase(),e.elemHandles[a]={id:a,dependencies:b,tag:c,handle:d})},addAttrHandler:function(a,b,c,d){var e=this;a&&b&&c&&d&&(e.attrHandleList.dirty=!0,a=a.toLowerCase(),c=c.toLowerCase(),e.attrHandles[a]={id:a,dependencies:b,attrName:c,handle:d})},getBodyNode:function(){return this.bodyNode},getHeadNode:function(){return this.headNode},parse:function(a,c){var d=this,e={},g={};if(d.schema=c?new f(c):d.defaultSchema,d.builder=new b(c),d.root=d.builder.parse(a),G.init(d.root,{isOldIE:d.schema.isOldIE(),isIE:d.schema.isIE(),forceBRToEmptyLine:d.schema.new_line_without_blank}),d.root=d._execElemeHandle(d.root,e),d.root=d._execAttrHandle(d.root,e),d.schema.applySchema)try{d.bodyNode=u(d.root,d.schema,g),d.headNode=g.headNode,d._hasInvalidElement=g.hasInvalidElement||!1,d._hasInvalidAttribute=g.hasInvalidAttribute||!1}catch(a){}return d.root},validDoc:function(a,b,c,d){var e=this,f={};e.schema=b?b:e.defaultSchema,e.root=a,G.init(a,{isOldIE:e.schema.isOldIE(),isIE:e.schema.isIE(),forceBRToEmptyLine:e.schema.new_line_without_blank});try{e.bodyNode=u(e.root,e.schema,f,c,d),e.headNode=f.headNode,e._hasInvalidElement=f.hasInvalidElement||!1,e._hasInvalidAttribute=f.hasInvalidAttribute||!1}catch(a){}return e.root},getTreeBuilder:function(a){var c=this;return c.builder||(c.builder=new b(a?new f(a):c.defaultSchema)),c.builder},replaceTextDecoration:function(a){return a=a.replace(/text\-decoration\-line\s*\:([^\;]*)(\;|\")/gi,function(a,b,c){var d=a;return/none|underline|overline|initial|inherit|line\-through/.test(b)&&(d="text-decoration:"+b+c),d})},_requires:function(a,b,c){var d,e,f,g=this,h=0,i=c?g.elemHandles:g.attrHandles;for(h=0,d=a.length;h<d;h++)e=a[h].toLowerCase(),b[e]&&!i[e]||g._isLoaded(e,c)||(f=i[e],g._loadHandle(f,b,c))},_initHandles:function(a){var b=this;return a&&b.elemHandleList.dirty?(b.elemHandleList=[],b.elemHandleList.dirty=!1):!a&&b.attrHandleList.dirty&&(b.attrHandleList=[],b.attrHandleList.dirty=!1),b._initHandleChain(a),a?b.elemHandleList:b.attrHandleList},_isLoaded:function(b,c){var d=this,e=c?d.elemHandleList:d.attrHandleList;return a.inArray(b,e)!==-1},_loadHandle:function(a,b,c){var d,e=this,f=a?a.id:null,g=a?a.dependencies:[];a&&!b[f]&&(b[f]=!0,e._requires(g,b,c),d=c?e.elemHandleList:e.attrHandleList,d.push(f))},_initHandleChain:function(a){var b,c,d=this,e=a?d.elemHandles:d.attrHandles,f={};for(b in e)d._isLoaded(b,a)||(c=e[b],d._loadHandle(c,f,a))},_execElemeHandle:function(a,b){var c,d,e,f,g,h,i,j=this;for(h=j._initHandles(!0),d=0,e=h.length;d<e;d++)i=j.elemHandles[h[d]],c=i.tag,f=i.handle,g=a.getNodesByTagName(c),g.length>0&&f(g,G,b);return a},_execAttrHandle:function(a,b){var c,d,e,f,g,h,i,j=this;for(h=j._initHandles(!1),d=0,e=h.length;d<e;d++)i=j.attrHandles[h[d]],c=i.attrName,f=i.handle,g=a.getNodesByAttr(c),g.length>0&&f(g,G,b);return a},hasInvalidElement:function(){return this._hasInvalidElement||!1},hasInvalidAttribute:function(){return this._hasInvalidAttribute||!1},hasInvalidItem:function(){return this._hasInvalidElement||this._hasInvalidAttribute||!1},serialize:function(a,b){return b?a.toFormatString():a.toString()},destroy:function(){var a=this;G.final(),a.schema=null,a.root=null,a.bodyNode=null,a.headNode=null,a._hasInvalidElement=null,a._hasInvalidAttribute=null,a.attrHandleList=null,a.attrHandles=null,a.elemHandleList=null,a.elemHandles=null,F=null}},D}),d("ui/Core",["jqueryCafe"],function(a){function c(b,c){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,!(!b.href||!f||"map"!==e.nodeName.toLowerCase())&&(g=a("img[usemap='#"+f+"']")[0],!!g&&d(g))):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e="cui-";return a.ui=a.ui||{},a.extend(a.ui,{prefix:e,panelTypes:{edit:"iframe"},keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38,SHIFT:16,NUM2:50,EQUAL_SIGN:187,COMPOSING:229,NUM_0:48,NUM_9:57,CHAR_A:65,CHAR_Z:90,NUMPAD_0:96,NUMPAD_DIVISION:111,SEMICOLON:186,GRAVE_ACCENT:192,BRACKET_LEFT:219,QUOTES:222,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90},isNavigationKeyCode:{33:!0,34:!0,35:!0,36:!0,37:!0,38:!0,39:!0,40:!0},isFunction:function(a){return"function"==typeof a},addPrefixToClasses:function(a){for(var b=0,c=a.length;b<c;b++)a[b]=e+a[b];return a},makeHTML:function(b){var c,d,e,f,g,h,i;if(!b||!b.tag)return"string"==typeof b?b:"";if(c="<"+b.tag,d=b.attr)for(f in d)g=d[f],c+=" "+f+'="'+(a.isArray(g)?g.join(" "):g)+'"';if(c+=">",e=b.contents)for(h=0,i=e.length;h<i;h++)c+=this.makeHTML(e[h]);return c+="</"+b.tag+">",b.after&&(c+=this.makeHTML(b.after)),c},documentchanged:function(){var a=window.cafe||b;a&&a.activeEditor&&a.activeEditor.trigger&&a.activeEditor.trigger("documentchanged")},browser:function(){var a=window.cafe||b;return a&&a.browser?a.browser:null},getIEVersion:function(){var a=window.cafe||b;return a&&a.browser&&a.browser.ie?a.browser.version:null},getScrollbarWidth:function(){var a,b,c,d;return this._scrollbarWidth?this._scrollbarWidth:(d=document.createElement("div"),d.style.visibility="hidden",d.style.width="100px",document.body.appendChild(d),a=d.offsetWidth,d.style.overflow="scroll",b=document.createElement("div"),b.style.width="100%",d.appendChild(b),c=b.offsetWidth,d.parentNode.removeChild(d),this._scrollbarWidth=a-c,this._scrollbarWidth)}}),a.fn.extend({scrollParent:function(b){var c=this.css("position"),d="absolute"===c,e=b?/(auto|scroll|hidden)/:/(auto|scroll)/,f=this.parents().filter(function(){var b=a(this);return(!d||"static"!==b.css("position"))&&e.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==c&&f.length?f:a(this[0].ownerDocument||window.document)},uniqueId:function(){var a=0;return function(){return this.each(function(){this.id||(this.id=e+"id-"+ ++a)})}}(),removeUniqueId:function(){return this.each(function(){new RegExp("^"+e+"id-\\d+$").test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}),focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a.ui.plugin={add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c,d){var e,f=a.plugins[b];if(f&&(d||a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType))for(e=0;e<f.length;e++)a.options[f[e][0]]&&f[e][1].apply(a.element,c)}},!0}),d("ui/Widget",["jqueryCafe","ui/Core"],function(a){var c=a.ui.prefix,d=0,e=Array.prototype.slice,f={disabled:c+"state-disabled",hover:c+"state-hover",focus:c+"ui-state-focus"};return a.cleanData=function(b){return function(c){var d,e,f;for(f=0;null!=(e=c[f]);f++)try{d=a._data(e,"events"),d&&d.remove&&a(e).triggerHandler("remove")}catch(a){}b(c)}}(a.cleanData),a.widget=function(b,d,e){var f,g,h,i,j={},k=b.split(".")[0];return b=b.split(".")[1],f=c+b,e||(e=d,d=a.Widget),a.expr[":"][f.toLowerCase()]=function(b){return!!a.data(b,f)},a[k]=a[k]||{},g=a[k][b],h=a[k][b]=function(a,b){return this._createWidget?arguments.length?this._createWidget(a,b):void 0:new h(a,b)},a.extend(h,g,{version:e.version,_proto:a.extend({},e),_childConstructors:[]}),i=new d,i.options=a.widget.extend({},i.options),i.htmlData={},a.each(e,function(b,c){return a.isFunction(c)?void(j[b]=function(){var a=function(){return d.prototype[b].apply(this,arguments)},e=function(a){return d.prototype[b].apply(this,a)};return function(){var b,d=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=c.apply(this,arguments),this._super=d,this._superApply=f,b}}()):void(j[b]=c)}),h.prototype=a.widget.extend(i,{widgetEventPrefix:g?i.widgetEventPrefix||b:b},j,{constructor:h,namespace:k,widgetName:b,widgetFullName:f}),g?(a.each(g._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,h,c._proto)}),delete g._childConstructors):d._childConstructors.push(h),a.widget.bridge(b,h),h},a.widget.extend=function(c){for(var d,f,g=e.call(arguments,1),h=0,i=g.length;h<i;h++)for(d in g[h])f=g[h][d],g[h].hasOwnProperty(d)&&f!==b&&(a.isPlainObject(f)?c[d]=a.isPlainObject(c[d])?a.widget.extend({},c[d],f):a.widget.extend({},f):c[d]=f);return c},a.widget.bridge=function(c,d){var f=d.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=e.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,h?this.each(function(){var d,e=a.data(this,f);return"instance"===g?(j=e,!1):e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):void 0):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")}):this.each(function(){var b=a.data(this,f);b?(b.option(g||{}),b._init&&b._init()):a.data(this,f,new d(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",
widgetEventPrefix:"",options:{disabled:!1,create:null},_createWidget:function(c,e){return this.uuid=d++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),c),this.bindings=a(),this.hoverable=a(),this.focusable=a(),e!==b&&(e=a(e||this.defaultElement||this)[0],this.element=a(e),this._registerElementInfo(e)),this._create(),e!==b&&(this._trigger("create",null,this._getCreateEventData()),this._init()),this},_registerElementInfo:function(b){b!==this&&(a.data(b,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===b&&this.destroy()}}),this.document=a(b.style?b.ownerDocument:b.document||b),this.window=a(this.document[0].defaultView||this.document[0].parentWindow))},getHTMLData:function(){var a=this.htmlData;return a.attr.id=this.getID(),a},getID:function(){return c+this.uuid},init:function(){var b=a("#"+this.getID())[0];b&&(this.element=a(b),this._registerElementInfo(b),this._init())},create:function(b){return b=b||"body",a(b).append(a.ui.makeHTML(this.getHTMLData())),this.init(),this},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(a){this.element&&(this._destroy(),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+f.disabled),this.bindings.off(this.eventNamespace),this.hoverable.removeClass(f.hover),this.focusable.removeClass(f.focus),this.options=null,this.htmlData&&(this.htmlData=null),a&&this.element.remove(),this.element=null)},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;g<e.length-1;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),1===arguments.length)return f[c]===b?null:f[c];f[c]=d}else{if(1===arguments.length)return this.options[c]===b?null:this.options[c];if(this.options[c]===d)return this;h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.element&&this.element.toggleClass(this.widgetFullName+"-disabled",!!b),b&&(this.hoverable.removeClass(f.hover),this.focusable.removeClass(f.focus))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(b,c,d){var e,g=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,h){function i(){if(b||g.options.disabled!==!0&&!a(this).hasClass(f.disabled))return("string"==typeof h?g[h]:h).apply(g,arguments)}"string"!=typeof h&&(i.guid=h.guid=h.guid||i.guid||a.guid++);var j=d.match(/^([\w:-]*)\s*(.*)$/),k=j[1]+g.eventNamespace,l=j[2];l?e.on(k,l,i):c.on(k,i)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.off(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){var c=a(b.currentTarget);c.addClass(f.hover),a.ui.getIEVersion()&&this._on(this.document,{keydown:function(){c.removeClass(f.hover),this._off(this.document,"keydown")},wheel:function(){c.removeClass(f.hover),this._off(this.document,"wheel")},scroll:function(){c.removeClass(f.hover),this._off(this.document,"scroll")}})},mouseleave:function(b){a(b.currentTarget).removeClass(f.hover),this._off(this.document,"keydown"),this._off(this.document,"wheel"),this._off(this.document,"scroll")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass(f.focus)},focusout:function(b){a(b.currentTarget).removeClass(f.focus)}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}}),a.widget}),d("ui/Position",["jqueryCafe","ui/Core"],function(a){return function(){function c(a,b,c){return[parseFloat(a[0])*(o.test(a[0])?b/100:1),parseFloat(a[1])*(o.test(a[1])?c/100:1)]}function d(b,c){return parseInt(a.css(b,c),10)||0}function e(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var f,g,h=Math.max,i=Math.abs,j=Math.round,k=/left|center|right/,l=/top|center|bottom/,m=/[\+\-]\d+(\.[\d]+)?%?/,n=/^\w+/,o=/%$/,p=a.fn.position;a.position={scrollbarWidth:function(){if(f!==b)return f;var c,d,e=a("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),g=e.children()[0];return a("body").append(e),c=g.offsetWidth,e.css("overflow","scroll"),d=g.offsetWidth,c===d&&(d=e[0].clientWidth),e.remove(),f=c-d},getScrollInfo:function(b){var c=b.isWindow||b.isDocument?"":b.element.css("overflow-x"),d=b.isWindow||b.isDocument?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:f?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]),e=!!c[0]&&9===c[0].nodeType;return{element:c,isWindow:d,isDocument:e,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d||e?c.width():c.outerWidth(),height:d||e?c.height():c.outerHeight()}}},a.fn.position=function(b){if(!b||!b.of)return p.apply(this,arguments);b=a.extend({},b);var f,o,q,r,s,t,u=a(b.of),v=a.position.getWithinInfo(b.within),w=a.position.getScrollInfo(v),x=(b.collision||"flip").split(" "),y={};return t=e(u),u[0].preventDefault&&(b.at="left top"),o=t.width,q=t.height,r=t.offset,s=a.extend({},r),a.each(["my","at"],function(){var a,c,d=(b[this]||"").split(" ");1===d.length&&(d=k.test(d[0])?d.concat(["center"]):l.test(d[0])?["center"].concat(d):["center","center"]),d[0]=k.test(d[0])?d[0]:"center",d[1]=l.test(d[1])?d[1]:"center",a=m.exec(d[0]),c=m.exec(d[1]),y[this]=[a?a[0]:0,c?c[0]:0],b[this]=[n.exec(d[0])[0],n.exec(d[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===b.at[0]?s.left+=o:"center"===b.at[0]&&(s.left+=o/2),"bottom"===b.at[1]?s.top+=q:"center"===b.at[1]&&(s.top+=q/2),f=c(y.at,o,q),s.left+=f[0],s.top+=f[1],this.each(function(){var e,k,l=a(this),m=l.outerWidth(),n=l.outerHeight(),p=d(this,"marginLeft"),t=d(this,"marginTop"),z=m+p+d(this,"marginRight")+w.width,A=n+t+d(this,"marginBottom")+w.height,B=a.extend({},s),C=c(y.my,l.outerWidth(),l.outerHeight());"right"===b.my[0]?B.left-=m:"center"===b.my[0]&&(B.left-=m/2),"bottom"===b.my[1]?B.top-=n:"center"===b.my[1]&&(B.top-=n/2),B.left+=C[0],B.top+=C[1],g||(B.left=j(B.left),B.top=j(B.top)),e={marginLeft:p,marginTop:t},a.each(["left","top"],function(c,d){a.ui.position[x[c]]&&a.ui.position[x[c]][d](B,{targetWidth:o,targetHeight:q,elemWidth:m,elemHeight:n,collisionPosition:e,collisionWidth:z,collisionHeight:A,offset:[f[0]+C[0],f[1]+C[1]],my:b.my,at:b.at,within:v,elem:l})}),b.using&&(k=function(a){var c=r.left-B.left,d=c+o-m,e=r.top-B.top,f=e+q-n,g={target:{element:u,left:r.left,top:r.top,width:o,height:q},element:{element:l,left:B.left,top:B.top,width:m,height:n},horizontal:d<0?"left":c>0?"right":"center",vertical:f<0?"top":e>0?"bottom":"middle"};o<m&&i(c+d)<o&&(g.horizontal="center"),q<n&&i(e+f)<q&&(g.vertical="middle"),h(i(c),i(d))>h(i(e),i(f))?g.important="horizontal":g.important="vertical",b.using.call(this,a,g)}),l.offset(a.extend(B,{using:k}))})},a.ui.position={fit:{left:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollLeft:d.offset.left,f=d.width,g=a.left-b.collisionPosition.marginLeft,i=e-g,j=g+b.collisionWidth-f-e;b.collisionWidth>f?i>0&&j<=0?(c=a.left+i+b.collisionWidth-f-e,a.left+=i-c):j>0&&i<=0?a.left=e:i>j?a.left=e+f-b.collisionWidth:a.left=e:i>0?a.left+=i:j>0?a.left-=j:a.left=h(a.left-g,a.left)},top:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollTop:d.offset.top,f=b.within.height,g=a.top-b.collisionPosition.marginTop,i=e-g,j=g+b.collisionHeight-f-e;b.collisionHeight>f?i>0&&j<=0?(c=a.top+i+b.collisionHeight-f-e,a.top+=i-c):j>0&&i<=0?a.top=e:i>j?a.top=e+f-b.collisionHeight:a.top=e:i>0?a.top+=i:j>0?a.top-=j:a.top=h(a.top-g,a.top)}},flip:{left:function(a,b){var c,d,e=b.within,f=e.offset.left+e.scrollLeft,g=e.width,h=e.isWindow?e.scrollLeft:e.offset.left,j=a.left-b.collisionPosition.marginLeft,k=j-h,l=j+b.collisionWidth-g-h,m="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,n="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,o=-2*b.offset[0];k<0?(c=a.left+m+n+o+b.collisionWidth-g-f,(c<0||c<i(k))&&(a.left+=m+n+o)):l>0&&(d=a.left-b.collisionPosition.marginLeft+m+n+o-h,(d>0||i(d)<l)&&(a.left+=m+n+o))},top:function(a,b){var c,d,e=b.within,f=e.offset.top+e.scrollTop,g=e.height,h=e.isWindow?e.scrollTop:e.offset.top,j=a.top-b.collisionPosition.marginTop,k=j-h,l=j+b.collisionHeight-g-h,m="top"===b.my[1],n=m?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,o="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];k<0?(d=a.top+n+o+p+b.collisionHeight-g-f,a.top+n+o+p>k&&(d<0||d<i(k))&&(a.top+=n+o+p)):l>0&&(c=a.top-b.collisionPosition.marginTop+n+o+p-h,a.top+n+o+p>l&&(c>0||i(c)<l)&&(a.top+=n+o+p))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,f,h=document.getElementsByTagName("body")[0],i=document.createElement("div");b=document.createElement(h?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},h&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in d)b.style[f]=d[f];b.appendChild(i),c=h||document.documentElement,c.insertBefore(b,c.firstChild),i.style.cssText="position: absolute; left: 10.7432222px;",e=a(i).offset().left,g=e>10&&e<11,b.innerHTML="",c.removeChild(b)}()}(),a.ui.position}),d("ui/Mouse",["jqueryCafe","ui/Widget"],function(a){var b,c=!1;return a(document).mouseup(function(){c=!1}),a.widget("ui.mouse",{options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_eventNS:"."+a({}).uniqueId()[0].id,_mouseInit:function(c){var d=this;this.element.on("mousedown."+this._eventNS,function(a){return d._mouseDown(a)}).on("click."+this._eventNS,function(b){if(!0===a.data(b.target,d._eventNS+".preventClickEvent"))return a.removeData(b.target,d._eventNS+".preventClickEvent"),b.stopImmediatePropagation(),!1}),this.started=!1,b=c},_mouseFinal:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&(this.window.off(this._eventNS),this.document.off(this._eventNS))},_mouseDown:function(b){if(!c){this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=1===b.which,f=!("string"!=typeof this.options.cancel||!b.target.nodeName)&&a(b.target).closest(this.options.cancel).length;return!(e&&!f&&this._mouseCapture(b))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(b)!==!1,!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},this.document.on("mousemove."+this._eventNS,this._mouseMoveDelegate).on("mouseup."+this._eventNS,this._mouseUpDelegate),this.window.on("mouseup."+this._eventNS,this._mouseUpDelegate),b.preventDefault(),c=!0,!0))}},_mouseMove:function(c){return a.ui.ie&&(!document.documentMode||document.documentMode<9)&&!c.button?this._mouseUp(c):c.which?this._mouseStarted?(this._mouseDrag(c),c.preventDefault()):(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,c)!==!1,this._mouseStarted?this._mouseDrag(c):this._mouseUp(c)),!this._mouseStarted):b?!this._mouseStarted:this._mouseUp(c)},_mouseUp:function(b){return this.window.off("mouseup."+this._eventNS,this._mouseUpDelegate),this.document.off("mousemove."+this._eventNS,this._mouseMoveDelegate).off("mouseup."+this._eventNS,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),c=!1,!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}),d("ui/Resizable",["jqueryCafe","ui/Core","ui/Mouse","ui/Widget"],function(a){return a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{controlPoint:!1,aspectRatioPoint:null,keepOriginalSize:!1,keepPosition:!1,display:null,alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(a){return parseInt(a,10)||0},_isNumber:function(a){return!isNaN(parseInt(a,10))},_hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0||(b[d]=1,e=b[d]>0,b[d]=0,e)},_create:function(){var b,c,d,e,f,g,h,i,j,k=a.ui.browser(),l=this,m=this.options;if(a.extend(this,{_aspectRatio:!!m.aspectRatio,aspectRatio:m.aspectRatio,doc:m.doc,originalElement:this.element,_proportionallyResizeElements:[],_helper:m.helper||m.ghost||m.animate?m.helper||"cui-resizable-helper":null}),this.originalElement.addClass("cui-resizable"),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a("<div class='cui-wrapper' style='"+(m.controlPoint?"":"overflow: hidden;")+"'></div>").css({display:m.display||"",position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:m.keepPosition?"auto":this.element.css("top"),left:m.keepPosition?"auto":this.element.css("left"),float:this.element.css("float"),"z-index":this.element.css("z-index"),"vertical-align":this.element.css("vertical-align")})),this.element=this.element.parent().data("cui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,i=this.originalElement[0].style,j=i.margin,j?this.element.css("margin",j):(j=i.marginLeft,j&&this.element.css("marginLeft",j),j=i.marginTop,j&&this.element.css("marginTop",j),j=i.marginRight,j&&this.element.css("marginRight",j),j=i.marginBottom,j&&this.element.css("marginBottom",j)),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),k.ie?(h=this.originalElement[0].getAttribute("src"),h=h.replace(/&#10;/g,"").replace(/\n/g,"").replace(/&#61;/g,"="),this.element.attr("contenteditable","false").css("opacity",.6),"true"!==this.originalElement.attr("data-cui-alt-image")?(this.element.css("background-image","url('"+h+"')").css("background-repeat","no-repeat"),"data:image/svg+xml;base64,"!==h.substring(0,26)&&this.element.css("background-size",this.element.outerWidth()+"px "+this.element.outerHeight()+"px")):this.element.attr("data-cui-alt-image","true"),this.originalElement.attr("unselectable","off").css("display","none")):k.webkit&&(this.originalElement.css({"margin-top":"0px","margin-left":"0px",top:"0px",left:"0px",margin:"0px"}),this.element.css("opacity",.8)),this._proportionallyResize()),this.handles=m.handles||(a(".cui-resizable-handle",this.element).length?{n:".cui-resizable-n",e:".cui-resizable-e",s:".cui-resizable-s",w:".cui-resizable-w",se:".cui-resizable-se",sw:".cui-resizable-sw",ne:".cui-resizable-ne",nw:".cui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),b=this.handles.split(","),this.handles={},c=0;c<b.length;c++)d=a.trim(b[c]),g=m.controlPoint?" cui-control-point":"",f="cui-resizable-"+d,m.aspectRatioPoint&&a.inArray(d,m.aspectRatioPoint.split(/(?:,(?:\s){0,})/))!==-1&&(g+=" cui-resizable-aspectRatio"),e=a("<div unselectable='on' class='cui-resizable-handle "+f+g+"'></div>"),e.css({zIndex:m.zIndex}).attr("data-cafe-filter","remove"),"se"===d&&e.addClass("cui-icon cui-icon-gripsmall-diagonal-se"),this.handles[d]=".cui-resizable-"+d,this.element.append(e);this._renderAxis=function(b){var c,d,e,f;b=b||this.element;for(c in this.handles)this.handles[c].constructor===String&&(this.handles[c]=this.element.children(this.handles[c]).first().show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(d=a(this.handles[c],this.element),f=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),e=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join(""),b.css(e,f),this._proportionallyResize()),a(this.handles[c]).length},this._renderAxis(this.element),this._handles=a(".cui-resizable-handle",this.element),this._handles.mouseover(function(){l.resizing||(this.className&&(e=this.className.match(new RegExp("cui-resizable-(se|sw|ne|nw|n|e|s|w)","i"))),l.axis=e&&e[1]?e[1]:"se")}),m.autoHide&&(this._handles.hide(),a(this.element).addClass("cui-resizable-autohide").mouseenter(function(){m.disabled||(a(this).removeClass("cui-resizable-autohide"),l._handles.show())}).mouseleave(function(){m.disabled||l.resizing||(a(this).addClass("cui-resizable-autohide"),l._handles.hide())})),this._mouseInit(m.checkIFrame)},_destroy:function(){this._mouseFinal();var b,c=function(b){a(b).removeClass("cui-resizable cui-resizable-disabled cui-resizable-resizing").removeData("resizable").removeData("cui-resizable").unbind(".resizable").find("cui-resizable-handle").remove()};return this.newStyle?(this.originalElement.css("opacity",""),this.elementIsWrapper&&(c(this.element),this.element.remove())):(this.elementIsWrapper&&(c(this.element),b=this.element,this.options.keepOriginalSize?this.originalElement.css({position:b.css("position"),marginLeft:b.css("margin-left"),marginTop:b.css("margin-top")}).insertBefore(b):this.originalElement.css({position:b.css("position"),top:this.options.keepPosition?"auto":b.css("top"),left:this.options.keepPosition?"auto":b.css("left"),marginLeft:b.css("margin-left"),marginTop:b.css("margin-top")}).insertBefore(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle)),c(this.originalElement),this.originalElement.hasClass()||this.originalElement.removeAttr("class"),this},_mouseCapture:function(b){var c,d,e=!1;for(c in this.handles)d=a(this.handles[c])[0],(d===b.target||a.contains(d,b.target))&&(e=!0);return!this.options.disabled&&e},_mouseStart:function(b){var c,d,e,f=this.options,g=this.element;return this.resizing=!0,this._renderProxy(),c=this._num(this.helper.css("left")),d=this._num(this.helper.css("top")),f.containment&&(c+=a(f.containment).scrollLeft()||0,d+=a(f.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:c,top:d},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:g.width(),height:g.height()},this.originalSize=this._helper?{width:g.outerWidth(),height:g.outerHeight()}:{width:g.width(),height:g.height()},this.sizeDiff={width:g.outerWidth()-g.width(),height:g.outerHeight()-g.height()},this.originalPosition={left:c,top:d},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio="number"==typeof f.aspectRatio?f.aspectRatio:this.originalSize.width/this.originalSize.height||1,f.aspectRatioPoint&&(this._aspectRatio=a.inArray(this.axis,f.aspectRatioPoint.split(/(?:,(?:\s){0,})/))!==-1),e=a(".cui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"===e?this.axis+"-resize":e),g.addClass("cui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var c,d,e=this.originalMousePosition,f=this.axis,g=b.pageX-e.left||0,h=b.pageY-e.top||0,i=this._change[f];return this._updatePrevProperties(),!!i&&(c=i.apply(this,[b,g,h]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(c=this._updateRatio(c,b)),c=this._respectSize(c,b),this._updateCache(c),this._propagate("resize",b),d=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),a.isEmptyObject(d)||(this._updatePrevProperties(),this._trigger("resize",b,this.ui()),this._applyChanges()),this.newStyle&&(this.originalElement.outerWidth(this.size.width),this.originalElement.outerHeight(this.size.height),this.element.css({top:this.originalElement.offset().top,left:this.originalElement.offset().left})),!1)},_mouseStop:function(b){var c,d,e,f,g,h,i,j=this.options,k=this;return this.resizing=!1,this._helper&&(c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),e=d&&this._hasScroll(c[0],"left")?0:k.sizeDiff.height,f=d?0:k.sizeDiff.width,g={width:k.helper.width()-f,height:k.helper.height()-e},j.animate||(j.keepPosition?this.element.css(g):(h=parseInt(k.element.css("left"),10)+(k.position.left-k.originalPosition.left)||null,i=parseInt(k.element.css("top"),10)+(k.position.top-k.originalPosition.top)||null,this.element.css(a.extend(g,{top:i,left:h})))),k.helper.height(k.size.height),k.helper.width(k.size.width),this._helper&&!j.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this.element.removeClass("cui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var a={},b=this.options;return b.keepPosition||(this.position.top!==this.prevPosition.top&&(a.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(a.left=this.position.left+"px")),this.size.width!==this.prevSize.width&&(a.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(a.height=this.size.height+"px"),this.helper.css(a),a},_updateVirtualBoundaries:function(a){var b,c,d,e,f,g=this.options;f={minWidth:this._isNumber(g.minWidth)?g.minWidth:0,maxWidth:this._isNumber(g.maxWidth)?g.maxWidth:1/0,minHeight:this._isNumber(g.minHeight)?g.minHeight:0,maxHeight:this._isNumber(g.maxHeight)?g.maxHeight:1/0},(this._aspectRatio||a)&&(b=f.minHeight*this.aspectRatio,d=f.minWidth/this.aspectRatio,c=f.maxHeight*this.aspectRatio,e=f.maxWidth/this.aspectRatio,b>f.minWidth&&(f.minWidth=b),d>f.minHeight&&(f.minHeight=d),c<f.maxWidth&&(f.maxWidth=c),e<f.maxHeight&&(f.maxHeight=e)),this._vBoundaries=f},_updateCache:function(a){this.offset=this.helper.offset(),this._isNumber(a.left)&&(this.position.left=a.left),this._isNumber(a.top)&&(this.position.top=a.top),this._isNumber(a.height)&&(this.size.height=a.height),this._isNumber(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,c=this.size,d=this.axis;return this._isNumber(a.width)?a.height=a.width/this.aspectRatio:this._isNumber(a.height)&&(a.width=a.height*this.aspectRatio),"sw"===d&&(a.left=b.left+(c.width-a.width),a.top=null),"nw"===d&&(a.top=b.top+(c.height-a.height),a.left=b.left+(c.width-a.width)),a},_respectSize:function(a){var b=this._vBoundaries,c=this.axis,d=this._isNumber(a.width)&&b.maxWidth&&b.maxWidth<a.width,e=this._isNumber(a.height)&&b.maxHeight&&b.maxHeight<a.height,f=this._isNumber(a.width)&&b.minWidth&&b.minWidth>a.width,g=this._isNumber(a.height)&&b.minHeight&&b.minHeight>a.height,h=this.originalPosition.left+this.originalSize.width,i=this.position.top+this.size.height,j=/sw|nw|w/.test(c),k=/nw|ne|n/.test(c);return f&&(a.width=b.minWidth),g&&(a.height=b.minHeight),d&&(a.width=b.maxWidth),e&&(a.height=b.maxHeight),f&&j&&(a.left=h-b.minWidth),d&&j&&(a.left=h-b.maxWidth),g&&k&&(a.top=i-b.minHeight),e&&k&&(a.top=i-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a},_getPaddingPlusBorderDimensions:function(a){function b(a,b){var c=parseInt(a[0].style[b]||a.css(b));return isNaN(c)?0:c}for(var c=0,d=[],e=[b(a,"borderTopWidth"),b(a,"borderRightWidth"),b(a,"borderBottomWidth"),b(a,"borderLeftWidth")],f=[b(a,"paddingTop"),b(a,"paddingRight"),b(a,"paddingBottom"),b(a,"paddingLeft")];c<4;c++)d[c]=parseInt(e[c],10)||0,d[c]+=parseInt(f[c],10)||0;return{height:d[0]+d[2],width:d[1]+d[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){for(var b,c=0,d=this.helper||this.element;c<this._proportionallyResizeElements.length;c++)b=this._proportionallyResizeElements[c],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(b)),b.css({height:d.height()-this.outerDimensions.height||0,width:d.width()-this.outerDimensions.width||0});a.ui.browser().ie&&"auto"!==d.css("background-size")&&d.css("background-size",d.width()+"px "+d.height()+"px")}},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset(),this._helper?(this.helper=this.helper||a("<div "+(c.controlPoint?"":"style='overflow: hidden;")+"'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=this.originalSize,d=this.originalPosition;return{left:d.left+b,width:c.width-b}},n:function(a,b,c){var d=this.originalSize,e=this.originalPosition;return{top:e.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!==b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition,handles:this._handles}}}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).resizable("instance"),c=b.options,d=function(b){a(b).each(function(){var b=a(this);b.data("ui-resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof c.alsoResize||c.alsoResize.parentNode?d(c.alsoResize):c.alsoResize.length?(c.alsoResize=c.alsoResize[0],d(c.alsoResize)):a.each(c.alsoResize,function(a){d(a)})},resize:function(b,c){var d=a(this).resizable("instance"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("ui-resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);"number"==typeof c&&c>=0&&(f[b]=c||null)}),b.css(f)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?i(e.alsoResize):a.each(e.alsoResize,function(a,b){i(a,b)})},stop:function(){a(this).removeData("resizable-alsoresize")}}),a.ui.resizable}),d("ui/Draggable",["jqueryCafe","ui/Core","ui/Mouse","ui/Widget"],function(a){var b=a.ui.prefix;return a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass(b+"draggable"),this.options.disabled&&this.element.addClass(b+"draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(a,b){this._super(a,b),"handle"===a&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is("."+b+"draggable-dragging")?void(this.destroyOnClear=!0):(this._mouseFinal(),this.element.removeClass(b+"draggable "+b+"draggable-dragging "+b+"draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(c){var d=this.document[0],e=this.options;try{d.activeElement&&"body"!==d.activeElement.nodeName.toLowerCase()&&a(d.activeElement).blur()}catch(a){}return!(this.helper||e.disabled||a(c.target).closest("."+b+"resizable-handle").length>0)&&(this.handle=this._getHandle(c),!!this.handle&&(a(e.iframeFix===!0?"iframe":e.iframeFix).each(function(){a("<div class='"+b+"draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0))},_mouseStart:function(c){var d=this.options;return this.helper=this._createHelper(c),this.helper.addClass(b+"draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,a.extend(this.offset,{click:{left:c.pageX-this.offset.left,top:c.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(c,!1),this.originalPageX=c.pageX,this.originalPageY=c.pageY,d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt),
this._setContainment(),this._trigger("start",c)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,c),this._mouseDrag(c,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,c),!0)},_mouseDrag:function(b,c){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b,!0),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b)),this.dropped&&(d=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",b)!==!1&&c._clear()}):this._trigger("stop",b)!==!1&&this._clear(),!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),this.element.focus(),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is("."+b+"draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){return!this.options.handle||!!a(b.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass(b+"draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass(b+"draggable-handle")},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d[0]===this.element[0]||/(fixed|absolute)/.test(d.css("position"))||d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_isRootNode:function(a){return/(html|body)/i.test(a.tagName)||a===this.document[0]},_getParentOffset:function(){var b=this.offsetParent.offset(),c=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==c&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var a=this.element.position(),b=this._isRootNode(this.scrollParent[0]);return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+(b?0:this.scrollParent.scrollTop()),left:a.left-(parseInt(this.helper.css("left"),10)||0)+(b?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options,f=this.document[0],g=a(f),h=a(window);return this.relativeContainer=null,e.containment?"window"===e.containment?void(this.containment=[h.scrollLeft()-this.offset.relative.left-this.offset.parent.left,h.scrollTop()-this.offset.relative.top-this.offset.parent.top,h.scrollLeft()+h.width()-this.helperProportions.width-this.margins.left,h.scrollTop()+(h.height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===e.containment?void(this.containment=[0,0,g.width()-this.helperProportions.width-this.margins.left,(g.height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):e.containment.constructor===Array?void(this.containment=e.containment):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),c=a(e.containment),d=c[0],void(d&&(b="hidden"!==c.css("overflow"),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=c))):void(this.containment=null)},_convertPositionTo:function(a,b){b||(b=this.position);var c="absolute"===a?1:-1,d=this._isRootNode(this.scrollParent[0]);return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"===this.cssPosition?-this.offset.scroll.top:d?0:this.offset.scroll.top)*c,left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"===this.cssPosition?-this.offset.scroll.left:d?0:this.offset.scroll.left)*c}},_generatePosition:function(a,b){var c,d,e,f,g=this.options,h=this._isRootNode(this.scrollParent[0]),i=a.pageX,j=a.pageY;return h&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),b&&(this.containment&&(this.relativeContainer?(d=this.relativeContainer.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,a.pageX-this.offset.click.left<c[0]&&(i=c[0]+this.offset.click.left),a.pageY-this.offset.click.top<c[1]&&(j=c[1]+this.offset.click.top),a.pageX-this.offset.click.left>c[2]&&(i=c[2]+this.offset.click.left),a.pageY-this.offset.click.top>c[3]&&(j=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,j=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,i=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f),"y"===g.axis&&(i=this.originalPageX),"x"===g.axis&&(j=this.originalPageY)),{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:h?0:this.offset.scroll.top),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:h?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass(b+"draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d,this],!0),"drag"===b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.draggable}),d("ui/Button",["jqueryCafe","ui/Core","ui/Widget"],function(a){var b,c,d,e,f,g;return b=a.ui.prefix,d=a.ui.addPrefixToClasses(["button","widget","state-default","corner-all"]),e=a.ui.addPrefixToClasses(["button-icons-only","button-icon-onlyc","button-text-icons","button-text-icon-primary","button-text-icon-secondary","button-text-only"]).join(" "),f=b+"state-active",g=b+"icon",a.widget("ui.button",{options:{togglable:!1,click:null,pressed:!1,iconOnly:!1,disabled:!1,label:null,tooltip:!0,icons:{primary:null,secondary:null}},_create:function(){var c=this.options,e=c.label||"&#160;",f=c.icons,g=c.tooltip,h=this._makeButtonClasses(d.slice(0)),i=['<span class="'+b+'button-text">'+e+"</span>"];this.htmlData={tag:"button",attr:{type:"button",role:"button"}},(f.primary||f.secondary)&&(f.primary&&i.unshift("<span class='"+this._makeIconClasses("primary")+"'></span>"),f.secondary&&i.push("<span class='"+this._makeIconClasses("secondary")+"'></span>")),g&&(this._title=a.trim("string"==typeof g?g:e),this.htmlData.attr.title=this._title),c.pressed&&(h.push(b+"toggle-on"),this.htmlData.attr["aria-pressed"]="true"),c.disabled&&(h.push(b+"state-disabled"),this.htmlData.attr.disabled="true"),this.htmlData.attr.class=h,this.htmlData.contents=i},_init:function(){var b=this.options,d=b.togglable,e=d?"":f;"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this.buttonElement=this.element,null===b.label&&(b.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.on("mouseenter"+this.eventNamespace,function(){b.disabled||this===c&&a(this).addClass(f)}).on("mouseleave"+this.eventNamespace,function(){b.disabled||a(this).removeClass(e)}).on("click"+this.eventNamespace,function(c){b.disabled&&(c.preventDefault(),c.stopImmediatePropagation()),b.click&&a.isFunction(b.click)&&b.click(c)}),this._manageToggle()},_destroy:function(){this.buttonElement.off()},widget:function(){return this.buttonElement},_manageToggle:function(){var b=this,d=this.options,e=d.togglable,g=this.eventNamespace;e?this.buttonElement.on("click.togglable"+g,function(){return!d.disabled&&void b._press(!d.pressed)}):this.buttonElement.on("mousedown"+g,function(){return!d.disabled&&(a(this).addClass(f),c=this,void b.document.one("mouseup"+g,function(){c=null}))}).on("mouseup"+g,function(){return!d.disabled&&void a(this).removeClass(f)}).on("keydown"+g,function(b){return!d.disabled&&void(b.keyCode!==a.ui.keyCode.SPACE&&b.keyCode!==a.ui.keyCode.ENTER||a(this).addClass(f))}).on("keyup"+g+" blur"+g,function(){a(this).removeClass(f)})},_setOption:function(a,c){var d;if(this._super(a,c),"disabled"===a)return d=this.buttonElement,this.widget().toggleClass(b+"state-disabled",!!c),this.element.prop("disabled",!!c),void(c?(this.option.togglable?d.removeClass(b+"state-focus"):d.removeClass(b+"state-focus "+f),this._trigger("disabled"),d.attr("title")&&d.removeAttr("title")):(this._title&&d.attr("title",this._title),this._trigger("enabled")));if("togglable"===a)this._manageToggle();else if("pressed"===a)return void this._press();this._resetButton()},refresh:function(){var a=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass(b+"button-disabled");a!==this.options.disabled&&this._setOption("disabled",a)},_makeButtonClasses:function(a){var c=this.options.icons,d=c.primary&&c.secondary;return c.primary||c.secondary?a.push(this.options.iconOnly?d?b+"button-icons-only":b+"button-icon-only":b+"button-text-icon"+(d?"s":c.primary?"-primary":"-secondary")):a.push(b+"button-text-only"),a},_makeIconClasses:function(a){var c=this.options.icons;return b+"button-icon-"+a+" "+g+" "+g+"-"+c[a]},_resetButton:function(){var c=this.buttonElement.removeClass(e),d=a("<span></span>",this.document[0]).addClass(b+"button-text").html(this.options.label).appendTo(c.empty()).text(),f=this.options.icons,g=this.options.tooltip;f.primary||f.secondary?(f.primary&&c.prepend("<span class='"+this._makeIconClasses("primary")+"'></span>"),f.secondary&&c.append("<span class='"+this._makeIconClasses("secondary")+"'></span>")):c.addClass(b+"button-text-only"),g&&c.attr("title",a.trim("string"==typeof g?g:d)),this._press()},_press:function(a){"undefined"==typeof a&&(a=this.options.pressed),this.buttonElement[a?"addClass":"removeClass"](b+"toggle-on").attr("aria-pressed",a),this.options.pressed=a}}),a.ui.button}),d("ui/ButtonSet",["jqueryCafe","ui/Core","ui/Widget","ui/Button"],function(a){return a.widget("ui.buttonset",{options:{contents:[]},_create:function(){function b(c){var d,e;for(d=0,e=c.length;d<e;d++)f=c[d],"button"===f.tag?h.push(f):a.isArray(f.contents)&&b(f.contents)}function c(b){return a.grep(b,function(a){return"cui-corner-all"!==a&&"cui-corner-left"!==a&&"cui-corner-right"!==a})}var d,e,f,g,h=[];if(g=this.options.contents,b(g),this.htmlData={tag:"span",attr:{class:["cui-buttonset"]}},e=h.length,1===e)return void(this.htmlData.contents=g);for(d=0;d<e;d++)f=h[d],"button"===f.tag&&(f.attr.class=c(f.attr.class),0===d?f.attr.class.push("cui-corner-left"):d===e-1&&f.attr.class.push("cui-corner-right"));this.htmlData.contents=g}}),a.ui.buttonset}),d("ui/Container",["jqueryCafe","ui/Core","ui/Widget"],function(a){var b=a.ui.prefix;return a.widget("ui.container",{_create:function(){this.htmlData={tag:"div",attr:{class:[b+"container"]}},this.htmlData.contents=[]}}),a.ui.container}),d("ui/Columns",["jqueryCafe","ui/Core","ui/Widget"],function(a){return a.widget("ui.columns",{options:{itemCount:1},_create:function(){this.htmlData={tag:"div",attr:{class:["cui-columns","cui-columns-"+this.options.itemCount]},contents:[]}}}),a.ui.columns}),d("ui/Panel",["jqueryCafe","ui/Core","ui/Widget"],function(a){var b=a.ui.prefix;return a.widget("ui.panel",{options:{tag:"iframe",src:null,title:null,height:"200px"},_create:function(){var a=this.options,c=a.height,d=a.title||"",e=a.tag;this.htmlData={tag:e,attr:{class:[b+"panel"],"data-cui-title":d,style:"width: 100%;height: "+parseInt(c,10)+"px;display:block;"}},"iframe"===e?(this.htmlData.attr.allowTransparency="true",this.htmlData.attr.src=this.options.src||"about:blank"):"textarea"===e&&(this.htmlData.attr.spellcheck="false")},_init:function(){var a=this;"iframe"===this.options.tag&&this.element.on("load",function(){a._trigger("load")})}}),a.ui.panel}),d("ui/Tabs",["jqueryCafe","ui/Core","ui/Widget","ui/Panel"],function(a){var c=window.location;return a.widget("ui.tabs",{options:{panelData:[],position:"bottom",hasTooltip:!1,hideTabList:!1,active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var a=/#.*$/;return function(b){var d,e;b=b.cloneNode(!1),d=b.href.replace(a,""),e=c.href.replace(a,"");try{d=decodeURIComponent(d)}catch(a){}try{e=decodeURIComponent(e)}catch(a){}return b.hash.length>1&&d===e}}(),_create:function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=this.options,s=r.panelData,t=r.position,u=r.navHeight,v=r.active,w=r.hasTooltip,x=[];if(s&&s.length){for("bottom"!==t&&"top"!==t&&(t="bottom"),null===v&&(r.active=v=0),this.running=!1,j={tag:"div",attr:{class:["cui-tabs","cui-widget"],role:"tablist"},contents:[]},r.collapsible&&j.attr.class.push("cui-tabs-collapsible"),u&&(m="line-height:"+u+"px;  height:"+u+"px; padding: 0px;"),k={tag:"ul",attr:{class:["cui-tabs-nav","cui-helper-reset","cui-helper-clearfix","cui-bar","cui-border-"+("bottom"===t?"top":"bottom"),"cui-position-"+t],style:r.hideTabList?"display: none;":""},contents:[]},b=0,c=s.length;b<c;b++)d=a({}).uniqueId()[0].id,e=a({}).uniqueId()[0].id,f=s[b].name||"",g=s[b].label||"",h=s[b].icon,i=s[b].contents||[],q="",o=h?[{tag:"img",attr:{class:["cui-tab-image"],src:h,style:" height:"+(u-3)+"px;"}}]:g||f||"TAB",n={class:["cui-state-default","cui-corner-"+t],"data-cui-name":f,tabindex:"-1","aria-controls":e,"aria-labelledby":d,"aria-selected":b===v,"aria-expanded":b===v},w&&(n.title=f),l={tag:"li",attr:n,contents:[{tag:"a",attr:{"data-cui-name":f,href:"#"+e,class:["cui-tabs-anchor"],role:"presentation",tabindex:"-1",id:d,style:m},contents:o}]},b===v?l.attr.class.push("cui-tabs-active","cui-state-active"):l.attr.class.push("cui-priority-secondary"),q+=b===v?"":"display: none;",s[b].maxHeight&&(q+=" max-Height: "+s[b].maxHeight+"px;",q+=" overflow-y: auto;"),s[b].minHeight&&(q+=" min-height: "+s[b].minHeight+"px;"),p={tag:"div",attr:{id:e,"aria-labelledby":d,class:["cui-tabs-panel","cui-corner-"+("bottom"===t?"top":"bottom")],"data-cui-name":f,role:"tabpanel","aria-hidden":b===v,style:q},contents:i},k.contents.push(l),x.push(p);"bottom"===t?j.contents=x.concat([k]):j.contents=[k].concat(x),this.htmlData=j}},_init:function(){var a=this.options;this.running=!1,this._processTabsInit(),this.active=this._findActive(a.active),this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.active.length&&this.load(a.active)},_processTabsInit:function(){var b=this,c=".cui-state-disabled",d=".cui-tabs-anchor";this.tablist=this._getList().delegate("> li","mousedown"+this.eventNamespace,function(b){a(this).is(c)&&b.preventDefault()}).delegate(d,"focus"+this.eventNamespace,function(){a(this).closest("li").is(c)&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])"),this.anchors=this.tabs.map(function(){return a("a",this)[0]}),this.panels=a(),this.anchors.each(function(c,d){var e,f,g,h=a(d).closest("li"),i=h.attr("aria-controls");b._isLocal(d)?(e=d.hash,f=b.element.find(b._sanitizeSelector(e))):(g=h.attr("aria-controls")||a({}).uniqueId()[0].id,e="#"+g,f=b.element.find(e),f.length||(f=b._createPanel(g),f.insertAfter(b.panels[c-1]||b.tablist)),f.attr("aria-live","polite")),f.length&&(b.panels=b.panels.add(f)),i&&h.data(".cui-tabs-aria-controls",i)})},_tabKeydown:function(b){var c=a(this.document[0].activeElement).closest("li"),d=this.tabs.index(c),e=!0;if(!this._handlePageNav(b)){switch(b.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:d++;break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:e=!1,d--;break;case a.ui.keyCode.END:d=this.anchors.length-1;break;case a.ui.keyCode.HOME:d=0;break;case a.ui.keyCode.SPACE:return b.preventDefault(),clearTimeout(this.activating),void this._activate(d);case a.ui.keyCode.ENTER:return b.preventDefault(),clearTimeout(this.activating),void this._activate(d!==this.options.active&&d);default:return}b.preventDefault(),clearTimeout(this.activating),d=this._focusNextTab(d,e),b.ctrlKey||(c.attr("aria-selected","false"),this.tabs.eq(d).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",d)},this.delay))}},_panelKeydown:function(b){this._handlePageNav(b)||b.ctrlKey&&b.keyCode===a.ui.keyCode.UP&&(b.preventDefault(),this.active.focus())},_handlePageNav:function(b){return b.altKey&&b.keyCode===a.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):b.altKey&&b.keyCode===a.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(b,c){function d(){return b>e&&(b=0),b<0&&(b=e),b}for(var e=this.tabs.length-1;a.inArray(d(),this.options.disabled)!==-1;)b=c?b+1:b-1;return b},_focusNextTab:function(a,b){return a=this._findNextTab(a,b),this.tabs.eq(a).focus(),a},_setOption:function(a,b){return"active"===a?void this._activate(b):"disabled"===a?void this._setupDisabled(b):(this._super(a,b),"collapsible"===a&&(this.element.toggleClass("cui-tabs-collapsible",b),b||this.options.active!==!1||this._activate(0)),"event"===a&&this._setupEvents(b),void("heightStyle"===a&&this._setupHeightStyle(b)))},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var b=this.options,c=this.tablist.children(":has(a[href])");b.disabled=a.map(c.filter(".cui-state-disabled"),function(a){return c.index(a)}),this._processTabs(),b.active!==!1&&this.anchors.length?this.active.length&&!a.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=a()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):b.active=this.tabs.index(this.active):(b.active=!1,this.active=a()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("cui-tabs-active cui-state-active").removeClass("cui-priority-secondary").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var b=this;this.tablist=this._getList().addClass("cui-tabs-nav cui-elper-reset cui-helper-clearfix cui-widget-header cui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(b){a(this).is(".cui-state-disabled")&&b.preventDefault()}).delegate(".cui-tabs-anchor","focus"+this.eventNamespace,function(){a(this).closest("li").is(".cui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("cui-state-default cui-corner-"+this.options.position).attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return a("a",this)[0]}).addClass("cui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=a(),this.anchors.each(function(c,d){var e,f,g,h=a(d).uniqueId().attr("id"),i=a(d).closest("li"),j=i.attr("aria-controls");b._isLocal(d)?(e=d.hash,g=e.substring(1),f=b.element.find(b._sanitizeSelector(e))):(g=i.attr("aria-controls")||a({}).uniqueId()[0].id,e="#"+g,f=b.element.find(e),f.length||(f=b._createPanel(g),f.insertAfter(b.panels[c-1]||b.tablist)),f.attr("aria-live","polite")),f.length&&(b.panels=b.panels.add(f)),j&&i.data("cui-tabs-aria-controls",j),i.attr({"aria-controls":g,"aria-labelledby":h}),f.attr("aria-labelledby",h)}),this.panels.addClass("cui-tabs-panel cui-widget-content cui-corner-"+("top"===this.options.position?"bottom":"top")).attr("role","tabpanel")},_getList:function(){return this.tablist||this.element.find("ol.cui-tabs-nav, ul.cui-tabs-nav").eq(0)},_createPanel:function(b){return a("<div>").attr("id",b).addClass("cui-tabs-panel cui-widget-content cui-corner-bottom").data("cui-tabs-destroy",!0)},_setupDisabled:function(b){a.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1);for(var c,d=0;c=this.tabs[d];d++)b===!0||a.inArray(d,b)!==-1?a(c).addClass("cui-state-disabled").attr("aria-disabled","true"):a(c).removeClass("cui-state-disabled").removeAttr("aria-disabled");this.options.disabled=b},_setupEvents:function(b){var c={};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(a){a.preventDefault()}}),this._on(this.anchors,c),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(b){var c,d=this.element.parent();"fill"===b?(c=d.height(),c-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var b=a(this),d=b.css("position");"absolute"!==d&&"fixed"!==d&&(c-=b.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){c-=a(this).outerHeight(!0)}),this.panels.each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===b&&(c=0,this.panels.each(function(){c=Math.max(c,a(this).height("").height())}).height(c))},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),f=e.closest("li"),g=f[0]===d[0],h=g&&c.collapsible,i=h?a():this._getPanelForTab(f),j=d.length?this._getPanelForTab(d):a(),k={oldPanelName:j.attr("data-cui-name"),oldTab:d,oldPanel:j,newPanelName:i.attr("data-cui-name"),newTab:h?a():f,newPanel:i};b.preventDefault(),f.hasClass("cui-state-disabled")||f.hasClass("cui-tabs-loading")||this.running||g&&!c.collapsible||this._trigger("beforeActivate",b,k)===!1||(c.active=!h&&this.tabs.index(f),this.active=g?a():f,this.xhr&&this.xhr.abort(),j.length||i.length||a.error("Cafe UI Tabs: Mismatching fragment identifier."),i.length&&this.load(this.tabs.index(f),b),this._toggle(b,k))},_toggle:function(b,c){function d(){f.running=!1,f._trigger("activate",b,c)}function e(){c.newTab.closest("li").removeClass("cui-priority-secondary").addClass("cui-tabs-active cui-state-active"),g.length&&f.options.show?f._show(g,f.options.show,d):(g.show(),d())}var f=this,g=c.newPanel,h=c.oldPanel;this.running=!0,h.length&&this.options.hide?this._hide(h,this.options.hide,function(){c.oldTab.closest("li").removeClass("cui-tabs-active cui-state-active").addClass("cui-priority-secondary"),e()}):(c.oldTab.closest("li").removeClass("cui-tabs-active cui-state-active").addClass("cui-priority-secondary"),h.hide(),e()),h.attr("aria-hidden","true"),c.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),g.length&&h.length?c.oldTab.attr("tabIndex",-1):g.length&&this.tabs.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1),g.attr("aria-hidden","false"),c.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(b){var c,d=this._findActive(b);d[0]!==this.active[0]&&(d.length||(d=this.active),c=d.find(".cui-tabs-anchor")[0],this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop}))},_findActive:function(b){return b===!1?a():this.tabs.eq(b)},_getIndex:function(a){return"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},_destroy:function(){this.tablist.off(this.eventNamespace),this.running=null,this.active=null,this.tablist=null,this.tabs=null,this.anchors=null,this.panels=null},enable:function(c){var d=this.options.disabled;d!==!1&&(c===b?d=!1:(c=this._getIndex(c),d=a.isArray(d)?a.map(d,function(a){return a!==c?a:null}):a.map(this.tabs,function(a,b){return b!==c?b:null})),this._setupDisabled(d))},disable:function(c){var d=this.options.disabled;if(d!==!0){if(c===b)d=!0;else{if(c=this._getIndex(c),a.inArray(c,d)!==-1)return;d=a.isArray(d)?a.merge([c],d).sort():[c]}this._setupDisabled(d)}},load:function(b,c){b=this._getIndex(b);var d=this,e=this.tabs.eq(b),f=e.find(".cui-tabs-anchor"),g=this._getPanelForTab(e),h={tab:e,panel:g};this._isLocal(f[0])||(this.xhr=a.ajax(this._ajaxSettings(f,c,h)),this.xhr&&"canceled"!==this.xhr.statusText&&(e.addClass("cui-tabs-loading"),g.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){g.html(a),d._trigger("load",c,h)},1)}).complete(function(a,b){setTimeout(function(){"abort"===b&&d.panels.stop(!1,!0),e.removeClass("cui-tabs-loading"),g.removeAttr("aria-busy"),a===d.xhr&&delete d.xhr},1)})))},_ajaxSettings:function(b,c,d){var e=this;return{url:b.attr("href"),beforeSend:function(b,f){return e._trigger("beforeLoad",c,a.extend({jqXHR:b,ajaxSettings:f},d))}}},_getPanelForTab:function(b){var c=a(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+c))}}),a.ui.tabs}),d("ui/Menu",["jqueryCafe","ui/Core","ui/Widget","ui/Position"],function(a){return a.widget("ui.menu",{delay:300,options:{menuItems:[],displayed:!1,floated:!0,icons:{submenu:"arrow-right"},position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null,classes:null},_clickHandler:{},_itemSelector:"> *",_menuSelector:"ul",_hasIcon:!1,_create:function(){var a,b,c=this,d=this.options,e=d.role;a=d.menuItems,b={tag:"ul",attr:{class:["cui-menu","cui-widget","cui-widget-content"],role:e,tabIndex:0}},d.floated&&b.attr.class.push("cui-float","cui-front"),d.displayed||(b.attr.style="display: none;"),d.disabled&&(b.attr.class.push("cui-state-disabled"),b.attr["aria-disabled"]="true"),b.contents=c._createMenuItem(a),c._hasIcon&&b.attr.class.push("cui-menu-icons"),b.contents.length&&(b.attr["aria-activedescendant"]=b.contents[0].attr.id),this.htmlData=b},_init:function(){var b=this,c={};this.activeMenu=this.element,this.mouseHandled=!1,c["mousedown .cui-menu-item"]=function(a){a.preventDefault()},c["click .cui-menu-item"]=function(b){var c=a(b.target);!this.mouseHandled&&c.not(".cui-state-disabled").length&&(this.select(b),b.isPropagationStopped()||(this.mouseHandled=!0),c.has(".cui-menu").length?this.expand(b):!this.element.is(":focus")&&a(this.document[0].activeElement).closest(".cui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".cui-menu").length&&clearTimeout(this.timer)),this._clickHandler[b.currentTarget.id]&&this._clickHandler[b.currentTarget.id](b))},c["mouseenter .cui-menu-item"]=function(b){var c=a(b.currentTarget);c.siblings(".cui-state-active").removeClass("cui-state-active"),this.focus(b,c)},c["mouseleave .cui-menu"]="collapseAll",c.mouseleave="collapseAll",c.focus=function(a,c){var d=b.active||b.element.find(b._itemSelector).eq(0);c||b.focus(a,d)},c.blur=function(c){b._delay(function(){a.contains(this.element[0],this.document[0].activeElement)||b.collapseAll(c)})},c.keydown="_keydown",this._on(c),this.element.find("span.cui-menu-item").data("cui-menu-submenu-carat",!0),this.document.on("click."+this.getID(),function(a){b._closeOnDocumentClick(a)&&b.collapseAll(a),b.mouseHandled=!1})},_destroy:function(){var b,c=this;c._close(),clearTimeout(c.timer),c.element.find(".cui-menu-item").children().each(function(){var b=a(this);b.data("cui-menu-submenu-carat")&&b.removeData("cui-menu-submenu-carat")}),c.document.off("."+c.getID());for(b in c._clickHandler)delete c._clickHandler[b];c._clickHandler=null,c._itemSelector=null,c._menuSelector=null,c._hasIcon=null},_keydown:function(b){function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var d,e,f,g,h,i=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".cui-state-disabled, .cui-state-unselectable")&&this.expand(b);break;case a.ui.keyCode.ENTER:this.active&&!this.active.is(".cui-state-disabled, .cui-state-unselectable")&&this.active.click();break;case a.ui.keyCode.SPACE:this._activate(b);break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:i=!1,e=this.previousFilter||"",f=String.fromCharCode(b.keyCode),g=!1,clearTimeout(this.filterTimer),f===e?g=!0:f=e+f,h=new RegExp("^"+c(f),"i"),d=this.activeMenu.find(this._itemSelector).filter(function(){return h.test(a(this).text())}),d=g&&d.index(this.active.next())!==-1?this.active.nextAll(".cui-menu-item"):d,d.length||(f=String.fromCharCode(b.keyCode),h=new RegExp("^"+c(f),"i"),d=this.activeMenu.find(this._itemSelector).filter(function(){return h.test(a(this).text())})),d.length?(this.focus(b,d),d.length>1?(this.previousFilter=f,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}i&&b.preventDefault()},_activate:function(a){this.active.is(".cui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(a):this.select(a))},refresh:function(){var b,c,d=this,e=this.options.icons.submenu,f=this.element.find(this._menuSelector);this.element.toggleClass("cui-menu-icons",!!this.element.find(".cui-icon").length),f.filter(":not(.cui-menu)").addClass("cui-menu cui-widget cui-widget-content cui-front").hide().attr({
role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var b=a(this),c=b.parent(),d=a("<span>").addClass("cui-menu-icon cui-icon "+e).data("cui-menu-submenu-carat",!0);c.attr("aria-haspopup","true").prepend(d),b.attr("aria-labelledby",c.attr("id"))}),b=f.add(this.element),c=b.find(this._itemSelector),c.not(".cui-menu-item").each(function(){var b=a(this);d._isDivider(b)&&b.addClass("cui-widget-content cui-menu-divider")}),c.not(".cui-menu-item, .cui-menu-divider").addClass("cui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),c.filter(".cui-state-disabled").attr("aria-disabled","true"),this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_createMenuItem:function(b){var c,d,e,f,g=this,h=this.options,i=[],j=null,k="cui-icon-"+h.icons.submenu,l=h.role;for(c=0,d=b.length;c<d;c++)e=b[c],e&&(f={tag:"li",attr:{},contents:[]},a.isEmptyObject(e)?(f.attr.class=["cui-widget-content","cui-menu-divider"],j=f):(j&&(i.push(j),j=null),f.attr={class:["cui-menu-item"],id:a({}).uniqueId()[0].id,tabindex:"-1",role:"menuitem"},e.name&&(f.attr["data-cui-name"]=e.name),e.alias&&(f.attr["data-cui-alias"]=e.alias),e.unselectable&&f.attr.class.push("cui-state-unselectable"),e.classes&&f.attr.class.push(e.classes),e.disabled&&(f.attr.class.push("cui-state-disabled"),f.attr["aria-disabled"]="true"),e.icon&&(f.contents.push({tag:"span",attr:{class:["cui-icon","cui-icon-"+e.icon]}}),f.attr.class.push("cui-has-icon"),g._hasIcon=!0),e.pressed&&(f.attr.class.push("cui-pressed"),e.icon||f.contents.unshift({tag:"span",attr:{class:["cui-toggle","cui-icon","cui-icon-check"]}})),f.contents.push(e.text||""),e.shortcut&&f.contents.push({tag:"span",attr:{class:["cui-menu-shortcut"]},contents:[e.shortcut]}),e.menuItems&&(f.attr["aria-haspopup"]="true",f.contents.unshift({tag:"span",attr:{class:["cui-menu-icon","cui-icon",k]}}),f.contents.push({tag:"ul",attr:{class:["cui-menu","cui-widget","cui-widget-content","cui-front"],role:l,"aria-hidden":"true","aria-expanded":"false",style:"display: none;"},contents:g._createMenuItem(e.menuItems)})),e.click&&(g._clickHandler[f.attr.id]=e.click),i.push(f)));return i},_setOption:function(b,c){var d,e,f,g;if("icons"===b&&this.element.find(".cui-menu-icon").removeClass(this.options.icons.submenu).addClass(c.submenu),"disabled"===b&&this.element.toggleClass("cui-state-disabled",!!c).attr("aria-disabled",c),"menuItems"===b){if(!Array.isArray(c))return;for(g="",f=this._createMenuItem(c),d=0,e=f.length;d<e;d++)g+=a.ui.makeHTML(f[d]);this.element.empty().append(g)}this._super(b,c)},focus:function(a,b){var c,d;return this.blur(a,a&&"focus"===a.type),this._scrollIntoView(b),this.active=b.first(),b.hasClass("cui-state-disabled")||b.hasClass("cui-state-unselectable")?(this.active.parent().closest(".cui-menu-item").removeClass("cui-state-focus"),!1):(d=this.active.addClass("cui-state-focus").removeClass("cui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",d.attr("id")),this.active.parent().closest(".cui-menu-item").addClass("cui-state-active"),a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),c=b.children(".cui-menu"),c.length&&a&&/^mouse/.test(a.type)&&this._startOpening(c),this.activeMenu=b.parent(),void this._trigger("focus",a,{item:b}))},_scrollIntoView:function(b){var c,d,e,f,g,h;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0,d=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,e=b.offset().top-this.activeMenu.offset().top-c-d,f=this.activeMenu.scrollTop(),g=this.activeMenu.height(),h=b.outerHeight(),e<0?this.activeMenu.scrollTop(f+e):e+h>g&&this.activeMenu.scrollTop(f+e-g+h))},blur:function(a,b){b||clearTimeout(this.timer),this.active&&(this.active.removeClass("cui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer),"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".cui-menu").not(b.parents(".cui-menu")).hide().attr("aria-hidden","true"),b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c),this._resizeMenu(b)},_resizeMenu:function(b){var c,d,e,f,g;if(b=b||this.element,c=b.width("").outerWidth(),d=a(".cui-menu-shortcut",b),e=0,f=d.length){for(g=0;g<f;g++)e=Math.max(e,d.eq(g).width());c+=e}b.outerWidth(c)},collapseAll:function(b,c){clearTimeout(this.timer),this.timer=this._delay(function(){var d=c?this.element:a(b&&b.target).closest(this.element.find(".cui-menu"));d.length||(d=this.element),this._close(d),this.blur(b),this.activeMenu=d},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element),a.find(".cui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".cui-state-active").not(".cui-state-focus").removeClass("cui-state-active")},close:function(a){this._close(a)},_closeOnDocumentClick:function(b){return!a(b.target).closest(".cui-menu").length},_isDivider:function(a){return!/[^\-\u2014\u2013\s]/.test(a.text())},collapse:function(a){var b=this.active&&this.active.parent().closest(".cui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".cui-menu ").find(this._itemSelector).first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".cui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".cui-menu-item").length},_move:function(a,b,c){var d;this.active&&(d="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".cui-menu-item").eq(-1):this.active[a+"All"](".cui-menu-item").eq(0)),d&&d.length&&this.active||(d=this.activeMenu.find(this._itemSelector)[b]()),this.focus(c,d)},nextPage:function(b){var c,d,e;return this.active?void(this.isLastItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.nextAll(".cui-menu-item").each(function(){return c=a(this),c.offset().top-d-e<0}),this.focus(b,c)):this.focus(b,this.activeMenu.find(this._itemSelector)[this.active?"last":"first"]()))):void this.next(b)},previousPage:function(b){var c,d,e;return this.active?void(this.isFirstItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.prevAll(".cui-menu-item").each(function(){return c=a(this),c.offset().top-d+e>0}),this.focus(b,c)):this.focus(b,this.activeMenu.find(this._itemSelector).first()))):void this.next(b)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".cui-menu-item");var c={item:this.active};this.active.has(".cui-menu").length||this.collapseAll(b,!0),this._trigger("select",b,c)}}),a.ui.menu}),d("ui/SelectMenu",["jqueryCafe","ui/Core","ui/Widget","ui/Position","ui/Menu"],function(a){return a.widget("ui.selectmenu",{options:{label:"",menuItems:[],fixedLabel:!1,iconOnly:!1,belongTo:null,disabled:null,icons:{primary:null,button:"arrow-down"},position:{my:"left top",at:"left bottom",collision:"flip none"},width:null,maxHeight:null,tooltip:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){this.ids={button:this.getID()},this._drawButton(),this._drawMenu()},_init:function(){this.selectedIndex=-1,this.selectedValue=this.options.label,this._initButton(),this._initMenu(),this.options.disabled&&this.disable()},_drawButton:function(){var b=this.options,c=b.tooltip,d=b.label||"&#160;",e={tag:"button",attr:{type:"button",tabindex:b.disabled?-1:0,class:["cui-selectmenu-button","cui-widget","cui-state-default","cui-corner-all"],role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-haspopup":"true"},contents:[{tag:"span",attr:{class:["cui-icon","cui-icon-"+b.icons.button]},contents:[]},{tag:"span",attr:{class:"cui-selectmenu-text"},contents:[d]}]};b.icons.primary&&e.contents.unshift({tag:"span",attr:{class:["cui-button-icon-primary","cui-icon","cui-icon-"+b.icons.primary]},contents:[]}),c&&(e.attr.title=this._title="string"===a.type(c)?c:d),b.iconOnly&&e.attr.class.push("cui-button-icon-only"),this.htmlData=e},_initButton:function(){this.button=this.element,this.buttonItem=a("span.cui-selectmenu-text",this.button),this._on(this.button,this._buttonEvents),this._hoverable(this.button),this._focusable(this.button)},_drawMenu:function(b){var c,d,e,f,g,h,i=this;for(this.menuInstance=a.ui.menu({menuItems:this.options.menuItems,displayed:!0,floated:!1,role:"listbox",select:function(a,b){a.preventDefault(),i.options.fixedLabel||i._select(b.item.data("cui-selectmenu-item"),a)}}),this.ids.menu=this.menuInstance.getID(),e=this.menuInstance.getHTMLData(),e.attr["aria-hidden"]="true",e.attr["aria-labelledby"]=this.ids.button,g=e.contents,d=g.length,c=0;c<d;c++)g[c].attr.class.push("cui-selectmenu-menuitem");return b?void this.menuWrap.append(a.ui.makeHTML(e)):(this.htmlData.attr["aria-owns"]=this.ids.menu,f={tag:"div",attr:{class:["cui-selectmenu-menu","cui-front"]},contents:[]},this.options.maxHeight&&(h="max-height: "+parseInt(this.options.maxHeight,10),e.attr.style=(e.attr.style||"")+h+"px;",f.attr.style="max-height: "+(h+2)+"px; overflow: hidden;"),f.contents.push(e),void(this.htmlData.after=f))},_initMenu:function(){var b,c,d,e,f,g=this;for(this.menuInstance.init(),this.menu=a("#"+this.ids.menu),this.menuWrap=this.menu.parent(),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1},this.menuInstance._on(this.menu,{click:function(b){var c=a(b.target);c.attr("aria-haspopup")||c.hasClass("cui-togglable")||g.close()},mouseleave:function(){g.options.fixedLabel&&(g.menu.find(".cui-state-focus").removeClass("cui-state-focus"),g.menuInstance.close())}}),this.refresh(),d=this.menuItems,b=0,c=d.length;b<c;b++)e=a(d[b]),f=g.options.menuItems[b],e.data("cui-selectmenu-item",{index:b,item:f,label:f&&f.label?f.label:e.text(),disabled:e.prop("disabled")})},refresh:function(){this._refreshMenu(),this._resizeButton()},_refreshMenu:function(){var a;this.menuInstance.refresh(),this.menuItems=this.menu.find("li"),a=this._getSelectedItem(),a&&this.menuInstance.focus(null,a)},open:function(a){var b,c=this;this.options.disabled||(this.menu.find(".cui-state-focus").removeClass("cui-state-focus"),b=this._getSelectedItem(),b&&this.menuInstance.focus(null,b),this.isOpen=!0,this._toggleAttr(),this._position(),this._resizeMenu(function(){c._position(),c._documentEventHander(!0),c._trigger("open",a)}))},_position:function(){this.menuWrap.position(a.extend({of:this.element,within:a(this.options.belongTo||this.document)},this.options.position))},close:function(a){this.isOpen&&(this.menuInstance.close(this.menuInstance.element),this.isOpen=!1,this._toggleAttr(),this._documentEventHander(!1),this._trigger("close",a))},widget:function(){return this.button},menuWidget:function(){return this.menu},index:function(a){return a===b?this.selectedIndex:(a<0?(this.selectedIndex=-1,this.selectedValue=this.menuItems.eq(0).data("cui-selectmenu-item").label):(this._select(this.menuItems.eq(a).data("cui-selectmenu-item")),this.selectedValue=this.menuItems.eq(a).data("cui-selectmenu-item").label),this)},_renderButtonItem:function(a){this.buttonItem.html(a.label||"&#160;")},_move:function(a,b){var c,d,e=".cui-menu-item";this.isOpen?c=this.menuItems.eq(this.focusIndex):(c=this.menuItems.eq(this.selectedIndex),e+=":not(.cui-state-disabled)"),d="first"===a||"last"===a?c["first"===a?"prevAll":"nextAll"](e).eq(-1):c[a+"All"](e).eq(0),d.length&&this.menuInstance.focus(b,d)},_getSelectedItem:function(){return this.selectedIndex===-1?null:this.menuItems.eq(this.selectedIndex)},_toggle:function(a){this[this.isOpen?"close":"open"](a)},_documentEventHander:function(b){function c(){j.isOpen&&j.close()}function d(b){a(b.target).ownerDocument!==j.document[0]&&c()}function e(b){a(b.target).closest(".cui-selectmenu-menu, #"+j.ids.button).length||c()}var f,g,h,i,j=this,k="."+j.getID(),l=["mousedown","keydown"].join(k+" "),m=["wheel","dommousescroll"].join(k+" "),n=j.document.find("iframe.cui-panel");for(h=this.window[0],i=a(this.document),b?(i.on(l,"*",e),this.options.autoCloseViaScroll&&i.on(m,e),h.addEventListener("resize",c)):(i.off(l,"*",e),this.options.autoCloseViaScroll&&i.off(m,e),h.removeEventListener("resize",c)),f=0,g=n.length;f<g;f++){try{h=n[f].contentWindow}catch(a){continue}i=a(h.document),b?(i.on(l,"*",d),this.options.autoCloseViaScroll&&i.on(m,d),h.addEventListener("blur",c)):(i.off(l,"*",d),this.options.autoCloseViaScroll&&i.off(m,d),h.removeEventListener("blur",c))}},_buttonEvents:{mousedown:function(a){a.preventDefault()},click:"_toggle",keydown:function(b){var c=!0;switch(b.keyCode){case a.ui.keyCode.TAB:case a.ui.keyCode.ESCAPE:this.close(b),c=!1;break;case a.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(b);break;case a.ui.keyCode.UP:b.altKey?this._toggle(b):this._move("prev",b);break;case a.ui.keyCode.DOWN:b.altKey?this._toggle(b):this._move("next",b);break;case a.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(b):this._toggle(b);break;case a.ui.keyCode.LEFT:this._move("prev",b);break;case a.ui.keyCode.RIGHT:this._move("next",b);break;case a.ui.keyCode.HOME:case a.ui.keyCode.PAGE_UP:this._move("first",b);break;case a.ui.keyCode.END:case a.ui.keyCode.PAGE_DOWN:this._move("last",b);break;default:this.menu.trigger(b),c=!1}c&&b.preventDefault()}},_selectFocusedItem:function(a){var b=this.menuItems.eq(this.focusIndex);b.hasClass("cui-state-disabled")||this._select(b.data("cui-selectmenu-item"),a)},_select:function(b,c){var d={item:b.item,index:b.index,label:b.label},e=this.selectedIndex;return this._trigger("select",c||a.Event("select"),d),b.index===e?this:(this.selectedIndex=b.index,this.selectedValue=b.label,this._renderButtonItem(b),this.options.label=b.label,this._setAria(b),this._trigger("change",c||a.Event("change"),d),void this.close(c))},_setAria:function(a){var b=this.menuItems.eq(a.index).attr("id");this.button.attr({"aria-labelledby":b,"aria-activedescendant":b}),this.menu.attr("aria-activedescendant",b)},_findIndexByLabel:function(a){var b,c=this.options.menuItems,d=c.length;for(b=0;b<d;b++)if(c[b].label===a)return b;return-1},_setOption:function(b,c){var d,e=this.button;"icons"===b&&e.find("span.cui-icon").removeClass(this.options.icons.button).addClass(c.button),this._super(b,c),"disabled"===b&&(this.menuInstance.option("disabled",c),e.toggleClass("cui-state-disabled",!!c).attr("aria-disabled",c),c?(e.attr("tabindex",-1),e.attr("title")&&e.removeAttr("title"),this.close()):(e.attr("tabindex",0),this._title&&e.attr("title",this._title))),"width"===b&&this._resizeButton(),"menuItems"===b&&(this.menuInstance&&this.menuInstance.destroy(),this._drawMenu(!0),this.button.attr("aria-owns",this.ids.menu),this._initMenu()),"label"===b&&(d=this._findIndexByLabel(c),d===-1?(this._renderButtonItem({label:c}),this.selectedIndex=-1):this.index(d)),"tooltip"===b&&(this._title="string"===a.type(c)?c:this.options.label,e.attr("title",this._title))},_toggleAttr:function(){this.button.toggleClass("cui-corner-top",this.isOpen).toggleClass("cui-corner-all",!this.isOpen).toggleClass("cui-state-active",this.isOpen).attr("aria-expanded",this.isOpen)[this.isOpen?"removeAttr":"attr"]("title",this._title).removeData("cui-tooltip-title"),this.menuWrap.toggleClass("cui-selectmenu-open",this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){this.button.outerWidth(this.options.width)},_resizeMenu:function(b){var c,d=this,e=this.menuWrap,f=this.menu,g=this.options.maxHeight,h=a("> .cui-selectmenu-menuitem",this.menu),i=a("> .cui-menu-shortcut",h),j=f.hasClass("cui-limited-height"),k=f[0].style.width,l=0,m=i.length;if(!k){if(k=f.outerWidth(),m){for(c=0;c<m;c++)l=Math.max(l,i.eq(c).width());k+=l}g&&f.outerHeight()>g?(k+=a.ui.getScrollbarWidth(),j||f.addClass("cui-limited-height"),e.css("max-height","")):j&&f.removeClass("cui-limited-height"),f.width(Math.max(d.button.width(),k))}b&&"function"==typeof b&&b()},_destroy:function(){var b,c,d,e,f=this;if(f.close(),f.menuItems){for(d=f.menuItems,c=d.length,b=0;b<c;b++)e=a(d[b]),e.removeData("cui-selectmenu-item");f.menuItems=null}f.menuInstance&&f.menuInstance.destroy(),f.menuWrap=null,f.menu=null,f.menuInstance=null}}),a.ui.selectmenu}),d("ui/Tooltip",["jqueryCafe","ui/Core","ui/Widget"],function(a){return a.widget("ui.tooltip",{options:{content:function(){var b=a(this).attr("title")||"";return a("<a>").text(b).html()},hide:!1,items:"[title]:not([disabled])",position:{my:"left top+3",at:"left bottom",collision:"flipfit flip"},show:!1,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(b,c){var d=(b.attr("aria-describedby")||"").split(/\s+/);d.push(c),b.data("cui-tooltip-id",c).attr("aria-describedby",a.trim(d.join(" ")))},_removeDescribedBy:function(b){var c=b.data("cui-tooltip-id"),d=(b.attr("aria-describedby")||"").split(/\s+/),e=a.inArray(c,d);e!==-1&&d.splice(e,1),b.removeData("cui-tooltip-id"),d=a.trim(d.join(" ")),d?b.attr("aria-describedby",d):b.removeAttr("aria-describedby")},_create:function(){var b=this.options;this._on({mouseover:"open"}),a.ui.getIEVersion()&&this._on({scroll:"close",wheel:"close"}),this.tooltips={},this.parents={},b.disabled&&this._disable(),this.liveRegion=a("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("cui-helper-hidden-accessible").appendTo(this.element)},_setOption:function(b,c){var d=this;return"disabled"===b?(this[c?"_disable":"_enable"](),void(this.options[b]=c)):(this._super(b,c),void("content"===b&&a.each(this.tooltips,function(a,b){d._updateContent(b)})))},_disable:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur");e.target=e.currentTarget=d[0],b.close(e,!0)}),this.element.find(this.options.items).addBack().each(function(){var b=a(this);b.is("[title]")&&b.data("cui-tooltip-title",b.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var b=a(this);b.data("cui-tooltip-title")&&b.attr("title",b.data("cui-tooltip-title"))})},open:function(b){var c=this,d=a(b?b.target:this.element).closest(this.options.items);d.length&&!d.data("cui-tooltip-id")&&(d.attr("title")&&d.data("cui-tooltip-title",d.attr("title")),d.data("cui-tooltip-open",!0),b&&"mouseover"===b.type&&d.parents().each(function(){var b,d=a(this);d.data("cui-tooltip-open")&&(b=a.Event("blur"),b.target=b.currentTarget=this,c.close(b,!0)),d.attr("title")&&(d.uniqueId(),c.parents[this.id]={element:this,title:d.attr("title")},d.attr("title",""))}),this._updateContent(d,b))},_updateContent:function(a,b){var c,d=this.options.content,e=this,f=b?b.type:null;return"string"==typeof d?this._open(b,a,d):(c=d.call(a[0],function(c){a.data("cui-tooltip-open")&&e._delay(function(){b&&(b.type=f),this._open(b,a,c)})}),void(c&&this._open(b,a,c)))},_open:function(b,c,d){function e(a,b){if(!a||!b)return null;for(;a&&"BODY"!==a.nodeName;){if(a===b)return a;a=a.parentNode}return null}function f(a){l.of=a,g.is(":hidden")||g.position(l)}var g,h,i,j,k=this,l=a.extend({},this.options.position);if(d){if(g=this._find(c),g.length)return void g.find(".cui-tooltip-content").html(d);g=a(".cui-tooltip",this.element),g.length&&g.each(function(){k._forceClose(a(this).data("target"))}),c.is("[title]")&&(b&&"mouseover"===b.type?c.attr("title",""):c.removeAttr("title")),g=this._tooltip(c),this._addDescribedBy(c,g.attr("id")),g.find(".cui-tooltip-content").html(d),this.liveRegion.children().remove(),d.clone?(j=d.clone(),j.removeAttr("id").find("[id]").removeAttr("id")):j=d,a("<div>").html(j).appendTo(this.liveRegion),this.options.track&&b&&/^mouse/.test(b.type)?(this._on(this.document,{mousemove:f}),f(b)):g.position(a.extend({of:c},this.options.position)),this.hiding=!1,this.closing=!1,g.hide(),this._show(g,this.options.show),this.options.show&&this.options.show.delay&&(i=this.delayedShow=setInterval(function(){g.is(":visible")&&(f(l.of),clearInterval(i))},a.fx.interval)),this._trigger("open",b,{tooltip:g}),h={keyup:function(b){if(b.keyCode===a.ui.keyCode.ESCAPE){var d=a.Event(b);d.currentTarget=c[0],this.close(d,!0)}}},c[0]!==this.element[0]&&(h.remove=function(){this._removeTooltip(g)}),b&&"mouseover"!==b.type||(h.mouseleave="close"),this._on(this.document,{mousemove:function(a){e(a.target,c[0])||k._forceClose(c)}}),this._on(!0,c,h),a.ui.getIEVersion()&&this._on(this.document,{keydown:function(a){e(a.target,c[0])||k._forceClose(c)}})}},close:function(b){var c=this,d=a(b?b.currentTarget:this.element),e=this._find(d);e.length||(d=a(this.tooltips[a(".cui-tooltip",this.element).attr("id")]),e=this._find(d)),this.closing||(clearInterval(this.delayedShow),d.data("cui-tooltip-title")&&!d.attr("title")&&d.attr("title",d.data("cui-tooltip-title")),this._removeDescribedBy(d),this.hiding=!0,e.stop(!0),this._hide(e,this.options.hide,function(){c._removeTooltip(a(this)),this.hiding=!1,this.closing=!1}),d.removeData("cui-tooltip-open"),this._off(d,"mouseleave keyup"),d[0]!==this.element[0]&&this._off(d,"remove"),this._off(this.document,"mousemove"),a.ui.getIEVersion()&&this._off(this.document,"keydown"),b&&"mouseleave"===b.type&&a.each(this.parents,function(b,d){a(d.element).attr("title",d.title),delete c.parents[b]}),this.closing=!0,this._trigger("close",b,{tooltip:e}),this.hiding||(this.closing=!1))},_forceClose:function(b){var c=a.Event("blur");this.closing=!1,this.hiding=!1,c.currentTarget=b,this.close(c,!0)},_tooltip:function(b){var c,d,e=["cui-tooltip"];return c=a("<div>").attr("role","tooltip").addClass(e.join(" ")+" "+(this.options.tooltipClass||"")),d=c.uniqueId().attr("id"),a("<div>").addClass("cui-tooltip-content").appendTo(c),c.appendTo(this.element).data("target",b),this.tooltips[d]=b,c},_find:function(b){var c=b.data("cui-tooltip-id");return c?a("#"+c):a()},_removeTooltip:function(a){a.remove(),delete this.tooltips[a.attr("id")]},_destroy:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur");e.target=e.currentTarget=d[0],b.close(e,!0),a("#"+c).remove(),d.data("cui-tooltip-title")&&(d.attr("title")||d.attr("title",d.data("cui-tooltip-title")),d.removeData("cui-tooltip-title"))}),this.liveRegion.remove()}}),a.ui.tooltip}),d("ui/ContextMenu",["jqueryCafe","ui/Core","ui/Widget","ui/Position","ui/Menu"],function(a){var b=a.ui.prefix,c=50,d="all";return a.widget("ui.contextmenu",{options:{target:document,context:"normal",menuItems:[],autoRegistration:!0,footerItem:[],hasInput:!1},_create:function(){this.menuInstance=null,this.isOpen=!1,this.htmlData={tag:"div",attr:{class:[b+"contextmenu",b+"front"],style:"display:none;"},contents:[this._createMenu(),this._createFooter()]}},_init:function(){var b=this;this.menuInstance.init(),this.footer=a(".cui-contextmenu-footer",this.element),this.element.on("click"+this.eventNamespace,function(c){var d=a(c.target);d.attr("aria-haspopup")||"LI"!==c.target.nodeName&&"SPAN"!==c.target.nodeName||b.close()}),this.options.autoRegistration&&this._registerContextMenu()},_destroy:function(){var b,c,d,e,f,g,h=this,i=h.options;this.resizeTimer&&(clearTimeout(this.resizeTimer),this.resizeTimer=null),i&&i.target&&a(i.target).length&&(b=a(i.target)[0],c="IFRAME"===b.tagName,d=c?b.contentWindow:window,e=a(d.document),f=a.ui.browser(),g=f&&f.ie&&window.ActiveXObject,h._autoHideByEvent(!1),g&&parseInt(f.version,10)<11?b.onreadystatechange=null:a(b).off("load.cui-contextmenu"),e.off("contextmenu.cui-contextmenu")),this.menuInstance.destroy(),this.footer=null},_resize:function(){var b,c=this,d=this.element,e=a(".cui-menu-shortcut",d),f=0,g=e.length;this.resizeTimer&&(clearTimeout(this.resizeTimer),this.resizeTimer=null),this.resizeTimer=setTimeout(function(){d.css({left:"-1000px",top:"-1000px"}).show(0,function(){if(g)for(b=0;b<g;b++)f=Math.max(f,e.eq(b).width());d.width(d.width()+f),c.outerWidth=d.outerWidth()+f,d.hide()})},0)},_registerContextMenu:function(){function b(b){var d=a(b);d.off("contextmenu.cui-contextmenu").on("contextmenu.cui-contextmenu",function(a){i&&parseInt(h.version,10)<10?setTimeout(function(){c.open(a)},200):c.open(a),a.preventDefault?a.preventDefault():a.returnValue=!1}),c._resize()}var c=this,d=a(this.options.target)[0],e="IFRAME"===d.tagName,f=e?d.contentWindow:window,g=f.document,h=a.ui.browser(),i=h&&h.ie&&window.ActiveXObject;"complete"===g.readyState&&b(g),e&&(i&&parseInt(h.version,10)<11?d.onreadystatechange=function(){if(d.contentWindow){var a=d.contentWindow.document;if("complete"!==a.readyState)return;b(a)}}:a(d).off("load.cui-contextmenu").on("load.cui-contextmenu",function(){d.contentWindow&&d.contentWindow.document&&b(d.contentWindow.document)}))},_createMenu:function(){var b,c,e,f,g,h,i,j,k=[],l=this.options.menuItems;for(b=0,g=l.length;b<g;b++)i=l[b],i&&(!j||Object.keys(j).length||Object.keys(i).length)&&(k.push(i),j=i);for(this.menuInstance=a.ui.menu({menuItems:k,displayed:!0,floated:!1,select:function(a){a.preventDefault()}}),c=this.menuInstance.getHTMLData(),c.attr["aria-hidden"]="true",e=c.contents,b=0,g=e.length;b<g;b++)f=e[b],h=k[b],f&&h&&f.attr["data-cui-name"]===h.name&&(f.attr["data-cui-context"]=h.context||d,h.context_disable&&(f.attr["data-cui-context-disable"]=h.context_disable));return this.menuInstance.htmlData=c},_createFooter:function(a){var b;if(a=a||this.options.footerItems,a&&Array.isArray(a)&&a.length)return b={tag:"div",attr:{class:["cui-contextmenu-footer","cui-widget"],tabindex:"-1"},contents:a}},_setOption:function(b,c){this._super(b,c),"menuItems"===b&&this.menuInstance.option(b,c),"footerItem"===b&&this.footer.replaceWith(a.ui.makeHTML(this._createFooter(c)))},_arrangeMenu:function(){function b(b,c,d){var e,f=a.trim(b).split(" "),g=f.length;for(e=0;e<g;e++)if(d){if(c.indexOf(f[e])!==-1)return!0}else if(c===f[e])return!0;return!1}function c(e){var g,h,i,j,k,l,m=a("> li",e),n=m.length,o=!1,p=!1;for(g=0;g<n;g++)h=m.eq(g),h.hasClass("cui-menu-divider")?(l&&l.hide(),l=h):(i=h.attr("data-cui-context"),j=h.attr("data-cui-context-disable"),o=i===d||b(i,f,!0),o&&(l&&(l.show(),l=null),k=a("> .cui-menu",h),k.length&&c(k),j&&(p=b(j,f,!1),p?h.addClass("cui-state-disabled").attr("aria-disabled","true"):h.removeClass("cui-state-disabled").removeAttr("aria-disabled"))),h.toggle(o));l&&l.hide()}var e=this.options,f=e.context;c(this.menuInstance.element)},_autoHideByEvent:function(b){function c(a){j.close(a)}function d(b){j.isOpen&&a(b.target).ownerDocument!==j.document[0]&&(j.options.hasInput&&"blur"===b.type||c(b))}function e(b){j.isOpen&&!a(b.target).closest(".cui-contextmenu").length&&c(b)}var f,g,h,i,j=this,k=j.document.find("iframe.cui-panel"),l="."+j.getID(),m=["mousedown","keydown"].join(l+" ");for(h=a(j.document),i=j.window[0],b?(h.on(m,"*",e),i.addEventListener("wheel",e),i.addEventListener("dommousescroll",e)):(h.off(m,"*",e),i.removeEventListener("wheel",e),i.removeEventListener("dommousescroll",e)),f=0,g=k.length;f<g;f++){try{i=k[f].contentWindow}catch(a){continue}h=a(i.document),b?(h.on(m,"*",d),i.addEventListener("wheel",d),i.addEventListener("dommousescroll",d),i.addEventListener("blur",d)):(h.off(m,"*",d),i.removeEventListener("wheel",d),i.removeEventListener("dommousescroll",d),i.removeEventListener("blur",d))}},_calculatePosition:function(b,d,e){var f,g,h,i,j,k,l,m=b.ownerDocument!==this.document[0],n=this.element,o=this.outerWidth||n.outerWidth(),p=n.outerHeight();return m?(h=a(this.options.target),f=a(h[0].contentWindow)):(h=a(b),f=this.window),g=h.offset(),k=g.left,l=g.top,i=f.scrollLeft(),j=f.scrollTop(),o<c&&(n.css("width",""),o=n.outerWidth(),this.outerWidth=o),d+o>f.width()+i&&(d-=o),e+p>f.height()+j&&(e-=p),m&&(d+=k-i,e+=l-j),d<k&&(d=k),e<l&&(e=l),{left:d,top:e}},open:function(b){var c,d=this,e=d.options,f=d.element,g=a(e.target)[0];if(!e.disabled)return d.isOpen&&d.close(),b=b||{target:g,pageX:0,pageY:0},c={originEvent:b,widget:d,menu:d.menuInstance,element:d.element,target:g},d._trigger("beforeopen",b,c),d._arrangeMenu(),f.finish().show().offset(d._calculatePosition(b.target,b.pageX,b.pageY)),d._autoHideByEvent(!0),d.isOpen=!0,d._trigger("open",b,c),this},close:function(){var b=this,c=a.Event(),d={widget:b,menu:b.menuInstance,element:b.element,target:a(b.options.target)[0]};return b._trigger("beforeclose",c,d),b._autoHideByEvent(!1),b.menuInstance.close(this.menuInstance.element),this.element.hide(),b.isOpen=!1,b._trigger("close",c,d),this}}),a.ui.contextmenu}),d("ui/SplitButton",["jqueryCafe","ui/Core","ui/Widget","ui/Position","ui/Button","ui/Menu","ui/Tooltip"],function(a){var b=a.ui.prefix;return a.widget("ui.splitbutton",{options:{menuItems:[],click:null,icon:null,belongTo:null,position:{my:"left top",at:"left bottom",collision:"flip none"},maintooltip:!1,maintitle:null,menutooltip:!1,menutitle:null},_create:function(){this.htmlData={tag:"div",attr:{class:[b+"splitbutton",b+"widget"]},contents:[]},this._createMainButton(),this._createMenuButton(),this._createMenu()},_init:function(){this._initMainButton(),this._initMenuButton(),this._initMenu()},_createMainButton:function(){var a=this.options,c={tag:"button",attr:{type:"button",role:"button",class:[b+"button",b+"widget",b+"button-icon-only",b+"state-default",b+"splitbutton-main",b+"corner-left"]},contents:[{tag:"span",attr:{class:[b+"button-icon-primary",b+"icon",b+"icon-"+this.options.icon]},contents:[]},{tag:"span",attr:{class:[b+"button-text"]},contents:["&#160;"]}]};a.maintooltip&&a.maintitle&&(c.attr.title=a.maintitle),this.htmlData.contents.push(c)},_createMenuButton:function(){var a=this.options,c={tag:"button",attr:{type:"button",role:"button",class:[b+"button",b+"widget",b+"button-icon-only",b+"state-default",b+"splitbutton-menu",b+"corner-right"]},contents:[{tag:"span",attr:{class:[b+"button-icon-primary",b+"icon",b+"icon-arrow-down"]},contents:[]},{tag:"span",attr:{class:[b+"button-text"]},contents:["&#160;"]}]};a.menutooltip&&a.menutitle&&(c.attr.title=a.menutitle),this.htmlData.contents.push(c)},_createMenu:function(){var b,c,d,e;c=this.options.menuItems,b=c.length,b>0&&(d={menuItems:c,displayed:!1,role:"listbox",select:function(a){a.preventDefault()}},this.menu=a.ui.menu(d),e=this.menu.getHTMLData(),e.attr["aria-hidden"]="true",this.isMenuOpened=!1,this.htmlData.contents.push(e))},_initMainButton:function(){function c(){d._onMouseLeaveButtons(),d.mainbutton.removeClass(b+"splitbutton-hover")}var d=this;this.mainbutton=this.element.find("."+b+"splitbutton-main"),this._on(this.mainbutton,{click:function(b){d.options.click.apply(this.element,[b]),d.isMenuOpened&&a(d.menu.element).show()},mouseover:function(){d._onMouseOverButtons(),d.mainbutton.addClass(b+"splitbutton-hover")},mouseleave:c}),a.ui.getIEVersion()&&(this._on(this.mainbutton,{wheel:c,scroll:c}),this._on(this.document,{keydown:c}),this._press())},_initMenuButton:function(){function c(){d._onMouseLeaveButtons(),d.menubutton.removeClass(b+"splitbutton-hover")}var d=this;this.menubutton=this.element.find("."+b+"splitbutton-menu"),this._on(this.menubutton,{mousedown:function(a){a.preventDefault()},click:this._onClickMenuButton,mouseover:function(){d._onMouseOverButtons(),d.menubutton.addClass(b+"splitbutton-hover")},mouseleave:c}),a.ui.getIEVersion()&&(this._on(this.menubutton,{wheel:c,scroll:c}),this._on(this.document,{keydown:c}))},_initMenu:function(){var a=this;this.menu&&(this.menu.init(),this.menu._off(this.menu.element,"mouseleave"),this.menu._closeOnDocumentClick=function(){return!1},this.menu._isDivider=function(){return!1},this.menu._on(this.menu.element,{click:function(){a.closeMenu()}}))},_destroy:function(){this.isMenuOpened&&this.closeMenu(),
this._off(this.mainbutton),this._off(this.document),this.menu._off(this.menu.element),this.menu.destroy()},_setOption:function(a,b){function c(a,b,c){b?(a.trigger("buttondisabled").addClass(d),c&&a.removeAttr("title")):(c&&a.attr("title",c),a.removeClass(d).trigger("buttonenabled"))}var d="cui-button-disabled cui-state-disabled",e=this.options;this._super(a,b),this._press(),"disabled"===a&&(c(this.mainbutton,b,e.maintooltip&&e.maintitle?e.maintitle:null),c(this.menubutton,b,e.menutooltip&&e.menutitle?e.menutitle:null))},_press:function(a){"undefined"==typeof a&&(a=this.options.pressed),this.mainbutton[a?"addClass":"removeClass"](b+"toggle-on").attr("aria-pressed",a),this.options.pressed=a},_position:function(){this.menu.element.position(a.extend({of:this.element,within:a(this.options.belongTo||this.document)},this.options.position))},openMenu:function(){function b(){f.isMenuOpened&&f.closeMenu()}var c,d,e,f=this,g=f.eventNamespace,h=f.document.find("iframe.cui-panel");if(this.menu)for(f.menu.element.show(),f._position(),f.isMenuOpened=!0,f.selectedMenuButton(),f._on(f.document,{mousedown:f._onClickDocument,mousewheel:b,dommousescroll:b}),this.window[0].addEventListener("resize",b),c=0,d=h.length;c<d;c++){try{e=h[c].contentWindow}catch(a){continue}a(e.document).on("mousedown."+g,"*",b).on("mousewheel."+g+" dommousescroll"+g,b),e.addEventListener("blur",b)}},closeMenu:function(){function b(){f.isMenuOpened&&f.closeMenu()}var c,d,e,f=this,g=f.eventNamespace,h=f.document.find("iframe.cui-panel");if(f.menu)for(a(f.menu.element).hide(),f.isMenuOpened=!1,f.unselectedMenuButton(),f._off(f.document),this.window[0].removeEventListener("resize",b),c=0,d=h.length;c<d;c++){try{e=h[c].contentWindow}catch(a){continue}a(e.document).off(g),e.removeEventListener("blur",b)}},selectedMainButton:function(){this.mainbutton&&this.mainbutton.addClass(b+"toggle-on")},unselectedMainButton:function(){this.mainbutton&&this.mainbutton.removeClass(b+"toggle-on")},selectedMenuButton:function(){this.menubutton&&this.menubutton.addClass(b+"toggle-on")},unselectedMenuButton:function(){this.menubutton&&this.menubutton.removeClass(b+"toggle-on")},_onMouseOverButtons:function(){this.mainbutton&&this.menubutton&&(this.mainbutton.addClass(b+"state-hover"),this.menubutton.addClass(b+"state-hover"))},_onMouseLeaveButtons:function(){this.mainbutton&&this.menubutton&&(this.mainbutton.removeClass(b+"state-hover"),this.menubutton.removeClass(b+"state-hover"))},_onClickDocument:function(b){this.isMenuOpened&&(a(b.target).closest("#"+this.getID()).length||this.closeMenu())},_onClickMenuButton:function(){this.menu&&(this.isMenuOpened?this.closeMenu():this.openMenu())}}),a.ui.splitbutton}),d("ui/Label",["jqueryCafe","ui/Core","ui/Widget"],function(a){return a.widget("ui.label",{options:{label:""},_create:function(){var a=this.options,b=a.label||"&nbsp",c=[b];this.htmlData={tag:"label",contents:c,attr:{class:["cui-label"],"aria-disabled":"false"}}},_setOption:function(a,b){this._super(a,b),"label"===a&&b&&"string"==typeof b&&this.widget().html(b)}}),a.ui.label}),d("ui/TextBox",["jqueryCafe","ui/Core","ui/Widget"],function(a){return a.widget("ui.textbox",{options:{multiline:!1,disabled:!1,rows:8,cols:3,width:null,type:"text",min:null,max:null,force:null,maxlength:null,text:"",placeholder:""},_create:function(){var a=this.options,b=a.width,c=a.multiline?"textarea":"input";this.htmlData={tag:c,attr:{id:this.getID(),role:"textbox",style:"resize:none;",placeholder:"",class:["cui-textbox","cui-state-default"]}},a.maxlength&&(this.htmlData.attr.maxlength=a.maxlength),a.multiline&&a.rows&&(this.htmlData.attr.rows=a.rows),a.multiline&&a.cols&&(this.htmlData.attr.cols=a.cols),!a.multiline&&b&&(/^[0-9]+$/.test(b)&&(b+="px"),this.htmlData.attr.style+="width:"+b+";"),!a.multiline&&a.type&&(this.htmlData.attr.type="password"===a.type?a.type:"text"),a.placeholder&&(this.htmlData.attr.placeholder=a.placeholder)},_init:function(){var a=this,b=this.options,c=this.element,d=this.eventNamespace;c.on("change"+d,function(b){a._validateMinMax(),a._trigger("change",b,{value:a.element.val()})}).on("mouseup"+d,function(){a._validateMinMax()}).on("keydown"+d,function(a){var c,d=b.type;if(/number|integer/i.test(d)){if(a=a||window.event,c=a.which||a.keyCode,c>=48&&c<=57||c>=96&&c<=105||8===c||9===c||46===c||37===c||39===c)return;if("number"===d&&(190===c||110===c))return;return!1}}).on("keyup"+d,function(c){var d,e,f,g=b.type;if(/number|integer/i.test(g)){if(c=c||window.event,c&&(e=c.which||c.keyCode),8===e||9===e||46===e||37===e||39===e)return;c&&c.target&&c.target.value&&(d=new RegExp("number"===g?"\\d*(\\.?\\d*)":"\\d*","g"),f=c.target.value.match(d),c.target.value=f?f[0]:"")}a._validateMinMax(!0),a._trigger("change",c,{value:a.element.val()})}).on("focus"+d+" blur"+d,function(){a._validateMinMax(!0)}),b.disabled&&c.attr("disabled",!0),b.text&&c.val("number"===b.type?parseFloat(b.text)||"":b.text).change(),b.placeholder&&c.attr("placeholder",b.placeholder)},_destroy:function(){this.element.off(this.eventNamespace)},_setOption:function(a,b){"text"===a&&(b="number"===this.options.type?parseFloat(b)||"":b,this.element.val(b).change()),this._super(a,b)},_validateMinMax:function(a){var b,c=this.options,d=c.max,e=c.min,f=c.force,g=this.element.val();/number|integer/i.test(c.type)&&(b="number"===c.type?parseFloat(g):parseInt(g,10),(g||f)&&(e&&g<e&&(!/^0/i.test(g)&&a||(b=e)),d&&g>d&&(b=d),g!==b.toString()&&this.element.val(b)))},value:function(a){return"undefined"==typeof a?this.element.val():void this._setOption("text",a)},disable:function(){this.element.attr("disabled","true"),this._super()},enable:function(){this.element.removeAttr("disabled"),this._super()}}),a.ui.textbox}),d("ui/Checkbox",["jqueryCafe","ui/Core","ui/Widget"],function(a){var b,c,d,e;return b=a.ui.prefix,c=b+"icon",d=c+"-check",e=c+"-blank",a.widget("ui.checkbox",{options:{click:null,checked:!1,label:"",tooltip:!1},_create:function(){var b,c,d=this.options,e=[];this.htmlData={tag:"div",attr:{id:this.getID(),role:"checkbox",class:this._makeCheckboxClasses()}},b='<button type="button" class="'+this._makeButtonClasses()+'">',b+='<span class="'+this._makeIconClasses()+'">',b+="</span></button>",e.push(b),d.label=d.label?a.trim(d.label):"",c='<label class="'+this._makeLabelClasses()+'">'+d.label+"</label>",e.push(c),"boolean"==typeof d.tooltip?d.tooltip&&d.label&&(this.htmlData.attr.title=d.label):d.tooltip&&(this.htmlData.attr.title=a.trim(d.tooltip)),this.htmlData.contents=e},_init:function(){var b=this,c=this.options;c.checked&&this.element.attr("checked",!0),this._on(this.element,{click:function(d){var e={},f=this.element;d.preventDefault(),d.stopImmediatePropagation(),c.disabled||(f.attr("checked",!f.attr("checked")),e.checked=b.isChecked(),c.click&&a.isFunction(c.click)&&c.click(d,e),b.refresh())}})},_setOption:function(a,b){this._super(a,b),"checked"===a&&"boolean"==typeof b&&this.element.attr("checked",b),"undefined"!=typeof b&&this.refresh()},_makeCheckboxClasses:function(){return b+"widget "+b+"checkbox"},_makeButtonClasses:function(){return b+"state-default "+b+"corner-all "+b+"checkbox-button"},_makeIconClasses:function(){return c+" "+(this.options.checked?d:e)},_makeLabelClasses:function(){return b+"checkbox-text "+b+"state-unselectabled"},isChecked:function(){return!!this.element.attr("checked")},refresh:function(){var f,g,h=this.isChecked(),i=this.options;f=this.element.find("."+c),g=this.element.find("."+b+"checkbox-text"),h?(f.removeClass(e),f.addClass(d)):(f.removeClass(d),f.addClass(e)),i.label=i.label?a.trim(i.label):"",g.text(i.label),i.tooltip&&"boolean"!=typeof i.tooltip?this.element.attr("title",a.trim(i.tooltip)):i.tooltip&&i.label?this.element.attr("title",a.trim(i.label)):this.element.removeAttr("title")}}),a.ui.checkbox}),d("ui/Radio",["jqueryCafe","ui/Core","ui/Widget","ui/Checkbox"],function(a){return a.widget("ui.radio",a.ui.checkbox,{options:{group:"default",groupRange:null},_makeRangeElement:function(){this.options.groupRange?(this.rangeElement=a(this.options.groupRange),this.rangeElement.length||(this.rangeElement=this.element.parent())):this.rangeElement=this.element.parent()},_addToGroup:function(){var a=this.rangeElement.data("groups")||{};a[this.options.group]||(a[this.options.group]=[]),a[this.options.group].push(this.element),this.rangeElement.data("groups",a)},_init:function(){var b=this,c=this.options;this._makeRangeElement(),this._addToGroup(this.element),c.checked&&(this.element.attr("checked",!0),this._uncheckOtherMembers(this.element)),this.element.on("click",function(d){var e,f={},g=b.element;d.preventDefault(),d.stopImmediatePropagation(),c.disabled||(e=!!g.attr("checked"),e||(g.attr("checked",!0),b._uncheckOtherMembers(g),f.checked=b.isChecked()),c.click&&a.isFunction(c.click)&&c.click(d,f),b.refresh())})},_setOption:function(a,b){this._super(a,b),"checked"===a&&"boolean"==typeof b&&this._uncheckOtherMembers(this.element)},_makeButtonClasses:function(){return"cui-radio-button"},_makeLabelClasses:function(){return"cui-radio-text"},_makeIconClasses:function(){return"cui-icon "+(this.options.checked?"cui-icon-bullet":"cui-icon-radio-off")},_getGroup:function(){var a=this.rangeElement.data("groups");if(a&&a[this.options.group])return a[this.options.group]},_uncheckOtherMembers:function(a){var b,c=this._getGroup();if(c&&c.length)for(b=0;b<c.length;b++)c[b]!==a&&c[b].attr("checked",!1)},refresh:function(){var b,c,d,e,f=this.options,g=this.element.find(".cui-radio-text");if(f.label=f.label?a.trim(f.label):"",g.text(f.label),f.tooltip&&"boolean"!=typeof f.tooltip?this.element.attr("title",a.trim(f.tooltip)):f.tooltip&&f.label?this.element.attr("title",a.trim(f.label)):this.element.removeAttr("title"),d=this._getGroup(),d&&d.length)for(b=0;b<d.length;b++)e=!!d[b].attr("checked"),c=d[b].find(".cui-icon"),e?(c.removeClass("cui-icon-radio-off"),c.addClass("cui-icon-radio-on")):(c.removeClass("cui-icon-radio-on"),c.addClass("cui-icon-radio-off"))}}),a.ui.checkbox}),d("ui/FileInput",["jqueryCafe","ui/Core","ui/Widget"],function(a){return a.widget("ui.fileinput",{options:{width:b,placeholder:"",tooltip:!0,title:"Choose a file",editable:!1},_create:function(){var c,d,e,f,g=this.options,h=function(){return a('<input type="file">').get(0).files!==b}();e='placeholder="'+g.placeholder+'" ',h?(c=g.tooltip?'title="'+g.title+'"':"",d='<button type="button" class="cui-fileinput-button cui-state-default" '+c+'><span class="cui-icon cui-icon-browse" /></button>'):d="",g.accept&&g.accept.length>0&&(f=g.accept.toString()),this.htmlData={tag:"div",attr:{role:"fileinput",class:"cui-fileinput-group cui-state-default"+(g.editable?"":" cui-fileinput-noneditable")},contents:["<div class='cui-fileinput-path-wrap"+(h?" cui-has-button":"")+'\'><input class="cui-fileinput-path cui-state-default" '+e+(g.editable?"":'disabled="disabled"')+" /></div>"+d+'<input type="file" class="cui-fileinput-hidden" accept='+f+" />"]},g.width&&(this.htmlData.attr.style="width:"+g.width+";")},_init:function(){var b=this.element,c=this.hiddenElement=a(".cui-fileinput-hidden",b),d=this.pathElement=a(".cui-fileinput-path",b);this.wrapElement=a(".cui-fileinput-path-wrap",b),this.buttonElement=a(".cui-fileinput-button",b),d.on("change",function(c,d,e){b.trigger("change",[a(this).val(),d,e]),c.preventDefault(),c.stopPropagation()}),c.on("change",function(b){var c,e,f=a(this);if(b&&(b.preventDefault(),b.stopPropagation()),b&&b.target&&b.target.files){if(c=b.target.files[0],!c)return;e=new window.FileReader,e.onload=function(a){var b=a.target.result,c=b.substring(5,b.indexOf(";")),e=b.substring(b.indexOf(",")+1,b.length);d.trigger("change",[c,e])},d.val(f.val()),c.type.match("image.*")?e.readAsDataURL(c):d.trigger("change",[c.type])}else d.val(f.val()).change()})},_destroy:function(){this.buttonElement.off(".fileinput"),this.wrapElement.off(".fileinput"),this.pathElement.off("change"),this.hiddenElement.off("change"),this.buttonElement=null,this.wrapElement=null,this.pathElement=null,this.hiddenElement=null},_bindEvents:function(a){function b(){c.element.hasClass("cui-state-disabled")||c.hiddenElement.val("").trigger("click")}var c=this,d=this.buttonElement,e=this.wrapElement;a?(d.on("click.fileinput",b),!this.options.editable&&e.hasClass("cui-has-button")&&e.on("click.fileinput",b)):(d.off(".fileinput"),e.off(".fileinput"))},value:function(a){return a===b?this.pathElement.val():void this.pathElement.val(a).change()},disable:function(){this.buttonElement.addClass("cui-state-disabled").attr("disabled","disabled").removeAttr("title"),this.pathElement.attr("disabled","disabled").addClass("cui-textbox-disabled"),this._bindEvents(!1)},enable:function(){var a=this.options,b=this.pathElement;this.buttonElement.removeAttr("disabled").removeClass("cui-state-disabled"),a.tooltip&&this.buttonElement.attr("title",a.title),b.removeClass("cui-textbox-disabled"),a.editable&&b.removeAttr("disabled"),this._bindEvents(!0)}}),a.ui.fileinput}),d("ui/ColorPicker",["jqueryCafe","utilities/ColorUtils","ui/Core","ui/Widget"],function(a){var c=a.ui.prefix;return a.widget("ui.colorpicker",{options:{color:{r:null,g:null,b:null}},_create:function(){var a=["<div class= '"+c+"color'><div class='"+c+"color-overlay'><div class='"+c+"color-selector cui-icon cui-icon-colorpicker-pointer'></div></div></div>","<div class='"+c+"hue'><div class='"+c+"hue-selector cui-icon cui-icon-arrow-right'></div></div>","<div class='"+c+"colorpicker-rgb-red "+c+"colorpicker-field'><span>Red</span><span style='float:right'><input class='"+c+"corner-all' type='text' maxlength='3' size='3' /></span></div>","<div class='"+c+"colorpicker-rgb-green "+c+"colorpicker-field'><span>Green</span><span style='float:right'><input class='"+c+"corner-all' type='text' maxlength='3' size='3' /></span></div>","<div class='"+c+"colorpicker-rgb-blue "+c+"colorpicker-field'><span>Blue</span><span style='float:right'><input class='"+c+"corner-all' type='text' maxlength='3' size='3' /></span></div>","<div class='"+c+"colorpicker-hex "+c+"colorpicker-field'><span>#</span><span style='float:right'><input class='"+c+"corner-all' type='text' maxlength='6' size='6' /></span></div>","<div class='"+c+"colorpicker-currnetColor-preview'></div>"];this.htmlData={tag:"div",attr:{class:[c+"colorpicker"]}},this.htmlData.contents=a},_init:function(){this.rInput=this.element.find("."+c+"colorpicker-rgb-red input"),this.gInput=this.element.find("."+c+"colorpicker-rgb-green input"),this.bInput=this.element.find("."+c+"colorpicker-rgb-blue input"),this.hInput=this.element.find("."+c+"colorpicker-hex input"),this.preview=this.element.find("."+c+"colorpicker-currnetColor-preview"),this.hueArea=this.element.find("."+c+"hue"),this.hueSel=this.element.find("."+c+"hue-selector"),this.sbArea=this.element.find("."+c+"color"),this.sbSel=this.element.find("."+c+"color-selector"),this.options.color&&"string"==typeof this.options.color&&(this.options.color=this.HEXToRGB(this.options.color)),this.update(this.options.color,"rgb"),this.bindEvent()},_setOption:function(a,b){this._super(a,b)},RGBToHSV:function(b){return a.colorUtils.toHSV(b)},HSVToRGB:function(b){return b?a.colorUtils.toRGB({h:b.h,s:b.s+"%",v:b.v+"%"}):null},RGBToHEX:function(b){return a.colorUtils.toHEX(b)},HEXToRGB:function(b){return a.colorUtils.toRGB(b)},HSVToHEX:function(b){return b?a.colorUtils.toHEX({h:b.h,s:b.s+"%",v:b.v+"%"}):null},HEXToHSV:function(b){return a.colorUtils.toHSV(b)},getValidRGB:function(a){var b=255,c=255,d=255;return a&&"object"==typeof a?(b=isNaN(a.r)?b:Number(a.r),c=isNaN(a.g)?c:Number(a.g),d=isNaN(a.b)?d:Number(a.b),{r:Math.min(255,Math.max(0,b)),g:Math.min(255,Math.max(0,c)),b:Math.min(255,Math.max(0,d))}):{r:b,g:c,b:d}},getValidHEX:function(a){if(!a||!a.match)return"ffffff";var b=a.match(/^[a-f0-9]{6}$/i);return b?b.toString().toLowerCase():"ffffff"},getValidHSV:function(a){var b=0,c=0,d=100;return a&&"object"==typeof a?(b=isNaN(a.h)?b:Number(a.h),c=isNaN(a.s)?c:Number(a.s),d=isNaN(a.v)?d:Number(a.v),{h:Math.min(360,Math.max(0,b)),s:Math.min(100,Math.max(0,c)),v:Math.min(100,Math.max(0,d))}):{h:b,s:c,v:d}},syncColor:function(a){var b={rgb:null,hsv:null,hex:null};return a.rgb&&"object"==typeof a.rgb?(b.rgb=this.getValidRGB(a.rgb),b.hsv=this.getValidHSV(this.RGBToHSV(b.rgb)),b.hex=this.getValidHEX(this.RGBToHEX(b.rgb))):a.hex&&"string"==typeof a.hex?(b.hex=this.getValidHEX(a.hex),b.rgb=this.getValidRGB(this.HEXToRGB(b.hex)),b.hsv=this.getValidHSV(this.RGBToHSV(b.rgb))):a.hsv&&"object"==typeof a.hsv&&(b.hsv=this.getValidHSV(a.hsv),b.rgb=this.getValidRGB(this.HSVToRGB(b.hsv)),b.hex=this.getValidHEX(this.RGBToHEX(b.rgb))),b},setInputDefaultValue:function(a,b){b.data("defaultValue",a?a:"0")},setRGBFields:function(a,b){var d,e,f,g=this.getValidRGB(a);b?(d=b.find("."+c+"colorpicker-rgb-red input"),e=b.find("."+c+"colorpicker-rgb-green input"),f=b.find("."+c+"colorpicker-rgb-blue input")):(d=this.rInput,e=this.gInput,f=this.bInput),d.val(g.r),e.val(g.g),f.val(g.b),this.setInputDefaultValue(g.r,d),this.setInputDefaultValue(g.g,e),this.setInputDefaultValue(g.b,f)},setHEXFields:function(a,b){var d,e=this.getValidHEX(a);d=b?b.find("."+c+"colorpicker-hex input"):this.hInput,d.val(e),this.setInputDefaultValue(e,d)},setPreview:function(a){var b=this.getValidHEX(a);this.preview.css("background-color","#"+b)},setHueSelector:function(a){var b,c,d,e=this.getValidHSV(a);b=e.h,c=200-200*b/360,d=parseInt(c,10),this.hueSel.css("top",d).attr("data-otop",c)},getHueWithPos:function(a){return parseInt(360*(200-a)/200,10)},getHue:function(){var a=this.hueSel.attr("data-otop");return a=Number(a),this.getHueWithPos(a)},setSaturationAndBrightnessSelector:function(a){var b,c,d,e,f=this.getValidHSV(a);b=200*f.s/100,c=parseInt(b,10),d=200*(100-f.v)/100,e=parseInt(d,10),this.sbSel.css("left",c).attr("data-oleft",b).css("top",e).attr("data-otop",d)},getSaturationWithPos:function(a){return parseInt(100*a/200,10)},getBrightnessWithPos:function(a){return parseInt(100-100*a/200,10)},getSaturationAndBrightness:function(){var a,b,c,d;return a=parseInt(this.sbSel.attr("data-oleft"),10),b=this.getSaturationWithPos(a),c=parseInt(this.sbSel.attr("data-otop"),10),d=this.getBrightnessWithPos(c),{s:b,v:d}},setSaturationAndBrightnessOverlayColor:function(a){var b,c=this.getValidHSV(a);c.s=100,c.v=100,b=this.HSVToHEX(c),this.sbArea.css("background-color","#"+b)},update:function(a,c,d){if(d===b&&(d=!1),"hsv"===c)this.color=this.syncColor({hsv:a});else if("rgb"===c)this.color=this.syncColor({rgb:a});else{if("hex"!==c)return;this.color=this.syncColor({hex:a})}this.setPreview(this.color.hex,this.element),this.setSaturationAndBrightnessOverlayColor(this.color.hsv,this.element),this.setHueSelector(this.color.hsv,this.element),this.setSaturationAndBrightnessSelector(this.color.hsv,this.element),d?(this.setInputDefaultValue(this.color.rgb.r,this.rInput),this.setInputDefaultValue(this.color.rgb.g,this.gInput),this.setInputDefaultValue(this.color.rgb.b,this.bInput),this.setInputDefaultValue(this.color.hex,this.hInput)):(this.setRGBFields(this.color.rgb,this.element),this.setHEXFields(this.color.hex,this.element)),this._trigger("change",{},{color:this.color})},_bNumberKey:function(a){return!(a<48||a>57)},_onKeydown:function(a){var b;return a=a||window.event,b=a.which||a.keyCode,(b>=48&&b<=57||b>=96&&b<=105||8===b||9===b||46===b||37===b||39===b||110===b)&&void 0},_onKeyup:function(b){var c,d,e,f,g=b.data[0],h=b.data[1],i=a(this).val(),j=!!i;if(i=j?i:"0",c=a(this).data().defaultValue,d=null,e=this.selectionStart,f=this.selectionEnd,i!==c){if("hex"!==h){if(/\D/.test(i))return void a(this).val(c?c:"0");switch(h){case"red":d={r:i,g:g.color.rgb.g,b:g.color.rgb.b};break;case"green":d={r:g.color.rgb.r,g:i,b:g.color.rgb.b};break;case"blue":d={r:g.color.rgb.r,g:g.color.rgb.g,b:i}}d=g.getValidRGB(d)}else{if(/[^a-f0-9]/gi.test(i))return void a(this).val(c?c:"000000");6!==i.length&&(i=new Array(7-i.length).join("0")+i,j=!1),d=g.HEXToRGB(i)}g.update(d,"rgb",!j),this.setSelectionRange(e,f)}},_onChange:function(){var b=a(this),c=b.val(),d=b.data().defaultValue;c!==d&&b.val(d)},bindEvent:function(){var b,c,d,e=this,f=e.eventNamespace;this.hueArea.on("click"+f,function(f){var g,h,i,j=f.pageY;g=a(this).offset(),h=Math.round(j-g.top),i=e.color.hsv,h<0&&(h=0),b=e.getHueWithPos(h),c=i.s,d=i.v,e.update({h:b,s:c,v:d},"hsv")}),this.sbArea.on("click"+f,function(f){var g,h,i,j=f.pageX,k=f.pageY;g=a(this).offset(),h=Math.round(j-g.left),h<0&&(h=0),i=Math.round(k-g.top),i<0&&(i=0),c=e.getSaturationWithPos(h),d=e.getBrightnessWithPos(i),b=e.color.hsv.h,e.update({h:b,s:c,v:d},"hsv")}),this.rInput.on("keydown"+f,[this,"red"],this._onKeydown).on("keyup"+f,[this,"red"],this._onKeyup).on("change"+f,this._onChange),this.gInput.on("keydown"+f,[this,"green"],this._onKeydown).on("keyup"+f,[this,"green"],this._onKeyup).on("change"+f,this._onChange),this.bInput.on("keydown"+f,[this,"blue"],this._onKeydown).on("keyup"+f,[this,"blue"],this._onKeyup).on("change"+f,this._onChange),this.hInput.on("keyup"+f,[this,"hex"],this._onKeyup).on("change"+f,this._onChange)},_destroy:function(){var a=this,b=a.eventNamespace;a.hueArea.off(b),a.sbArea.off(b),a.rInput.off(b),a.gInput.off(b),a.bInput.off(b),a.hInput.off(b),a.hueArea=null,a.sbArea=null,a.rInput=null,a.gInput=null,a.bInput=null,a.hInput=null}}),a.ui.colorpicker}),d("ui/ColorTable",["jqueryCafe","ui/Core","ui/Widget","ui/ColorPicker","ui/Button","ui/ButtonSet"],function(a){return a.widget("ui.colortable",{options:{showNoColorButton:!1,noColorLabel:"No Color",click:null},_create:function(){var a,b,c,d,e,f=[],g=[],h="000000 212121 434343 666666 999999 b7b7b7 cccccc d9d9d9 ffffff ff0000 ff9900 ffff00 00ff00 00ffff 4a86e8 0000ff 9900ff ff00ff 660000 783f04 7f6000 274e13 0c343d 1c4587 073763 20124d 4c1130 990000 b45f06 bf9000 38761d 134f5c 1155cc 0b5394 351c75 741b47 cc0000 e69138 f1c232 6aa84f 45818e 3c78d8 3d85c6 674ea7 a64d79 e06666 f6b26b ffd966 93c47d 76a5af 6d9eeb 6fa8dc 8e7cc3 c27ba0 ea9999 f9cb9c ffe599 b6d7a8 a2c4c9 a4c2f4 9fc5e8 b4a7d6 d5a6bd";for(this.htmlData={tag:"div",attr:{class:["cui-colortable","cui-state-unselectabled"]},contents:[]},e=h.split(" "),a=0,c=e.length;a<c;a++)g.push(this._makeCell(e.shift()));for(a=0;a<7;a++){for(d=this._makeRow(),b=0;b<9;b++)d.contents.push(g.shift());f.push(d)}f[0].attr.class.push("cui-colortable-achromatic-row"),f[1].attr.class.push("cui-colortable-chromatic-row"),this.htmlData.contents=f,this.options.showNoColorButton&&(this.htmlData.contents.push(this._makeNoColorButton()),this.htmlData.attr.class.push("cui-colortable-has-opbutton"))},_makeRow:function(){var a={tag:"div",attr:{class:["cui-colortable-row"]},contents:[]};return a},_makeCell:function(a){var b={tag:"div",attr:{class:["cui-colortable-cell"]},contents:[{tag:"div",attr:{class:["cui-colortable-button"],style:"background-color:#"+a+";","data-cui-color":a},contents:[]}]};return b},_makeOptionalButton:function(a){var b={tag:"div",attr:{role:"button",class:["cui-colortable-optional-button"]},contents:[{tag:"span",attr:{class:["cui-colortable-optional-button-icon"]},contents:[]},{tag:"span",attr:{class:["cui-colortable-optional-button-text"]},contents:[a]}]};return b},_makeNoColorButton:function(){var a=this._makeRow(),b=this._makeOptionalButton(this.options.noColorLabel);return a.attr.class.push("cui-colortable-optional-row","cui-colortable-optional-nocolor"),b.contents[0].attr.class.push("cui-icon","cui-icon-no-color"),a.contents.push(b),a},_init:function(){this._initNoColorButton(),this._on(this.element,{click:function(b){a(b.target).hasClass("cui-colortable-button")&&(this._onChangeColor(b,b.target.getAttribute("data-cui-color")),this._applyCallback(b))},mousedown:function(a){a.preventDefault()}})},_destroy:function(){this._off(this.nocolorbutton),this.color=null,this.colorpickerpane=null,this.nocolorbutton=null},_initNoColorButton:function(){this.nocolorbutton=this.element.find(".cui-colortable-optional-nocolor"),this.nocolorbutton&&this._on(this.nocolorbutton,{click:function(a){this._onChangeColor(a,"transparent"),this._applyCallback(a)}})},_applyCallback:function(a){this.options.click&&"function"==typeof this.options.click&&this.options.click.apply(this.element,[a,this.color])},_onChangeColor:function(a,b){this.color=b,this._trigger("change",a,{color:this.color})},open:function(a){this.isColorPickerOpened&&(this.colorpickerpane.hide(),this.isColorPickerOpened=!1),this.element.show().trigger("open",a)},close:function(a){this.element.hide().trigger("close",a)}}),a.ui.colortable}),d("ui/ColorButton",["jqueryCafe","ui/Core","ui/Widget","ui/Position","ui/ColorTable"],function(a){return a.widget("ui.colorbutton",{options:{click:null,icon:null,color:"000000",showNoColorButton:!0,more:null,belongTo:null,beforeColorTableOpen:null,beforeColorTableClose:null,position:{my:"left top",at:"left bottom",collision:"flip none"},noColorLabel:"No Color",moreLabel:"More",tooltip:!1,title:""},_create:function(){var b=["colorbutton","widget"];this.htmlData={tag:"div",attr:{class:a.ui.addPrefixToClasses(b).join(" ")},contents:[]},this.options.tooltip&&this.options.title&&(this.htmlData.attr.title=this.options.title),this._createMainButton(),this._createSubButton(),this._createColorTable()},_init:function(){function b(){c.mainbutton.removeClass("cui-state-hover"),c.subbutton.removeClass("cui-state-hover")}var c=this;c._initMainButton(),c._initSubButton(),c._initColorTable(),c.setColor(null,c.options.color),c._on(c.element,{mouseover:function(){c.mainbutton.addClass("cui-state-hover"),c.subbutton.addClass("cui-state-hover")},mouseleave:b}),a.ui.getIEVersion()&&(c._on(c.element,{wheel:b,scroll:b}),c.document.on("keydown."+c.getID(),b))},_destroy:function(){var a=this;a.colortable&&(a.isColorTableOpened&&a._closeColorTable(),a.colortable.destroy()),a.mainbutton&&a._off(a.mainbutton),a.mainbutton&&a._off(a.subbutton),a.colortablemore&&(a.colortablemore.off(a.eventNamespace),a.colortablemore=null),a.document.off("."+a.getID()),a.colortable=null,a.mainbutton=null,a.subbutton=null,a.colortablepane=null,a.preview=null},_setOption:function(a,b){var c="cui-button-disabled cui-state-disabled",d=this.options;this._super(a,b),"disabled"===a&&(b?(this.mainbutton.addClass(c),this.subbutton.addClass(c),this.element.trigger("buttondisabled"),d.tooltip&&d.title&&this.element.removeAttr("title")):(this.mainbutton.removeClass(c),this.subbutton.removeClass(c),d.tooltip&&d.title&&this.element.attr("title",d.title),this.element.trigger("buttonenabled")))},_createMainButton:function(){var b=["button","widget","button-icon-only","state-default","colorbutton-main","corner-left"],c=["button-icon-primary","icon","icon-"+this.options.icon],d={tag:"button",attr:{type:"button",role:"button",class:a.ui.addPrefixToClasses(b)},contents:[{tag:"span",attr:{class:a.ui.addPrefixToClasses(c)},contents:[]},{tag:"span",attr:{class:["cui-button-text"]},contents:["&#160;"]},{tag:"span",attr:{class:["cui-colorbutton-preview"]},contents:[]}]};this.htmlData.contents.push(d)},_createSubButton:function(){var b=["button","widget","button-icon-only","state-default","colorbutton-sub","corner-right"],c=["button-icon-primary","icon","icon-arrow-down"],d={tag:"button",attr:{type:"button",role:"button",class:a.ui.addPrefixToClasses(b)},contents:[{tag:"span",attr:{class:a.ui.addPrefixToClasses(c)},contents:[]},{tag:"span",attr:{class:["cui-button-text"]},contents:["&#160;"]}]};this.htmlData.contents.push(d)},_createColorTable:function(){var b,c={tag:"div",attr:{class:["cui-colorbutton-colortable","cui-front"]},contents:[]},d=0,e=this,f=e.options;e.colortable=a.ui.colortable({showNoColorButton:f.showNoColorButton,click:function(a,b){e.setColor(a,b),e._closeColorTable(a),e._onClickMainButton(a)},noColorLabel:f.noColorLabel}),c.contents.push(e.colortable.getHTMLData()),f.showNoColorButton&&d++,a.isFunction(f.more)&&(d++,b=e._createMoreButton(),1===d&&b.attr.class.push("cui-colorbutton-colortable-more-button-only"),c.contents.push(b)),1===d?c.attr.class.push("cui-colorbutton-colortable-opbutton-one"):2===d&&c.attr.class.push("cui-colorbutton-colortable-opbutton-two"),e.htmlData.contents.push(c)},_createMoreButton:function(){var a={tag:"div",attr:{role:"button",class:["cui-colorbutton-colortable-more-button","cui-state-unselectabled"]},contents:[{tag:"span",attr:{class:["cui-colorbutton-colortable-more-button-text"]},contents:[this.options.moreLabel+"..."]}]};return a},_initMainButton:function(){this.mainbutton=this.element.find(".cui-colorbutton-main"),this.preview=this.element.find(".cui-colorbutton-preview"),this._on(this.mainbutton,{click:this._onClickMainButton})},_initSubButton:function(){this.subbutton=this.element.find(".cui-colorbutton-sub"),this._on(this.subbutton,{mousedown:function(a){a.preventDefault()},click:this._onClickSubButton})},_initColorTable:function(){var b=this;this.colortablepane=this.element.find(".cui-colorbutton-colortable"),this.colortablepane.hide(),this.isColorTableOpened=!1,this.colortable.init(),a.isFunction(this.options.more)&&(this.colortablemore=this.element.find(".cui-colorbutton-colortable-more-button"),this.colortablemore.on("click"+this.eventNamespace,function(a){b.options.more.apply(b,[a]),b._closeColorTable(a)}))},_selectButton:function(){this.mainbutton.addClass("cui-toggle-on"),this.subbutton.addClass("cui-toggle-on")},_unselectButton:function(){this.mainbutton.removeClass("cui-toggle-on"),this.subbutton.removeClass("cui-toggle-on")},_position:function(){this.colortablepane.position(a.extend({of:this.element,within:a(this.options.belongTo||this.document)},this.options.position))},_openColorTable:function(b){function c(a){h.isColorTableOpened&&h._closeColorTable(a)}var d,e,f,g,h=this,i=h.options,j=h.eventNamespace,k=h.document.find("iframe.cui-panel");for(i.tooltip&&i.title&&this.element.removeAttr("title"),a.isFunction(this.options.beforeColorTableOpen)&&i.beforeColorTableOpen.apply(),h.colortable.open(b),h.colortablepane.show(),h._position(),h.isColorTableOpened=!0,h._selectButton(),h._on(h.document,{mousedown:h._onClickDocument,mousewheel:c,dommousescroll:c}),h._on(h.window,{resize:c}),d=0,e=k.length;d<e;d++){try{f=a(k[d].contentWindow)}catch(a){continue}g=a(f[0].document),g.on("mousedown."+j,"*",c).on("mousewheel."+j+" dommousescroll"+j,c),f.on("blur"+j)}h._trigger("open",b)},_closeColorTable:function(b){var c,d,e,f,g=this,h=g.eventNamespace,i=g.options,j=g.document.find("iframe.cui-panel");for(i.tooltip&&i.title&&this.element.attr("title",i.title),a.isFunction(i.beforeColorTableClose)&&i.beforeColorTableClose.apply(),this.colortablepane.hide(),this.colortable.close(),this.isColorTableOpened=!1,this._unselectButton(),this._off(this.document),this._off(this.window),c=0,d=j.length;c<d;c++){try{e=a(j[c].contentWindow)}catch(a){continue}f=a(e[0].document),f.off(h),e.off(h)}this._trigger("close",b)},_onClickDocument:function(b){this.isColorTableOpened&&(a(b.target).closest("#"+this.getID()).length||this._closeColorTable(b))},_onClickMainButton:function(b){this.isColorTableOpened||a.isFunction(this.options.click)&&this.options.click.apply(this.element,[b,this.color])},_onClickSubButton:function(){this.isColorTableOpened?this._closeColorTable():this._openColorTable()},_isColor:function(a){return!(!a||"string"!=typeof a)&&("transparent"===a||a.match(/^[a-f0-9]{6}$/i))},_setPreviewColor:function(a){this.preview.css("background-color","transparent"===a?a:"#"+a)},getColor:function(){return this.color},setColor:function(a,b){this._isColor(b)&&(this.color=b,this._setPreviewColor(b),this._trigger("change",a,this.color))}}),a.ui.colorbutton}),d("ui/ColorInput",["jqueryCafe","ui/Core","ui/Widget","ui/ColorTable"],function(a){function b(a){return!(!a||"string"!=typeof a)&&("transparent"===a||a.match(/^[a-f0-9]{6}$/i))}function c(a){var b,c,d;return 3!==a.length?a:(b=a.charAt(0),c=a.charAt(1),d=a.charAt(2),b+b+c+c+d+d)}return a.widget("ui.colorinput",{options:{color:"transparent",noColorLabel:"No Color",moreLabel:"More",belongTo:null,more:null},_create:function(){var a,b,c;this.htmlData={tag:"div",attr:{class:["cui-colorinput"]},contents:[]
},a=this._makeTextBox(),this.htmlData.contents.push(a),b=this._makeButton(),this.htmlData.contents.push(b),c=this._makeColorTable(),this.htmlData.contents.push(c)},_makeButton:function(){var b=["widget","state-unselectabled","state-default","colorinput-button"],c={tag:"span",attr:{role:"button",class:a.ui.addPrefixToClasses(b).join(" ")},contents:[{tag:"span",attr:{class:["cui-colorinput-preview"]},contents:[]}]};return c},_makeTextBox:function(){var b=["colorinput-textbox","state-unselectabled","widget","state-default"],c={tag:"span",attr:{class:a.ui.addPrefixToClasses(b).join(" ")},contents:["&nbsp#"]};return c.contents.push(this._makeInput()),c},_makeInput:function(){var a={tag:"input",attr:{type:"text",maxlength:6,size:6,class:["cui-colorinput-text"]},contents:[]};return a},_makeColorTable:function(){var b=this,c=this.options,d={tag:"div",attr:{class:["cui-colorinput-colortable","cui-front"]},contents:[]};return this.colortable=a.ui.colortable({showNoColorButton:!0,noColorLabel:c.noColorLabel,click:function(a,c){b.setColor(c),b._closeColorTable(a)}}),d.contents.push(this.colortable.getHTMLData()),a.ui.isFunction(c.more)&&(d.contents.push(this._makeMoreButton()),d.attr.class.push("cui-colorinput-colortable-more")),d},_makeMoreButton:function(){var a={tag:"div",attr:{role:"button",class:["cui-colorinput-colortable-more-button","cui-state-unselectabled"]},contents:[{tag:"span",attr:{class:["cui-colorinput-colortable-more-button-text"]},contents:[this.options.moreLabel+"..."]}]};return a},_init:function(){var a=this.options.color;this._initTextBox(),this._initButton(),this._initColorTable(),this.setColor(a)},_initTextBox:function(){var a,d=this,e=this.eventNamespace;this.inputbox=this.element.find(".cui-colorinput-textbox"),this.inputtext=this.element.find(".cui-colorinput-text"),this.inputtext.on("click"+this.eventNamespace,function(a){d.isColorTableOpened&&d._closeColorTable(a)}).on("keydown"+this.eventNamespace,function(a){var b;return a=a||window.event,b=a.which||a.keyCode,(b>=48&&b<=57||b>=96&&b<=105||b>=65&&b<=70||8===b||9===b||46===b||37===b||39===b||110===b)&&void 0}).on("change"+e+" keyup"+e+" paste"+e,function(e){a=e.target.value,a=a.replace(/[^a-f0-9]/gi,"0"),a.length>6&&(a=a.substr(0,5)),e.target.value!==a&&(e.target.value=a),0===a.length?a="transparent":3===a.length&&(a=c(a)),b(a)&&(d._updateColor(a),d._setPreviewColor(a))})},_initButton:function(){var a=this;this.button=this.element.find(".cui-colorinput-button"),this.preview=this.element.find(".cui-colorinput-preview"),this.button.on("click"+this.eventNamespace,function(b){a.isColorTableOpened?a._closeColorTable(b):a._openColorTable(b)})},_initColorTable:function(){this.colortablepane=this.element.find(".cui-colorinput-colortable"),this.colortablepane.hide(),this.isColorTableOpened=!1,this.colortable.init(),a.ui.isFunction(this.options.more)&&(this.colortablemore=this.element.find(".cui-colorinput-colortable-more-button"),this.colortablemore.on("click"+this.eventNamespace,this.options.more))},_destroy:function(){var a=this,b=this.eventNamespace;a.colortable&&(a.isColorTableOpened&&a._closeColorTable(),a.colortable.destroy()),a.inputtext.off(b),a.button.off(b),a.colortablemore&&(a.colortablemore.off(b),a.colortablemore=null),a.inputbox=null,a.inputtext=null,a.colortable=null,a.preview=null,a.button=null,a.colortablepane=null},_openColorTable:function(b){function c(a){f._closeColorTable(a)}var d,e,f=this,g=this.options,h=a(g.belongTo||this.document),i=h.find("iframe.cui-panel"),j="."+this.getID();for(this.colortable.open(b),this.colortablepane.show(),this.isColorTableOpened=!0,this._on(this.document,{mousedown:this._onClickDocument,mousewheel:c,dommousescroll:c}),d=0,e=i.length;d<e;d++)a(i.get(d).contentWindow.document).on("mousedown"+j,c);this._trigger("open",b)},_closeColorTable:function(b){var c,d,e=this.options,f=a(e.belongTo||this.document),g=f.find("iframe.cui-panel"),h="."+this.getID();for(this.colortablepane.hide(),this.colortable.close(),this.isColorTableOpened=!1,this.document.off(h),c=0,d=g.length;c<d;c++)a(g.get(c).contentWindow.document).off(h);this._trigger("close",b)},_onClickDocument:function(b){this.isColorTableOpened&&(a(b.target).closest("#"+this.getID()).length||this._closeColorTable(b))},_setColorText:function(a){b(a)&&("transparent"===a&&(a=""),this.inputtext.val(a.toLowerCase()))},_setPreviewColor:function(a){b(a)&&("transparent"===a?(this.preview.css("background-color",""),this.preview.addClass("cui-colorinput-no-color")):(this.preview.removeClass("cui-colorinput-no-color"),this.preview.css("background-color","#"+a)))},_updateColor:function(a){b(a)&&(this.color=a,this._trigger("change",{},{color:this.color}))},setColor:function(a){this._updateColor(a),this._setPreviewColor(this.color),this._setColorText(this.color)},getColor:function(){return this.color}}),a.ui.colorinput}),d("ui/Dialog",["jqueryCafe","ui/Core","ui/Widget","ui/Draggable","ui/Resizable","ui/Position","ui/Mouse","ui/Button"],function(a){var c="cui-dialog cui-widget cui-widget-content cui-corner-all cui-front",d="cui-dialog-titlebar cui-widget-header cui-corner-all cui-helper-clearfix",e="cui-dialog-title",f="cui-button cui-widget cui-state-default cui-corner-all cui-button-icon-only cui-dialog-titlebar-close",g="cui-button-icon-primary cui-icon cui-icon-close",h="cui-button-text",i="cui-dialog-content cui-widget-content",j="cui-widget-overlay cui-front",k="cui-dialog-buttonpane cui-widget-content cui-helper-clearfix",l="cui-dialog-buttonset-left",m="cui-dialog-buttonset-right";return a.widget("ui.dialog",{options:{autoOpen:!1,buttons:[],closeOnEscape:!0,draggable:!0,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var c=a(this).css(b).offset().top;c<0&&a(this).css("top",b.top-c)}},resizable:!0,title:null,width:300,closeText:"Close",contentOverflow:!1,belongTo:null,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,beforeOpen:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){var a=this.dialogId=this.getID(),b=this.options;this.titlebarId=a+"-titlebar",this.titleId=a+"-title",this.titlebarCloseId=a+"-titlebar-close",this.contentId=a+"-content",this.buttonPaneId=a+"-buttonpane",this.leftButtonSetId=a+"-buttonset-left",this.rightButtonSetId=a+"-buttonset-right",this.htmlData={tag:"div",attr:{id:a,role:"dialog",class:c+(b.contentOverflow?" cui-overflow-content":""),tabIndex:-1},contents:[],items:this.options.items},null!==b.title&&this.htmlData.contents.push(this._createTitlebar()),this.htmlData.contents.push(this._createContent()),this.htmlData.contents.push(this._createButtonPane())},_createTitlebar:function(){return{tag:"div",attr:{id:this.titlebarId,class:d},contents:[{tag:"span",attr:{id:this.titleId,class:e},contents:[this.options.title]},{tag:"button",attr:{type:"button",id:this.titlebarCloseId,class:f},contents:[{tag:"span",attr:{class:g}},{tag:"span",attr:{class:h},contents:this.options.closeText}]}]}},_createContent:function(){return{tag:"div",attr:{id:this.contentId,class:i},contents:[]}},_createButtonPane:function(){return{tag:"div",attr:{id:this.buttonPaneId,class:k},contents:[{tag:"div",attr:{id:this.leftButtonSetId,class:l},contents:this._createButtons("left")},{tag:"div",attr:{id:this.rightButtonSetId,class:m},contents:this._createButtons("right")}]}},_createButtons:function(c){var d,e,f,g,h=[],i=this.options.buttons;for(this.footerButtons=this.footerButtons||{},this.footerButtonHandlers=this.footerButtonHandlers?this.footerButtonHandlers:{},d=0;d<i.length;d++)(i[d].float===b&&"right"===c||i[d].float===c)&&(f=i[d].text||i[d].name,g=i[d].name||a({}).uniqueId()[0].id,e=a.ui.button({label:f,tooltip:!1}),this.footerButtons[g]=e,i[d].click&&(this.footerButtonHandlers[g]=i[d].click),h.push(e.getHTMLData()));return h},_init:function(){this.uiDialog=this.element,this.uiDialogTitle=a("#"+this.titleId),this.uiDialogTitlebar=a("#"+this.titlebarId),this.uiDialogTitlebarClose=a("#"+this.titlebarCloseId),this.uiDialogButtonPane=a("#"+this.buttonPaneId),this.uiDialogLeftButtonSet=a("#"+this.leftButtonSetId),this.uiDialogRightButtonSet=a("#"+this.rightButtonSetId),this.contentPane=a("#"+this.contentId),this._initWrapper(),null!==this.options.title&&this._initTitlebar(),null!==this.options.title&&this.options.draggable&&a.fn.draggable&&this._makeDraggable(),this.options.resizable&&a.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus(),this.options.autoOpen&&this.open()},_initWrapper:function(){this.uiDialog.hide(),this._on(this.uiDialog,{keydown:function(b){var c,d,e;return this.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode===a.ui.keyCode.ESCAPE?(b.preventDefault(),void this.close(b)):b.keyCode===a.ui.keyCode.ENTER?(b.preventDefault(),void b.stopPropagation()):void(b.keyCode!==a.ui.keyCode.TAB||b.isDefaultPrevented()||(c=this.uiDialog.find(":tabbable"),d=c.filter(":first"),e=c.filter(":last"),b.target!==e[0]&&b.target!==this.uiDialog[0]||b.shiftKey?b.target!==d[0]&&b.target!==this.uiDialog[0]||!b.shiftKey||(this._delay(function(){e.focus()}),b.preventDefault()):(this._delay(function(){d.focus()}),b.preventDefault())))},mousedown:function(a){this._moveToTop(a)&&this._focusTabbable()}}),this.contentPane.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.contentPane.attr("id")})},_initTitlebar:function(){this._on(this.uiDialogTitlebar,{mousedown:function(b){a(b.target).closest(".cui-dialog-titlebar-close")||this.uiDialog.focus()}}),this._on(this.uiDialogTitlebarClose,{mouseenter:function(){this.uiDialogTitlebarClose.addClass("cui-state-hover")},mouseleave:function(){this.uiDialogTitlebarClose.removeClass("cui-state-hover")},click:function(a){a.preventDefault(),this.close(a)}}),this._title(this.uiDialogTitle),this.uiDialog.attr({"aria-labelledby":this.uiDialogTitle.attr("id")})},_initButtons:function(){var a,b;for(a in this.footerButtonHandlers)this.footerButtonHandlers[a]&&(b=this.footerButtons[a],b.init(),this._on(b.element,{click:this.footerButtonHandlers[a]}));this.isButtonInitiated=!0},_destroy:function(){var a=this;a.document.removeData("cui-dialog-instances"),a._destroyOverlay(),a.uiDialog.stop(!0,!0)},disable:a.noop,enable:a.noop,getButtons:function(){return this.footerButtons},getButton:function(a){return this.footerButtons[a]},close:function(b,c){var d,e=this;if(this._isOpen&&this._trigger("beforeClose",b,{dialog:this,element:this.uiDialog})!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{d=this.document[0].activeElement,d&&"body"!==d.nodeName.toLowerCase()&&a(d).blur()}catch(a){}this._hide(this.uiDialog,null,function(){e._trigger("close",b,{dialog:e,element:e.uiDialog,button:c})})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(b,c){var d=!1,e=this.uiDialog.siblings(".cui-front:visible").map(function(){return+a(this).css("z-index")}).get(),f=Math.max.apply(null,e);return f>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",f+1),d=!0),d&&!c&&this._trigger("focus",b,this.uiDialog),d},open:function(){var b=this;return this.isButtonInitiated||this._initButtons(),this._trigger("beforeOpen",{},{dialog:this,element:this.uiDialog}),this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=a(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,null,function(){b._focusTabbable(),b._trigger("focus",{},this.uiDialog)}),this._makeFocusTarget(),void this._trigger("open",{},{dialog:this,element:this.uiDialog}))},_focusTabbable:function(){var a=this._focusedElement;a||(a=this.contentPane.find("[autofocus]")),a.length||(a=this.contentPane.find(":tabbable")),a.length||(a=this.uiDialogButtonPane.find(":tabbable")),a.length||(a=this.uiDialogTitlebarClose.filter(":tabbable")),a.length||(a=this.uiDialog),a.eq(0).focus()},_keepFocus:function(b){function c(){var b=this.document[0].activeElement,c=this.uiDialog[0]===b||a.contains(this.uiDialog[0],b);c||this._focusTabbable()}b.preventDefault(),c.call(this),this._delay(c)},_title:function(a){this.options.title||a.html("&#160;"),a.text(this.options.title)},_makeDraggable:function(){function b(a){return{position:a.position,offset:a.offset}}var c=this,d=this.options;this.uiDialog.draggable({cancel:".cui-dialog-content, .cui-dialog-titlebar-close",handle:".cui-dialog-titlebar",containment:"document",start:function(d,e){a(this).addClass("cui-dialog-dragging"),c._blockFrames(),c._trigger("dragStart",d,b(e))},drag:function(a,d){c._trigger("drag",a,b(d))},stop:function(e,f){var g=f.offset.left-c.document.scrollLeft(),h=f.offset.top-c.document.scrollTop();d.position={my:"left top",at:"left"+(g>=0?"+":"")+g+" top"+(h>=0?"+":"")+h,of:c.window},a(this).removeClass("cui-dialog-dragging"),c._unblockFrames(),c._trigger("dragStop",e,b(f))}})},_makeResizable:function(){function b(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}var c=this,d=this.options,e=d.resizable,f=this.uiDialog.css("position"),g="string"==typeof e?e:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".cui-dialog-content",containment:"document",alsoResize:this.contentPane,maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:this._minHeight(),handles:g,start:function(d,e){a(this).addClass("cui-dialog-resizing"),c._blockFrames(),c._trigger("resizeStart",d,b(e))},resize:function(a,d){c._trigger("resize",a,b(d))},stop:function(e,f){var g=c.uiDialog.offset(),h=g.left-c.document.scrollLeft(),i=g.top-c.document.scrollTop();d.height=c.uiDialog.height(),d.width=c.uiDialog.width(),d.position={my:"left top",at:"left"+(h>=0?"+":"")+h+" top"+(i>=0?"+":"")+i,of:c.window},a(this).removeClass("cui-dialog-resizing"),c._unblockFrames(),c._trigger("resizeStop",e,b(f))}}).css("position",f)},_trackFocus:function(){this._on(this.widget(),{focusin:function(b){this._makeFocusTarget(),this._focusedElement=a(b.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var b=this._trackingInstances(),c=a.inArray(this,b);c!==-1&&b.splice(c,1)},_trackingInstances:function(){var a=this.document.data("cui-dialog-instances");return a||(a=[],this.document.data("cui-dialog-instances",a)),a},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(){var a=this.uiDialog.is(":visible");a||this.uiDialog.show(),this.uiDialog.position(this.options.position),a||this.uiDialog.hide()},_setOptions:function(b){var c=this,d=!1,e={};a.each(b,function(a,b){c._setOption(a,b),a in c.sizeRelatedOptions&&(d=!0),a in c.resizableRelatedOptions&&(e[a]=b)}),d&&(this._size(),this._position()),this.uiDialog.is(":data(cui-resizable)")&&this.uiDialog.resizable("option",e)},_setOption:function(a,b){var c,d,e=this.uiDialog;"disabled"!==a&&(this._super(a,b),"draggable"===a&&(c=e.is(":data(cui-draggable)"),c&&!b&&e.draggable("destroy"),!c&&b&&this._makeDraggable()),"position"===a&&this._position(),"resizable"===a&&(d=e.is(":data(cui-resizable)"),d&&!b&&e.resizable("destroy"),d&&"string"==typeof b&&e.resizable("option","handles",b),d||b===!1||this._makeResizable()),"title"===a&&this._title(this.uiDialogTitle),"height"===a&&this.uiDialog.height(b))},_size:function(){var a,b,c,d=this.options;this.contentPane.show().css({width:"",minHeight:"",maxHeight:"",height:""}),d.minWidth>d.width&&(d.width=d.minWidth),a=this.uiDialog.css({height:"auto",width:d.width}).outerHeight(),b=Math.max(0,d.minHeight-a),c="number"==typeof d.maxHeight?Math.max(0,d.maxHeight-a):"none","auto"===d.height?this.contentPane.css({minHeight:b,maxHeight:c,height:"auto"}):d.height<=a?this.contentPane.height(Math.max(0,b)):this.contentPane.height(Math.max(0,d.height-a)),this.uiDialog.is(":data(cui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){var b=a(this.options.belongTo||this.document),c=b.find("iframe.cui-panel");this.iframeBlocks=c.map(function(){var b=a(this);return a("<div>").css({position:"absolute",width:b.outerWidth(),height:b.outerHeight()}).appendTo(b.parent()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(b){if(a(b.target).closest(".cui-dialog").length)return!0},_createOverlay:function(){if(this.options.modal){var b=!0;this._delay(function(){b=!1}),this.document.data("cui-dialog-overlays")||this._on(this.document,{focusin:function(a){b||this._allowInteraction(a)||(a.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=a("<div>").addClass(j).appendTo(this.element.parent()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("cui-dialog-overlays",(this.document.data("cui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var a=this.document.data("cui-dialog-overlays")-1;a?this.document.data("cui-dialog-overlays",a):this.document.unbind("focusin").removeData("cui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}}),a.ui.dialog}),d("ui/NotiBar",["jqueryCafe","ui/Core","ui/Widget"],function(a){return a.widget("ui.notibar",{options:{html:"",closable:!1,type:""},_create:function(){var a=[],b=["cui-notibar"],c=this.options,d=c.html||"",e=c.type;e&&b.push("cui-state-"+e),a.push({tag:"span",attr:{class:"cui-notibar-text"},contents:d}),c.closable&&(b.push("cui-closable"),a.push({tag:"button",attr:{type:"button",tabindex:"-1",class:"cui-quit-button cui-widget cui-state-default",role:"button"},contents:[{tag:"span",attr:{class:"cui-button-text"},contents:"X"}]})),this.htmlData={tag:"div",attr:{class:b,role:"alert"},contents:a}},_init:function(){var a=this,b=this.element;b.parent().addClass("cui-notibar-parent"),a.options.closable&&b.on("click",function(){a.destroy(!0)})}}),a.ui.notibar}),d("ThemeManager",[],function(){var a;return a={themes:{},parents:{},changeUrl:function(a,b){return a.theme=b,a},getParent:function(a){return this.parents[a]?this.parents[a]:null},load:function(a,b,c){var d,e=this;e.themes[b]||(d=c.prefix+c.theme+c.suffix,a.scriptLoader.addQueue(d,function(){var d=e.getParent(b);d&&e.load(a,d,e.changeUrl(c,d))}))},add:function(a,b,c){this.themes[a]=c,b&&(this.parents[a]=b)},get:function(a){return this.themes[a]?this.themes[a]:null}}}),d("UIManager",["jqueryCafe"],function(a){function c(){}var d={NORMAL:"normal",IMAGE:"image",MEDIA:"media",TABLE:"table",EMPTY_CELL:"empty-cell",SINGLE_CELL:"single-cell",MULTI_CELL:"multi-cell",SELECTED:"selected"},e="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+";return c.prototype={widgets:null,editor:null,theme:null,dialogs:null,configs:null,panels:null,activeDialogs:[],_menuItemsCache:{},_supportBlankPage:!1,_stateofAlert:!1,create:function(b,c){var d,e,f,g,h;c&&b.theme&&c.targetId&&(e=a("#"+c.targetId)[0],e&&(this.panels=null,this.activeDialogs=[],this._menuItemsCache={},this._supportBlankPage=!1,this._stateofAlert=!1,this.theme=h=a.extend(!0,{},b.theme),this.editor=b,f=c.menuItems||{},this._processMenuItem(f),g=c.buttons||{},this._processToolButton(g,f),d=h.createUI({configs:c.configs||{},menuItems:f,buttons:g,panels:c.panels||{}}),this.dialogs=c.dialogs||{},this.widgets=d.widgets,this.configs=d.configs,d.htmlData.attr.class.push("cui-skin-"+c.configs.skin),this._render(e,d.htmlData)))},_render:function(b,c){var d=this,e=this.editor,f=a(b),g=a(a.ui.makeHTML(c));f.one("drewui",function(b){var c=a(b.relatedTarget),g=!0;c.show();try{d._postRender()}catch(a){c[0].outerHTML="",f.show(),g=!1}finally{e.trigger(g?"uicreate":"uicreatefail")}}),this.theme.drawUI(b,g[0])},_postRender:function(){var b,c,d=this,e=this.widgets,f=this.editor;for(b in e)e[b].init();c=e.container.element.on("contextmenu",function(a){a.preventDefault(),a.stopPropagation()}),this.theme.initUI(this,c),f.on("tabsbeforeactivate",function(a,b){"edit"===b.oldPanelName&&d.backupHeaderStates()}),f.on("tabsactivate",function(a,b){"edit"===b.newPanelName?(d.restoreHeaderStates(),f.getBody().setAttribute("contenteditable","true"),d.isAlertOpened()||this.focus()):(this.blur(),f.getBody().removeAttribute("contenteditable"))}),f.one("editorcreate",function(){var b=a(f.getBody()),c=f.configs;b.css("minHeight",c.height-parseFloat(b.css("margin-top"))-parseFloat(b.css("margin-bottom")))}),c.on("mousedown",".cui-toolbar button",function(a){a.preventDefault()})},_processMenuItem:function(a,b,c){var d,e,f,g,h,i=this.editor,j=b?b+"_":"";c=c||a;for(d in a)a.hasOwnProperty(d)&&(e=a[d],h=j+d,"string"==typeof e?(g=e,e=a[d]=c[e]||{}):g=h,e.name=e.name||g,e.alias=e.alias||h,f=e.shortcut,f&&(f=i.getShortcut(f)[0]||f,i.os&&i.os.mac&&(f=this.convertMacSymbol(f)),e.shortcut=f),e.menuItems&&this._processMenuItem(e.menuItems,e.name,c))},_processToolButton:function(a,b){var c,d;for(c in a)a.hasOwnProperty(c)&&(d=a[c],/(selectmenu|splitbutton)/i.test(d.widgetType)&&this._processMenuItem(d.menuItems,c,b))},destroy:function(){var a,b,c=[],d=this,e=d.widgets,f=d.getContainer();d.theme.finalUI(d,f);for(a in e)c.push(e[a]);for(;c.length;)b=c.pop(),b.destroy(),b=null;d.theme.destroyUI(),f.find("*").off(),f.off(),f.remove(),f=null,d.widgets=e=null,d.editor=null,d.theme=null,d.dialogs=null,d.configs=null,d.panels=null,d.activeDialogs=null,d._menuItemsCache=null,d._supportBlankPage=null,d._stateofAlert=null},convertMacSymbol:function(a){return"string"!=typeof a?"":(a=a.replace(/command/i,"⌘"),a=a.replace(/option/i,"⌥"),a=a.replace(/shift/i,"⇧"),a=a.replace(/ctrl/i,"⌃"))},dialog:function(b,c){var d,e,f,g,h=this,i=this.editor,j="dialog_"+b,k=this.getWidget(j),l=this.dialogs[b];if(k)return k.option("position",l.position),void k.open();if(d=this.theme,l){l.position||(l.position={my:"center",at:"center",of:this.getContainer(),collision:"fit",using:function(b){var c=a(this).css(b).offset().top;c<0&&a(this).css("top",b.top-c)}}),l.belongTo||(l.belongTo=a(this.getContainer()).attr("id")),e=d.createDialog(b,l),a(this.getContainer()).append(a.ui.makeHTML(e.htmlData)),g=e.widgets;for(f in g)g[f].init();this.widgets=a.extend(this.widgets,g),j="dialog_"+b,k=g[j],k.element.attr("data-cui-dialog",j),k.getWidget=function(a){var b;return a?(b=this.element.attr("data-cui-dialog"),h.getWidget(b+"_"+a)):this},k.element.on("dialogopen",function(b){var c=a(b.target).attr("data-cui-dialog");h.activeDialogs.push(c)}).on("dialogclose",function(b){var c=a(b.target).attr("data-cui-dialog"),d=a.inArray(c,h.activeDialogs);d>-1&&h.activeDialogs.splice(d,1)}),c||k.element.on("dialogclose",function(){i.focus()}),i.trigger("dialogcreate",{dialog:k}),k.open()}},alert:function(b){var c=this.editor,d=this,e="common_alert",f=this.getWidget("dialog_common_alert"),g=function(){d._stateOfAlert=!d._stateOfAlert};f?(this.isDialogOpened(e)&&f.close(),a(".cui-dialog-content .cui-label",f.element).html(b)):this.dialogs[e]={modal:!0,resizable:!1,width:"auto",items:[{name:"messageText",type:"label",options:{label:b}}],buttons:[{text:c.getText("ok"),click:function(){this.close()}}],beforeOpen:function(a,b){c.trigger("alertbeforeopen",a,b)},open:function(a,b){c.trigger("alertopen",a,b)},beforeClose:function(a,b){c.trigger("alertbeforeclose",a,b)},close:function(a,b){c.trigger("alertclose",a,b)}},c.one("alertbeforeopen",function(b,d){var e;a(d.target).css("max-width","400px").find(".cui-dialog-content").css("padding","1em 1em 0.1em"),g(),c.isFocused()?c.one("alertclose",function(){c.focus(),g()}):(e=document.activeElement,c.one("alertclose",function(){e.focus(),g()}))}),this.dialog(e,!0)},isDialogOpened:function(a){var b=this.activeDialogs;return a?b.indexOf(a)!==-1:b.length>0},getContext:function(b){function c(a,b,c){var d,e=0,f=a.length;for(c=c||"data-cui-selected";e<f;e++)if(d=a[e],d.tagName===b&&d.getAttribute(c))return!0;return!1}var e,f,g,h,i=this.editor.selectionManager,j=this.editor.pluginUtils;return i?(e=[],f=i.getRange(),g=i.getAncestors(),b&&j.isSelectedImageItem(b)?(h=this.editor.browser.ie?a("img[data-cui-selected]",b)[0]:b,h.getAttribute("data-cui-media")?e.push(d.MEDIA,d.SELECTED):e.push(d.IMAGE,d.SELECTED)):f.collapsed===!1?e.push(d.NORMAL,d.SELECTED):c(g,"TABLE")?(e.push(d.TABLE),g=a(g[0]).closest("table").find("th[data-cui-selected], td[data-cui-selected]"),0===g.length?e.push(d.EMPTY_CELL):1===g.length?e.push(d.SINGLE_CELL):g.length>1&&e.push(d.MULTI_CELL),e.push(d.SELECTED)):e.push(d.NORMAL),e.join(".")):d.NORMAL},getContainer:function(){return this.widgets.container.element},getEditArea:function(){return this.widgets.panel_edit.element},getWidget:function(a){var b,c,d=this.widgets;if("string"==typeof a)b=d[a];else if(a instanceof RegExp){b=[];for(c in d)a.test(c)&&b.push(d[c])}return b},_getMenuItems:function(b){return this._menuItemsCache[b]||(this._menuItemsCache[b]=a(".cui-menu li[data-cui-name='"+b+"'], .cui-menu li[data-cui-alias='"+b+"']",this.getContainer())),this._menuItemsCache[b]},disableMenuItem:function(a,c){var d=this._getMenuItems(a);if(c===b)return d.hasClass("cui-state-disabled");if(d.hasClass("cui-state-disabled")!==c)return c?d.addClass("cui-state-disabled").attr("aria-disabled","true"):d.removeClass("cui-state-disabled").removeAttr("aria-disabled"),d},toggleMenuItem:function(a,c){var d,e,f,g=this._getMenuItems(a);if(c===b)return g.hasClass("cui-pressed");if(g.hasClass("cui-pressed")!==c){if(c)for(g.addClass("cui-pressed"),d=0,e=g.length;d<e;d++)f=g.eq(d),f.hasClass("cui-selectmenu-menuitem")||f.hasClass("cui-has-icon")||f.find("span.cui-toggle").length||f.prepend('<span class="cui-toggle cui-icon cui-icon-check"></span>');else g.removeClass("cui-pressed").find("span.cui-toggle").remove();return g}},disableAllHeader:function(b,c){var d,f,g,h,i,j,k,l,m,n=[],o=this.getContainer(),p=this.widgets,q=a(".cui-menu li[data-cui-name], .cui-menu li[data-cui-alias]",o),r=[];if(b){if("string"==typeof b)b=b.split(",");else if(!a.isArray(b))return}else b=[];for(h="(?!buttonset"+(b.length?"|"+b.join("|"):"")+")",l=new RegExp("(toolbar_"+h+e+"|menubar_menu_"+h+e+")"),m=new RegExp("^("+(b.length?"?!("+b.join("|")+")":e)+")"),d=0,f=q.length;d<f;d++)j=q.eq(d),k=j.attr("data-cui-name"),a.inArray(k,r)===-1&&(r.push(k),m.test(k)?this.disableMenuItem(k,c):n.push(j.closest("[aria-labelledby]").attr("aria-labelledby")));for(g in p)i=p[g],c&&a.inArray(i.element.attr("id"),n)!==-1||l.test(g)&&i.option("disabled",c)},backupHeaderStates:function(){var b,c,d,e,f,g,h=[],i=this.getContainer(),j=this.widgets,k=a(".cui-menu li[data-cui-name], .cui-menu li[data-cui-alias]",i);for(b=0,c=k.length;b<c;b++)f=k.eq(b),g=f.attr("data-cui-name"),a.inArray(g,h)===-1&&(h.push(g),f.data("cui-prev-disabled",this.disableMenuItem(g)));for(d in j)"tabs"!==d&&(e=j[d],e.element.data("cui-prev-disabled",e.option("disabled")))},restoreHeaderStates:function(){var c,d,e,f,g,h,i,j=[],k=this.getContainer(),l=this.widgets,m=a(".cui-menu li[data-cui-name], .cui-menu li[data-cui-alias]",k);for(c=0,d=m.length;c<d;c++)h=m.eq(c),i=h.attr("data-cui-name"),f=h.data("cui-prev-disabled"),a.inArray(i,j)===-1&&(j.push(i),f!==b&&this.disableMenuItem(i,f),h.removeData("cui-prev-disabled"));for(e in l)g=l[e],"tabs"!==e&&(f=g.element.data("cui-prev-disabled"),f!==b&&g.option("disabled",f),g.element.removeData("cui-prev-disabled"))},closeContextMenu:function(){var a,b,c=this.getWidget(/\w+_contextmenu/);if(c&&c.length)for(a=0,b=c.length;a<b;a++)c[a].close()},isAlertOpened:function(){return this._stateOfAlert},getCurrentTabName:function(){var b=a("li.cui-state-active",this.getWidget("tabs").element)[0];return b?b.getAttribute("data-cui-name"):null},_initPanelData:function(){var a,b,c,d,e,f,g=0,h=this.configs;if(h.panel&&(e=h.panel.split(/(?:\s){1,}/),b=e.length)){for(f={},a=0;a<b;a++)d=e[a],c=this.getWidget("panel_"+d),c&&(f[d]={widget:c,element:c.element,index:g},g++);return g||(f=null),this.panels=f}},disableTabs:function(b,c){var d,e,f,g,h,i;if(!b||"string"!=typeof b)return!1;if(h=this.panels||this._initPanelData(),!h)return!1;for(g=b.split(/(?:\s){1,}/),e=g.length,f=this.getWidget("tabs"),d=0;d<e;d++)i=h[g[d]],i&&a.isNumeric(i.index)&&f[c?"disable":"enable"](i.index);return d===e},changeTab:function(b){var c,d,e;return!(!b||"string"!=typeof b)&&(!!(c=this.panels||this._initPanelData())&&(d=c[b],e=this.getWidget("tabs"),!(!d||!a.isNumeric(d.index))&&(e.option("active",d.index),!0)))},notibar:function(b,c,d){var e=a.ui.notibar({type:b,html:c,closable:d});return a(".cui-header",this.getContainer()).append(a.ui.makeHTML(e.getHTMLData())),e.init(),e}},c}),d("SelectionManager",["jqueryCafe","utilities/EditorConstants","utilities/NodeTracker","utilities/HTMLFilter","utilities/HtmlParser","utilities/RuleSet"],function(a,c,d,e,f,g){function h(h){function l(a){return"COL"!==a.nodeName}function m(b){return a(h.contentUtils.getAllChildren(b,l))}function n(a){var b=Z.createRange();1===a.nodeType?"BR"===a.nodeName?(b.setStartBefore(a),b.setEndBefore(a)):/^(?:P|H[1-6]|LI)$/i.test(a.nodeName)?(b.setStart(a,0),b.setEnd(a,0)):(b.setStartAfter(a),b.setEndAfter(a)):3===a.nodeType?(b.setStart(a,a.length),b.setEnd(a,a.length)):(a=R.children().first()[0],b.setStartBefore(a),b.setEndBefore(a)),b.collapse(!0),Z.setSingleRange(b)}function o(b){var d,e,f,g,i,j,k,l,m="";for(l=a(b).find("p, h1, h2, h3, h4, h5, h6"),f=l.length,d=0;d<f;d++)if(j=l[d],k=a(j),g=parseInt(k.css(c.INDENT_STYLE),10),g/=5){for(e=0;e<g;e++)m+=" ";i=h.getDoc().createTextNode(""),i.nodeValue=m,k.prepend(i),m=""}}function p(){var b,d,e,f,g,i,j=a("head",Q).clone(),k=h.baseURL+"skins/"+h.configs.skin+"/designarea"+h.suffix+".css";if(a('link[href="'+k+'"]',j).remove(),/^true$/i.test(fa)){for(a("link.cui-content-default",j).remove(),b=a("style.cui-content-default",j),e=0,f=b.length;e<f;e++)d=a(b[e]),g=d.text(),g=g.replace(/body\#cafe\-note\-contents\s*\{/gi,"body {"),g=g.replace(/body\#cafe\-note\-contents\s\*\s\{/gi,"body * {"),g=g.replace(/body\#cafe\-note\-contents\s/gi,""),g=g.replace(/\#cafe\-note\-contents\stable/gi,"table"),g=g.replace(/\#cafe\-note\-contents\simg/gi,"img"),g=g.replace(/\#cafe\-note\-contents\s\[/gi,"["),g=g.replace(/body\#cafe\-note\-contents\,/gi,"body,"),d.text(g);for(i=c.USERDATA_ATTRIBUTE_NAME,b=a("["+i+"]",j),e=0,f=b.length;e<f;e++)d=b[e],d.textContent=d.textContent.replace(/#cafe\-note\-contents\s/gi,""),d.removeAttribute(i)}for(b=a("style[data-cafe-default=true]",j),e=0,f=b.length;e<f;e++)d=a(b[e]),g=d.text(),g=g.replace("html,\nbody {\n  overflow: visible !important;\n  height: auto;\n}\n",""),g=g.replace("html {\n  height: auto;\n}\n",""),g=g.replace("html,body{overflow:visible !important;height:auto;}html{height:auto;}",""),d.text(g);return h.configs.doctype+"\n<html>\n"+j[0].outerHTML+"\n"}function q(){var a="";return $.useDefaultStyleByLink?a=' style="margin:10px;font-family:'+$.default_font_family+";font-size:"+$.default_font_size+';"':(a=' style="',$.default_font_family&&(a+="font-family:"+$.default_font_family+";"),$.default_font_size&&(a+="font-size:"+$.default_font_size+";"),$.default_line_height&&(a+="line-height:"+$.default_line_height+";"),a+='" '),a}function r(a,b){for(var c,d=a.length,e=R[0];d--;)c=a[d].compareDocumentPosition(b),(0===c||16&c)&&(e=a[d]);return e}function s(a,b){var c,e,f=[];if(a===b)return[a];c=a,e=new d(c,R[0]);do if(f.push(c),c=e.next(),c===b){f.push(c);break}while(c);return f}function t(a,b,c,d){return b+"&nbsp;"+d}function u(a){var b,c;for(b in j)c=new RegExp("(<"+b+"\\b[^>]*>)\\s*(?:<br(:?\\s*\\/)?>)+\\s*(<\\/"+b+">)","gi"),a=a.replace(c,t);return a=a.replace(/<p\b[^>]*><span\b[^>]*>(?:<br(:?\s*\/)?>)<\/span><\/p>/gi,function(a){return a.replace(/(?:<br(:?\s*\/)?>)/gi,"&nbsp;");
})}function v(a,b){var c=a,d=b?"firstChild":"lastChild";if(!c||1!==c.nodeType)return a;for(;3!==c.nodeType&&c[d];)c=c[d];return c}function w(a,b,c){for(var d=c||0,e=a.length;d<e;d++)if(0===b.compareDocumentPosition(a[d]))return d;return-1}function x(b,c){1===b.nodeType&&a(c).appendTo(b)}function y(a,b,c){var d;return a&&3===a.nodeType&&a.length>b?(d=a.splitText(b),d=c?d:d.previousSibling):d=a,d}function z(a,b,c){var d=a;return c=!!c,1===a.nodeType&&a.childNodes.length>0?(a=a.childNodes["BODY"===a.nodeName?b-1:b],c||(0===b&&d.previousSibling?a=d.previousSibling:a||(a=d),a=v(a),b=3===a.nodeType?a.length:b)):3===a.nodeType&&(a.length===b?c&&(a=A(a),b=0):0!==b&&(a=y(a,b,c))),{node:a,offset:b}}function A(a){var b,c=a.nextSibling;if(c)return c;for(b=a.parentNode;b&&"BODY"!==b.nodeName;b=b.parentNode)if(c=b.nextSibling)return c}function B(a,b,c){var d,e,f;if(3===a.nodeType)if(e=a.parentNode,f=e.textContent||e.innerText,d=f.length,0!==b||d!==c&&c!==-1)a=y(a,c),a=y(a,b,!0);else for(;e.firstChild===a&&e.lastChild===a;)a=e,e=a.parentNode;else 1===a.nodeType&&b>=0&&a.childNodes.length>b&&(a=a.childNodes[b]);return a}function C(b,c,d){var e,f,g,h,i;if(/^(?:body|ol|ul|table)$/i.test(b.nodeName)&&(i=a(b).contents(),b=i[i.length>c?c:i.length-1],c=d?0:3===b.nodeType?b.length-1:1),/^(?:ol|ul|table|tr|td|th|tbody|tfoot|thead)$/i.test(b.nodeName)&&(i=a("p, h1, h2, h3, h4, h5, h6, li",b),b=d?i.first()[0]:i.last()[0]),b)return h=b,e=Z.getAncestors(b),f=F(e,j)[0],g=v(f,!d),3===b.nodeType&&b===g?d&&c===b.length?h=D(b,j,!0):d||0!==c||(h=D(b,j,!1)):b===g&&d&&1===c?h=D(b,j,!0):b!==g||d||0!==c||(h=D(b,j,!1)),d&&!j[h.nodeName]&&(e=Z.getAncestors(h),h=F(e,j)[0]),h}function D(a,b,c){for(var e,f=new d(a,R[0]),g=a;g;)if(g=c?f.next():f.prev(),g&&b[g.nodeName]){e=!0;break}return e?g:a}function E(a,b){var c,d,e,f;for(d=a.length,e=0;e<d&&(f=a[e],c=f.compareDocumentPosition(b),!(0===c||16&c));e++);return f}function F(a,b){var c,d,e=a.length,f=[];for(d=0;d<e;d++)c=a[d],c&&b[c.nodeName]&&f.push(c);return f}function G(a){for(var b=a;b&&"BODY"!==b.nodeName&&b.parentNode&&b.parentNode.lastChild===b;)b=b.parentNode;return b}function H(a,b,c,d,e){var f,g,h,i,j=a.nodeType,k=a.parentNode;return 1===j?a:(d?(f=b?b.compareDocumentPosition(a):0,b&&(16&f||a.previousSibling===b)?(g=c===a.length?a:a.splitText(c),b.appendChild(g)):(c===a.length?g=G(a):3===a.nodeType&&(g=a.splitText(c),g=g.previousSibling),h=Q.createElement("span"),g.parentNode.insertBefore(h,g),h.appendChild(g))):(f=k.firstChild.compareDocumentPosition(a),i=!e||a.nextSibling===e,i&&0===c&&0===f?h=k:(g=a.splitText(c),h=Q.createElement("span"),k.insertBefore(h,g),h.appendChild(g))),h)}function I(a,b){var c;return a=a||R[0],b=b||ea,c=a.querySelectorAll(b)}function J(a){var b=a;return _.test(b)&&(b=b.replace(/[\u200B\uFEFF]/g,"")),b}function K(a,b,c){var d,e,f=0,g=!0;if(a&&a.hasChildNodes()&&(d=b>0?b-1:0,a=a.childNodes[d],g=b!==d,"IMG"===a.nodeName&&a.nextSibling&&(a=a.nextSibling,g=!1)),a&&3===a.nodeType)return f=c||g?a.textContent.length:0,{node:a,offset:f,isRightside:g};for(;a&&a.hasChildNodes();){if(e=a.childNodes.length,a=a.childNodes[c||g?e-1:0],3===a.nodeType)return f=c||g?a.textContent.length:0,{node:a,offset:f,isRightside:g};f=c||g?a.textContent.length:0}return{node:a,offset:f,isRightside:g}}function L(a,b){var c,d,e,f=0,g=a.length-1;if(b)for(;f<=g;)if(c=f+g>>1,d=a[c],e=b.compareDocumentPosition(d),2&e)f=c+1;else{if(!(4&e))return c;g=c-1}return-1}function M(a,b,c,d){var e,f,g=-1,h=0,i=!1,j=I(),k=c(a,"p, li, h1, h2, h3, h4, h5, h6, div");return g=L(j,k),g=g!==-1?g+1:g,g>0?(1===a.nodeType&&(f=K(a,b,d),b=f.offset,a=f.node,i=f.isRightside),h=Z.getCol(k,a,b,i)):g===-1&&"BODY"===a.nodeName&&(a=j[0],g=1),a?e=3===a.nodeType?a.parentNode:a:(a=v(R[0],!0),e=a,b=0,g=0,h=0),{lineElement:k,element:e,node:a,offset:b,line:g,col:h,isRightside:i}}var N,O,P,Q,R,S,T,U,V,W,X,Y,Z=this,$=h.configs||{},_=/[\u200B\uFEFF]/gi,aa=c.keys(c.HeadElements).join(",")+", "+c.keys(c.FormElements).join(",")+", "+c.keys(c.ForeignElements).join(","),ba=h.browser,ca=c.CURSOR_ELEM_ID,da=ba.ie&&ba.version<=10,ea=c.LineElementsStr,fa="false";return P=h.getWin(),Q=h.getDoc(),R=a(h.getBody()),Y=Q.createDocumentFragment(),X=$.enable_invalid_item_alert||!1,U=($.invalid_elements||"SCRIPT")+",",U+=c.keys(c.ForeignElements).join(","),U+=c.keys(c.FormElements).join(","),V=$.invalid_attributes||c.InvalidAttributes,T=new g({apply_schema:!0,append_emptyline_at_last:!0,gather_head_element:!0,remove_empty_element:!0,use_singleline_element:!0,invalid_elements:U,invalid_attributes:V,comment_elements:"AUDIO,EMBED,IFRAME,OBJECT,PARAM,PROGRESS,TRACK,VIDEO,BASE,META,TITLE,SCRIPT",move_elements:"BASEFONT, BASE,LINK,META,TITLE,STYLE",notify_elements:$.invalid_elements,old_ms_ie:da,ms_ie:ba.ie,unsupported_elements:"",new_line_without_blank:$.new_line_without_blank,allow_blockquote:$.allow_blockquote}),S=new f(T),N=new e({invalid_elements:$.invalid_elements,invalid_attributes:V},h.browser),N.addFilter("unwrapelements",[],function(a){for(var b,c=a.find("div#"+k),d=c.length;d--;)b=c.eq(d),b.replaceWith(b[0].childNodes)}),N.addFilter("trimElements",["removesinglestyle"],function(b){var d,e,f,g,i=b.find(aa),j=i.length;for(e=0;e<j;e++)f=a(i[e]),g=f[0].nodeName,T.isNotifyElement(g)&&(W=!0),f.hasClass("cui-content-default")||!c.HeadElements[g]||d?f.remove():h.addCommentNode(f[0]);i.remove()}),Z.getDefaultRuleSet=function(){return T},N.addFilter("trimStylefromcolgroup",[],function(a){for(var b,c=a.find("colgroup"),d=c.length;d--;)b=m(c[d]),b.remove()}),N.addFilter("absoluteTableHandle",[],function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p=b.find("table"),q=p.length,r=[],s=[];for(h=0;h<q;h++)if(d=p[h],c=d.parentNode,"SPAN"===c.nodeName)if("absolute"===c.style.position){for(k=a(d).find("td"),g=k.length,i=0;i<g;i++)l=k[i],parseInt(l.width)&&r.push(parseInt(l.width)),parseInt(l.height)&&s.push(parseInt(l.height));for(e=a(d).find("img"),g=e.length,i=0;i<g;i++){for(f=e[i],n=parseInt(c.style.marginTop)?parseInt(c.style.marginTop):0,o=parseInt(c.style.marginLeft)?parseInt(c.style.marginLeft):0,j=0,l=f.parentNode;"TD"!==l.nodeName;)l=l.parentNode;for(;l.previousSibling;)l=l.previousSibling,"TD"===l.nodeName&&(j>0&&(o+=r[j-1]),j++);for(j=0,m=l.parentNode;"TR"!==m.nodeName;)m=m.parentNode;for(;m.previousSibling;)m=m.previousSibling,"TR"===m.nodeName&&(j>0&&(n+=s[j-1]),j++);f.style.position=c.style.position,f.style.marginTop=n+"px",f.style.marginLeft=o+"px",c.parentNode.insertBefore(f,c)}a(c).remove()}else a(d).unwrap()}),N.addFilter("imgHandle",[],function(b){var c,d,e,f,g,i,j,k,l,m=b.find("img"),n=m.length;if(n>0)for(m.attr("unselectable","on"),m.attr("data-cui-image")||m.attr("data-cui-media")||m.attr("data-cui-pagebreak")||m.attr("data-cui-image","true"),m.css("border-top-width")||m.css("border-width","0px");n--;)if(c=m[n],d=c.getAttribute("src"),e=c.getAttribute("cafeimg"),e||d&&h.pluginUtils.isSupportImageData(d))for(f=c.parentNode,g=parseInt(c.style.top)?parseInt(c.style.top):0,i=parseInt(c.style.left)?parseInt(c.style.left):0,j=parseInt(c.style.marginTop)?parseInt(c.style.marginTop):0,k=parseInt(c.style.marginLeft)?parseInt(c.style.marginLeft):0;"SPAN"===f.nodeName;)g+=parseInt(f.style.top)?parseInt(f.style.top):0,i+=parseInt(f.style.left)?parseInt(f.style.left):0,j+=parseInt(f.style.marginTop)?parseInt(f.style.marginTop):0,k+=parseInt(f.style.marginLeft)?parseInt(f.style.marginLeft):0,"absolute"===f.style.position?(c.style.position="absolute",0!==g&&(c.style.top=g+"px"),0!==i&&(c.style.left=i+"px"),0!==j&&(c.style.marginTop=j+"px"),0!==k&&(c.style.marginLeft=k+"px"),l=parseInt(f.style.zIndex),l&&(c.style.zIndex=l),f.parentNode.insertBefore(c,f)):f.firstChild===f.lastChild&&f.parentNode.insertBefore(c,f),f.firstChild?(f.style.zIndex="",f=f.parentNode):(a(f).remove(),f=c.parentNode);else a(c).remove()}),N.addFilter("emptySpan",[],function(b){for(var c,d,e=b.find("span"),f=e.length;f--;)c=e[f],d="true"===c.getAttribute("data-cui-pageBreak"),c&&c.childNodes&&!d&&0===c.childNodes.length&&a(c).remove()}),N.addFilter("distinguishDivAndTable",[],function(a){var b=a.find("table"),c=a.find("td"),d={originalDiv:{table:"cui-div",td:"cui-div-cell"},originalTable:{table:"cui-real-table",td:"cui-real-td"}},e=function(a,b,c){for(var d,e=a.length;e--;)d=a[e],d.classList.contains(c.originalDiv[b])?d.classList.contains(c.originalTable[b])&&d.classList.remove(c.originalTable[b]):d.classList.add(c.originalTable[b])};e(b,"table",d),e(c,"td",d)}),ba.ie||N.addFilter("appendBR",[],function(a){for(var b,c=a.find("li"),d=c.length;d--;)b=c.eq(d),0===b.contents().length&&b.append(Q.createElement("br"))}),O=new e({invalid_elements:$.invalid_elements,invalid_attributes:V},h.browser),ba.ie&&O.addFilter("addTargetToLink",[],function(a){for(var b,c=a.find("a"),d=c.length;d--;)b=c[d],b.hasAttribute("target")||b.setAttribute("target","_blank")}),O.addFilter("changeFontTag",[],function(a){var b,c,d,e;for(b=a.find("font"),c=b.length;c--;){for(d=b[c],e=document.createElement("span"),e.style.color=d.color,e.style.fontFamily=d.face;d.childNodes.length;)e.appendChild(d.childNodes[0]);d.parentNode.replaceChild(e,d)}}),O.addFilter("trimSpan",[],function(a){for(var b,c=a.find("span"),d=c.length,e=/^[\u200B\uFEFF]$/i;d--;)b=c.eq(d),e.test(b[0].innerHTML)&&!b.attr("data-cui-pagebreak")?(1===b[0].parentNode.childNodes.length&&(b[0].parentNode.innerHTML="&nbsp;"),b.remove()):0===b[0].attributes.length?b[0].childNodes.length>0?b.contents().unwrap():b.remove():b[0].getAttribute("id")===ca&&b.remove()}),ba.safari&&O.addFilter("removeDummyLine",[],function(b){var c=b.find("div.cui-dummyline");c&&0!==c.length&&a(c[0]).remove()}),(!ba.ie||ba.version<=10)&&N.addFilter("removeEbrAttr",null,function(a){for(var b,c=a[0].querySelectorAll("br[cui-ebr]"),d=c.length;d--;)b=c[d],b.removeAttribute("cui-ebr")}),N.addFilter("removeEmptyP",[],function(b,c){var d,e,f;if("public"===c||"html"===c)for(d=b.find("p"),f=d.length;f--;)e=d[f],e&&e.childNodes&&0===e.childNodes.length&&e.attributes&&0===e.attributes.length&&a(e).remove()}),Z.getDefaultFilter=function(a){return a===!0?O:N},Z.setHtmlParser=function(a){a&&(S=a)},Z.getHtmlParser=function(){return S},P.getSelection?Z.getSel=function(){return P.getSelection()}:Q.selection&&Q.selection.createRange&&"None"!==Q.selection.type&&(Z.getSel=function(){return Q.getSelection()}),Z.addGetFilter=function(a,b,c){a&&c&&(b=b?b:[],O.addFilter(a,b,c))},Z.addSetFilter=function(a,b,c){a&&c&&(b=b?b:[],N.addFilter(a,b,c))},Z.addParsingElemHandler=function(a,b,c,d){S&&a&&b&&c&&d&&S.addElementHandler(a,b,c,d)},Z.addParsingAttrHandler=function(a,b,c,d){S&&a&&b&&c&&d&&S.addAttrHandler(a,b,d)},Z.appendDummyLine=function(b){var c,d,e,f;return h.browser.safari?(c=a(b),f=h.getDoc(),d=f.createElement("div"),e=f.createTextNode(" "),d.setAttribute("data-cui-filter","true"),d.className="cui-dummyline",d.appendChild(e),c.append(d),b):b},Z.isDummyLine=function(a){return h.browser.safari&&a&&"cui-dummyline"===a.className},Z.isFirstLeafNodeInSafari=function(a){var b,c,d,e,f;for(a=a||this.getRange(),b=a.startContainer,c=this.getAncestors(b),d=c.length;d--;)if(e=c[d],e.previousSibling&&(f=e.previousSibling,!Z.isDummyLine(f)))return!1;return!0},Z.isFirstOffsetOfFirstNodeInSafari=function(a){var b=this.getRange();return!!Z.isFirstLeafNodeInSafari(b)&&!(0!==b.startOffset||!b.collapsed&&!a.shiftKey)},Z.setContent=function(c,d){var e,f,g,i,j=this,k=d||{};return null!==c&&c!==b&&(a("table,th,td",R).removeData(),"string"==typeof c&&(e=c.match(/src="data:image[^"]*/g)),f=k.format||"html",g=!!k.skip,i=e&&e.length>0&&!(/text/i.test(f)||/dom/i.test(f)),j.insertContent(i?h.contentUtils.filterDataUriSrc(c,e):c,R[0],g,f,!0,i?e:null)),c},Z.insertContent=function(b,c,d,e,f,g){var i,j,k,l,m,o,p,q,r=this,s=c,t=h.editorManager.browser;if(s||(i=r.getRange(),i&&(s=i.startContainer,3===s.nodeType&&(s=H(s,null,i.startOffset)),i.collapsed||(s=s.previousSibling,h.execCommand("delete")))),s=a(s),W=!1,"string"==typeof b&&(b=J(b)),/text/i.test(e))f&&(R.contents().remove(),j=h.getBody(),k=h.createEmptyLine(),j=r.appendDummyLine(j),j.appendChild(k),i=r.createRange(),i.setStart(k,0),i.setEnd(k,0),i.collapse(!0)),""!==b&&(b=r.replaceSpaceWithNoBreakSpace(b),b=r.replaceTabWithNoBreakSpace(b),k&&k.lastChild&&k.removeChild(k.lastChild),h.contentUtils.insertTextByRange(b,i));else if(/dom/i.test(e)){if(f)for(l=R[0];l.firstChild;)l.removeChild(l.firstChild);for(j=a(b),/-valid$/i.test(e)||(j=N.parseDom(j),0===j.contents().length&&(b=h.createEmptyLine(!0),j.append(a(b)))),s=s[0],j=j[0].cloneNode?j[0].cloneNode(!0):j.clone()[0],s=r.appendDummyLine(s);j.firstChild;)s.appendChild(j.firstChild);Y.appendChild(j),Y.removeChild(j)}else{if(t.ie&&parseInt(t.version,10)<=9&&(b=b.replace(/<\!doctype\b[^>]*>/gi,"")),d||(o=N.extractHeadComments(b),b=o.contents,b=N.trimContent(b),b=N.colgroupFilter(b)),f&&(R.contents().remove(),/public/i.test(e)&&a(h.getHead()).contents().filter(function(a,b){var c=!1;return(8===b.nodeType||1===b.nodeType&&"cui-content-default"!==b.getAttribute("class"))&&(c=!0),c}).remove()),/text\-decoration\-line/i.test(b)&&(b=S.replaceTextDecoration(b)),j=N.parse(b,e),g&&g.length>0&&h.contentUtils.restoreDataUriSrc(j.find("img"),g),0===j.contents().length?(b=h.createEmptyLine(!0),j.append(a(b))):j=a(S.validDoc(j[0],T)),s=r.appendDummyLine(s),j.is("[data-cui-filter]")?(s.append(j.contents()),j.remove()):s.append(j),o&&o.comments.length>0)for(p=0,q=o.comments.length;p<q;p++)h.addCommentNode(o.comments[p]);m=v(R[0]),n(m),X&&(S.hasInvalidItem()||N.hasInvalid())&&h.alert(h.getText("alert.parser.invaliditem"))}},Z.getAncestors=function(a){var b,c,d=this,e=[];for(a||(c=d.getRange(),a=c.startContainer!==c.endContainer&&3===c.startContainer.nodeType&&c.startContainer.length===c.startOffset?c.endContainer:c.startContainer),b=a;b&&"BODY"!==b.nodeName;)e.push(b),b=b.parentNode;return e},Z.getClosest=function(a,b){var c,d,e;if(!a||!b)return null;for(e=b.toUpperCase().split(/[\s,]+/),d=e.length;a&&"BODY"!==a.nodeName;){for(c=0;c<d;c++)if(a.nodeName===e[c])return a;a=a.parentNode}return null},Z.getLineElement=function(a){var b=I(),c=b.length;return a=a-1>c?c-1:a-1,b[a]},Z.getLineCount=function(){var a=I();return a?a.length:1},Z.isCursor=function(){var a,b=this;return a=b.getRange(),a.collapsed||!1},Z.appendLinefeed=function(a){return a=a.replace(new RegExp("(<br(s?.*?)>)","ig"),"\n$1"),a=a.replace(new RegExp("\n<br></p>","ig"),"<br></p>"),a=a.replace(new RegExp("(</)("+c.LineElementsArr.join("|")+")>","ig"),"\n</$2>")},Z.getContent=function(b){var c,d,e,f,g,i=b||{},j=i.format||"html",l="";return e=h.getBody(),/text/i.test(j)?(l=e.innerHTML,l=l.replace(/<div.+?cui-dummyline.+?<\/div>/i,""),l=Z.appendLinefeed(l),c=h.getDoc().createElement("div"),d=a(c),d.append(l),o(c),l=h.pluginUtils.getPlainText(c),l=l.replace(/\u000A$/,""),d.remove()):/dom/i.test(j)?(h.pluginUtils.deselectItem(),l=e.cloneNode?e.cloneNode(!0):a(e).clone()[0],a(l).find("div.cui-dummyline").remove()):(f=p(),e=a(e).clone(),e=O.parse(e,j),g=q(),/public/i.test(j)?(h.configs.useDefaultStyleByLink&&(f=f.replace(h.configs.default_skins_path+h.configs.skin+"/view"+h.suffix+".css",h.configs.default_skins_path.replace(/https?\:\/\/([^\/:?#]+)(?:\:\d+)?/i,"http://www.samsung.net")+h.configs.skin+"/view"+h.suffix+".css")),l+=/^true$/i.test(fa)?f+"<body>"+a.trim(e.html())+"</body>\n</html>":f+"<body>"+a.trim(e.wrapInner('<div id="'+k+'"'+g+"></div>").html())+"</body>\n</html>"):(l+=O.toString(e,g),/html/i.test(j)&&(l=f+l+"\n</html>")),Y.appendChild(e[0]),Y.removeChild(e[0]),e=null,!da&&$.new_line_without_blank||(l=u(l))),"string"==typeof l&&(l=J(l)),l},Z.getContentWithBody=function(b,c){var d,e,f,g,i,j,l="";if(c=c||"html",b.find("div.cui-dummyline").remove(),/text/i.test(c))for(d=b.contents(),f=0,g=d.length;f<g;f++)e=d.eq(f),l+=e.text()+"\n";else i=p(),b=O.parse(b,c),j=q(),/public/i.test(c)?(h.configs.useDefaultStyleByLink&&(i=i.replace(h.configs.default_skins_path+h.configs.skin+"/view"+h.suffix+".css",h.configs.default_skins_path.replace(/https?\:\/\/([^\/:?#]+)(?:\:\d+)?/i,"http://www.samsung.net")+h.configs.skin+"/view"+h.suffix+".css")),l+=/^true$/i.test(fa)?i+"<body>"+a.trim(b.html())+"</body>\n</html>":i+"<body>"+a.trim(b.wrapInner('<div id="'+k+'"'+j+"></div>").html())+"</body>\n</html>"):(l+=O.toString(b,j),/html/i.test(c)&&(l=i+l+"\n</html>")),Y.appendChild(b[0]),Y.removeChild(b[0]),b=null,!da&&$.new_line_without_blank||(l=u(l));return l=J(l)},Z.createRange=function(){var a;return Q.createRange?a=Q.createRange():Q.selection.createRange&&(a=Q.selection.createRange()),a},Z.getCurrentNode=function(){var a,b,c,d=this;return(a=d.getRange())?(a.collapsed?c=a.commonAncestorContainer||a.startContainer:(b=d.getAncestors(a.startContainer),c=r(b,a.endContainer),"BODY"===c.nodeName&&(c=a.startContainer)),3===c.nodeType?c=c.parentNode:1!==c.nodeType&&(c=R[0]),c):R[0]},Z.getLeafNode=function(a,b){return v(a||R[0],b)},Z.getCurrentCol=function(a,b,c){var e,f,g=0;if(a||b){for(c=c||Z.getClosest(a,ea),e=v(c,!0),f=new d(e,c);e;){if(a===e){g+=b;break}3===e.nodeType?g+=e.length:1===e.nodeType&&"IMG"===e.nodeName&&(g+=1),e=f.next()}return g}},Z.compressSiblings=function(a,c){var d,e,f,g,h,j,k=[],l=a.length;for(h=c||i,d=0;d<l;d++){if(e=a[d],1===e.nodeType){if(j=h[e.nodeName],j=j!==b&&j,j?(f=v(e),g=w(a,f,d+1)):g=-1,g===-1)continue;d=g}k.push(e)}return k},Z.wrapElements=function(b,c){var d,e,f,g,h,i=[];for(c=c?a.trim(c.toUpperCase()):"SPAN",d=b.length,g=0;g<d;g++)f=b[g],h=f.nodeType,3===h?(e=Q.createElement(c),f.parentNode.insertBefore(e,f),x(e,f),i.push(e)):1===h&&(f.nodeName!==c&&(e=Q.createElement(c),x(e,f.childNodes),f.appendChild(e),f=e),i.push(f));return i},Z.getSelectedElements=function(a){var b,c,d,e,f,g,h,i,j,k,l,m;if(a=a||Z.getRange(),a.collapsed)g=[a.startContainer];else{if(a.startContainer===a.endContainer){if(3===a.startContainer.nodeType)d=a.startOffset,e=a.endOffset,h=[a.startContainer];else if(1===a.startContainer.nodeType){for(l=a.startContainer.childNodes,h=[],m=a.startOffset,k=l.length;m<k;m++)l[m]&&m<a.endOffset&&h.push(l[m]);d=0,i=h[h.length-1],e=3===i.nodeType?i.length:-1}}else i=z(a.startContainer,a.startOffset,!0),d=i.offset,b=i.node,b=b||v(a.startContainer,!0),i=z(a.endContainer,a.endOffset,!1),e=i.offset,c=i.node,c=c||v(a.endContainer,!1),h=s(b,c);if(k=h.length,1===k)g=B(h[0],d,e),g=s(g,v(g));else for(g=[],0===d&&(j=B(h[0],d,-1),j&&j!==h[0]&&g.push(j)),g.push(h[0]),f=1;f<k;f++)g.push(h[f])}return!a.collapsed&&g.length>0&&a.setStartBefore&&a.setEndAfter&&(a=Z.createRange(),f=g.length-1,i=g[f],a.setStartBefore(g[0]),a.setEndAfter(i),Z.setSingleRange(a)),g},Z.getSelectedBlocks=function(a,b){var c,d,e,f,g,i,k=this;return a=a||k.getRange(),b=b||j,a.collapsed||a.startContainer===a.endContainer&&a.startOffset===a.endOffset?(e=k.getAncestors(a.startContainer),e.length>0?(c=F(e,b),d=c[0]?[c[0]]:[]):1===a.startContainer.nodeType&&"BODY"===a.startContainer.nodeName?(d=[].slice.call(a.startContainer.children)||[],g=h.selectionChange.getLastSelectionNode(),g&&(d=[E(d,g)])):d=[a.startContainer]):(c=C(a.startContainer,a.startOffset,!0),i=C(a.endContainer,a.endOffset,!1),f=s(c,i),d=F(f,b)),d},Z.wrapSelection=function(a,b,c){var d,e,f=this;return a&&a.rangeCount>0&&(e=a.getRangeAt(0)||f.getRange()),d=f.getSelectedElements(e),d=f.compressSiblings(d,c),d=f.wrapElements(d,b)},Z.getCursorElement=function(a){var b,c,e,f,g,h=a.col;if(b=I()[a.line-1],b&&h>=0)for(f=v(b,!0),c=new d(f,b);f;){if(3===f.nodeType){if(h>f.length)h-=f.length;else if(0===h||h<=f.length){g=f,e=h;break}}else 1===f.nodeType&&"IMG"===f.nodeName&&(h=h>0?h-1:0);if(0===h){g=f,e=h;break}f=c.next()}return{node:g,elem:3===g.nodeType?g.parentNode:g,offset:e,lineElement:b}},Z.setCursorPosition=function(a){var b,c,e,f,g=this,h=R[0],i=g.createRange(),j=a.node,k=a.offset,l=a.line,m=a.lineElement,n=a.col,o=a.isRightside;if((!j||1&h.compareDocumentPosition(j))&&(j=null,n>=0&&(!m&&l>=0&&(f=I(),b=f.length,m=b>=l?f[l-1]:f[b-1]),m)))for(e=v(m,!0),c=new d(e,m);e;){if(3===e.nodeType){if(n>e.length)n-=e.length;else if(0===n||n<=e.length){j=e,k=n;break}}else 1===e.nodeType&&"IMG"===e.nodeName&&(n=n>0?n-1:0);if(0===n){j=e,k=n;break}e=c.next()}j?"BR"===j.nodeName?(i.setStartBefore(j),i.setEndBefore(j)):/^(:?hr|img)$/i.test(j.nodeName)?o?(i.setStartAfter(j),i.setEndAfter(j)):(i.setStartBefore(j),i.setEndBefore(j)):(i.setStart(j,k),i.setEnd(j,k)):(j=v(R[0],!1),3===j.nodeType?(i.setStart(j,j.length),i.setEnd(j,j.length)):1===j.nodeType&&("BR"===j.nodeName?(i.setStartBefore(j),i.setEndBefore(j)):(i.setStart(j,j.textContent.length),i.setEnd(j,j.textContent.length)))),i.collapse(!0),g.setSingleRange(i)},Z.setTextRange=function(a,b){var c,d,e=R[0],f=a.parentNode,g=f.firstChild,h=0;if(3===a.nodeType&&g!==f.lastChild){for(;g&&g!==a;)h+=g.textContent.length,g=g.nextSibling;b=h+b}c=3===a.nodeType?a.parentNode:1===a.nodeType?a:null,c&&(d=e.createTextRange(),d.moveToElementText(c),d.moveStart("character",b),d.moveEnd("character",b),d.collapse(!0),d.select())},Z.replaceSpaceWithNoBreakSpace=function(a){return a.replace(/\u0020/g," ")},Z.replaceTabWithNoBreakSpace=function(a){var b,d=c.TAB_COUNT,e="";for(b=0;b<d;b++)e+=" ";return a.replace(/\u0009/g,e)},Z.getCol=function(a,b,c,e){for(var f=0,g=v(a,!0),h=new d(g,a);g;){if(3===g.nodeType&&b!==g?f+=g.length:1===g.nodeType&&"IMG"===g.nodeName&&(f+=1),g===b){1===g.nodeType?("IMG"!==g.nodeName||e||(f-=1),f+=g.innerText.length):f+=c;break}g=h.next()}return f},Z.getCursorPosition=function(a,b){var c,d,e,f=this,g=null,i=!0;return e=b?b.cloneRange():f.getRange().cloneRange(),e?(c=a?e.endContainer:e.startContainer,d=a?e.endOffset:e.startOffset,f.isDummyLine(c)&&(c=c.nextSibling,d=0),i=e.collapsed):(c=R[0].firstChild,h.browser.safari&&(c=c.nextSibling),d=0),g=M(c,d,f.getClosest,a),g.offset=g.node!==c?0:d,g.collapsed=i,g.range=e,g},Z.getRange=function(){var a,b,c,d,e,f=this;return a=f.getSel(),a.rangeCount>0?b=a.getRangeAt(0):h.lastRange?b=h.lastRange:(b=a.createRange?a.createRange():Q.createRange(),c=R[0].firstChild||R[0],b.setStart(c,0),b.setEnd(c,0)),ba.safari&&(d=f.getClosest(b.startContainer,"div"),d&&f.isDummyLine(d)&&(d.nextSibling?b.setStart(d.nextSibling,0):(e=h.createEmptyLine(),h.getBody().appendChild(e),b.setStart(e,0))),d=f.getClosest(b.endContainer,"div"),d&&f.isDummyLine(d)&&b.setEnd(d.nextSibling,0)),b},Z.selectAll=function(){var a,b,c=this,d=R[0],e="selectAll",f=function(){var a,d,e,f,g;b=c.getRange(),ba.ie||!b||b.collapsed||"HTML"!==b.commonAncestorContainer.nodeName||(a=b.startContainer,a&&"HTML"===a.nodeName&&(d=b.startOffset,e=a.childNodes,f=e[d<e.length?d:0],f&&"BODY"===f.nodeName&&(a=f.firstChild,g=f.lastChild,b.setStart(a,0),b.setEnd(g,3===g.nodeType?g.length:g.childNodes.length),c.setSingleRange(b))))},g=function(){var a,b=c.getRange(),d=b.endContainer,e=b.endOffset,f=c.getClosest(b.startContainer,"div");f&&c.isDummyLine(f)&&(a=f.nextSibling,h.contentUtils.isLineNode(a)?(b.setStart(a.firstChild,0),b.setEnd(d,e)):(b.setStart(a,0),b.setEnd(d,e))),c.setSingleRange(b)};h.browser.ie&&h.isEmpty()||(Q.queryCommandSupported&&Q.queryCommandSupported(e)?(a=c.getSel(),h.browser.ie&&0===a.rangeCount&&(b=c.getRange(),a.addRange(b)),Q.execCommand(e),h.browser.safari?g():f()):d.createTextRange?(b=d.createTextRange(),b.moveToElementText(d),b.select()):(b=c.createRange(),b.selectNodeContents(d),c.setSingleRange(b)),h.selectionChange.contentChanged())},Z.setRange=function(a,b,c,d,e){var f=this,g=f.createRange();return a===c&&b===d&&b>=0?"IMG"===a.nodeName||"BR"===a.nodeName?(g.setStartBefore(a),e?g.setEndBefore(a):g.setEndAfter(c)):g.setStart(a,b):(b<0?g.setStartBefore(a):g.setStart(a,b),d<0?g.setEndAfter(c):g.setEnd(c,d)),f.setSingleRange(g)},Z.setSingleRange=function(a){var b;if(a)try{b=Z.getSel(),b.removeAllRanges(),b.addRange(a),h.lastRange=a.cloneRange()}catch(a){console&&console.log(a.toString())}return a},Z.selectElement=function(a){var b=this,c=b.createRange();return c.setStartBefore(a),c.setEndAfter(a),b.setSingleRange(c)},Z.getSelectionFromIFrame=function(a){var b=a.contentWindow,c=b.document;return b.getSelection?b.getSelection():c.selection&&c.selection.createRange&&"None"!==c.selection.type?c.getSelection():void 0},Z.getRangeFromIFrame=function(a){var b,c,d=this,e=d.getSelectionFromIFrame(a),f=a.contentWindow,g=f.document,h=g.getElementsByTagName("body")[0];return e.rangeCount>0?b=e.getRangeAt(0):(b=e.createRange?e.createRange():Q.createRange(),c=h.firstChild||h,b.setStart(c,0),b.setEnd(c,0)),b},Z.addRangeToIframe=function(a,b){var c=this,d=c.getSelectionFromIFrame(a);d&&b&&(d.removeAllRanges(),d.addRange(b))},Z.getRangeFromEvent=function(a){var b,c,d=h.getDoc();if(d.caretPositionFromPoint)c=d.caretPositionFromPoint(a.clientX,a.clientY),b=d.createRange(),b.setStart(c.offsetNode,c.offset),b.collapse(!0);else if(d.caretRangeFromPoint)b=d.caretRangeFromPoint(a.clientX,a.clientY);else if(d.body.createTextRange){b=d.body.createTextRange();try{b.moveToPoint(a.clientX,a.clientY),b.collapse(!0),b.select()}catch(c){b.collapse(a.clientY<d.body.clientHeight)}b=Z.getRange()}return b},Z.evadeVoidElement=function(a){var b,d,e,f,g,h=this,i=a.startContainer;if(a.collapsed&&c.VoidElements[i.nodeName]){for(b=i.parentNode,d=b.childNodes,e=0,f=d.length;e<f;e++)if(i===d[e]){g=e;break}g>=0&&(a=null,a=h.createRange(),a.setStart(b,g),a.setEnd(b,g),a.collapse(!0))}return a},Z.destroy=function(){var a=Z.getSel();ea=null,a&&a.removeAllRanges(),S.destroy(),P=null,Q=null,R=null,Y=null,X=null,U=null,V=null,T=null,S=null,N=null,O=null,Z=null,$=null,_=null,aa=null,ba=null,ca=null,da=null,fa=null,W=null},Z}var i={SPAN:!0,TABLE:!1,THEAD:!1,TBODY:!1,TR:!1,TD:!0,TH:!0,EM:!1,STRONG:!1,STRIKE:!1,I:!1,B:!1,U:!1,SUB:!1,SUP:!1,H1:!1,H2:!1,H3:!1,H4:!1,H5:!1,H6:!1},j=c.LineBlockElements,k=c.CONTENTS_ID;return h}),d("HistoryManager",["jqueryCafe","utilities/EditorConstants"],function(a,c){function d(d){function e(a){var b,c;if(a&&a.images){for(c=a.images.length,b=0;b<c;b++)a.images[b]=a.images[b].cloneNode();f(a.snapShot.getElementsByClassName("cui-temp-img-wrap"),a.images),a.images=null}}function f(a,b){var c;if(a&&b)for(c=b.length-1;c>=0;c--)a[c].parentNode.replaceChild(b[c],a[c])}function g(){var a,b="dom";F&&(D=C.length-1,D=D>0?D:0,F=!1,G=!0),D>0&&(a=C[--D],a&&a.snapShot&&(a.visited===!0&&(b+="-valid"),e(a),y.setContent(a.snapShot,{format:b}),a.visited=!0,s(a.cursor)))}function h(){var a,b,c="dom";D<C.length-1&&(D++,a=C[D],a||(a={}),e(a),b=a.snapShot||x,a.visited===!0&&(c+="-valid"),y.setContent(b,{format:c}),a.visited=!0,a.cursor&&s(a.cursor))}function i(){G&&(G=!1,F=!0,x=null,D=-1)}function j(){v&&(A=setTimeout(function(){A=null,d.trigger("documentmodified")},0))}function k(a){return a&&a.snapShot&&(z.appendChild(a.snapShot),z.removeChild(a.snapShot),a.snapShot=null,a.command=null,a.type=null,a.cursor=null,a.images=null),a}function l(a){var b,c,e=C.length;G&&(e>D&&(b=C.splice(D+1,e-1),k(b),b=null),i()),e>=w&&(b=C.shift(),k(b),b=null),c=C[C.length-1],c&&c.snapShot===a.snapShot||(C.push(a),/createdocument/.test(a.command)||(d.trigger("historyadded",a.command),j()))}function m(a,b,c){var d,e=C.length;b&&(e>a||e>=a&&c)&&(d=C[a],k(d),b.isReplaced=!0,C[a]=b)}function n(b,c,e){var g,h,i,j,k,l,m={command:b?b:"typing",type:c?c:3,snapShot:null,images:null};for(i=a("img",d.getBody()),h=i.length,h>0&&(k=y.getRange(),l={startContainer:k.startContainer,startOffset:k.startOffset,endContainer:k.endContainer,endOffset:k.endOffset}),g=0;g<h;g++)j=d.getDoc().createElement("DIV"),j.className="cui-temp-img-wrap",i[g].parentNode.replaceChild(j,i[g]);return m.images=i,m.snapShot=y.getContent({format:"dom"}),f(d.getBody().getElementsByClassName("cui-temp-img-wrap"),i),l&&y.setRange(l.startContainer,l.startOffset,l.endContainer,l.endOffset),m.cursor=e||y.getCursorPosition(!0),m}function o(){return G&&D!==-1&&D<C.length-1}function p(){var a,b=!1;return E&&(a=n("typing"),l(a),H=!0,b=!0),E=!1,b}function q(){var a;return E||(E=!0,H=!1,o()&&(a=C.splice(D+1,C.length-1),k(a),a=null,i(),d.trigger("historyadded"))),E}function r(a,b){var c,d=C.length,e=d>1?C[d-1]:null,f=/^(?:delete|newline|symbol)$/gi;E?f.test(a)||p():H&&e&&"typing"===e.command&&!I?H=!1:(c=n(a,8,b),!I&&f.test(a)&&e&&e.command===a&&!G?m(d-1,c):(H&&!I&&(c.command="typing",H=!1),l(c),I=!1))}function s(a){a&&(a.line===-1&&(a.line=1,a.col=0),y.setCursorPosition({line:a.line,col:a.col,isRightside:a.isRightside}),d.scrollTo(),j(),d.trigger("historychanged"),d.selectionChange.contentChanged())}function t(a){var b,c=d.browser.safari?a.children[1]:a.firstChild,e=c?c.nodeName:"";c!==a.lastChild||J[e]||(c?(b=d.getDoc().createElement("P"),a.appendChild(b),b.appendChild(c)):b=d.insertEmptyLine(a),d.selectionManager.setRange(b,0,b,0))}function u(){var b=d.getBody(),c=d.browser,e=function(){var a=b.firstChild;return c.ie?a&&a===b.lastChild&&null===a.firstChild:d.isEmpty()};a(b).on("keydown.cafe",function(a){var b=a.keyCode;if(d.isSpellcheckMode&&d.isSpellcheckMode())return void(8===b&&(a.stopPropagation(),a.preventDefault()));switch(b){case 8:return(e()||c.safari&&y.isFirstOffsetOfFirstNodeInSafari(a))&&(a.stopPropagation(),a.preventDefault()),void p();case 37:return void(e()||c.safari&&y.isFirstOffsetOfFirstNodeInSafari(a)?(a.preventDefault(),a.stopPropagation()):(p(),I=!0));case 38:case 39:case 40:case 33:case 34:case 35:case 36:return p(),void(I=!0);case 13:case 27:case 45:case 46:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:case 123:return void p();case 112:return a.stopPropagation(),a.preventDefault(),void p()}(b>=65&&b<=90||b>=48&&b<=57||229===b||190===b||32===b)&&(a.altKey||a.ctrlKey||a.metaKey||q())}).on("keyup.cafe",function(a){var e,f=a.keyCode;if(!d.isSpellcheckMode||!d.isSpellcheckMode()){switch(f){case 8:case 46:if(a.altKey||a.shiftKey)return;c.webkit&&t(b),e="delete";break;case 13:a.altKey||a.ctrlKey||a.metaKey||(e="newline")}e&&r(e)}}),a(d.getDoc()).on("click mousedown",function(){d.isSpellcheckMode&&d.isSpellcheckMode()||(p(),I=!1)}),d.on("editorcreate newdocumentcommand",function(a){var b=/editorcreate/i.test(a.type)?"createdocument":"newdocument";d.historyManager.clean(),l(n(b))}),d.on("documentchanged",function(a,b){var c,d;d=b&&b.range?b.range:null,d&&(c=y.getCursorPosition(!1,d)),r("documentchanged",c),a.preventDefault(),a.stopPropagation()}),d.on("historypushed",function(){r("historypushed")}),d.on("historyinitialize",function(){d.initRecord=n("initHistory"),m(0,d.initRecord,!0)})}var v,w,x,y,z,A,B=this,C=[],D=0,E=!1,F=!0,G=!1,H=!1,I=!1,J=c.toMap("p,h1,h2,h3,h4,h5,h6,ol,ul,table,blockquote");w=d.configs.history_max_length||20,d.configs.enable_doc_modified_event===b&&(d.configs.enable_doc_modified_event=!1),v=d.configs.enable_doc_modified_event,z=d.getDoc().createDocumentFragment(),y=d.selectionManager,B.stopTyping=function(){return p()},B.push=function(a){a&&l(a)},B.undo=function(){var a=this;return p(),!!a.canUndo()&&(g(),!0)},B.redo=function(){var a=this;return p(),!!a.canRedo()&&(h(),!0)},B.canUndo=function(){if(C.length>=1){if(F)return 1!==C.length;if(G&&D>=1&&D<C.length)return!0}return!1},B.canRedo=function(){return o()},B.clean=function(){var a,b;for(a=0,b=C.length;a<b;a++)k(C[a]),C[a]=null;C=[],D=0,E=!1,F=!0,G=!1},B.current=function(){return{queue:C,idx:D}},u(),B.destroy=function(){B.clean(),A&&clearTimeout(A),A=null,B=null,C=null,D=null,E=null,F=null,G=null,H=null,I=null,v=null,J=null,w=null,x=null,y=null,z=null}}return d}),d("CommandHelper",["jqueryCafe","utilities/EditorConstants"],function(a,b){function c(b){function c(){var a=[{command:"indent",tag:"p",type:d,style:{name:"marginLeft",value:"20px"}},{command:"outdent",tag:"p",type:d,style:{name:"marginLeft",value:"20px"}},{command:"ForeColor",tag:"span",type:d,style:{name:"color",value:"20px"}},{command:"BackColor",tag:"span",type:d,style:{name:"color",value:"20px"}},{command:"fontName",tag:"span",type:d,style:{name:"fontFamily",value:"20px"}},{command:"justifyCenter",tag:"p",type:d,style:{name:"align",value:"center"}},{command:"justifyLeft",tag:"p",type:d,style:{name:"align",value:"left"}},{command:"justifyRight",tag:"p",type:d,style:{name:"align",value:"right"}}],c=[{command:"fontSize",type:e,tag:"span",style:{
name:"fontSize",value:"10pt"}}],h=[{command:"undo",type:f,shortcut:i?"command+Z":"Ctrl+Z",action:function(){return b.historyManager.undo()}},{command:"redo",type:f,shortcut:i?"command+Y":"Ctrl+Y",action:function(){return b.historyManager.redo()}},{command:"copy",type:f,shortcut:i?"command+C":"Ctrl+C",action:function(){return b.commandManager.copy({command:"copy",type:f}),!0}},{command:"cut",type:f,shortcut:i?"command+X":"Ctrl+X",action:function(){return b.commandManager.cut({command:"cut",type:f}),!0}},{command:"paste",type:f,shortcut:i?"command+V":"Ctrl+V",action:function(){return b.commandManager.paste({command:"paste",type:f}),!0}}];i&&h.push({command:"redo4mac",type:f,shortcut:"command+shift+Z",action:function(){return b.historyManager.redo()}}),g(a),g(c),g(h)}function g(a){for(var c,d=a.length;d--;)c=a[d],j&&"paste"===c.command||b.addCommand(c)}var h=this,i=!(!b.os||!b.os.mac),j=b.isPluginLoaded("expaste");h.applyStyle=function(c,d,f){var g,h,i,j,k,l;if(d.style){for(j=b.selectionManager,d.type===e&&(c=j.compressSiblings(c,d.validTags),c=j.wrapElements(c,d.tag)),k=d.style.name,l=f||d.style.value,c=c.get?c:a(c),h=c.children(),g=h.length;g--;)i=h.eq(g),i.css(k,"");for(g=c.length;g--;)i=c.eq(g),i.css(k,l);return!0}return!1},h.destroy=function(){h=null,i=null,j=null},c()}var d=b.CommandTypes.NATIVE_COMMAND,e=b.CommandTypes.CUSTOM_COMMAND,f=b.CommandTypes.SYSTEM_COMMAND;return c}),d("CommandManager",["jqueryCafe","utilities/EditorConstants"],function(a,b){function c(b,c){function e(a){var b=m.getContent({format:"dom"}),c=m.getCursorPosition(!0);return{command:a.command,type:a.type,cursor:{line:c.line,col:c.col,isRightside:c.isRightside},snapShot:b}}function j(a){var b,c,d;if("[object Array]"===Object.prototype.toString.call(a))for(b={},c=a.length;c--;)d=a[c],"string"==typeof d&&(b[d.toUpperCase()]=!0);return b}function k(a){var c,d,e=b.pluginUtils,f=b.lockUtils,g=function(a){var c,d,e,g,h;if(c=a?a.length:0)for(d=0;d<c;d++){if(e=b.selectionUtils.getSelectedElements(!0,!1,a[d]),g=e.shift(),f.hasLockedStyleWithParent(g))return!0;if(h=e.pop(),h&&g!==h&&f.hasLockedStyleWithParent(h))return!0;if(f.hasLockedStyle(e))return!0}return!1};if("textmode"!==a&&"editmode"!==a&&"import.template"!==a&&"findreplace_replace"!==a&&"findreplace_replaceAll"!==a){if(/paragraphformat|fontname|fontsize|bold|italic|underline|strikethrough|superscript|subscript|fontcolor|fontbgcolor/.test(a)||(c=!0),d=e.getSelectedCells(),d&&d.length&&f.hasLockedCell(d))return!0;switch(a){case"paragraphformat":case"changeliststyle":case"releaselist":case"bulletedlist":case"numberedlist":case"indent":case"outdent":case"alignment.left":case"alignment.center":case"alignment.right":case"alignment.justify":if(g(m.getSelectedBlocks()))return!0;break;default:if(f.isLockedSelection(c))return!0}}return!1}var l,m,n,o,p,q,r,s,t=this,u={};u={},l=b.configs,m=b.selectionManager,q=b.shortcutManager,p=b.historyManager,n=b.getDoc(),s=n.createDocumentFragment(),r=l.use_collaborate||!1,t.addCommand=function(a){var b,c,d,e=this;return!!a&&(b=a.command,c=a.type,!(1===c&&!e.canUseCommand(b))&&(a.shortcut&&(d=q.addShortcut(a.shortcut,a.command)),a.shortcut=d,a.tag=a.tag||"span",a.validTags=j(a.validTags),u[b.toLowerCase()]=a,!0))},t.execCommand=function(d,j){var l,n,q,r,t,v,w,x=this,y=null;if("string"==typeof d&&(d=d.toLowerCase(),n=u[d])){if(y=n.action,r=n.type,b.trigger(d+"beforecommand"),r!==i){w=/^custom_/.test(d),w||(l=e(n),p.stopTyping());try{k(d)?v=!1:r===f?(t=!0,v=o(n.command,!1,j,t)):r===h?v=!!y&&y.call(x,m.getRange(),j,n):(y=y||c.applyStyle,r===g?(b.selectionUtils.reRangeByShiftEnd(),q=m.getSelectedBlocks(null,n.validTags)):q=m.getSelectedElements(),v=y.call(x,q,a.extend({},n),j))}catch(a){console.error(a),v=!1}if(w)return!0;v?(s.appendChild(l.snapShot),s.removeChild(l.snapShot),l=null,l=e(n),p.push(l)):(b.uiManager.isAlertOpened()||b.focus(),m.setContent(l.snapShot,{format:"dom"}),m.setCursorPosition(l.cursor),v=!1)}else d.match("checklock")&&k(d)?(y(!0),v=!1):(y(null,a.extend({},n),j),v=!0);return v?b.trigger(d+"command",n):b.trigger("executionfailed",n),!0}return!1},t.canUseCommand=function(a){return a=a.toLowerCase(),n.queryCommandSupported(a)},t.getShortcut=function(a){var b;return a=d(a.toLowerCase()),b=u[a],b&&b.shortcut?b.shortcut:""},o=t.canUseCommand("styleWithCSS")?function(a,b,c,d){var e=!!d&&d;return n.execCommand("styleWithCSS",e,e),n.execCommand(a,b,c)}:function(a,b,c){return n.execCommand(a,b,c)},t.copy=function(){return!0},t.cut=function(a){var b=e(a);return p.push(b),!0},t.paste=function(a){var b=e(a);return p.push(b),!0},t.destroy=function(){t=null,u=null,l=null,m=null,n=null,o=null,p=null,q=null,r=null,s=null}}var d=a.trim,e=b.CommandTypes,f=e.NATIVE_COMMAND,g=e.CUSTOM_COMMAND_BLOCK,h=e.CUSTOM_COMMAND_RANGE,i=e.SYSTEM_COMMAND;return c}),d("ShortcutManager",["jqueryCafe"],function(a){function b(a){return a>=112&&a<=123}function c(a){function b(a){return f.keyCode?void(f.keyCode=-1):void(f.keyCode=a)}for(var c,d=a.toLowerCase().split("+"),e=d.length,f={alt:!1,ctrl:!1,shift:!1,meta:!1,charCode:null,keyCode:null};e--;)switch(c=d[e]){case"alt":case"ctrl":case"shift":f[c]=!0;break;case"command":f.meta=!0;break;case"option":f.alt=!0;break;case"backspace":b(8);break;case"tab":b(9);break;case"enter":b(13);break;case"pageup":b(33);break;case"pagedown":b(34);break;case"end":b(35);break;case"home":b(36);break;case"left":b(37);break;case"up":b(38);break;case"right":b(39);break;case"down":b(40);break;case"insert":b(45);break;case"delete":b(46);break;default:if(h[c])b(h[c]);else{if(1!==c.length){f.keyCode=-1;break}f.charCode=c.charCodeAt(0),b(h[c]||c.toUpperCase().charCodeAt(0))}}return f}function d(a){var c;return c=a>=65&&a<=90||a>=48&&a<=57?String.fromCharCode(a):b(a)?"F"+(a-111):a}function e(e){function h(a,b,c,d,e){var f="";return f+=a?"ctrl+":"",b&&(f+=l?"command+":"meta+"),c&&(f+=l?"option+":"alt+"),f+=d?"shift+":"",f+=e}function i(a,b){var e=c(a);return e.keyCode&&e.keyCode!==-1?(e.command=b,e.pattern=h(e.ctrl,e.meta,e.alt,e.shift,e.keyCode),e.stringPattern=h(e.ctrl,e.meta,e.alt,e.shift,d(e.keyCode)).toUpperCase(),e):null}function j(a,b,c){var d,h=!1;return n.done||(c?(d=c.command,g.indexOf(d)>=0&&("cut"===d&&(e.historyManager.stopTyping(),f=e.lastRange.collapsed),n.keydownKeyCode=b,n.definedValue=c.definedValue,n.command=d,n.done=!1,h=!0)):n.keydownKeyCode===b&&(d=n.command,g.indexOf(d)>=0&&("cut"===d&&f||(e.execCommand(d,n.definedValue),n.done=!0),h=!0))),"keyup"===a&&n.keydownKeyCode===b&&(n={}),h}var k=this,l=!(!e.os||!e.os.mac),m={},n={};k.genPattern=h,a(e.getBody()).on("keydown",function(a){var c,d="";(a.altKey||a.ctrlKey||a.metaKey||b(a.keyCode))&&(d=h(a.ctrlKey,a.metaKey,a.altKey,a.shiftKey,a.keyCode),c=m[d]),(!e.isSpellcheckMode||!e.isSpellcheckMode()||c&&"spellcheck"===c.command)&&(j(a.type,a.keyCode,c)||c&&(a.preventDefault(),a.stopPropagation(),e.execCommand(c.command,c.definedValue)))}).on("keyup",function(a){e.isSpellcheckMode&&e.isSpellcheckMode()||j(a.type,a.keyCode)}),k.addShortcut=function(a,b){var c;return"string"==typeof b&&(c=i(a,b))?(m[c.pattern]=c,c.stringPattern):null},k.getCommand=function(a){var b,c;return a?(c=k.getParsedPattern(a),b=m[c],b?b.command:null):null},k.getParsedPattern=function(a){var b,d;return a?(b=c(a),b.keyCode&&b.keyCode!==-1?d=h(b.ctrl,b.meta,b.alt,b.shift,b.keyCode):null):null},k.externalKeyDownCallbacks={},k.externalKeyDownHandler=function(a){var b,c=h(a.ctrlKey,a.metaKey,a.altKey,a.shiftKey,a.keyCode),d="custom_"+c;b=k.externalKeyDownCallbacks[d],b&&b.worksOnPreview&&(a.preventDefault(),b.callback())},k.destroy=function(){k=null,l=null,m=null,n=null}}var f,g=["copy","paste","cut"],h={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123};return e}),d("FocusManager",[],function(){function a(a){function b(b,c){var e;c&&(e=c.$,c.on("editorcreate",function(){var b=c.browser,f=c.getDoc(),g=c.getBody(),h=e(g),i=c.selectionManager;c.on("editorfocus",function(){var a,b,d,h,j=c.lastRange;j||(j=i.getRange()),j.startContainer?(a=f.createRange(),a.setStart(j.startContainer,j.startOffset),a.setEnd(j.endContainer,j.endOffset)):a=j,j.startContainer===g&&(b=e("p",g).last()[0],b?c.contentUtils.isEmptyLine(b)&&(h=b.parentNode,d=c.createEmptyLine(),h.replaceChild(d,b),b=d):(b=c.createEmptyLine(),g.appendChild(b)),a.selectNodeContents(b),a.collapse(!1)),i.setSingleRange(a),c.isFocused()||c.focus(!0)}),h.on("focus"+d,function(){c.trigger("editorfocused")}).on("blur"+d,function(){c.isFocused()&&(a.focusedEditor=null)}),b.ie&&9===parseInt(b.version,10)&&h.on("mouseup"+d,function(a){2===a.button&&h.focus()})}))}function c(a,b){var c;b&&(c=b.$(b.getBody()),b.off("editorfocus"),c.off(d))}var d=".cui-focus-manager";a.on("editoradd",b),a.on("editordestroy",c)}return a}),d("utilities/ContentUtils",["utilities/NodeTracker","utilities/EditorConstants"],function(a,c){function d(d){function m(){var a;return!(!L||(a=d.pluginUtils,!a.getSelectedItem()))&&(a.deselectItem(!0),!0)}function n(a){var b,f,g,h,i,j=a||H.getRange(),k=j.startContainer,l=j.endContainer,m=j.endOffset;if(!j.collapsed)if(d.isEmpty()&&e[k.nodeName])j.setStart(k,0),j.setEnd(k,0),H.setSingleRange(j);else if(k===l&&A(k))j.setStart(k,0),j.setEnd(k,0),H.setSingleRange(j);else if(K.ie&&"BODY"===l.nodeName&&(m=m===l.childNodes.length?l.childNodes.length-1:m-1,"TABLE"!==l.childNodes[m].nodeName&&(l=H.getLeafNode(l.childNodes[m],!1),j.setEndAfter(l))),H.setSingleRange(j),I.execCommand("Delete",!0,null),j.collapsed||(j=H.getRange()),K.ie&&(b=H.getSelectedBlocks(),b&&b.length>0&&(f=b[0],f.firstChild&&c.StyleElements[f.firstChild.nodeName]&&""===f.textContent&&f.removeChild(f.firstChild))),"BODY"===j.startContainer.nodeName){for(b=H.getSelectedBlocks(),i=b.length,h=i-1;h>=0;h--)f=b[h],"BR"===f.nodeName&&(f.remove(),b.pop());b.length!==i&&(k=j.startContainer,g=I.createElement("P"),0===b.length?k.appendChild(g):k.childNodes&&k.childNodes.length>j.startOffset&&k.insertBefore(g,k.childNodes[j.startOffset]),j.setStart(g,0),j.setEnd(g,0),H.setSingleRange(j)),j=H.getRange()}return j}function o(a,b){var c,d=I.createElement(a);if(b)for(c in b)d.setAttribute(c,b[c]);return d}function p(a){var b=a.endContainer,c=b.parentNode;a.collapsed&&("A"===b.nodeName?b.childNodes.length===a.endOffset?(a.setStartAfter(b),a.setEndAfter(b)):0===a.endOffset&&(a.setStartBefore(b),a.setEndBefore(b)):c&&"A"===c.nodeName&&3===b.nodeType&&(c.lastChild===b&&b.length===a.endOffset?(a.setStartAfter(c),a.setEndAfter(c)):c.firstChild===b&&0===a.endOffset&&(a.setStartBefore(c),a.setEndBefore(c))))}function q(b,c,e,f,g){var h,i,k,l,m=new a(e,c),n=f,o="",p=!1;for(h=m.current();h&&h!==c;){if(3===h.nodeType&&n>=0){if(k=h.textContent,o=k+o,d.zwsUtils.isZeroWidthSpaceChar(k)&&1===n&&h===e)break;if(i=r(k,n,g),0===i&&h!==e){p&&g&&0!==h.length&&(l=k.lastIndexOf(" "),l=l===-1?k.lastIndexOf(" "):l,l!==-1&&l+1<k.length&&b.setStart(h,l+1));break}if(i!==-1){i!==f?g&&i+1<=k.length?b.setStart(h,i+1):!g&&i+1<=k.length&&b.setEnd(h,i):!g&&0!==i&&h.length>i&&b.setEnd(h,i);break}g?b.setStart(h,0):b.setEnd(h,k.length),p=!0}else if(1===h.nodeType&&!j[h.nodeName])break;g?(h=m.prev(),n=h&&3===h.nodeType?h.length-1:0):(h=m.next(),n=h&&3===h.nodeType?0:1)}}function r(a,b,c){for(var d,e=a.length,f=0!==e&&b===e?b-1:b,g=!1;f<e&&f>=0&&(d=a[f],!(g=/\s/.test(d)));)f=c?f-1:f+1;return g?f:-1}function s(a,b,c){for(var d,e,f=a;f&&"BODY"!==f.nodeName&&(d=b[f.nodeName],!d||(e=f,c));)f=f.parentNode;return e}function t(a,b,c){for(var d,e,f=a;f&&"BODY"!==f.nodeName&&(d=b(f),!d||(e=f,c));)f=f.parentNode;return e}function u(a,b,c){var d,e=a,f=e.nodeType,g=a.parentNode;return 1===f&&(e=c?a.previousSibling:a.nextSibling,e&&1!==e.nodeType||(e=I.createTextNode(""),c?g.insertBefore(e,a):g.insertBefore(e,a.nextSibling))),3===e.nodeType&&(d=c?0:e.length,e.nodeValue=C(e.nodeValue,d,b)),e}function v(a,b,c,d){var e,f,g,h,i;if(f=a.parentNode,d?(a.appendChild(b),f=a):c?f.insertBefore(b,a):(e=a.nextSibling,e?f.insertBefore(b,e):f.appendChild(b)),O.isLineNode(f))for(g=N(f).children("br"),i=g.length;i--;)h=g[i],f===h.parentNode&&h.parentNode.removeChild(h);return b}function w(a){for(var b,c=!0,d=a.length;d--;)if(b=a[d],"BR"!==b.nodeName){c=!1;break}return c}function x(a){for(var b,c=a.childNodes,d=c.length,e=!1;d--;)if(b=c[d],8===b.nodeType){e=!0;break}return e}function y(a,b){return a.length<1&&"​"===b||(!!(a.length<1&&2===b.length&&/\u200B\u00A0|\u00A0\u200B/.test(b))||(1===a.length&&"BR"===a[0].nodeName&&"​"===b||!(2!==a.length||!j[a[0].nodeName]||"​"!==b||"BR"!==a[1].nodeName)))}function z(a,b,c){var d=a.textContent||"",e=a.children||[];return!(0!==d.length||x(a)||0!==e.length&&!w(e))||(!!(!b&&e.length<1&&1===d.length&&/[\s\uFEFF\xA0\n]/.test(d))||!!c&&c(e,d))}function A(d){var f=!1,g=d.firstChild,h=l,i=new a(g,O),j=c.NodeTypes;if(!e[d.nodeName])return f;if(h[d.nodeName])return!1;if(O.nodeType===j.ELEM_NODE&&null===g)return!0;for(;g&&g!==d;){switch(g.nodeType){case j.ELEM_NODE:f=h[g.nodeName],f=f===b||!f;break;case j.TEXT_NODE:f=0===g.textContent.length;break;case j.COMMENT_NODE:f=!1}if(!f)break;g=i.next()}return f}function B(a){var b,c=N(a).children(),d=a.innerText||a.textContent;M||0!==c.length||0!==d.length||(b=I.createElement("br"),b.setAttribute("class","cui-temp-br"),a.appendChild(b))}function C(a,b,c){var d=a.length;return b>=0?a.substring(0,b)+c+a.substring(b,d):c+a}function D(a){var b=a.nodeName||a.tagName;return h[b]}function E(a,b){var c="br"+(b?"."+b:"");O.isEmptyLine(a)||N(a).children(c).remove()}function F(a,b,c){var d,e,f=a.nodeName||a.tagName;if(d=H.createRange(),!a.parentNode)return d;if("IMG"===f||"BR"===f||"HR"===f)d.setStartAfter(a),d.setEndAfter(a);else if(/^(?:MAP|AREA)$/i.test(f)){if("AREA"===a.nodeName&&(a=s(a,{MAP:!0})),!a)return;d.setStartBefore(a),d.setEndBefore(a)}else e=3===a.nodeType?a.length:a.childNodes.length,b=b>e?e:b,d.setStart(a,b),d.setEnd(a,b);return d.collapse(!0),c&&H.setTextRange(a,b),H.setSingleRange(d),d}function G(a,b,c){var d,e,f;if(a&&3===a.nodeType)return d=H.createRange(),c&&N.isFunction(c)?(f=t(a,c),f=f.parentNode):f=a.parentElement,d.setStart(a,b),d.setEndAfter(f),e=d.extractContents(),d.insertNode(e),f.nextElementSibling}var H,I,J,K,L,M,N=d.$,O=this;I=d.getDoc(),J=d.getBody(),K=d.browser,H=d.selectionManager,M=K.ie&&K.version<=10,L=K.webkit,O.isLineContainer=function(a){var b=a?a.nodeName||a.tagName:null;return!!b&&f[b]},O.isFormattedEmptyLine=function(a){var b,c,d=this;if(d.isLineContainer(a)){for(b=a,c=b.childNodes||[];1===c.length&&1===c[0].nodeType;)b=c[0],c=b.childNodes;return 1!==b.nodeType||j[b.nodeName]||e[b.nodeName]||(b=b.parentNode),z(b,!1,y)}return!1},O.filterDataUriSrc=function(a,b){var c,e,f,g=b.length;for(c=0;c<g;c++)f=b[c].indexOf(","),f<6||(e=b[c].substr(5,f),d.pluginUtils.isSupportImageData(e)?a=a.replace(b[c],'src="" cafeimg="__s-cafe_image_data_'+c+"__"):(a=a.replace(b[c],'src="'),b[c]=""));return a},O.restoreDataUriSrc=function(a,b){var c,d,e,f,g;if(a&&a.length>0)for(c=a.length,d=b.length,f=0;f<c;f++)for(e=a[f],g=0;g<d;g++)e&&e.getAttribute("cafeimg")==="__s-cafe_image_data_"+g+"__"&&(e.setAttribute("src",b[g].substr(5).replace(/&#43;/g,"+").replace(/&#10;/g," ").replace(/&#61;/g,"=")),e.removeAttribute("cafeimg"))},O.isEmptyLine=function(a,b){var c=this;return!!c.isLineNode(a)&&z(a,b,!1)},O.mergeElement=function(a,b,c,d){var f,g,i,j,k,l=a,m=O.isLineNode(b),n=b.nodeName||l.tagName;if(h[n]?l=s(l,e):O.isEmptyLine(l)&&(l.lastChild||(i=I.createElement("br"),l.appendChild(i)),l=l.lastChild),g=l.parentNode,m&&g.nodeName===b.nodeName)v(l,b,c);else if(m&&O.isLineNode(g))return v(g,b,c),f=b.lastChild,d&&(N(b).append(a),N(g).remove()),f;if(m)if(j=b.getAttribute("style"),d&&O.isLineNode(g)||!j){for(j&&g.setAttribute("style",j);b.firstChild;)f=g.insertBefore(b.firstChild,b);g.removeChild(b),E(g)}else{for(i=I.createElement("span"),k=g.getAttribute("style"),O.isLineNode(g)&&!k?g.setAttribute("style",j):i.setAttribute("style",j),g.insertBefore(i,b);b.firstChild;)i.appendChild(b.firstChild);"BODY"!==g.nodeName&&g.removeChild(b),f=i}else h[n]||(f=b);return f},O.isLineNode=function(a){var b=a?a.nodeName||a.tagName:null;return null!==a&&e[b]},O.cloneContents=function(a){var b,c=a;return c||(c=H.getRange()),c=c.cloneRange(),b=c.cloneContents()},O.getAllChildren=function(a,b){for(var c=[],d=!0,e=a?a.childNodes[0]:null;e&&e!==a;)if(d=!b||b(e),d&&c.push(e),e.hasChildNodes())e=e.firstChild;else{for(;e&&null===e.nextSibling&&e!==a;)e=e.parentNode;e!==a&&(e=e.nextSibling)}return c},O.getLeafElement=function(a,b){var c=a,d=b?"firstChild":"lastChild";if(c&&1!==c.nodeType)return a;for(;c&&3!==c.nodeType&&c[d];)c=c[d];return c},O.getLeafNode=function(a,b){for(var c=a,d=b?"firstChild":"lastChild";c&&c[d];)c=c[d];return c},O.getLeafContainer=function(c,d){var e,f,g;for(d===b&&(d=3===c.nodeType?c.length:c.childNodes.length);c&&c.hasChildNodes();)c=c.childNodes[d],c&&(d=3===c.nodeType?0:c.hasChildNodes.length);if(K.ie&&c&&3===c.nodeType&&0===d){for(e=new a(c);g=e.prev();)if(3===g.nodeType&&g.length>0){f=g;break}f&&(c=f,d=f.length)}return{node:c,offset:d}},O.hasParentElement=function(a,b){var c,d=b,e=!1;return d||(d=H.getRange()),d=d.cloneRange(),c=N(d.collapsed&&d.startContainer?d.startContainer:d.commonAncestorContainer&&"BODY"!==d.commonAncestorContainer.nodeName?d.commonAncestorContainer:d.cloneContents().childNodes),e=c.is(a),e||(e=c.parents(a).length>0),e},O.insertElement=function(a,b,c){var d;return d=b&&3===b.nodeType?F(b,c):H.getRange(),this.insertElementByRange(a,d)},O.insertElementByRange=function(a,b){var c,d,e=0,f=b;return f&&!m()||(f=H.getRange()),f=f.cloneRange(),f.collapsed||(f=n(f)),p(f),c=f.startContainer,3===c.nodeType&&3===a.nodeType?(d=a.nodeValue,e=f.startOffset+d.length,c.nodeValue=C(c.nodeValue,f.startOffset,d),a=c):1!==a.nodeType&&3!==a.nodeType||(f.insertNode(a),1===a.nodeType&&"TABLE"!==(a.nodeName||a.tagName)&&(a=O.getLeafNode(a)),e=1===a.nodeType?1:a.length),F(a,e),a},O.insertHtmlBlockByRange=function(a,b,c){var d,e,f=this;return d=N(I.createDocumentFragment()).append(N(a)),c&&c.length>0&&(f.restoreDataUriSrc(d.children().find("img"),c),c={}),e=f.insertElementsByRange(d.contents(),b),N(d).remove(),e},O.insertElementsByRange=function(a,b){function c(a,b){return!(!a||!b)&&(!!C.isLineNode(b)&&("OL"!==a.nodeName&&"UL"!==a.nodeName))}function d(a){var b=!1,c=a.startContainer,d=a.startOffset,e=a.endContainer,f=a.endOffset,g=N(J).contents().length;return"BODY"===c.nodeName&&c===e&&d===f&&(d!==g&&0!==d||(b=!0)),b}var f,g,h,j,k,l,p,q,r,t,u,w,x,y,z,B,C=this,E=a.length,G=o("span",{class:"cui-position"}),M=null,O=null,P=!0,Q=function(){var a;a=h.parentNode,3===h.nodeType&&h.length===j&&a&&"A"===a.nodeName&&a.lastChild===h&&(h=a.parentNode,j=N(h.childNodes).toArray().indexOf(a)+1)};if(b&&!m()||(b=H.getRange()),b.collapsed||(b=n(b)),0===E)return b;if(8===b.startContainer.nodeType&&(z=b.startContainer,z.previousSibling?(b.setStartAfter(z.previousSibling),b.setEndAfter(z.previousSibling)):z.nextSibling?(b.setStartBefore(z.nextSibling),b.setEndBefore(z.nextSibling)):(b.setStart(z.parentElement,0),b.setEnd(z.parentElement,0))),"BODY"===b.startContainer.nodeName&&(y=d(b)),g=b.cloneRange(),x=I.createElement("div"),w=N(x).attr("style","display:none"),N(J).append(w),q=s(b.startContainer,e),q||(y&&(q=N("p, h1, h2, h3, h4, h5, h6, li",J).first()[0]),q=q||b.startContainer),r=C.isEmptyLine(q),A(q)&&q.childNodes.length>0&&N(q.childNodes).remove(),w.append(a),x.lastChild&&"TABLE"===x.lastChild.nodeName&&(l=x.lastChild),h=C.getLeafNode(x),k=C.getAllChildren(w[0],function(a){var b=a.nodeType,c=a.textContent,d=a.parentNode.nodeName;return!(3!==b||!i[d]||!/^[\s\uFEFF\xA0]+$/.test(c))}),N(k).remove(),r?(h=C.getLeafNode(x),N(G).insertAfter(h),"LI"===q.nodeName&&(O=q,N(o("span",{class:"cui-position"})).appendTo(O),r=!1)):(g.insertNode(G),k=C.getAllChildren(q,function(a){var b=a.nodeType,c=a.textContent||"";return 3===b&&0===c.length}),N(k).remove(),C.getLeafNode(q,!0)===G?M=q:C.getLeafNode(q)===G?(O=q,P=!1):E>1||D(x.firstChild)?(g.setStartBefore(G),g.setEndBefore(G),M="LI"===q.nodeName?C.splitListByRange(g,!0):C.splitLineByRange(g),O=M.previousSibling,N(o("span",{class:"cui-position"})).appendTo(O),N(G).prependTo(M),q=M):(g.setStartAfter(G),g.setEndAfter(G),C.splitLineByRange(g,function(a,b){var c=o("span",{class:"cui-position"}),d=b.firstChild,e=N(b);N(".cui-position",a).remove(),a.appendChild(c),d&&"SPAN"===d.nodeName&&0===d.childNodes.length&&N(d).remove(),e.contents().insertAfter(N(c)),e.remove()},!0),O=q)),u=q,f=N(x.firstChild),1===E&&c(O||M,f[0]))f.contents().insertBefore(N(".cui-position",O||M)),f.remove();else for(;x.firstChild;)f=N(x.firstChild),f=v(u,f[0],P),P||(u=f),C.isLineNode(f)&&0===f.childNodes.length&&f.parentNode.removeChild(f);return t=N(".cui-cursor",I),l?(p=N(l).nextAll("P, H1, H2, H3, H4, H5, H6")[0],p||(p=I.createElement("p"),L&&C.isEmptyLine(p)&&(p.lastChild&&"BR"===p.lastChild.nodeName||p.appendChild(I.createElement("br"))),N(p).insertAfter(l)),h=p,j=3===h.nodeType?h.length:0):j=3===h.nodeType?h.length:1,N(".cui-position",I).remove(),r&&!l&&"LI"!==q.nodeName&&N(q).remove(),O&&(B=C.getLeafNode(O),B&&"BR"===B.nodeName&&(B===h&&(h.nextSibling?(h=h.nextSibling,j=0):(h=h.parentNode,j=3===h.nodeType?h.length:h.childNodes.length)),N(B).remove())),M&&(B=C.getLeafNode(M),B&&"BR"===B.nodeName&&(B===h&&(h=h.previousSibling?h.previousSibling:h.parentNode,j=3===h.nodeType?h.length:h.childNodes.length),N(B).remove())),K.ie&&Q(),b=F(h,j,K.ie&&K.version>10),t.remove(),w.remove(),b},O.insertTextByRange=function(a,b){var d,f,g,h,i,j,k=this,l=a,o=c.UNICODE_CHAR_CODE.NBSP,p=c.UNICODE_CHAR_CODE.SPACE;return b&&!m()||(b=H.getRange()),a=l.replace(/\r\n/g,"\n"),0===a.indexOf("\n")&&(a=a.slice(1)),a=a.replace(/&lt;/g,"<"),a=a.replace(/&gt;/g,">"),a=a.replace(/&amp;/g,"&"),a=a.replace(/\u0009/g,o+p),a=a.replace(/\u0020/g,o),a=a.replace(/\u00A0\u00A0/g,o+p),a=a.replace(/(\S)\u00A0(\S)/g,"$1"+p+"$2"),a=a.replace(/(\S)\u00A0(\S)/g,"$1"+p+"$2"),a=a.replace(/\u0020(\n)|\u0020$/g,o+"$1"),d=a.split("\n"),f=d.length,b.collapsed||(b=n(b)),h=b.startContainer,i=b.startOffset,1===f?(j=k.getLeafNode(h,0===i),h!==j&&j.nodeType===c.NodeTypes.TEXT_NODE?(u(j,d[0],0===i),b=F(h,i,K.ie&&K.version>10)):(g=I.createTextNode(d[0]),k.insertElementByRange(g,b))):(k.splitBlockByRange(b,e,!1,function(a,b){var e,g,j,l,m,n,o,p,q,r=b.nodeName,s=["SPAN","SUB","SUP","EM","U","STRIKE","STRONG"],t=c.LineBlockElements;for(a.firstChild.nodeName!==c.NodeNames.BR?o=k.getLeafNode(a):b.firstChild.nodeName!==c.NodeNames.BR&&(o=k.getLeafNode(b,!0));o&&!t[o.nodeName];)o.nodeType===c.NodeTypes.ELEM_NODE&&s.indexOf(o.nodeName)!==-1&&(p=o.cloneNode(),q&&p.appendChild(q),q=p),o=o.parentNode;for(j=k.getLeafNode(a),a===j?a.appendChild(I.createTextNode(d[0])):j.nodeName===c.NodeNames.BR&&a.firstChild===j&&a.lastChild===j?q?(j.parentNode.removeChild(j),a.appendChild(q.cloneNode(!0)),j=k.getLeafNode(a,!1),j.appendChild(I.createTextNode(d[0]))):(n=!0,u(j,d[0],n)):q&&j.nodeName===q.nodeName?(j.parentNode.replaceChild(q.cloneNode(!0),j),j=k.getLeafNode(a,!1),j.appendChild(I.createTextNode(d[0]))):u(j,d[0],n),j=k.getLeafNode(b,!0),b===j?b.appendChild(I.createTextNode(d[f-1])):q?j.nodeName!==c.NodeNames.BR||b.firstChild!==j&&b.firstChild.nodeName!==q.nodeName?j.nodeType===c.NodeTypes.ELEM_NODE?(j.nodeName===q.nodeName&&(j.parentNode.replaceChild(q.cloneNode(!0),j),j=k.getLeafNode(b,!0)),j.appendChild(I.createTextNode(d[f-1]))):j=u(j,d[f-1],!0):(j.parentNode.removeChild(j),b.firstChild&&b.firstChild.nodeName===q.nodeName?(b.firstChild.outerHTML!==q.outerHTML?b.insertBefore(q.cloneNode(!0),b.firstChild):b.replaceChild(q.cloneNode(!0),b.firstChild),j=k.getLeafNode(b,!0)):(b.appendChild(q.cloneNode(!0)),j=k.getLeafNode(b,!1)),j.appendChild(I.createTextNode(d[f-1]))):j=u(j,d[f-1],!0),l=b.parentElement,e=1;e<f-1;e++)g=d[e],m=I.createElement(r),0!==g.length||M?q?(m.appendChild(q.cloneNode(!0)),p=k.getLeafNode(m,!1),p.appendChild(I.createTextNode(g))):m.appendChild(I.createTextNode(g)):q?(m.appendChild(q.cloneNode(!0)),p=k.getLeafNode(m,!1),p.appendChild(I.createElement("BR"))):m.appendChild(I.createElement("BR")),l.insertBefore(m,b);h=j,i=d[f-1].length,M||(E(a,"cui-temp-br"),E(b,"cui-temp-br"))}),b=F(h,i)),b},O.replaceElementByRange=function(a,b){var c=b;return c&&!m()||(c=H.getRange()),c=c.cloneRange(),c.deleteContents(),c.insertNode(a),a},O.selectWordRange=function(a,b){var c,d,f,g,h,i=this;if(a||(a=H.getRange()),c=a.cloneRange(),c.collapsed){if(f=c.startContainer,3===f.nodeType)g=c.startOffset;else{if(h=i.getLeafContainer(c.startContainer,c.startOffset),!h.node)return a;f=h.node,g=h.offset}if(d=s(f,e),q(c,d,f,g,!0),c.startContainer===f&&c.startOffset===g)return a;if(q(c,d,f,g,!1),c.endContainer===f&&c.endOffset===g)return a;b||H.setSingleRange(c)}return c},O.splitLine=function(a,b,c,f,g){var h,i,j=this;return a&&3===a.nodeType?(b=b>a.length?a.length-1:b,i=H.createRange(),i.setStart(a,b),i.setEnd(a,b),i.collapse(!0)):a&&1===a.nodeType?(i=H.createRange(),j.isContentElementInLine(a)||"BR"===a.nodeName?(d.browser.ie&&!a.nextSibling&&f&&(h=I.createTextNode("​"),N(h).insertAfter(a),a=h),i.setStartBefore(a)):j.isLineNode(a)&&i.setStart(a,b||0),i.setEnd(a,b||0),i.collapse(!0)):i=H.getRange(),j.splitBlockByRange(i,e,!1,c,g)},O.splitLineByRange=function(a,b,c){return this.splitBlockByRange(a,e,!1,b,c)},O.splitListByRange=function(a,b){return this.splitBlockByRange(a,g,b)},O.splitBlockByRange=function(a,b,c,d,e){var f,g,h,i,j,k;if(j=H.getSel(),a||j.rangeCount>0&&(a=j.getRangeAt(0)),f=a.cloneRange(),f.collapsed||(f=n(f)),h=f.commonAncestorContainer,g=s(h,b,c)){if(f.setEndAfter(g),i=f.extractContents(),e||B(g),f.setStartAfter(g),f.collapse(!0),i.firstChild&&!e){for(k=i.firstChild;L&&k.children.length>0&&3!==k.firstChild.nodeType&&"HR"!==k.firstChild.nodeName&&"BR"!==k.firstChild.nodeName;)k=k.firstChild;B(k)}f.insertNode(i),d&&N.isFunction(d)&&d(g,g.nextElementSibling),f.setStartAfter(g),f.collapse(!0),H.setSingleRange(f),g=g.nextElementSibling}return g},O.splitTextNode=function(a,b,c){var d;return a&&3===a.nodeType&&a.length>b?(d=a.splitText(b),d=c?d:d.previousSibling):d=a,d},O.splitNodeByRange=function(a,b){var c,d,e,f;return e=H.getSel(),a||e.rangeCount>0&&(a=e.getRangeAt(0)),c=a.cloneRange(),d=c.commonAncestorContainer,!c.collapsed&&d&&(G(c.endContainer,c.endOffset,b),f=G(c.startContainer,c.startOffset,b)),f},O.wrapContent=function(a,b){var c,d=b;return d||(d=H.getRange()),d=d.cloneRange(),a&&(c=d.cloneContents(),N(a).append(c.childNodes),d.deleteContents(),d.insertNode(a)),a},O.getAttributesString=function(a,b){var c,d,e,f,g,h="";for(b=b||{},d=a.attributes,g=0,c=d.length;g<c;g++)e=d[g].name,b[e.toUpperCase()]||(f=d[g].value,f?(f="boolean"==typeof f?f+"":f,f=f.replace(/\"/gi,"'"),h+=e+'="'+f+'" '):h+=e+" ");return h},O.copyAttribute=function(a,b,c){var d,e,f,g,h;for(c=c||{},e=a.attributes,h=0,d=e.length;h<d;h++)f=e[h].name,g=e[h].value||"",c[f]||b.setAttribute(f,g)},O.isContentElementInLine=function(a){var b=a?a.nodeName||a.tagName:null;return!!b&&k[b]},O.isPagebreak=function(a){var b=a?a.nodeName||a.tagName:null;return!(!b||"SPAN"!==b||!a.hasAttribute("data-cui-pagebreak"))},O.removeUnnecessaryUnicode=function(a){return a?a.replace(/[\u202a-\u202e]/g,""):a},O.trimEmptyTextElem=function(a){!a||a.nodeType!==c.NodeTypes.ELEM_NODE||0!==a.textContent.length||a.querySelector("img")||a.querySelector("br")||a.parentNode.removeChild(a)},O.destroy=function(){N=null,O=null,H=null,I=null,J=null,K=null,L=null,M=null}}var e={P:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,LI:!0,TD:!0},f={P:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,UL:!0,OL:!0},g={OL:!0,UL:!0},h={DIV:!0,OL:!0,PRE:!0,TABLE:!0,UL:!0,BLOCKQUOTE:!0},i={BODY:!0,OL:!0,UL:!0,TABLE:!0,TBODY:!0,THEAD:!0,TFOOT:!0,TR:!0},j={A:!0,B:!0,EM:!0,FONT:!0,I:!0,SPAN:!0,STRONG:!0,STRIKE:!0,SUB:!0,SUP:!0,U:!0},k={A:!0,IMG:!0,IFRAME:!0,OBJECT:!0,EMBED:!0,VIDEO:!0,AUDIO:!0},l=c.toMap("iframe video audio object script area base basefont col frame hr img input isindex link meta param embed source track");return d}),d("utilities/LockUtils",[],function(){function a(a){var b=this,c=a.$,d=!!a.isPluginLoaded("lock"),e="data-cui-lock";b.hasLockedCell=function(a){if(d&&(c("[data-cui-lock]",a).length||b.hasLockedStyleWithParent(a[0])))return!0},b.hasLockedStyle=function(a){var b,c,f,g,h=[];if(!d)return!1;for(c=0,b=a.length;c<b;c++)f=a[c],1===f.nodeType&&("IMG"===f.nodeName&&h.push(f),"true"===f.getAttribute(e)&&(g=!0));return!!g},b.hasLockedStyleWithParent=function(c){return!!d&&b.hasLockedStyle(a.selectionManager.getAncestors(c))},b.isLockedSelection=function(c){var e,f,g;return!!d&&(e=a.selectionUtils.getSelectedElements(c),f=e.shift(),!!b.hasLockedStyleWithParent(f)||(g=e.pop(),!(!g||f===g||!b.hasLockedStyleWithParent(g))||!!b.hasLockedStyle(e)))},b.destroy=function(){b=null,c=null,d=null,e=null}}return a}),d("utilities/StyleUtils",["utilities/StyleParser","utilities/EditorConstants","utilities/UnitConverter"],function(a,b){function c(c){function d(a,b){var c,d,e,f=l[b];if(f.reg.test(a.style[f.attrName]))return!0;for(d=f.tag.length,c=0;c<d;c++)if(e=f.tag[c],e===a.nodeName)return!0;return!1}function e(a,b){var c;h.map(k,function(d,e){c=e,null!==a[c]&&a[c]!==b[c]&&(/textDecoration/i.test(c)?a[c]=f(a[c],b[c]):a[c]=null)})}function f(a,b){var c,d,e=a.split(/\s+/),f=b.split(/\s+/),g=[];for(d=0,c=e.length;d<c;d++)f.indexOf(e[d])!==-1&&g.push(e[d]);return g.length>0?g.join(" "):null}var g=this,h=c.$,i=c.browser,j=["H1","H2","H3","H4","H5","H6"],k=b.ComputedStyles,l=b.NodeStyles;g.getStyleObject=function(b){if(b)return a.parse(b.getAttribute("style"),{plain:!0})},g.isOnlyFontSizeSpan=function(a){var b;return!!a&&(b=g.getStyleObject(a),!(1!==Object.keys(b).length||!h(a).css("fontSize")||1!==a.attributes.length))},g.hasStyle=function(a,b){var c,e,f,g;if(!a)return!1;for(g=Array.isArray(a),c=g?a.length:1,e=0;e<c;e++)if(f=g?a[e]:a,1===f.nodeType&&d(f,b))return!0;return!1},g.checkStyle=function(a,b){var c,d,f,g,i,j=this,l={},m=0;for(a?m=0:(a=j.getComputedStyle(3===b[0].nodeType?b[0].parentNode:b[0]),m=1),h.map(k,function(b,d){c=d,l[c]=a[c]}),d=m,f=b.length;d<f;d++)g=b[d],g=3===g.nodeType?g.parentNode:g,i=j.getComputedStyle(g),e(l,i);return a=null,l},g.isStyledNodeWithParents=function(a,b){var d,e,f,g=0,h=0;for(e=0,f=a.length;e<f;e++)d=a[e],3!==d.nodeType&&"BR"!==d.nodeName||(g++,c.styleUtils.hasStyle(c.selectionManager.getAncestors(d),b)&&h++);return 0!==g&&g===h},g.getStyledColor=function(a,b){var c,d,e;for(d=0,c=a.length;d<c;d++)if(e=a[d],1===e.nodeType){if(e.style&&e.style[b])return e.style[b];if("FONT"===e.nodeName&&e.color&&"color"===b)return e.color}return null},g.getComputedStyle=function(a,b){var d,e,f,j=c.getWin(),l=c.styleUtils,m=function(a){var b=i.ie?1.44:1.1999;return parseFloat(a)*b+"px"},n=function(a,b){var c;return/^[0-9]+\.*[0-9]*$/.test(a)?a:(a=parseFloat(a)/parseFloat(b),a=a.toFixed(1)+"",c=a.split("."),2!==c.length||parseInt(c[1],10)||(a=c[0]),a)},o=function(a){var c;return c="baseline"===a?"SUB"===e?"sub":"SUP"===e?"super":l.hasStyle(b,"subscript")?"sub":l.hasStyle(b,"superscript")?"super":a:a},p=function(){var a={};return h.map(k,function(b,c){"fontWeight"===c&&"700"===d[c]?a.fontWeight="bold":a[c]=d[c]}),a},q=function(){var a=d.textDecoration,c="";return(l.hasStyle(b,"underline")||/underline/i.test(a))&&(c="underline "),(l.hasStyle(b,"strikethrough")||/line\-through/i.test(a))&&(c+="line-through"),c=h.trim(c),""===c?"none":c},r=function(){var a,e,f=c.colorUtils;return a=d.backgroundColor,e=c.colorUtils.toHEX8(a),"00000000"===e&&b&&(a=g.getStyledColor(b,"backgroundColor")),"transparent"===f.toName(a)?"transparent":f.toHEX(a)};if(a&&1===a.nodeType){if(!c.getBody().contains(a)&&a.getAttribute("style"))d=a.style;else{if(!j.getComputedStyle)return;d=j.getComputedStyle(a)}return e=a.nodeName,d=p(),b=b||c.selectionManager.getAncestors(a),d.verticalAlign=o(d.verticalAlign),i.webkit&&(d.textDecoration=q()),f=d.verticalAlign,"super"!==f&&"sub"!==f||(d.fontSize=m(d.fontSize),d["line-height"]=m(d["line-height"])),d["line-height"]=n(d["line-height"],d.fontSize),i.webkit&&(d.backgroundColor=r()),d}},g.destroy=function(){g=null,h=null,i=null,j=null,
k=null,l=null}}return c}),d("utilities/PluginUtils",["utilities/NodeTracker","utilities/EditorConstants","utilities/UnitConverter"],function(a,b,c){function d(d){function e(a){var b,c,d;if(a){if(c=a.lastIndexOf("."),d=a.lastIndexOf("/"),c>d&&(b=a.substring(c+1,a.length)),!b||u.isAllowedImageExtension(b))return 0;if(u.isAllowedImageExtension(b))return 1}return-1}function f(a){var b,c,e,f=a.originalEvent.dataTransfer.getData("text");f&&f.indexOf("caferes")!==-1&&(e=f.substring(7,f.length),e&&(a.preventDefault(),a.stopPropagation(),c=v('img[data-cui-id="'+e+'"]',d.getBody()).get(0),b=y.getRangeFromEvent(a.originalEvent),u.deselectItem(),d.contentUtils.insertElementByRange(c,b),d.trigger("documentchanged")))}function g(a){var b=v(a.target);if(w.ie){if(b.hasClass("cui-wrapper"))b=v(a.target).children().eq(0);else if(!h(a))return void a.preventDefault()}else if(!h(a)||!b.hasClass("cui-resizable"))return void a.preventDefault();b.attr("data-cui-id")||b.attr("data-cui-id",d.getUniqueId()),a.originalEvent.dataTransfer&&a.originalEvent.dataTransfer.setData("text","caferes"+b.attr("data-cui-id"))}function h(a){var b,c,e;return"IMG"===a.target.nodeName&&((!d.isSpellcheckMode||!d.isSpellcheckMode())&&(b=v(a.target),c=b.attr("data-cui-image"),e=b.attr("data-cui-media"),c||e))}function i(a){h(a)?u.selectItem(a.target):u.deselectItem()}function j(a){var b;return!(!a||a.firstChild||a.style.height&&a.style.height<t||d.lockUtils.hasLockedStyle([a]))&&(b=d.createEmptyLine(),a.appendChild(b),!0)}function k(a){u.fillEmptyCellsWithLineInTable(a.currentTarget)}function l(a){var c,d,e,f,g,h=function(b){var c,d,e,g,h,i;d=v("> thead > tr, > tbody > tr, > tfoot > tr",b),e=a===x.LEFT||a===x.UP?d.last():d.first(),g=v("> td, > th",e),h=a===x.LEFT?g.last():g.first(),i=v(f,h),c=a===x.UP?i.last()[0]:i.first()[0],c&&y.setRange(c,0,c,0)};a!==x.LEFT&&a!==x.UP&&a!==x.RIGHT&&a!==x.DOWN||(c=y.getRange(),f=b.keys(b.LineBlockElements).join(","),g=y.getClosest(c.startContainer,f),g&&(d=a===x.LEFT||a===x.UP?g.previousSibling:g.nextSibling,e=u.fillEmptyCellsWithLineInTable(d),e&&h(d)))}function m(a){l(a.keyCode),z&&(u.deselectItem(!0),w.ie&&9===a.keyCode&&a.preventDefault())}function n(a){var b,c;0===a.button?h(a)&&!a.target.hasAttribute("data-cui-selected")?(u.selectItem(a.target),a.preventDefault()):w.ie&&"cui-wrapper"===a.target.className&&(b=y.getSel(),c=y.getRange(),0===b.rangeCount?(u.deselectItem(),a.preventDefault()):c.collapsed===!0&&a.preventDefault(),w.version<10&&a.offsetX<a.target.clientWidth/2&&a.preventDefault()):1===a.button||4===a.button?u.deselectItem():2===a.button&&(w.ie?(a.target&&"cui-wrapper"!==a.target.className&&u.deselectItem(),w.version<10&&(a.preventDefault(),a.stopPropagation())):a.target&&!a.target.hasAttribute("data-cui-selected")&&u.deselectItem())}function o(a){var b;return!!(a&&a.style&&"absolute"===a.style.position&&(b=z?a.parentNode.parentNode:a.parentNode,"P"===b.nodeName&&b.parentNode&&"TD"===b.parentNode.nodeName&&b.nextSibling&&"TABLE"===b.nextSibling.nodeName))}function p(b,c,d,e){var f=new a(b,d),g=e?f.prev():f.next();if(g)return!1;if(3===b.nodeType){if(!e&&b.textContent.length!==c)return!1;if(e&&0!==c)return!1}return!0}function q(a,b){var c,d,e;if("LI"!==a.nodeName&&"LI"!==b.nodeName){for(c=a;c!==b;){if(d=c,c=c.nextSibling,!c)return null;d.parentNode.removeChild(d)}c.innerText=D.NBSP,e=c}return e}function r(a){function c(b){var c=b.style;if(""!==c.textAlign&&"left"!==c.textAlign)c.textAlign="left";else{if(!parseInt(c.marginLeft,10))return!1;c.marginLeft="0px"}return a.preventDefault(),a.stopPropagation(),!0}function e(a){var b;if(0!==a.startOffset)for(b=a.startOffset-1;b>=0;b--){if(3===a.commonAncestorContainer.nodeType)return!1;if(""!==a.commonAncestorContainer.childNodes[b].innerText&&a.commonAncestorContainer.childNodes[b].innerText!==D.ZWS)return!1}return!0}var f,g,h,i,j,k,l,m,n,r,s,t,y,A,B,C,E,F="b, em, i, s, span, strong, strike, sub, sup, u, mark, small",G=a.keyCode,H=d.selectionManager,I=H.getRange(),J=b.LineElementsStr;if(G===x.BACKSPACE||G===x.DELETE){if(f=u.getSelectedItem("image"),o(f))return g=z?f.parentNode.parentNode:f.parentNode,g&&1===g.childNodes.length?v(g).remove():v(f).remove(),w.ie&&d.trigger("documentchanged"),d.blur(),!1;if(w.ie&&!I.collapsed){if(j=H.getClosest(I.startContainer,J),k=H.getClosest(I.endContainer,J),!j||!k||j===k)return;if(!p(I.startContainer,I.startOffset,j,!0)||!p(I.endContainer,I.endOffset,k,!1))return;l=q(j,k),l&&(a.preventDefault(),H.setRange(l,0,l,0))}if(G===x.BACKSPACE){if(E=I.startContainer,!b.LineBlockElements[3===E.nodeType?"":E.nodeName])for(;!b.LineBlockElements[3===E.nodeType?"":E.nodeName]&&"BODY"!==E.nodeName;)E=E.parentNode;if(d.contentUtils.isEmptyLine(E)?!(C=c(E))&&d.browser.ie&&1===d.getBody().childNodes.length&&""!==E.getAttribute("style")&&E.removeAttribute("style"):I.collapsed&&(!I.startContainer.previousSibling&&0===I.startOffset||e(I))&&(C=c(E)),h=H.getClosest(I.startContainer,J),!h)return;if(w.ie&&p(I.startContainer,I.startOffset,h,!0)){if(m=h.previousSibling,!m||!b.LineBlockElements[m.nodeName])return;if(C)return;if(m&&(0===m.textContent.length||"​"===m.textContent))return m.style&&"0px"!==m.style.marginLeft?void 0:(v(m).remove(),void a.preventDefault());for(t=m.childNodes[m.childNodes.length-1],t&&3===t.nodeType&&1===t.textContent.length&&"​"===t.textContent[0]&&v(t).remove(),r=m.childNodes[m.childNodes.length-1],n=H.getLeafNode(r,!1),"BR"===n.nodeName?(n=n.parentNode,n.setAttribute("cui-caret-target",!0),s=n.childNodes.length-1):3===n.nodeType?(y=n.parentNode,y.setAttribute("cui-caret-target-parent",!0),y.setAttribute("cui-caret-target-offset",y.childNodes.length-1),s=n.textContent.length):(n.setAttribute("cui-caret-target",!0),s=n.childNodes.length),A=0,B=h.childNodes.length;A<B;A++)m.appendChild(h.childNodes[A].cloneNode(!0));n=v("[cui-caret-target]",d.getBody())[0],n?(H.setRange(n,s,n,s),1===n.childNodes.length&&"BR"===n.firstChild.nodeName&&n.removeChild(n.firstChild),n.removeAttribute("cui-caret-target")):(n=v("[cui-caret-target-parent]",d.getBody())[0],n=n.childNodes[parseInt(n.getAttribute("cui-caret-target-offset"),10)],H.setRange(n,s,n,s),n.parentNode.removeAttribute("cui-caret-target-parent"),n.parentNode.removeAttribute("cui-caret-target-offset")),a.preventDefault(),h.parentNode.removeChild(h)}}else if(w.ie&&G===x.DELETE&&I.collapsed){if(h=H.getClosest(I.startContainer,J),!h)return;if(p(I.startContainer,I.startOffset,h)){if(i=h.nextSibling,!i)return;""===i.innerText&&0===v(":not("+F+")",i).length&&(a.preventDefault(),i.parentNode.removeChild(i))}}}}function s(){function a(){return d.getDialog("imageformatquality")}function b(){return a().getWidget("imageType")}function c(){return a().getWidget("imageQuality")}var e,f={},g=d.getText("imageformatquality.dialog.title"),h=d.getText("imageformatquality.dialog.type"),i=d.getText("imageformatquality.dialog.original"),j=d.getText("imageformatquality.dialog.quality");u.setActionDataForImageFormatQuality=function(a){f=a},u.convertImage=function(a,b){var c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s=!1,t=d.getDoc();return c=d.getDialog("imageformatquality"),e=c.getWidget("imageType"),f=c.getWidget("imageQuality"),g=e.selectedValue,h="data:image/",i=b.indexOf(h),j=b.indexOf(";base64,"),k=b.slice(i+h.length,j),l=d.getText("imageformatquality.dialog.original"),k===g&&("jpeg"===g&&"100%"!==f.selectedValue||(s=!0)),s||g===l||(m="image/"+g,n=parseInt(f.selectedValue.replace("%",""))/100,o=t.createElement("canvas"),o.width=a.width,o.height=a.height,p=o.getContext("2d"),p.fillStyle="#ffffff",p.fillRect(0,0,o.width,o.height),p.drawImage(a,0,0),q=t.createElement("img"),r=o.toDataURL(m,n),q.setAttribute("src",r),q.setAttribute("unselectable","on"),q.setAttribute("data-cui-image","true"),q.style.borderWidth="0px",a=q),a},e={title:g,modal:!0,resizable:!1,contentOverflow:!0,width:450,items:[{type:"container",items:[{type:"columns",items:[{type:"selectmenu",name:"imageType",label:h,align:"left",autoCloseViaScroll:!1,options:{label:i,maxHeight:100,menuItems:[{text:"<span>"+i+"</span>",click:function(){c().disable()}},{text:"<span>png</span>",click:function(){c().disable()}},{text:"<span>jpeg</span>",click:function(){c().enable()}}]}},{type:"selectmenu",name:"imageQuality",label:j,align:"left",options:{label:"100%",maxHeight:100,disabled:!0,menuItems:[{text:"<span>100%</span>",click:function(){}},{text:"<span>70%</span>",click:function(){}},{text:"<span>50%</span>",click:function(){}},{text:"<span>30%</span>",click:function(){}}]}}]}]}],buttons:[{name:"okbutton",text:d.getText("ok"),click:function(){"expaste"===f.from&&f.callback(this.options.imageData,!0),"dragdrop"===f.from&&f.callback(f.result,f.range,!0),a().close()}},{name:"cancelbutton",text:d.getText("cancel"),click:function(){this.close()}}],open:function(){b().index(0).option("label",i),c().index(0).option("label","100%"),c().disable(),d.selectionChange.refreshLastRange()},close:function(){f.setLastRangeToNull&&f.setLastRangeToNull(),a().options.imageData=null}},d.addDialog("imageformatquality",e)}var t,u=this,v=d.$,w=d.browser,x=v.ui.keyCode,y=d.selectionManager,z=!1,A=!1,B=[],C={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"," ":"&nbsp;"},D={ZWS:"​",NBSP:" "},E=function(a){return new RegExp("^"+a+"[-A-Z0-9+&@#\\/%?=~_|!\\:,.;\\^\\\\]*[-A-Z0-9+&@#\\/%=~_|\\:\\\\]$","i")},F=E("(?:(?:https?):\\/\\/)"),G=E("(?:(?:www).[^.])"),H=E("(?:(?:mailto):)"),I=E("(?:(?:ftp):\\/\\/)"),J=E("(?:(?:file):\\/\\/\\/*)");u.isMatchedLinkScheme=function(a){return/^(?:(?:(?:ftp|https?):\/\/)|(?:(?:www)\.[^\.])|(?:(?:mailto):)|(?:(?:file):\/\/\/*))/i.test(a)},u.getProtocolInURL=function(a){var b;return F.test(a)||G.test(a)?b="http":I.test(a)?b="ftp":J.test(a)?b="file":H.test(a)&&(b="mailto"),b},u.validLinkTarget=function(b,c){var e,f,g={A:!0,B:!0,EM:!0,FONT:!0,I:!0,SPAN:!0,STRONG:!0,STRIKE:!0,SUB:!0,SUP:!0,U:!0};if(!b)return!1;for(b=d.contentUtils.getLeafNode(b,!1),e=new a(b,c);b&&3!==b.nodeType&&(1!==b.nodeType||g[b.nodeName]||(f=!0),b!==c);)b=e.prev();return!f},u.escapeHtml=function(a){return String(a).replace(/[&<>"'\/\s]/g,function(a){return C[a]})},u.removeWhiteSpace=function(a){var b,c=a;return c=c.replace(/[\u200B|\u000A]/g,""),b=c.length,c=c.replace(/\u0020{1,}/g,function(a,c){return 0===c||c===b-a.length?"":a.length>1?" ":a})},u.getPlainText=function(c){var e,f,g,h,i,j=c,k=b.LineBlockElements,l="";for(g=d.contentUtils.getLeafNode(c),f=new a(c,g);null!==j&&(h=j.nodeName,k[h]?(e=j.textContent,i&&i!==j&&l&&e&&""!==e.replace(/\n/g,"")&&(l+="\n"),i=j):h===b.NodeNames.BR?l+="\n":h!==b.NodeNames.PRE&&j.nodeType!==b.NodeTypes.TEXT_NODE||(e=j.textContent,e=u.removeWhiteSpace(e),l+=e),j!==g);)j=/^(?:script|style)$/i.test(h)?f.nextSibling():f.next();return w.ie?l.replace(/\s+$/,""):l.trimEnd()},u.unwrapChildNodes=function(b,c){for(var d,e,f=[],g=b.parentNode,h=new a(b,b);b&&(b.nodeName===c&&f.push(b),b!==g);)b=h.next();for(e=f.length,d=0;d<e;d++)v(f[d].childNodes).unwrap()},u.isTextMode=function(){var a=d.uiManager.getContainer();return!(!a||!a.attr("data-cui-text"))},u.getActiveTabName=function(){var a,b=this,c=d.uiManager.getContainer();return a=b.isTextMode()?"text":c.find(".cui-tabs-active.cui-state-active > a").attr("data-cui-name")},u.isEditTab=function(){var a,b=this;return a=b.getActiveTabName(),/^edit$/i.test(a)},u.setTextMode=function(a){var b=d.uiManager.getContainer();a?b.attr("data-cui-text",!0):b.removeAttr("data-cui-text")},u.checkImageSource=function(a){return!!a&&("http://"===a.substring(0,7).toLowerCase()||"https://"===a.substring(0,8).toLowerCase()?e(a)>=0:this.isSupportImageData(a)>0)},u.isAllowedImageDataType=function(a){return d.getSupportImageType().indexOf(a.toLowerCase())>=0},u.isSupportImageData=function(a){var b,c;if(a){if("data:"===a.substring(0,5).toLowerCase())return b=a.indexOf(","),c=a.slice(5,b).split(";"),c&&2===c.length&&u.isAllowedImageDataType(c[0])>=0&&"base64"===c[1]?1:0;if("file:"===a.substring(0,5).toLowerCase())return 0}return-1},u.isAllowedImageExtension=function(a){return b.SupportImageExtensionAll.indexOf(a.toLowerCase())>=0},u.fillEmptyCellsWithLineInTable=function(a){var b,c,e,f,g,h,i,k,l=!1,m=d.lockUtils;if(a&&"TABLE"===a.nodeName&&!m.hasLockedStyleWithParent(a)&&!v(a).data("emptyCellCorrection")){for(h=v("> thead, > tbody, > tfoot",a),b=h.length-1;b>=0;b--)if(f=h[b],!m.hasLockedStyle([f]))for(i=v("> tr",f),c=i.length-1;c>=0;c--)if(g=i[c],!m.hasLockedStyle([g]))for(k=v("> th, > td",g),e=k.length-1;e>=0;e--)j(k[e])&&!l&&(l=!0);return v(a).data("emptyCellCorrection",!0),l}},u.isSelectedImageItem=function(a){if(w.ie){if(a&&"cui-wrapper"===a.className)return!0}else if(a&&"IMG"===a.nodeName&&a.hasAttribute("data-cui-selected"))return!0;return!1},u.isItemWrapper=function(a){return!(!a.classList.contains("cui-resizable-handle")&&!a.classList.contains("cui-wrapper"))},u.getSelectedItem=function(a){var b;return z?(b=a?v("img[data-cui-selected][data-cui-"+a+"]",d.getDoc()):v("img[data-cui-selected]",d.getDoc()),1===b.length?b[0]:null):null},u.setItemButtonState=function(){var a=d.getToolButton("image"),b=u.getSelectedItem("image"),c=d.getText("image.toolbutton.inserttext"),e=d.getText("image.toolbutton.edittext"),f=d.getToolButton("media"),g=u.getSelectedItem("media"),h=d.getText("media.toolbutton.inserttext"),i=d.getText("media.toolbutton.edittext");a&&(b?(a.option("pressed",!0),a.option("label",e)):(a.option("pressed",!1),a.option("label",c))),f&&(g?(f.option("pressed",!0),f.option("label",i)):(f.option("pressed",!1),f.option("label",h)))},u.deselectItem=function(a,b){var c,e,f=b||u.getSelectedItem();f&&(c=v(f),c.hasClass("cui-resizable")&&c.resizable("instance")&&(z=!1,c.resizable("destroy").removeAttr("data-cui-selected").css("display","inline-block"),w.ie&&c.attr("unselectable","on"),a?y.selectElement(f):o(f)?(e=y.createRange(),e.setStartAfter(f.parentNode),e.setEndAfter(f.parentNode),y.setSingleRange(e),d.blur()):(e=y.getRange(),e.collapse(!1),y.setSingleRange(e))),d.selectionChange.contentChanged()),u.setItemButtonState()},u.selectItem=function(a){var b,c,e,f=u.getSelectedItem();a&&!a.getAttribute("data-cui-lock")&&(f&&u.deselectItem(),z=!0,c=v(a),e=a.src,w.ie&&e.match(/base64/)&&(e=e.replace(/&#10;/g," ").replace(/&#61;/g,"="),c.attr("src",e)),c.resizable({aspectRatioPoint:"se",controlPoint:!0,display:"inline-block",doc:d.getDoc(),stop:function(){d.trigger("documentchanged")}}).attr("data-cui-selected","true").attr("data-cafe-filter","image"),b=v(a),b.parent().attr("data-cafe-filter","unwrap").find(".cui-resizable-handle"),w.ie?y.selectElement(b.parent()[0]):y.selectElement(b[0]),u.setItemButtonState(),d.selectionChange.contentChanged())},u.getCurrentCell=function(){var a=d.selectionManager,b=a.getRange(),c="td, th";return a.getClosest(b.startContainer,c)},u.getSelectedCells=v.noop,u.isEndOfLine=p,u.fixNewLineAfterNoneParagraph=function(a){var b,c,e,f,g,h=null;return y=d.selectionManager,a=a||y.getRange(),b=a.startContainer,c=d.browser.ie?y.getClosest(b,"H1,H2,H3,H4,H5,H6"):y.getClosest(b,"DIV, H6"),e=new RegExp("^H1|H2|H3|H4|H5|H6$","i"),g=d.contentUtils.getLeafNode(c,!0),c&&(1===c.childNodes.length&&""===c.textContent&&3===g.nodeType||"BR"===g.nodeName||2===c.childNodes.length&&c.textContent===D.ZWS+D.NBSP)&&(c.previousSibling&&e.test(c.previousSibling.nodeName)?(h=d.createEmptyLine(),h.innerHTML=c.innerHTML,c.previousSibling.style.lineHeight&&(h.style.lineHeight=c.previousSibling.style.lineHeight),v(c).after(h).remove()):c.parentNode&&"LI"===c.parentNode.nodeName&&(f=c.parentNode.previousSibling&&c.parentNode.previousSibling.firstChild?c.parentNode.previousSibling.firstChild.nodeName:"p",h=d.getDoc().createElement(f),h.innerHTML=d.browser.ie?"&nbsp;":"<br>",v(c).after(h).remove())),h},u.addInitialWidgetState=function(a,b,c){B.push({name:a,value:b,type:c||1})},u.getInitialWidgetState=function(){return B},u.isCharKeyCode=function(a){switch(a){case x.LEFT:case x.UP:case x.RIGHT:case x.DOWN:case x.BACKSPACE:case x.DELETE:case x.HOME:case x.END:case x.PAGE_UP:case x.PAGE_DOWN:case x.TAB:break;default:if(a)return!0}return!1},u.fillEmptyCellsInRange=function(b,c){var e,f,g,h,i,j=d.getDoc(),k=d.selectionManager.getLeafNode,l=b.startContainer,m=b.endContainer,n=new a(l,b.commonAncestorContainer),o=l;for(1===l.nodeType&&(o=k(l,!0)),1===m.nodeType&&(m=k(m));o&&o!==m;)1===o.nodeType?("TD"!==o.nodeName&&"TH"!==o.nodeName||(0===o.childNodes.length?c?(e=j.createElement(c),f=j.createElement("br"),d.browser.ie?d.browser.version>10?e.appendChild(f.setAttribute("cui-ebr","true")):e.appendChild(j.createTextNode("&nbsp;")):e.appendChild(f),o.appendChild(e)):o.appendChild(d.createEmptyLine()):w.ie&&w.ie.version>10&&(g=v("br[cui-ebr]",o),h=!!g.length,g.remove(),h&&""===o.textContent&&(i=k(o),1===i.nodeType&&"BR"!==i.nodeName&&(f=j.createElement("BR"),f.setAttribute("cui-ebr","true"),i.appendChild(f))))),o=n.next()):o=n.next()},u.unselectAllTable=function(){var a,b,c,e=v("table[data-cui-selected=true]",d.getBody());if(u.unselectTable&&u.unselectCells)for(a=e.length;a--;)b=e.eq(a),c=b.find("[data-cui-selected=true]"),c&&c.length>0&&u.unselectCells(c),u.unselectTable(b)},d.one("editorcreate",function(){var a=v(d.getDoc());a.on("click",i).on("mousedown","*",n).on("keydown",m).on("drop",f),w.ie?a.delegate("div","dragstart",g):a.delegate("img","dragstart",g),v(d.getBody()).on("mousedown.cafe","table",k).on("keydown.cafe",r),t=c.toPX(v(d.getBody()).css("font-size")),s()}),d.on("tabsbeforeactivate",function(){u.deselectItem()}),v(d.uiManager.getContainer()).on("dialogbeforeclose",".cui-dialog",function(){var a=d.pluginUtils,b=a.getSelectedItem();b&&a.deselectItem(!1,b)}),u.destroy=function(){u=null,v=null,w=null,x=null,y=null,z=null,A=null,t=null,B=null,C=null,E=null,F=null,G=null,H=null,I=null,J=null}}return d}),d("utilities/SelectionChange",["utilities/NodeTracker"],function(a){function c(c){function d(a){var b,c=a,d=c.length;if(d===w.length)for(b=d;b>=0&&c[b]===w[b];b--)if(0===b)return w=c,!1;return w=c,!0}function e(a){var b=!1;return a.compareDocumentPosition(v)>0&&(b=a!==v),b}function f(a,b){return!(!a||!b)&&(a.startContainer===b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset)}function g(a){var b,c,d,e;if(a)for(c=0,b=a.length;c<b;c++)d=a[c].parentNode,d&&!u.contains(d)&&"SPAN"===d.nodeName&&(e=p(d),a[c]=e.data("target"),e.remove()),e=d=null}function h(a,c){var f,g,h=!0,i=a.startContainer;3===i.nodeType&&(i=i.parentNode),x&&a.collapsed===x.collapsed&&a.collapsed&&(r<9?(f=s.getAncestors(i),h=d(f)):h=!(!y&&!z)||e(i)),h&&(g=x.startContainer,y=z,g&&3===g.nodeType&&"unknown"!=typeof g.nodeValue&&g.nodeValue!==b||(g=null),q.contentChanged(a,i,f,c,g)),v=i}function i(a){var b={};return a=a||s.getRange().cloneRange(),r?(b.commonAncestorContainer=a.commonAncestorContainer,b.startContainer=a.startContainer,b.startOffset=a.startOffset,b.endContainer=a.endContainer,b.endOffset=a.endOffset,b.collapsed=a.collapsed):b=a,b}function j(a){var b=s.getRange().cloneRange(),d=i(b),e=!!c.pluginUtils.getSelectedItem(),g=s.getClosest(d.commonAncestorContainer,"TD TH"),j=c.isPluginLoaded("table");z=g&&g.hasAttribute("data-cui-selected"),(!f(d,x)||g&&j||x.hasSelectedImage!==e)&&(h(d,a),c.trigger("selectionrangechange")),m=null,x=d,x.hasSelectedImage=e,c.lastRange=b}function k(a){return!(!a.collapsed||a.startContainer.nodeName!==c.constants.NodeNames.P||0!==a.startOffset)}function l(a){a.preventDefault(),p(t).off("mousedown.safari")}var m,n,o,p=c.$,q=this,r=c.browser.ie&&parseInt(c.browser.version,10),s=c.selectionManager,t=c.getDoc(),u=c.getBody(),v=u,w=[],x={},y=!1,z=!1;q.findLeafNode=function(a,b){for(;a&&a.hasChildNodes()&&a.childNodes[b];)a=a.childNodes[b],a&&(b=3===a.nodeType?a.length:a.childNodes.length);return a},q.getTempTextNode=function(a){var b,d=c.getDoc(),e=d.createTextNode(""),f=d.createElement("span");return p(f).data("target",a),f.appendChild(e),b=c.styleUtils.getComputedStyle(a,s.getAncestors(a)),p.map(b,function(a,c){f.style[c]=b[c]}),e},q.getSelectedTextNodes=function(b){var d,e,f,g,h,i,j=c.contentUtils,k=[];for(b=b||s.getRange(),d=b.startContainer,e=b.endContainer,g=b.startOffset,h=b.endOffset,i=b.commonAncestorContainer,3!==e.nodeType&&(d===e&&"BODY"===d.nodeName&&(e=j.getLeafNode(d.lastChild,!1),d=d.firstChild),e===i&&(e=q.findLeafNode(e,h),h=0),d===i&&(d=q.findLeafNode(d,g))),f=new a(d,i),3===d.nodeType&&d.length===g&&(d=f.next());d;){if(3===d.nodeType){if(d===e&&0===h)break;k.push(d)}else c.contentUtils.isEmptyLine(d.parentNode,!0)&&k.push(q.getTempTextNode(d));if(d===e)break;d=f.next()}return k},q.getSelectedTextNodesInTable=function(b,d){for(var e=s.getClosest(b[0],"table"),f=s.getLeafNode(b[b.length-1]),g=b[0],h=[],i=new a(g,e);g&&(3===g.nodeType?h.push(g):c.contentUtils.isEmptyLine(g.parentNode,!0)&&h.push(q.getTempTextNode(g)),g!==f);)"TABLE"===g.nodeName||/^(?:td|th)$/i.test(g.nodeName)&&!d&&"true"!==g.getAttribute("data-cui-selected")?g.nextSibbling?g=i.nextSibbling():(g=s.getLeafNode(g),i.current(g),g=i.next()):g=i.next();return h},q.contentChanged=function(a,b,d,e,f){var h,i,j,l,m,n,o,r=c.styleUtils,t=c.pluginUtils;if(a=a||s.getRange(),b=b||s.getCurrentNode(),h=s.getCursorPosition(),a.collapsed?(m=t.getSelectedCells(),m&&s.getClosest(m[0],"table")===s.getClosest(a.startContainer,"table")?j=q.getSelectedTextNodesInTable(m):(l=t.getCurrentCell())?a.startContainer.nodeType===c.constants.NodeTypes.TEXT_NODE?j=[a.startContainer]:k(a)?(n=a.startContainer,j=[]):j=q.getSelectedTextNodesInTable([l],!0):j=[]):j=q.getSelectedTextNodes(a),j&&j.length>0?(n=j[0].parentNode,u.contains(n)||(j=j.shift(),n=p(n).data("target").parentNode)):n=h.element,8!==n.nodeType&&"BR"!==n.nodeName||(n=n.parentNode),d=d||s.getAncestors(n),i=r.getComputedStyle(n,d),(!a.collapsed||m)&&j.length>=2&&(i=r.checkStyle(i,j),g(j)),c.pluginUtils.getSelectedItem())for(o in i)i[o]="";c.trigger("selectionchange",{node:b,parents:d,textNodes:j,range:a,keyCode:e,lastTextNode:f,styles:i,cursor:h})},q.refreshLastRange=function(){c.lastRange=s.getRange().cloneRange(),x=i(c.lastRange),v=c.lastRange.startContainer},p(t).on("mousedown mouseup",function(a){m&&clearTimeout(m),m=setTimeout(function(){j(a.keyCode)},20)}),p(t).on("keydown",function(a){m&&clearTimeout(m),s.getRange().collapsed||p.ui.isNavigationKeyCode[a.keyCode]||(o=!0,m=setTimeout(function(){j(a.keyCode)},20))}),p(t).on("keyup",function(a){n&&clearTimeout(n),c.pluginUtils.isCharKeyCode(a.keyCode)&&!o||(o=!1,n=setTimeout(function(){j(a.keyCode)},20))}),c.browser.safari&&p(t).on("mousedown",function(a){c.isEmpty(!0)&&"HTML"===a.target.nodeName&&a.preventDefault()}).on("click",function(){c.isEmpty(!0)&&p(t).on("mousedown.safari",l)}).on("mouseout",function(){p(t).off("mousedown.safari")}),q.destroy=function(){m&&clearTimeout(m),p=null,q=null,r=null,s=null,t=null,u=null,v=null,w=null,x=null,m=null,y=null,z=null}}return c.prototype={getLastSelectionNode:function(){return this.lastNode}},c}),d("utilities/SelectionUtils",["utilities/NodeTracker"],function(a){function b(b){function c(a){var b,d;return a&&(d=a.previousSibling,d||(b=a.parentNode,b&&"BODY"!==b.nodeName&&(d=c(b)))),d}function d(a){var b,c;return a&&(c=a.nextSibling,c||(b=a.parentNode,b&&"BODY"!==b.nodeName&&(c=d(b)))),c}function e(a,b){var d;if(!a||b&&l.indexOf(a.nodeName)!==-1)return null;if(3===a.nodeType)return a;if(1===a.nodeType){if("BR"===a.nodeName)return a;d=a.lastChild}return d?e(d,b):e(c(a),b)}function f(a,b){var c;if(!a||b&&l.indexOf(a.nodeName)!==-1)return null;if(3===a.nodeType)return a;if(1===a.nodeType){if("BR"===a.nodeName)return a;c=a.firstChild}return c?f(c,b):f(d(a),b)}function g(a){var c,d=a.startContainer,e=a.endContainer,f=function(a,b){var c,d,e=m.length;for(c=0;c<e;c++)if(d=m[c],b.nodeName===d&&a.nodeName!==d)return!0;return!1};return!a.collapsed&&f(d,e)&&(c=a.endOffset-1,e=e.childNodes[c<0?0:c],b.selectionManager.getClosest(d,e.nodeName)===e)?e:null}function h(a,c,d,e){var f=a;return a&&1===a.nodeType&&a.childNodes.length>0&&(d?a=a.childNodes[c]:(a=a.childNodes["BODY"===a.nodeName?c-1:c],0===c&&!b.contentUtils.isLineNode(f)&&f.previousSibling?a=f.previousSibling:a||(a=f),e||(a=b.selectionManager.getLeafNode(a)))),a}function i(a){var c,d,e,f,g,h=a.startContainer,i=a.endContainer,j=a.startOffset,k=a.endOffset,l=function(a){for(;a&&"BODY"!==a.nodeType&&!(g=a.nextSibling);)a=a.parentNode;return g};if(b.browser.ie&&!a.collapsed&&3===h.nodeType&&h.length===a.startOffset)for(c=b.selectionManager.getAncestors(h),f=c.length,e=0;e<f;e++)if(d=c[e],b.lockUtils.hasLockedStyle([d])){g=l(h),g&&a.setStart(g,0);break}return!b.browser.ie||a.collapsed||"BODY"!==h.nodeName&&"BODY"!==i.nodeName||("BODY"===h.nodeName&&(h=h.childNodes[a.startOffset],j=0),"BODY"===i.nodeName&&(i=i.childNodes[a.endOffset-1],1===i.nodeType?k=i.childNodes.length:3===i.nodeType&&(k=i.textContent.length)),b.selectionManager.setRange(h,j,i,k),a=b.selectionManager.getRange()),a}var j=this,k=b.$,l="META PARAM EMBED SOURCE WBR TRACK AREA BASE BASEFONT BR COL FRAME HR IMG INPUT ISINDEX LINK P H1 H2 H3 H4 H5 H6 TD TH DIV UL OL LI TABLE DL DT DD HEADER FOOTER ADDRESS PRE CENTER ARTICLE SECTION NAV".split(" "),m=["BODY","UL","OL","TD"];j.getStartTextNodeByRange=function(a,b){var c,d;if(a)return 3===a.nodeType?c=b>0?a.splitText(b):a:(d=a.childNodes,c=d&&d.length>b?this.getStartTextNodeByRange(d[b],0):f(a)),c},j.getEndTextNodeByRange=function(a,b){var d,f;if(a)return 3===a.nodeType?(b>=0&&b<a.data.length&&a.splitText(b),d=a):(f=a.childNodes,f&&f.length>0&&0!==b?(b=b===-1?f.length-1:b-1,d=this.getEndTextNodeByRange(f[b],-1)):d=e(c(a))),d},j.getTextNodeListByRange=function(a,b,c,e){var g,h,i,j=[];if(3===a.nodeType&&a===c)a.splitText(e),i=a.splitText(b),j.push(i);else{for(g=this.getStartTextNodeByRange(a,b),h=this.getEndTextNodeByRange(c,e);g&&h&&g!==h;)j.push(g),g=f(d(g));g&&j.push(g)}return j},j.getWord=function(a,b,g){function h(a){var b,d,f,g=a?a.data:null;if(g){if(d=g.lastIndexOf(" "),f=g.lastIndexOf(" "),b=d>f?d:f,b===g.length)return;b>=0?(a=a.splitText(b),n.unshift(a)):(n.unshift(a),h(e(c(a),!0)))}}function i(a){var b,c,e,g=a?a.data:null;if(g){if(c=g.indexOf(" "),e=g.indexOf(" "),b=c<0?e:e<0?c:c<e?c:e,0===b)return;b>=0?(a.splitText(b),o.push(a)):(o.push(a),i(f(d(a),!0)))}}var j,k,m,n=[],o=[];return 3===a.nodeType?b<=0?(m=c(a),m&&l.indexOf(m.nodeName)===-1&&(j=e(m),k=a)):b<a.length?(j=a,k=a.splitText(b)):(j=a,k=f(d(a),!0)):a.childNodes&&a.childNodes.length>b&&(a=a.childNodes[b],3===a.nodeType?(m=c(a),m&&l.indexOf(m.nodeName)===-1||(m=a)):m=a,j=e(m),k=f(a)),h(j),g||i(k),n.concat(o)},j.reRangeByShiftEnd=function(){var a,c,d=b.selectionManager;return a=d.getRange(),b.browser.ie&&(c=g(a),c&&1===c.nodeType&&(a.setEndAfter(c.lastChild||c),d.setSingleRange(a))),a},j.getValidOffset=function(a,b){return 3===a.nodeType?b=b>a.length?a.length:b:1===a.nodeType&&(b=b>a.childNodes.length?a.childNodes.length:b),b},j.setValidRange=function(a,c,d,e){k(a).parents("body")[0]&&k(d).parents("body")[0]&&b.selectionManager.setRange(a,j.getValidOffset(a,c),d,j.getValidOffset(d,e))},j.getSelectedElements=function(c,d,e){var f,g,j,k,l,m,n,o=[],p=b.selectionManager;for(e?(g=e,k=p.getLeafNode(e,!1)):(f=p.getRange(),f=f.collapsed&&!c?b.contentUtils.selectWordRange(f,!0):i(f),j=h(f.startContainer,f.startOffset,!0),g=j,k=h(f.endContainer,f.endOffset,!1,f.startContainer===f.endContainer)),l=new a(g,k),g&&3===g.nodeType&&!d&&o.push(g);g&&(d?3===g.nodeType&&o.push(g):1===g.nodeType&&o.push(g),g!==k);)g=l.next();return k&&j!==k&&3===k.nodeType&&!d&&o.push(k),d&&f&&(1===f.endContainer.nodeType?m=0:(k=f.endContainer,m=f.endOffset),n=o.length-1,3===k.nodeType&&0===m&&o[n]&&o[n]===k&&(o=o.splice(0,n)),j=f.startContainer,m=f.startOffset,3===j.nodeType&&m===j.length&&o[0]===j&&(o=o.splice(1))),o},j.destroy=function(){j=null,k=null,l=null,m=null}}return b}),d("utilities/ZWSUtils",["utilities/EditorConstants"],function(a){function b(b){function c(a,b){var c;return!(!a.collapsed||(c=j(b).find(a.startContainer),1!==c.length))}function d(a){a&&3===a.nodeType&&""===a.nodeValue&&j(a).remove()}function e(){return b.getDoc().createTextNode("")}function f(a){var b=i.createZeroWidthSpaceNode();return a.insertNode(b),d(b.nextSibling),d(b.previousSibling),b}function g(a){var c=a.lastTextNode,d=a.textNodes,e=a.range,f=a.node,g=function(a){var b,d;if(a)for(b=a.length,d=0;d<b;d++)if(c===a[d])return!0;return!1};!d.length&&e.collapsed&&(d=b.contentUtils.getAllChildren(f,function(a){return a&&3===a.nodeType})),g(d)||e.startContainer===c||e.endContainer===c||c&&c.nodeValue&&c.nodeValue.length>2&&m.test(c.nodeValue)&&(c.nodeValue=i.removeZeroWidthSpaceChar(c.nodeValue))}function h(){var a,d,e,f,g,h,k,m,n,o,p=[],q=b.selectionManager;if(a=j(b.getBody()).find(".cui-zws"),d=q.getRange(),m=a.length){for(k=0;k<m;k++)f=a[k],g=j(f),c(d,f)||(n=g.find("img"),h=f.textContent,!n[0]&&i.isZeroWidthSpaceChar(h)?(b.browser.ie||(e=q.getClosest(f,l),e&&e.textContent===h&&f.parentNode&&f.parentNode.insertBefore(b.getDoc().createTextNode(" "),f)),p.push(f)):(g.removeClass("cui-zws"),o=f.firstChild,1===f.childNodes.length&&3===o.nodeType&&1===o.length&&(o.nodeValue=i.removeZeroWidthSpaceChar(o.nodeValue)),""===g.attr("class")&&(g.removeAttr("class"),f.attributes.length||"SPAN"!==f.nodeName||j(f.childNodes).unwrap())));j(p).remove()}}var i=this,j=b.$,k=a.StyleElements,l=a.keys(a.LineBlockElements).join(","),m=/[\u200B\uFEFF]/g;i.createZeroWidthSpaceNode=function(){var b=e();return b.nodeValue=a.UNICODE_CHAR_CODE.ZERO_WIDTH_SPACE,b},i.getZeroWidthSpace=function(a){var c,d=a.startContainer;return c=3===d.nodeType&&b.zwsUtils.isZeroWidthSpaceChar(d.nodeValue)?d:f(a)},i.startWithZeroWidthSpaceChar=function(a){return/^[\u200B\uFEFF]/g.test(a)},i.isZeroWidthSpaceChar=function(a){return/^[\u200B\uFEFF]$/g.test(a)},i.isZeroWidthSpaceTextNode=function(a){return!(!a||!i.isZeroWidthSpaceChar(a.nodeValue))},i.isOnlyZeroWidthSpaceLine=function(a){var b=a.lineElement,c=a.node,d=b.childNodes.length,e=function(a){for(;a&&a.firstChild;){if(1!==a.childNodes.length)return null;a=a.firstChild}return a};return!(1!==a.offset||1!==a.col||3!==c.nodeType||!i.isZeroWidthSpaceChar(c.nodeValue)||e(b.firstChild)!==c||1!==d&&(2!==d||"BR"!==b.lastChild.nodeName))},i.insertZWSInEmptyLines=function(c,d,e){var f,g,h,i,k,l,m,n=0,o=[],p={},q=b.zwsUtils,r=a.NodeStyles,s=function(a){return!(0!==a.textContent.length&&!b.zwsUtils.isZeroWidthSpaceChar(a.textContent))},t=function(a){var b,c,d,e;if(a&&s(a)){for(b=a;b&&1===b.childNodes.length;)b=b.firstChild;if(!b)return null;if(c=b.childNodes,e=b.nodeType,d=b.firstChild,3===e&&s(b)||1===e&&0===c.length)return b;if(2===c.length&&1===d.nodeType&&0===d.childNodes.length&&"BR"===b.lastChild.nodeName&&0===d.textContent.length)return d}return null};for(g=c.length,f=0;f<g;f++)h=c[f],h.childNodes.length||o.push(h),(l=t(h))&&(n++,i=j(l),3===l.nodeType?q.isZeroWidthSpaceTextNode(l)?k=l:(k=q.createZeroWidthSpaceNode(),i.before(k),i.remove()):(m=l.firstChild,m&&q.isZeroWidthSpaceTextNode(m)?(k=m,j(k).wrap(r[d].wrap)):m||"BR"!==l.nodeName?i.prepend(r[d].wrap):i.wrap(r[d].wrap)),e&&j(k.parentNode).css(r[d].attrName,e));return p.isAllEmptyLines=g===n,p.pEmptyLines=o,p},i.removeZeroWidthSpaceChar=function(a){return a.replace(m,"")},i.removeZeroWidthSpace=function(){var a,c,d,e=b.selectionManager;a=e.getCursorPosition(),a&&(c=a.node,d=a.offset,3===c.nodeType&&i.startWithZeroWidthSpaceChar(c.nodeValue)&&(c.parentNode.normalize(),c.nodeValue=i.removeZeroWidthSpaceChar(c.nodeValue),a.offset=d?d-1:0,e.setCursorPosition(a)))},i.removeZWSTextNode=function(a){a&&3===a.nodeType&&a.parentNode&&b.zwsUtils.isZeroWidthSpaceChar(a.nodeValue)&&a.parentNode.removeChild(a)},i.removeZWS=function(a,c){b.pluginUtils.isCharKeyCode(c.keyCode)||(h(),g(c))},i.removeTaggingZeroWidthSpace=function(a){var b;a&&(b=j(a),b.removeClass("cui-zws"),""===b.attr("class")&&b.removeAttr("class"))},i.taggingZeroWidthSpace=function(a){var c,d=b.selectionManager.getCursorPosition();a&&!i.isZeroWidthSpaceChar(d.lineElement.textContent)&&(c=a.parentNode,c&&k[c.nodeName]&&1===c.childNodes.length&&j(c).addClass("cui-zws"))},i.destroy=function(){i=null,
j=null,k=null,l=null,m=null}}return b}),d("Editor",["jqueryCafe","utilities/ColorUtils","utilities/EditorConstants","utilities/ScriptLoader","utilities/SelectionChange","utilities/SelectionUtils","utilities/NodeTracker","utilities/CSSParser","utilities/UnitConverter","UIManager","SelectionManager","utilities/ContentUtils","utilities/LockUtils","utilities/StyleUtils","utilities/PluginUtils","utilities/ZWSUtils","ShortcutManager","HistoryManager","CommandManager","CommandHelper"],function(a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){function v(b){var c,d,e,f;for(e=b.indexOf(",")?b.split(","):[b],c=0,d=e.length;c<d;c++)f=a.trim(e[c]),(/\./g.test(f)&&f&&!/[\[\]\#]/g.test(f)||/^\#/g.test(f)&&!/^\#cafe-note-contents/g.test(f))&&(e[c]="#"+B+" "+f);return e.join(",")}function w(a){var b,c,d="",e=[],f=[],g=/(\s|^|\\,|\\>|\\+|\\~)(table)(\W|\\-|$)/gim,h=/(\s|^|\\,|\\>|\\+|\\~)(td)(\W|\\-|$)/gim;if(e=a.split(g),e.length>=2)for(c=e.length,b=0;b<c;b++)d+=g.test(e[b])?".cui-real-table":e[b];if(d&&(a=d,d=""),f=a.split(h),f.length>=2){for(c=f.length,b=0;b<c;b++)d+=h.test(f[b])?".cui-real-td":f[b];return d}return a}function x(b,f,g){var h,i,j,l,m,n="SCRIPT";if(this.configs=f=a.extend({id:b,plugins:"",blockElement:"p",doctype:"<!DOCTYPE html>",useDefaultStyleByLink:!0,theme:"deploy",enable_object_contents:!1,exclude_content_protect_style:!1},f),f.panel&&"string"==typeof f.panel&&""!==f.panel||(f.panel="edit codeview preview"),(!f.height||f.height<g.editorConstants.EDITOR_MIN_HEIGHT)&&(f.height=g.editorConstants.EDITOR_MIN_HEIGHT),f.invalid_elements?/(?:^script$)|(?:^script[\,\s\uFEFF\xA0])|(?:[\,\s\uFEFF\xA0]script[\,\s\uFEFF\xA0])|(?:[\,\s\uFEFF\xA0]script$)/gi.test(f.invalid_elements)||(f.invalid_elements+=", SCRIPT"):f.invalid_elements=n,f.ignore_head_elements=d.IgnoreHeadElements,this.$=a,this.language=f.language||"ko_KR",this.id=b,this.baseURL=g.baseURL,this.browser=g.browser,this.os=g.os,this.suffix=g.suffix,this.editorManager=g,this.scriptLoader=new e,this.uiManager=new k,this.buttons={},this.menuItems={},this.panels={},this.commands={},this.shortcuts={},this.theme={},this.dialogs={},this.style="",this.colorUtils=c,this.constants=d,this.finalTasks=[],f.default_skins_path||(f.useDefaultStyleByLink=!1,f.default_skins_path=this.baseURL+"skins/"),/\/$/.test(f.default_skins_path)||(f.default_skins_path+="/"),f.support_svg&&(d.SupportImageType.push("image/svg+xml"),d.SupportImageExtension.push("svg")),f.default_font_size=f.default_font_size||d.DEFAULT_FONT_SIZE,f.default_font_family){for(i=f.default_font_family.split(","),j=0,l=i.length,m=[];j<l;j++)h=this.$.trim(i[j]),/[^A-Za-z-]|\s/g.test(h)&&(h="'"+h.replace(/[\'|\"]/g,"")+"'"),m.push(h);f.default_font_family=m.join(",")}else f.default_font_family=d.DEFAULT_FONT_FAMILY;f.default_font_family=f.default_font_family||d.DEFAULT_FONT_FAMILY,f.default_line_height=f.default_line_height||d.DEFAULT_LINE_HEIGHT,z=this.browser.ie?this.configs.new_line_without_blank&&this.browser.version>10?"<br cui-ebr='true'>":"&nbsp;":"<br>",y=a("<p>"+z+"</p>")[0]}var y,z,A=["newdocument","fontfamily","fontsize","fontcolor","fontbgcolor","italic","bold","underline","strikethrough","information","alignment","codeview","colorpicker","copy","cut","paste","preview","selectall","undo","redo","indent","spanstyle","commonformat","blockformat"],B=d.CONTENTS_ID,C="false";return x.prototype={setup:function(){function b(){var b=h.language.indexOf("_");h.language=a.trim(h.language.substr(0,b).toLowerCase()+h.language.slice(b).toUpperCase()),h.editorManager.i18n.getLanguagePack(h.language)||h.scriptLoader.addQueue(h.baseURL+"langs/"+h.language+h.suffix+".js")}function c(){k.panel?(k.panel.indexOf("preview")===-1&&k.plugins.indexOf("readonly")!==-1&&(k.panel+=" preview",h.previewAddedByReadonly=!0),(k.hide_tab_list||k.panel.indexOf("codeview")===-1)&&A.splice(A.indexOf("codeview"),1),(k.hide_tab_list||k.panel.indexOf("preview")===-1)&&A.splice(A.indexOf("preview"),1)):k.panel="edit codeview preview"}function d(){var b,d,e,f,g=h.editorManager.pluginManager;if(g.setExceptions(A),c(),k.plugins){for(a.isArray(k.plugins)&&(k.plugins=k.plugins.join(" ")),k.plugins=k.plugins.replace(/(:?\s|,){1,}/g," "),k.plugins=a.trim(k.plugins.toLowerCase()),k.plugins=k.plugins.split(" "),f=a.inArray("core",k.plugins);f!==-1;)k.plugins.splice(f,1);k.plugins.unshift("core")}else k.plugins=["core"];for(d=0,e=k.plugins.length;d<e;d++)b=k.plugins[d],g.get(b)||g.load(h.scriptLoader,b,{prefix:h.baseURL+"plugins/",plugin:b,suffix:"/plugin"+h.suffix+".js"})}function e(){return h.editorManager.themeManager.load(h,"deploy",{prefix:h.baseURL+"themes/",theme:"deploy",suffix:h.suffix+".js"}),!0}function f(){function b(b){var c,d="#"+B,e="body",f=e+d,n="div"+d,o=k.default_font_size,p=k.default_font_family,q=k.default_line_height;b=b||"",c=i.parse("<style>"+b+"</style>",{trimSpace:!0})||{},c[d]||(c[d]={}),o&&(isNaN(o)?/px$/i.test(o)&&(o=j.convertPXToPT(o)+"pt"):o+="pt",c[d]["font-size"]=o,k.default_font_size=o),p&&(k.default_font_family=p,/\\AD74 \\B9BC /i.test(p)&&window.unescape&&(p=p.replace(/\\AD74 \\B9BC /gi,window.unescape("%uAD74%uB9BC"))),c[d]["font-family"]=p),q&&(isNaN(q)&&/\%$/i.test(q)&&(q=parseFloat(q),q/=100),c[d]["line-height"]=q,k.default_line_height=q),h.cssObj=g(a.extend({},c),d),q&&(h.cssObj.P&&(h.cssObj.P["line-height"]=q),h.cssObj.LI&&(h.cssObj.LI["line-height"]=q)),/^true$/i.test(C)?h.style='\n<style class="cui-content-default" data-cafe-default="true">'+b+'</style>\n<style class="cui-content-default" data-user-config="true">\n'+e+" {margin: 10px; font-size: "+k.default_font_size+"; font-family:"+k.default_font_family+"; line-height:"+k.default_line_height+";}\np {line-height:"+k.default_line_height+";}\n"+e+","+e+" p,"+e+" li,"+e+" h1,"+e+" h2, "+e+" h3,"+e+" h4,"+e+" h5,"+e+" h6 {font-family:"+k.default_font_family+"; line-height:"+k.default_line_height+";}\n</style>":(h.configs.useDefaultStyleByLink?(h.style='<link rel="stylesheet" type="text/css" class="cui-content-default cui-content-view" href="'+l+'">\n',h.configs.exclude_content_protect_style||(h.style+='<link rel="stylesheet" type="text/css" class="cui-content-default cui-content-browser-default" href="'+m+'">\n')):h.style='<style class="cui-content-default" data-cafe-default="true">'+b+"</style>",h.style+='<style class="cui-content-default" data-user-config="true">\n'+f+","+n+" {margin: 10px; font-size: "+k.default_font_size+"; font-family:"+k.default_font_family+"; line-height:"+k.default_line_height+";}\n"+f+","+n+","+f+" p,"+f+" li,"+f+" h1,"+f+" h2, "+f+" h3,"+f+" h4,"+f+" h5,"+f+" h6,"+n+" p,"+n+" li,"+n+" h1,"+n+" h2, "+n+" h3,"+n+" h4,"+n+" h5,"+n+" h6 {font-family:"+k.default_font_family+"; line-height:"+k.default_line_height+";}</style>\n")}function c(){var a=0,c="";d===e&&(1===e?b(n.view):(a=n.view.indexOf("#cafe-note-contents {"),a===-1&&(a=n.view.indexOf("#cafe-note-contents{")),a>-1&&(c=n.view.slice(0,a),c+=n.browserDefaultStyle,c+=n.view.slice(a,n.view.length)),b(c)))}var d=0,e=1,f=h.configs.default_skins_path+h.configs.skin,l=f+"/view"+h.suffix+".css",m=f+"/protectview"+h.suffix+".css",n={view:"",browserDefaultStyle:""};/^true$/i.test(C)||h.configs.exclude_content_protect_style||(e=2,h.scriptLoader.loadContentAjax(m,function(a){a=a.slice(a.indexOf("*/")+2,a.length),n.browserDefaultStyle=a,h.brorwseDefStyleStr=a,d++,c()},function(){})),h.scriptLoader.loadContentAjax(l,function(a){n.view=a,d++,c()},function(){var a="#"+B,b="__BODY_ID__ table td,__BODY_ID__ table th {min-width:20px;min-height:22px;padding-left:2px;padding-bottom:2px;padding-right:2px;padding-top:2px;}\n__BODY_ID__ li, __BODY_ID__ p {line-height:1.2;margin-top:0;margin-bottom:0;}\nbody__BODY_ID__,div__BODY_ID__ {font-family:'맑은 고딕';font-size:10pt;word-wrap:break-word;margin-left:10px;margin-bottom:10px;margin-right:10px;margin-top:10px;}\n";b=b.replace(/__BODY_ID__/g,a),h.style='<style class="cui-content-default">\nbody'+a+", div"+a+" {"+b+"}</style>\n"})}function g(b,c){function d(c,d,e,h){var i,j,k,l,m;for(c=c.indexOf(",")?c.split(","):[c],i=0,j=c.length;i<j;i++)k=a.trim(c[i]),d.test(k)&&(l=k.replace(e,"").toUpperCase(),m=f[l]||h||g,f[l]=a.extend({},m,b[c]))}var e,f={},g=b[c]||{},h=new RegExp("^(?:body|div)?\\"+c+"(?: table)? \\w+?$","i"),i=new RegExp("^(?:body|div)?(?:)\\"+c+"(?: table)? ","i"),j=new RegExp(c+"(?: (?:ul|ol))+","i"),k=new RegExp(c+" ","i");g=a.extend({},b[c+" *,"+c]||b[c+","+c+" *"],b[c]),g=a.extend({},g,b["div"+c+" *,body"+c+" *"]||b["body"+c+" *,div"+c+" *"]),f={defaultStyle:g};for(e in b)/^(?:div|body)/i.test(e)||d(e,h,i);for(e in b)/^(?:div|body)/i.test(e)||d(e,j,k,f.UL);for(e in b)/^(?:div|body)/i.test(e)&&d(e,h,i);return f}var h=this,k=h.configs;f(),b(),d(),e(),h.scriptLoader.loadQueue(function(){h.init()}),h.getDefaultStyle=function(a){var b;return a=a?a.toUpperCase():"defaultStyle",h.cssObj&&(b=h.cssObj[a]||h.cssObj.defaultStyle),b}},init:function(){function a(a,b){function c(){return a.apply(this,b)}return c.prototype=a.prototype,new c}function b(c){var d,e,f,h,j,k,l,m=g.editorManager.pluginManager;if("core"===c)for(j=0,k=A.length;j<k;j++)b(A[j]);else if(d=m.get(c),l=[g],d&&!i[c]){for(f=m.getDependencies(c),e=0,h=f.length;e<h;e++)b(f[e]),l.push(i[f[e]]);i[c]=a(d,l)}}function c(a){var b,d=g.editorManager.themeManager,e=d.get(a);e&&(b=d.getParent(a),b&&c(b),g.theme=e(g,g.theme))}var d,e,f,g=this,h=g.configs,i={};for(this.addPanel("edit",{label:g.getText("edit"),contextmenu:["cut","copy","paste","pasteastext","|","alignment","|","copytable","pastetable","nesttable","overwritecells","|","image","media","link","|","selecttable","deletetable","tableproperties","|","tableindent","tableoutdent","|","insertcell","deletecells","mergecells","splitcell","|","tableselection","|","cellsize","|","cellproperties"].join(" ")}),e=0,f=h.plugins.length;e<f;e++)d=h.plugins[e],b(d);g.isPluginLoaded=function(a){return!!i[a]},g.commandHelper=new u(this),c(h.theme),g.one("uicreate",function(){g.off("uicreatefail"),g.initEditorDoc()}),g.one("uicreatefail",function(){g.off("uicreate"),g.editorManager.destroy(g,!0),window.alert("에디터를 정상적으로 생성할 수 없습니다.\n\n체크시 참고사항:\n- 도메인 설정 확인\n    * Same-origin policy을 위반한 코드 또는 도메인 설정 확인\n    * Same-origin policy을 회피하기 위한 코드 또는 관련 도메인 설정\n    등\n\n\nCannot launch the editor.\n\nIf you need, refer to the following:\n- Domain settings verification\n    * Checks the same-origin policy violation codes or\n      the domain name configuration.\n    * Checks the source codes for relaxing the same-origin policy or\n      checking the domain name configuration.\n    etc.")}),this.uiManager.create(this,{targetId:this.id,configs:this.configs,menuItems:this.menuItems,buttons:this.buttons,panels:this.panels,dialogs:this.dialogs})},getVerifyLog:function(a){var b,c,e,f,g=this.language,h=d.verify(),i=function(a){var b,c=h.d,d=c.y,e=c.m,f=c.d;return"en_US"===g&&(b=["Jan.","Feb.","Mar.","Apr.","May","Jun.","Jul.","Aug.","Sep.","Oct.","Nov.","Dec."],e=b[e-1]),a=a.replace("_YYYY_",d),a=a.replace("_MM_",e),a=a.replace("_DD_",f)};return h.t&&h.e>=h.c?(c=this.getText("license.trial"),c=c.replace("_REMAIN_",h.r),b="warning",f=i(this.getText("license.enddate")),a?c=this.getText("license.trial.guide")+"<br>"+c+"<br>"+f:c+=" "+f):3!==h.u||12!==h.k||h.e>21201231?(c=this.getText("license.wrong"),b="danger"):h.e<h.c&&(c=i(this.getText("license.expire")),b="danger",f=i(this.getText("license.enddate")),c+=a?"<br>"+f+"<br>"+this.getText("license.expire.guide"):" "+f),c&&(e={message:c,type:b},h.fd&&(e.forceDestroy=h.fd,e.message="CafeNote "+e.message)),e},initEditorDoc:function(){var c,d,e,h,i,j=this.browser,k=this.configs,u=this.getDoc(),v=this.commands,w=this.shortcuts,x=this.getVerifyLog(),y=this,z="",A="",C=function(){i=y.getBody(),i.contentEditable=!0,y.selectionManager=new l(y),y.shortcutManager=new r(y),y.historyManager=new s(y),y.commandManager=new t(y,y.commandHelper),y.selectionChange=new f(y),y.selectionUtils=new g(y),y.contentUtils=new m(y),y.lockUtils=new n(y),y.styleUtils=new o(y),y.pluginUtils=new p(y),y.zwsUtils=new q(y);for(d in v)e=v[d],y.commandManager.addCommand(e);for(h in w)d=w[h],y.shortcutManager.addShortcut(h,d);j.ie&&j.version>10?a(i).on("mscontrolselect.cafe",function(a){a.preventDefault()}):j.firefox&&(u.execCommand("enableObjectResizing",!1,"false"),u.execCommand("enableInlineTableEditing",!1,"false")),y.browser.ie&&a(u.documentElement).on("mousedown.cafe",function(a){a.target===u.documentElement&&a.preventDefault()}),x?x.forceDestroy?y.on("editoraftercreate",function(){y.editorManager.destroy(y.id),window.alert(x.message)}):y.uiManager.notibar(x.type,"<strong>"+x.message+"</strong>","warning"===x.type):x=b,y.trigger("editareacreate"),y.trigger("editorinitialized"),y.trigger("editorcreate"),y.trigger("editoraftercreate")};c=k.doctype+"<html>\n<head>\n",c+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" class="cui-content-default">',c+=this.style,c+='<link type="text/css" rel="stylesheet" href="'+this.baseURL+"skins/"+k.skin+"/designarea"+this.suffix+'.css" class="cui-content-default"></head>',k.default_font_size&&(A+="font-size:"+k.default_font_size+";"),k.default_font_family&&(A+="font-family:"+k.default_font_family+";"),k.default_line_height&&(A+="line-height:"+k.default_line_height+";"),c+='<body id="'+B+'" spellcheck="false" style="'+(k.useDefaultStyleByLink?"margin:10px;":"")+z+A+'">',this.browser.safari&&(c+='<div data-cui-filter="true" class="cui-dummyline">&nbsp;</div>'),c+=this.createEmptyLine(!0),c+="</body></html>",u.open("text/html","replace"),u.write(c),u.close(),this.browser.ie?C():this.uiManager.getEditArea()[0].addEventListener("load",function(){C()})},final:function(){for(var a,b=this.finalTasks;b&&b.length;)a=b.pop(),"function"==typeof a&&a(),a=null},createEmptyLine:function(a){var b=y.cloneNode(!0);return a?b.outerHTML:b},insertEmptyLine:function(a){var b=this.createEmptyLine();return a=a||this.getBody(),a.appendChild(b),b},isFocused:function(){var a=this.editorManager.focusedEditor;return a===this},focus:function(a){var b;if(!a){if(b=this.getBody(),b.setActive)try{b.setActive()}catch(a){b.focus()}else b.focus();this.trigger("editorfocus")}this.editorManager.activeEditor=this,this.editorManager.focusedEditor=this},blur:function(){var a,b=this.editorManager.focusedEditor;b===this&&(this.editorManager.focusedEditor=null),this.browser.ie?(a=document.body,a.focus()):(a=this.getBody(),a.blur())},getResourcesUrl:function(){return this.configs.resourcesUrl?this.configs.resourcesUrl:this.baseURL+"resources/"},getText:function(a){return this.editorManager.i18n.getText(this.language,a)},addCommand:function(a){a&&a.command&&!this.commands[a.command]&&(this.commands[a.command]=a)},execCommand:function(a,b){this.commandManager.execCommand(a,b)},addShortcut:function(a,b){a&&b&&!this.shortcuts[a]&&(this.shortcuts[a]=b)},getShortcut:function(b){var c,d,e=[],f=this.shortcuts,g=this.commands;if(!b)return e;for(c in f)d=f[c],d===b&&a.inArray(c,e)===-1&&e.push(c);return g[b]&&(c=g[b].shortcut,c&&a.inArray(c,e)===-1&&e.push(c)),e},setContent:function(a,b,c){var d,e=this;return d=e.selectionManager.setContent(a,b),e.isReadOnly&&e.isReadOnly()&&e.updateReadOnly(),e.trigger("contentchanged"),c?e.trigger("historyinitialize"):e.trigger("historypushed"),d},getContent:function(a){return this.selectionManager.getContent(a)},getContentWithBody:function(a,b){return this.selectionManager.getContentWithBody(a,b)},getHeight:function(){return this.$(this.getWin()).height()},setHeight:function(b,c){var d,e,f,g,h,i,j=this.configs,k=this.$(this.getBody()),l=this.uiManager.getContainer();if(b&&(!j.autoresize||c))return b=parseInt(b,10),g=this.editorManager.editorConstants.EDITOR_MIN_HEIGHT,b<g&&(b=g),d=a(".cui-tabs-panel > .cui-panel",l),e=a("textarea.cui-panel[data-cui-title=codeview]",l),f=a("textarea.cui-panel[data-cui-title=textmode]",l),d.height(b),e.length>0&&(e[0].style.height=b+"px"),f.length>0&&f.height(b),h=parseInt(k.css("margin-top"),10),i=parseInt(k.css("margin-bottom"),10),k.css("min-height",b-h-i+"px"),this.scrollTo(),b},scrollTo:function(a){var b,c,d,e,f,g,h,i=this.$(this.getDoc()),j=this.browser,k=5;if(a=a||this.selectionManager.getRange(),h=a.startContainer,j.ie&&parseInt(j.version,10)<=9?(f=document.createRange(),e=a.nodeName?a:a.endContainer||a.startContainer,f.selectNode(e)):f=a,f&&f.getClientRects&&(c=f.getClientRects(),c&&0===c.length&&(g=f.startContainer,g&&g.getClientRects&&(c=g.getClientRects()),0===c.length&&1===h.nodeType&&(c=[h.getBoundingClientRect()])),c&&c.length>0)){if(c=c[0],b=this.getHeight(),d=i.scrollTop(),c.top<k)d+=c.top-k;else{if(!(b<c.bottom+k))return;d+=c.bottom-b+k}i.scrollTop(d)}},getWin:function(){var a;return this.contentWindow||(a=this.uiManager.getEditArea(),a&&(a=a[0],this.contentWindow=a.contentWindow)),this.contentWindow},getDoc:function(){var a;return this.contentDocument||(a=this.getWin(),a&&(this.contentDocument=a.document)),this.contentDocument},getBody:function(){return this.getDoc().body},getHead:function(){return this.getDoc().head||a("HEAD",this.getDoc())[0]},getVersion:function(){return this.editorManager.version},getEdition:function(){return this.editorManager.edition},addButton:function(a,b){this.buttons[a]=b},addMenuItem:function(a,b){this.menuItems[a]=b},addContextMenuItem:function(a,b){this.menuItems[a+"ContextMenu"]=b},addPanel:function(a,b){this.panels[a]=b},addDialog:function(a,b){this.dialogs[a]=b},addFinalTask:function(a){this.finalTasks.push(a)},addCommentNode:function(b){var c,e,f,g,h,j,k,l=this,m=l.getDoc(),n=l.getHead(),o=n.firstChild,p=this.configs.ignore_head_elements,q={},r="";if(b&&m.createComment){if("string"==typeof b)j=b,h=m.createComment(j);else if(b.setAttribute(d.USERDATA_ATTRIBUTE_NAME,!0),j=b.outerHTML?b.outerHTML:b.toString(),l.browser.ie&&"META"===b.nodeName&&(r=l.contentUtils.getAttributesString(b),j="<meta"+a.trim(r)+">"),"STYLE"===b.nodeName)if(k=j,o=a("style[data-user-config=true]",n)[0].previousElementSibling,/(?:<\!--|-->)/.test(k)&&(c=!0,k=k.replace(/<\!--/gi,"").replace(/-->/gi,"")),k=a.trim(k),e=i.parse(k,{usePlainParse:!0})){for(f in e)g=v(f),g=w(g),q[f]=g;j=i.serialize(e,{rename:!0},q),c&&(j="<!--\n"+j+"\n-->"),r=l.contentUtils.getAttributesString(b,{TYPE:!0}),h=a('<style type="text/css" '+a.trim(r)+" >\n"+j+"\n</style>")[0]}else h=a(j)[0];else p[b.nodeName]?h=a(j)[0]:(j=b.nodeType===d.NodeTypes.COMMENT_NODE?j.replace(/-->/g,"").replace(/<!--/g,""):j.replace(/-->/g,"--&gt;").replace(/<!--/g,"&lt;!--"),h=m.createComment(j));a(o).after(h)}},getDialog:function(a){return this.uiManager.getWidget("dialog_"+a)},getToolButton:function(a){return this.uiManager.getWidget("toolbar_"+a)},disableToolButton:function(a,b){var c=this.getToolButton(a);c&&(b?c.disable():c.enable())},disableMenuItem:function(a,b){return this.uiManager.disableMenuItem(a,b)},toggleMenuItem:function(a,b){return this.uiManager.toggleMenuItem(a,b)},disableContextMenuItem:function(a,b){return this.uiManager.disableMenuItem(a+"ContextMenu",b)},dialog:function(a){this.uiManager.dialog(a)},alert:function(a){this.uiManager.alert(a)},remove:function(){var b;this.removed||(!this.RemoveCallByManager&&console&&console.warn&&console.warn("[Warning] The editor.remove() API is deprecated and will be removed in a future release. Please use the cafe.destroy() API instead."),this.removed=!0,b=this.uiManager.getContainer(),a(this.getWin()).off(),a(this.getDoc()).off(),a(this.getBody()).off(),a(b).off(),a(b).remove())},destroy:function(){var b=this,c=b.getDoc(),d=c.body;this.removed||(b.final(),a(b.getWin()).off(),a(c).off(),b.off(),b.zwsUtils.destroy(),b.pluginUtils.destroy(),b.styleUtils.destroy(),b.lockUtils.destroy(),b.selectionChange.destroy(),b.commandManager.destroy(),b.historyManager.destroy(),b.shortcutManager.destroy(),b.selectionManager.destroy(),b.selectionUtils.destroy(),b.contentUtils.destroy(),b.commandHelper.destroy(),b.lastRange&&(b.lastRange=null),b.browser.ie?(a(d).off(".cafe").empty(),a(c.head).empty(),a(c.documentElement).off("mousedown.cafe")):a(d).off().parent().remove(),b.uiManager.destroy(),b.uiManager=null,b.zwsUtils=null,b.pluginUtils=null,b.styleUtils=null,b.lockUtils=null,b.contentUtils=null,b.selectionUtils=null,b.selectionChange=null,b.commandManager=null,b.historyManager=null,b.shortcutManager=null,b.selectionManager=null,b.commandHelper=null,b.finalTasks=null,b.theme=null,b.configs=null,b.language=null,b.id=null,b.baseURL=null,b.browser=null,b.os=null,b.suffix=null,b.scriptLoader=null,b.buttons=null,b.menuItems=null,b.panels=null,b.commands=null,b.shortcuts=null,b.theme=null,b.dialogs=null,b.style=null,b.colorUtils=null,b.constants=null,b.contentDocument=null,b.contentWindow=null,b.$=null,b.cssObj=null,b.isPluginLoaded=null,b.getDefaultStyle=null,b.initRecord=null)},off:function(b){a(this).off(b)},on:function(b,c){a(this).on(b,c)},one:function(b,c){a(this).one(b,c)},trigger:function(b,c){a(this).trigger(b,c)},isEmpty:function(a){var b,c,d,e=this.getBody(),f=e.firstChild,g=this.browser,h=!1;return f&&"cui-spellcheck-result"===f.className&&(f=f.nextSibling),this.selectionManager.isDummyLine(f)&&(f=f.nextSibling),f&&f===e.lastChild&&"P"===f.nodeName&&(b=f.firstChild,c=f.lastChild,d=b&&b===c,g.ie?b?d&&"BR"===b.nodeName?h=!0:d&&3===b.nodeType&&/^[\u200B\uFEFF]?\u00A0$/.test(b.textContent)?h=!0:2===f.childNodes.length&&3===b.nodeType&&3===c.nodeType&&(h=/^[\u200B\uFEFF]$/.test(b.textContent)&&/^\u00A0$/.test(c.textContent)):h=!0:h=d?"BR"===b.nodeName:!(2!==f.childNodes.length||3!==b.nodeType||1!==b.textContent.length||!/[\u200B\uFEFF]/.test(b.textContent)||"BR"!==f.lastChild.nodeName),h=h&&(a||0===f.attributes.length)),h},getUniqueId:function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},disableAllHeader:function(a){this.uiManager.disableAllHeader(a,!0)},enableAllHeader:function(a){this.uiManager.disableAllHeader(a,!1)},backupHeaderStates:function(){this.uiManager.backupHeaderStates()},restoreHeaderStates:function(){return this.uiManager.restoreHeaderStates()},getSupportImageType:function(){return d.SupportImageType}},x}),d("utilities/I18n",[],function(){var a={};return{add:function(b,c){a[b]=c},getText:function(b,c){return c&&a[b]&&a[b][c]?a[b][c.toLowerCase()]:"error: "+c},getLanguagePack:function(b){return b&&a[b]?a[b]:null},data:a}}),d("PluginManager",[],function(){var a={},b={},c={};return{changeUrl:function(a,b){return a.plugin=b,a},getDependencies:function(a){return a in b?b[a]:[]},setExceptions:function(a){var b,d;if(a instanceof Array)for(c={},d=a.length,b=0;b<d;b++)c[a[b]]=!0},load:function(b,d,e){var f,g=this;a[d]||(f=e.prefix+e.plugin+e.suffix,b.addQueue(f,function(){var a,f,h=g.getDependencies(d),i=h.length;for(a=0;a<i;a++)f=h[a],c[f]||g.load(b,f,g.changeUrl(e,f))}))},add:function(c,d,e){var f;a[c]||(CustomEvent.call?f=new CustomEvent(c+"pluginadded",{detail:{plugin:e}}):(f=document.createEvent("CustomEvent"),f.initCustomEvent(c+"pluginadded",!1,!1,{plugin:e})),a[c]=e,b[c]=d,f&&document.dispatchEvent(f))},get:function(b){return a[b]?a[b]:null}}}),d("EditorManager",["jqueryCafe","Editor","PluginManager","ThemeManager","FocusManager","utilities/I18n","utilities/EditorConstants","utilities/ScriptLoader"],function(a,b,c,d,e,f,g,h){function i(a){var b=n.match(a);return b&&b.length>1&&b[1]||""}function j(){var a=i(/(ipod|iphone|ipad)/i).toLowerCase(),b=/silk/i.test(n),c={};return/windows/i.test(n)?(c.name="windows",c.windows=!0,c.version=i(/Windows ((NT|XP)( \d\d?.\d)?)/i)):a||b||!/macintosh/i.test(n)?/linux/i.test(n)&&(c.name="linux",c.linux=!0):(c.name="mac",c.mac=!0,c.version=i(/Mac OS X (\d+([_\.\s]\d+)*)/i).replace(/[_\s]/g,".")),c}function k(){var a,b={};return a=i(/version\/(\d+(\.\d+)?)/i),/edge/i.test(n)?b={name:"Edge",edge:!0,version:i(/(?:edge)[ \/](\d+(\.\d+)?)/i)}:/opera|opr/i.test(n)?b={name:"Opera",opera:!0,version:a||i(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/msie|trident/i.test(n)?(b={name:"Internet Explorer",ie:!0,version:i(/(?:msie |rv:)(\d+(\.\d+)?)/i)},"11.0"!==b.version&&!window.ActiveXObject&&"ActiveXObject"in window&&(b.version="11.0")):/chrome|crios|crmo/i.test(n)?b={name:"Chrome",chrome:!0,version:i(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(n)?(b={name:"Firefox",firefox:!0,version:i(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(n)&&(b.firefoxos=!0)):/safari/i.test(n)&&(b={name:"Safari",safari:!0,version:i(/(?:safari)[ \/](\d+(\.\d+)?)/i)}),/(apple)?webkit/i.test(n)?(b.name=b.name||"Webkit",b.webkit=!0,!b.version&&a&&(b.version=a)):!b.opera&&/gecko\//i.test(n)&&(b.name=b.name||"Gecko",b.gecko=!0,b.version=b.version||i(/gecko\/(\d+(\.\d+)?)/i)),b}function l(a){var b,i,l,m,n,o=document.getElementsByTagName("script");for(i=0;i<o.length;i++)if(b=o[i].getAttribute("src",2),/cafe(?:[\.\_\-][a-z0-9]+)*(.min)?\.js/gi.test(b)&&(l=/(?:\w+\.*)*cafe(?:\-note)?\/(?:\w+\.*)+\/(cafe(?:\-note)?(?:\w+\.*)*(?:.min)?\.js)/.exec(b))){m=l[1],a.baseURL=b.substring(0,b.lastIndexOf(m)),a.suffix=/.min.js/.test(m)?".min":"";break}n=new h,a.pluginManager=c,a.browser=k(),a.os=j(),a.themeManager=d,a.focusManager=new e(a),a.i18n=f,a.editorConstants=g,a.initialed=!0}var m,n=window.navigator.userAgent;m={editors:{},loadedConfigs:{},loadedCSS:[],initialed:!1,suffix:"",version:"2.3.27",edition:"Professional",create:function(c,d,e,f){function g(b){var c={};return b?"object"==typeof b?c=a.extend(c,b):m.loadedConfigs[b]?c=m.loadedConfigs[b]:a.ajax({url:b,type:e,async:!1,dataType:"json",timeout:2e3,success:function(a){c=a,m.loadedConfigs[b]=c},error:function(a,b){c.errorMessage=b,c.errorCode=a.status,c.load_fail=!0}}):c.load_fail=!0,c}function h(b){var c,d;a.inArray(b,m.loadedCSS)===-1&&(c=document.createElement("link"),c.rel="stylesheet",c.type="text/css",c.href=b,d=document.getElementsByTagName("head")[0],d.appendChild(c),m.loadedCSS.push(b))}function i(){window.alert("에디터 설정 정보를 정상적으로 로드할 수 없습니다.\n\n체크 시 참고사항:\n- 해당 브라우저 버전 및 보안상의 제약사항\n- 에디터 설정파일 경로, 에디터 생성 코드 등 에디터 설정값\n- JSON 파일에 대한 서버 설정 정책\n등\n\n\nCannot load the editor configuration data.\n\nIf you need, refer to the following:\n- Your browser's security policy\n- Editor configuration data: Editor configuration file path, Source codes for creating Editor, etc. \n- Server configuration set about JSON file\netc.\n")}var j,k,m=this;return m.initialed||l(m),"function"==typeof e?(f=e,e="GET"):"string"==typeof e&&(e=e.toUpperCase()),"GET"!==e&&"POST"!==e&&(e="GET"),d?(j=g(d),"string"==typeof d&&j.load_fail?void i():(j.skin=j.skin||"default-base",h(m.baseURL+"skins/"+j.skin+"/all"+m.suffix+".css"),void a(function(){k=m.add(new b(c,j,m)),"function"==typeof f&&k.on("editoraftercreate",function(){f(k)}),k.setup()}))):void i()},get:function(a){return arguments.length&&a?a in this.editors?this.editors[a]:null:this.editors},add:function(a){return this.editors[a.id]=a,this.activeEditor=a,this.trigger("editoradd",a),a},remove:function(a){var b,c,d=this,e=this.editors;if(console&&console.warn&&console.warn("[Warning] The cafe.remove() API is deprecated and will be removed in a future release. Please use the cafe.destroy() API instead."),a){if(e[a.id]){if(delete e[a.id]){if(this.activeEditor===a)for(c in e){d.activeEditor=e[c];break}this.trigger("editordestroy",a)}return a.RemoveCallByManager=!0,a.remove(),a}}else for(b in e)d.remove(e[b])},destroy:function(b,c){var d,e,f=this,g=this.editors;if("string"==typeof b&&(d=b,b=g[d],!b))return!1;if(!b||!b.id||!g[b.id])return!1;if(delete g[b.id]){if(this.activeEditor===b)if(Object.keys(g).length)for(e in g){f.activeEditor=g[e];break}else this.activeEditor=null,a.clearCaches();c||this.trigger("editordestroy",b)}return c||b.destroy(),b=null,!0},off:function(b){a(this).off(b)},on:function(b,c){a(this).on(b,c)},one:function(b,c){a(this).one(b,c)},trigger:function(b,c){a(this).trigger(b,c)},getContent:function(a,b){var c;if(a&&(c=this.get(a)))return b=b||{},b.format&&!/html/i.test(b.format)||(b.format="public"),c.execCommand("codeview.updatecontent"),c.getContent(b)},setContentToEditor:function(a,b,c,d){var e;if(a&&(c||"object"!=typeof b?"string"!=typeof b&&(b=""):(c=b,b=""),e=this.get(a),e&&(!e.isSpellcheckMode||!e.isSpellcheckMode())))return c=c||{},c.format&&!/html/i.test(c.format)||(c.format="public"),b=e.setContent(b,c,d),e.trigger("editorupdated"),b},setContent:function(a,b,c){return this.setContentToEditor(a,b,c)},clear:function(a){var b,c=!1;return b=a?this.get(a):null,b&&(c=b.execCommand("newdocument")||!0),c},setHeight:function(a,b){var c;if(a&&(c=this.get(a)))return c.setHeight(b)}},window.Cafe=window.cafe=m}),a.Cafe&&!a.Cafe.getModules&&(a.Cafe.getModules=function(){return e})}(this);