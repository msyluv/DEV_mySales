/*! cafe note v2.3.28.2 | Copyright 2014, S-Core, Inc. All Right Reserved. */
cafe.pluginManager.add("emoticon",[],function(a){function b(){var b,c={},d=a.$;i||(i=a.getDialog(k),i.element.find("li").hover(function(){d(this).addClass("cui-state-highlight")},function(){d(this).removeClass("cui-state-highlight")}).click(function(){b=d(this).find("img"),c.src=b.attr("src"),c.alt=b.attr("alt"),a.execCommand(k,c),i.close()}))}function c(b,c){var d,e=a.getDoc().createElement("img");return a.pluginUtils.unselectAllTable(),e.setAttribute("src",c.src),e.src=e.src+"",e.alt=c.alt,e.setAttribute("unselectable","on"),e.setAttribute("data-cui-image","true"),e.style.borderWidth="0px",d=j?a.selectionManager.selectElement(j):a.selectionManager.getRange(),a.contentUtils.insertElementByRange(e,d),!0}function d(){j=a.pluginUtils.getSelectedItem(),a.dialog(k)}var e,f,g,h,i,j,k="emoticon",l=a.getText(k),m=a.editorManager.editorConstants.CommandTypes.CUSTOM_COMMAND_RANGE,n=["grin","wink","ashamed","embarrassed","cry","angry","smile","heart-eyes","not-amused","cool","location","time","flower","heart","star","coffee","ice-cream","presentation","thumbs-up","thumbs-down","sun","mobile","note","trophy"];for(f=a.getResourcesUrl()+k+"/images/",e='<ul style="list-style: none; padding: 0;">',g=0,h=n.length;g<h;g++)e+='<li style="list-style: none;float: left; margin: 2px; cursor: pointer; padding: 2px; width: 16px; height: 16px;" class="cui-state-default">',e+='<img src="'+f+"emo-"+n[g]+'.png" alt="'+n[g]+'" style="width: 16px; height: 16px;"></li>';e+="</ul>",a.addButton(k,{label:l,icons:{primary:k},iconOnly:!0,tooltip:!0,click:d}),a.addMenuItem(k,{icon:k,text:l+"...",click:d}),a.addDialog(k,{title:l,modal:!0,resizable:!1,width:"235px",items:[{type:"html",contents:e}],buttons:[{text:a.getText("close"),click:function(){this.close()}}],open:b}),a.addCommand({command:k,type:m,action:c}),a.addFinalTask(function(){var b=a.getDialog(k);b&&b.element.find("li").off(),k=null,l=null,e=null,m=null,f=null,g=null,h=null,b=null,j=null,n=null})});