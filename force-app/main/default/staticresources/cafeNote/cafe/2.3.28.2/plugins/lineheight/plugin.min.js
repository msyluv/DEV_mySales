/*! cafe note v2.3.28.2 | Copyright 2014, S-Core, Inc. All Right Reserved. */
cafe.pluginManager.add("lineheight",[],function(a){function b(b){return a.getText(b)}function c(){var b,c,d,e=[],f=a.configs.line_heights;for(f&&j.isArray(f)||(f=["1","1.2","1.5","1.8","2","3","4","5"]),b=0,c=f.length;b<c;b++)d=f[b],d=parseFloat(d),e.push(d+"");return e}function d(a){var b,c,d=a?a.length:0,f=[];for(b=0;b<d;b++)c=a[b],f.push(e(c+n));return f}function e(b){return{text:"<span>"+b+"</span>",click:function(){a.pluginUtils.deselectItem(),a.execCommand(k,b)}}}function f(a,b){var c,d,e=a.length;for(b=b===m?"":parseFloat(b),c=0;c<e;c++)d=a[c],o[d.nodeName]&&j(d).css("lineHeight",b)}function g(b,c,d){var e,g,h,i;if(!c)return!1;if(i=a.pluginUtils.getSelectedCells(),i&&i.length)for(g=i.length,e=0;e<g;e++)h=i[e],f(j.makeArray(h.childNodes),d);else f(b,d);return!0}var h,i,j=a.$,k="lineheight",l=b("lineheight.toolbar.title"),m=b("lineheight.toolbar.defaultvalue"),n=b("lineheight.toolbar.unit"),o=a.editorManager.editorConstants.LineBlockElements,p=parseFloat(a.configs.default_line_height)+"";i=c(),a.configs.line_height_map=a.editorManager.editorConstants.toMap(i.join(",")),h=d(i),a.one("editorcreate",function(){var b=i?i.indexOf(p):-1;a.pluginUtils.addInitialWidgetState(k,b,2)}),a.addCommand({command:k,type:cafe.editorConstants.CommandTypes.CUSTOM_COMMAND_BLOCK,action:g}),a.addButton(k,{widgetType:"selectmenu",label:l,menuItems:h,maxHeight:350,width:100,tooltip:l}),a.addFinalTask(function(){j=null,k=null,l=null,m=null,n=null,h=null,i=null,o=null,p=null})});