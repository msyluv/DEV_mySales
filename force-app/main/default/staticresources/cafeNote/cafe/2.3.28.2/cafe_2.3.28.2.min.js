/*!
 * cafe note v2.3.28.2
 * Copyright 2014, S-Core, Inc. All Right Reserved.
 *
 * System : SDS mySales
 * License ID : 2024IM-T034-CNV23-PN33-GV38
 * Release ID : 6dc691b315fdc4b0376ed532d795e2c091251e1e
 * Release Date : 2024-04-23 02:56 01
 */
/*!
 * jQuery JavaScript Library v1.10.2
 * http://jquery.com/ 
 * 
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-07-03T13:48Z
 */
/*!
 * jQuery UI - v1.11.1 - 2014-08-13
 * http://jqueryui.com/ 
 *
 * Copyright 2014 jQuery Foundation and other contributors; Licensed MIT
 */
/*!
 * TinyColor v1.1.2
 * https://github.com/bgrins/TinyColor
 * Brian Grinstead, MIT License
 */
/*!
 * Bowser - a browser detector
 * https://github.com/ded/bowser
 * MIT License | (c) Dustin Diaz 2014
 */
!function(a,b){"use strict";function c(a,b){var c,d,f=a.length,g=[];for(c=0;c<f;c++){if(d=e[a[c]],!d)throw"Can not find a dependency module: "+a[c];g.push(d)}b.apply(null,g)}function d(a,b,d){if("string"!=typeof a)throw"invalid definition, module id must be defined";if("[object Array]"!==Object.prototype.toString.call(b))throw"Dependencies must be not null";if("[object Function]"!==Object.prototype.toString.call(d))throw"Implement function must be defined";c(b,function(){e[a]=d.apply(null,arguments)})}var e;a=a||window,e=a.Cafe&&a.Cafe.getModules?a.Cafe.getModules():{},d.amd=!0,function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,c){function e(a,b,c){c=c||wa;var d,e,f=c.createElement("script");if(f.text=a,b)for(d in xa)e=b[d]||b.getAttribute&&b.getAttribute(d),e&&f.setAttribute(d,e);c.head.appendChild(f).parentNode.removeChild(f)}function f(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?oa[pa.call(a)]||"object":typeof a}function g(a){var b=!!a&&"length"in a&&a.length,c=f(a);return!ua(a)&&!va(a)&&("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a)}function h(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()}function i(a,b){return b?"\0"===a?"ï¿½":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a}function j(a,b,c){return ua(b)?Aa.grep(a,function(a,d){return!!b.call(a,d,a)!==c}):b.nodeType?Aa.grep(a,function(a){return a===b!==c}):"string"!=typeof b?Aa.grep(a,function(a){return na.call(b,a)>-1!==c}):Aa.filter(b,a,c)}function k(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function l(a){var b={};return Aa.each(a.match(Sa)||[],function(a,c){b[c]=!0}),b}function m(a){return a}function n(a){throw a}function o(a,c,d,e){var f;try{a&&ua(f=a.promise)?f.call(a).done(c).fail(d):a&&ua(f=a.then)?f.call(a,c,d):c.apply(b,[a].slice(e))}catch(a){d.apply(b,[a])}}function p(){wa.removeEventListener("DOMContentLoaded",p),a.removeEventListener("load",p),Aa.ready()}function q(a,b){return b.toUpperCase()}function r(a){return a.replace(Wa,"ms-").replace(Xa,q)}function s(){this.expando=Aa.expando+s.uid++}function t(a){return"true"===a||"false"!==a&&("null"===a?null:a===+a+""?+a:_a.test(a)?JSON.parse(a):a)}function u(a,c,d){var e;if(d===b&&1===a.nodeType)if(e="data-"+c.replace(ab,"-$&").toLowerCase(),d=a.getAttribute(e),"string"==typeof d){try{d=t(d)}catch(a){}$a.set(a,c,d)}else d=b;return d}function v(a,b,c,d){var e,f,g=20,h=d?function(){return d.cur()}:function(){return Aa.css(a,b,"")},i=h(),j=c&&c[3]||(Aa.cssNumber[b]?"":"px"),k=a.nodeType&&(Aa.cssNumber[b]||"px"!==j&&+i)&&cb.exec(Aa.css(a,b));if(k&&k[3]!==j){for(i/=2,j=j||k[3],k=+i||1;g--;)Aa.style(a,b,k+j),(1-f)*(1-(f=h()/i||.5))<=0&&(g=0),k/=f;k*=2,Aa.style(a,b,k+j),c=c||[]}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}function w(a){var b,c=a.ownerDocument,d=a.nodeName,e=ib[d];return e?e:(b=c.body.appendChild(c.createElement(d)),e=Aa.css(b,"display"),b.parentNode.removeChild(b),"none"===e&&(e="block"),ib[d]=e,e)}function x(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++)d=a[f],d.style&&(c=d.style.display,b?("none"===c&&(e[f]=Za.get(d,"display")||null,e[f]||(d.style.display="")),""===d.style.display&&hb(d)&&(e[f]=w(d))):"none"!==c&&(e[f]="none",Za.set(d,"display",c)));for(f=0;f<g;f++)null!=e[f]&&(a[f].style.display=e[f]);return a}function y(a,c){var d;return d="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(c||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(c||"*"):[],c===b||c&&h(a,c)?Aa.merge([a],d):d}function z(a,b){for(var c=0,d=a.length;c<d;c++)Za.set(a[c],"globalEval",!b||Za.get(b[c],"globalEval"))}function A(a,b,c,d,e){for(var g,h,i,j,k,l,m=b.createDocumentFragment(),n=[],o=0,p=a.length;o<p;o++)if(g=a[o],g||0===g)if("object"===f(g))Aa.merge(n,g.nodeType?[g]:g);else if(nb.test(g)){for(h=h||m.appendChild(b.createElement("div")),i=(kb.exec(g)||["",""])[1].toLowerCase(),j=mb[i]||mb._default,h.innerHTML=j[1]+Aa.htmlPrefilter(g)+j[2],l=j[0];l--;)h=h.lastChild;Aa.merge(n,h.childNodes),h=m.firstChild,h.textContent=""}else n.push(b.createTextNode(g));for(m.textContent="",o=0;g=n[o++];)if(d&&Aa.inArray(g,d)>-1)e&&e.push(g);else if(k=fb(g),h=y(m.appendChild(g),"script"),k&&z(h),c)for(l=0;g=h[l++];)lb.test(g.type||"")&&c.push(g);return m}function B(){return!0}function C(){return!1}function D(a,c,d,e,f,g){var h,i;if("object"==typeof c){"string"!=typeof d&&(e=e||d,d=b);for(i in c)D(a,i,d,e,c[i],g);return a}if(null==e&&null==f?(f=d,e=d=b):null==f&&("string"==typeof d?(f=e,e=b):(f=e,e=d,d=b)),f===!1)f=C;else if(!f)return a;return 1===g&&(h=f,f=function(a){return Aa().off(a),h.apply(this,arguments)},f.guid=h.guid||(h.guid=Aa.guid++)),a.each(function(){Aa.event.add(this,c,f,e,d)})}function E(a,c,d){return d?(Za.set(a,c,!1),void Aa.event.add(a,c,{namespace:!1,handler:function(a){var b,d=Za.get(this,c);if(1&a.isTrigger&&this[c]){if(d)(Aa.event.special[c]||{}).delegateType&&a.stopPropagation();else if(d=ka.call(arguments),Za.set(this,c,d),this[c](),b=Za.get(this,c),Za.set(this,c,!1),d!==b)return a.stopImmediatePropagation(),a.preventDefault(),b}else d&&(Za.set(this,c,Aa.event.trigger(d[0],d.slice(1),this)),a.stopPropagation(),a.isImmediatePropagationStopped=B)}})):void(Za.get(a,c)===b&&Aa.event.add(a,c,B))}function F(a,b){return h(a,"table")&&h(11!==b.nodeType?b:b.firstChild,"tr")?Aa(a).children("tbody")[0]||a:a}function G(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function H(a){return"true/"===(a.type||"").slice(0,5)?a.type=a.type.slice(5):a.removeAttribute("type"),a}function I(a,b){var c,d,e,f,g,h,i;if(1===b.nodeType){if(Za.hasData(a)&&(f=Za.get(a),i=f.events)){Za.remove(b,"handle events");for(e in i)for(c=0,d=i[e].length;c<d;c++)Aa.event.add(b,e,i[e][c])}$a.hasData(a)&&(g=$a.access(a),h=Aa.extend({},g),$a.set(b,h))}}function J(a,b){var c=b.nodeName.toLowerCase();"input"===c&&jb.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function K(a,b,c,d){b=la(b);var f,g,h,i,j,k,l=0,m=a.length,n=m-1,o=b[0],p=ua(o);if(p||m>1&&"string"==typeof o&&!ta.checkClone&&qb.test(o))return a.each(function(e){var f=a.eq(e);p&&(b[0]=o.call(this,e,f.html())),K(f,b,c,d)});if(m&&(f=A(b,a[0].ownerDocument,!1,a,d),g=f.firstChild,1===f.childNodes.length&&(f=g),g||d)){for(h=Aa.map(y(f,"script"),G),i=h.length;l<m;l++)j=f,l!==n&&(j=Aa.clone(j,!0,!0),i&&Aa.merge(h,y(j,"script"))),c.call(a[l],j,l);if(i)for(k=h[h.length-1].ownerDocument,Aa.map(h,H),l=0;l<i;l++)j=h[l],lb.test(j.type||"")&&!Za.access(j,"globalEval")&&Aa.contains(k,j)&&(j.src&&"module"!==(j.type||"").toLowerCase()?Aa._evalUrl&&!j.noModule&&Aa._evalUrl(j.src,{nonce:j.nonce||j.getAttribute("nonce")},k):e(j.textContent.replace(rb,""),j,k))}return a}function L(a,b,c){for(var d,e=b?Aa.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||Aa.cleanData(y(d)),d.parentNode&&(c&&fb(d)&&z(y(d,"script")),d.parentNode.removeChild(d));return a}function M(a,c,d){var e,f,g,h,i=tb.test(c),j=a.style;return d=d||ub(a),d&&(h=d.getPropertyValue(c)||d[c],i&&h&&(h=h.replace(Fa,"$1")||b),""!==h||fb(a)||(h=Aa.style(a,c)),!ta.pixelBoxStyles()&&sb.test(h)&&wb.test(c)&&(e=j.width,f=j.minWidth,g=j.maxWidth,j.minWidth=j.maxWidth=j.width=h,h=d.width,j.width=e,j.minWidth=f,j.maxWidth=g)),h!==b?h+"":h}function N(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function O(a){for(var b=a[0].toUpperCase()+a.slice(1),c=xb.length;c--;)if(a=xb[c]+b,a in yb)return a}function P(a){var b=Aa.cssProps[a]||zb[a];return b?b:a in yb?a:zb[a]=O(a)||a}function Q(a,b,c){var d=cb.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function R(a,b,c,d,e,f){var g="width"===b?1:0,h=0,i=0,j=0;if(c===(d?"border":"content"))return 0;for(;g<4;g+=2)"margin"===c&&(j+=Aa.css(a,c+db[g],!0,e)),d?("content"===c&&(i-=Aa.css(a,"padding"+db[g],!0,e)),"margin"!==c&&(i-=Aa.css(a,"border"+db[g]+"Width",!0,e))):(i+=Aa.css(a,"padding"+db[g],!0,e),"padding"!==c?i+=Aa.css(a,"border"+db[g]+"Width",!0,e):h+=Aa.css(a,"border"+db[g]+"Width",!0,e));return!d&&f>=0&&(i+=Math.max(0,Math.ceil(a["offset"+b[0].toUpperCase()+b.slice(1)]-f-i-h-.5))||0),i+j}function S(a,b,c){var d=ub(a),e=!ta.boxSizingReliable()||c,f=e&&"border-box"===Aa.css(a,"boxSizing",!1,d),g=f,i=M(a,b,d),j="offset"+b[0].toUpperCase()+b.slice(1);if(sb.test(i)){if(!c)return i;i="auto"}return(!ta.boxSizingReliable()&&f||!ta.reliableTrDimensions()&&h(a,"tr")||"auto"===i||!parseFloat(i)&&"inline"===Aa.css(a,"display",!1,d))&&a.getClientRects().length&&(f="border-box"===Aa.css(a,"boxSizing",!1,d),g=j in a,g&&(i=a[j])),i=parseFloat(i)||0,i+R(a,b,c||(f?"border":"content"),g,d,i)+"px"}function T(a,b,c,d,e){return new T.prototype.init(a,b,c,d,e)}function U(){Eb&&(wa.hidden===!1&&a.requestAnimationFrame?a.requestAnimationFrame(U):a.setTimeout(U,Aa.fx.interval),Aa.fx.tick())}function V(){return a.setTimeout(function(){Db=b}),Db=Date.now()}function W(a,b){var c,d=0,e={height:a};for(b=b?1:0;d<4;d+=2-b)c=db[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function X(a,b,c){for(var d,e=($.tweeners[b]||[]).concat($.tweeners["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function Y(a,c,d){var e,f,g,h,i,j,k,l,m="width"in c||"height"in c,n=this,o={},p=a.style,q=a.nodeType&&hb(a),r=Za.get(a,"fxshow");d.queue||(h=Aa._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,n.always(function(){n.always(function(){h.unqueued--,Aa.queue(a,"fx").length||h.empty.fire()})}));for(e in c)if(f=c[e],Fb.test(f)){if(delete c[e],g=g||"toggle"===f,f===(q?"hide":"show")){if("show"!==f||!r||r[e]===b)continue;q=!0}o[e]=r&&r[e]||Aa.style(a,e)}if(j=!Aa.isEmptyObject(c),j||!Aa.isEmptyObject(o)){m&&1===a.nodeType&&(d.overflow=[p.overflow,p.overflowX,p.overflowY],k=r&&r.display,null==k&&(k=Za.get(a,"display")),l=Aa.css(a,"display"),"none"===l&&(k?l=k:(x([a],!0),k=a.style.display||k,l=Aa.css(a,"display"),x([a]))),("inline"===l||"inline-block"===l&&null!=k)&&"none"===Aa.css(a,"float")&&(j||(n.done(function(){p.display=k}),null==k&&(l=p.display,k="none"===l?"":l)),p.display="inline-block")),d.overflow&&(p.overflow="hidden",n.always(function(){p.overflow=d.overflow[0],p.overflowX=d.overflow[1],p.overflowY=d.overflow[2]})),j=!1;for(e in o)j||(r?"hidden"in r&&(q=r.hidden):r=Za.access(a,"fxshow",{display:k}),g&&(r.hidden=!q),q&&x([a],!0),n.done(function(){q||x([a]),Za.remove(a,"fxshow");for(e in o)Aa.style(a,e,o[e])})),j=X(q?r[e]:0,e,n),e in r||(r[e]=j.start,q&&(j.end=j.start,j.start=0))}}function Z(a,b){var c,d,e,f,g;for(c in a)if(d=r(c),e=b[d],f=a[c],Array.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=Aa.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function $(a,b,c){var d,e,f=0,g=$.prefilters.length,h=Aa.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Db||V(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(i||h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:Aa.extend({},b),opts:Aa.extend(!0,{specialEasing:{},easing:Aa.easing._default},c),originalProperties:b,originalOptions:c,startTime:Db||V(),duration:c.duration,tweens:[],createTween:function(b,c){var d=Aa.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Z(k,j.opts.specialEasing);f<g;f++)if(d=$.prefilters[f].call(j,a,k,j.opts))return ua(d.stop)&&(Aa._queueHooks(j.elem,j.opts.queue).stop=d.stop.bind(d)),d;return Aa.map(k,X,j),ua(j.opts.start)&&j.opts.start.call(a,j),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always),Aa.fx.timer(Aa.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j}function _(a){var b=a.match(Sa)||[];return b.join(" ")}function aa(a){return a.getAttribute&&a.getAttribute("class")||""}function ba(a){return Array.isArray(a)?a:"string"==typeof a?a.match(Sa)||[]:[]}function ca(a,b,c,d){var e;if(Array.isArray(b))Aa.each(b,function(b,e){c||Rb.test(a)?d(a,e):ca(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==f(b))d(a,b);else for(e in b)ca(a+"["+e+"]",b[e],c,d)}function da(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(Sa)||[];if(ua(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function ea(a,b,c,d){function e(h){var i;return f[h]=!0,Aa.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===bc;return e(b.dataTypes[0])||!f["*"]&&e("*")}function fa(a,c){var d,e,f=Aa.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);return e&&Aa.extend(!0,a,e),a}function ga(a,c,d){for(var e,f,g,h,i=a.contents,j=a.dataTypes;"*"===j[0];)j.shift(),e===b&&(e=a.mimeType||c.getResponseHeader("Content-Type"));if(e)for(f in i)if(i[f]&&i[f].test(e)){j.unshift(f);break}if(j[0]in d)g=j[0];else{for(f in d){if(!j[0]||a.converters[f+" "+j[0]]){g=f;break}h||(h=f)}g=g||h}if(g)return g!==j[0]&&j.unshift(g),d[g]}function ha(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a.throws)b=g(b);else try{b=g(b)}catch(a){return{state:"parsererror",error:g?a:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}var ia=[],ja=Object.getPrototypeOf,ka=ia.slice,la=ia.flat?function(a){return ia.flat.call(a)}:function(a){return ia.concat.apply([],a)},ma=ia.push,na=ia.indexOf,oa={},pa=oa.toString,qa=oa.hasOwnProperty,ra=qa.toString,sa=ra.call(Object),ta={},ua=function(a){return"function"==typeof a&&"number"!=typeof a.nodeType&&"function"!=typeof a.item},va=function(a){return null!=a&&a===a.window},wa=a.document,xa={type:!0,src:!0,nonce:!0,noModule:!0},ya="3.7.1",za=/HTML$/i,Aa=function(a,b){return new Aa.fn.init(a,b)};Aa.fn=Aa.prototype={jquery:ya,constructor:Aa,length:0,toArray:function(){return ka.call(this)},get:function(a){return null==a?ka.call(this):a<0?this[a+this.length]:this[a]},pushStack:function(a){var b=Aa.merge(this.constructor(),a);return b.prevObject=this,b},each:function(a){return Aa.each(this,a)},map:function(a){return this.pushStack(Aa.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(ka.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(Aa.grep(this,function(a,b){return(b+1)%2}))},odd:function(){return this.pushStack(Aa.grep(this,function(a,b){return b%2}))},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:ma,sort:ia.sort,splice:ia.splice},Aa.extend=Aa.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[i]||{},i++),"object"==typeof h||ua(h)||(h={}),i===j&&(h=this,i--);i<j;i++)if(null!=(a=arguments[i]))for(c in a)e=a[c],"__proto__"!==c&&h!==e&&(k&&e&&(Aa.isPlainObject(e)||(f=Array.isArray(e)))?(d=h[c],g=f&&!Array.isArray(d)?[]:f||Aa.isPlainObject(d)?d:{},f=!1,h[c]=Aa.extend(k,g,e)):e!==b&&(h[c]=e));return h},Aa.extend({expando:"jQuery"+(ya+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isPlainObject:function(a){var b,c;return!(!a||"[object Object]"!==pa.call(a))&&(!(b=ja(a))||(c=qa.call(b,"constructor")&&b.constructor,"function"==typeof c&&ra.call(c)===sa))},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},globalEval:function(a,b,c){e(a,{nonce:b&&b.nonce},c)},each:function(a,b){var c,d=0;if(g(a))for(c=a.length;d<c&&b.call(a[d],d,a[d])!==!1;d++);else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},text:function(a){var b,c="",d=0,e=a.nodeType;if(!e)for(;b=a[d++];)c+=Aa.text(b);return 1===e||11===e?a.textContent:9===e?a.documentElement.textContent:3===e||4===e?a.nodeValue:c},makeArray:function(a,b){var c=b||[];return null!=a&&(g(Object(a))?Aa.merge(c,"string"==typeof a?[a]:a):ma.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:na.call(b,a,c)},isXMLDoc:function(a){var b=a&&a.namespaceURI,c=a&&(a.ownerDocument||a).documentElement;return!za.test(b||c&&c.nodeName||"HTML")},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;f<g;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,f=0,h=[];if(g(a))for(d=a.length;f<d;f++)e=b(a[f],f,c),null!=e&&h.push(e);else for(f in a)e=b(a[f],f,c),null!=e&&h.push(e);return la(h)},guid:1,support:ta}),"function"==typeof Symbol&&(Aa.fn[Symbol.iterator]=ia[Symbol.iterator]),Aa.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){oa["[object "+b+"]"]=b.toLowerCase()});var Ba=ia.pop,Ca=ia.sort,Da=ia.splice,Ea="[\\x20\\t\\r\\n\\f]",Fa=new RegExp("^"+Ea+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Ea+"+$","g");Aa.contains=function(a,b){var c=b&&b.parentNode;return a===c||!(!c||1!==c.nodeType||!(a.contains?a.contains(c):a.compareDocumentPosition&&16&a.compareDocumentPosition(c)))};var Ga=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;Aa.escapeSelector=function(a){return(a+"").replace(Ga,i)};var Ha=wa,Ia=ma;!function(){function c(){try{return F.activeElement}catch(a){}}function d(a,b,c,e){var f,g,h,i,j,k,l,o=b&&b.ownerDocument,r=b?b.nodeType:9;if(c=c||[],"string"!=typeof a||!a||1!==r&&9!==r&&11!==r)return c;if(!e&&(n(b),b=b||F,H)){if(11!==r&&(j=ea.exec(a)))if(f=j[1]){if(9===r){if(!(h=b.getElementById(f)))return c;if(h.id===f)return K.call(c,h),c}else if(o&&(h=o.getElementById(f))&&d.contains(b,h)&&h.id===f)return K.call(c,h),c}else{if(j[2])return K.apply(c,b.getElementsByTagName(a)),c;if((f=j[3])&&b.getElementsByClassName)return K.apply(c,b.getElementsByClassName(f)),c}if(!(R[a+" "]||I&&I.test(a))){if(l=a,o=b,1===r&&($.test(a)||Z.test(a))){for(o=fa.test(a)&&m(b.parentNode)||b,o==b&&ta.scope||((i=b.getAttribute("id"))?i=Aa.escapeSelector(i):b.setAttribute("id",i=L)),k=p(a),g=k.length;g--;)k[g]=(i?"#"+i:":scope")+" "+q(k[g]);l=k.join(",")}try{return K.apply(c,o.querySelectorAll(l)),c}catch(b){R(a,!0)}finally{i===L&&b.removeAttribute("id")}}}return z(a.replace(Fa,"$1"),b,c,e)}function e(){function a(c,d){return b.push(c+" ")>B.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function f(a){return a[L]=!0,a}function g(a){var b=F.createElement("fieldset");try{return!!a(b)}catch(a){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function i(a){return function(b){return h(b,"input")&&b.type===a}}function j(a){return function(b){return(h(b,"input")||h(b,"button"))&&b.type===a}}function k(a){return function(b){return"form"in b?b.parentNode&&b.disabled===!1?"label"in b?"label"in b.parentNode?b.parentNode.disabled===a:b.disabled===a:b.isDisabled===a||b.isDisabled!==!a&&la(b)===a:b.disabled===a:"label"in b&&b.disabled===a}}function l(a){return f(function(b){return b=+b,f(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function m(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}function n(a){var b,c=a?a.ownerDocument||a:Ha;return c!=F&&9===c.nodeType&&c.documentElement?(F=c,G=F.documentElement,H=!Aa.isXMLDoc(F),J=G.matches||G.webkitMatchesSelector||G.msMatchesSelector,G.msMatchesSelector&&Ha!=F&&(b=F.defaultView)&&b.top!==b&&b.addEventListener("unload",ja),ta.getById=g(function(a){return G.appendChild(a).id=Aa.expando,!F.getElementsByName||!F.getElementsByName(Aa.expando).length}),ta.disconnectedMatch=g(function(a){return J.call(a,"*")}),ta.scope=g(function(){return F.querySelectorAll(":scope")}),ta.cssHas=g(function(){try{return F.querySelector(":has(*,:jqfake)"),!1}catch(a){return!0}}),ta.getById?(B.filter.ID=function(a){var b=a.replace(ga,ha);return function(a){return a.getAttribute("id")===b}},B.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&H){var c=b.getElementById(a);return c?[c]:[]}}):(B.filter.ID=function(a){var b=a.replace(ga,ha);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}},B.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&H){var c,d,e,f=b.getElementById(a);if(f){if(c=f.getAttributeNode("id"),c&&c.value===a)return[f];for(e=b.getElementsByName(a),d=0;f=e[d++];)if(c=f.getAttributeNode("id"),c&&c.value===a)return[f]}return[]}}),B.find.TAG=function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):b.querySelectorAll(a)},B.find.CLASS=function(a,b){if("undefined"!=typeof b.getElementsByClassName&&H)return b.getElementsByClassName(a)},I=[],g(function(a){var b;G.appendChild(a).innerHTML="<a id='"+L+"' href='' disabled='disabled'></a><select id='"+L+"-\r\\' disabled='disabled'><option selected=''></option></select>",a.querySelectorAll("[selected]").length||I.push("\\["+Ea+"*(?:value|"+T+")"),a.querySelectorAll("[id~="+L+"-]").length||I.push("~="),a.querySelectorAll("a#"+L+"+*").length||I.push(".#.+[+~]"),a.querySelectorAll(":checked").length||I.push(":checked"),b=F.createElement("input"),b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),G.appendChild(a).disabled=!0,2!==a.querySelectorAll(":disabled").length&&I.push(":enabled",":disabled"),b=F.createElement("input"),b.setAttribute("name",""),a.appendChild(b),a.querySelectorAll("[name='']").length||I.push("\\["+Ea+"*name"+Ea+"*="+Ea+"*(?:''|\"\")")}),ta.cssHas||I.push(":has"),I=I.length&&new RegExp(I.join("|")),S=function(a,b){if(a===b)return E=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c?c:(c=(a.ownerDocument||a)==(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!ta.sortDetached&&b.compareDocumentPosition(a)===c?a===F||a.ownerDocument==Ha&&d.contains(Ha,a)?-1:b===F||b.ownerDocument==Ha&&d.contains(Ha,b)?1:D?na.call(D,a)-na.call(D,b):0:4&c?-1:1)},F):F}function o(){}function p(a,b){var c,e,f,g,h,i,j,k=P[a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=B.preFilter;h;){c&&!(e=Y.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=Z.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(Fa," ")}),h=h.slice(c.length));for(g in B.filter)!(e=ba[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?d.error(a):P(a,i).slice(0)}function q(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function r(a,b,c){var d=b.dir,e=b.next,f=e||d,g=c&&"parentNode"===f,i=N++;return b.first?function(b,c,e){for(;b=b[d];)if(1===b.nodeType||g)return a(b,c,e);return!1}:function(b,c,j){var k,l,m=[M,i];if(j){for(;b=b[d];)if((1===b.nodeType||g)&&a(b,c,j))return!0}else for(;b=b[d];)if(1===b.nodeType||g)if(l=b[L]||(b[L]={}),e&&h(b,e))b=b[d]||b;else{if((k=l[f])&&k[0]===M&&k[1]===i)return m[2]=k[2];if(l[f]=m,m[2]=a(b,c,j))return!0}return!1}}function s(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function t(a,b,c){for(var e=0,f=b.length;e<f;e++)d(a,b[e],c);return c}function u(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function v(a,b,c,d,e,g){return d&&!d[L]&&(d=v(d)),e&&!e[L]&&(e=v(e,g)),f(function(f,g,h,i){var j,k,l,m,n=[],o=[],p=g.length,q=f||t(b||"*",h.nodeType?[h]:h,[]),r=!a||!f&&b?q:u(q,n,a,h,i);if(c?(m=e||(f?a:p||d)?[]:g,c(r,m,h,i)):m=r,d)for(j=u(m,o),d(j,[],h,i),k=j.length;k--;)(l=j[k])&&(m[o[k]]=!(r[o[k]]=l));if(f){if(e||a){if(e){for(j=[],k=m.length;k--;)(l=m[k])&&j.push(r[k]=l);e(null,m=[],j,i)}for(k=m.length;k--;)(l=m[k])&&(j=e?na.call(f,l):n[k])>-1&&(f[j]=!(g[j]=l))}}else m=u(m===g?m.splice(p,m.length):m),e?e(null,g,m,i):K.apply(g,m)})}function w(a){for(var b,c,d,e=a.length,f=B.relative[a[0].type],g=f||B.relative[" "],h=f?1:0,i=r(function(a){return a===b},g,!0),j=r(function(a){return na.call(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!=C)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];h<e;h++)if(c=B.relative[a[h].type])k=[r(s(k),c)];else{if(c=B.filter[a[h].type].apply(null,a[h].matches),c[L]){for(d=++h;d<e&&!B.relative[a[d].type];d++);return v(h>1&&s(k),h>1&&q(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(Fa,"$1"),c,h<d&&w(a.slice(h,d)),d<e&&w(a=a.slice(d)),d<e&&q(a))}k.push(c)}return s(k)}function x(a,b){var c=b.length>0,d=a.length>0,e=function(e,f,g,h,i){var j,k,l,m=0,o="0",p=e&&[],q=[],r=C,s=e||d&&B.find.TAG("*",i),t=M+=null==r?1:Math.random()||.1,v=s.length;for(i&&(C=f==F||f||i);o!==v&&null!=(j=s[o]);o++){if(d&&j){for(k=0,f||j.ownerDocument==F||(n(j),g=!H);l=a[k++];)if(l(j,f||F,g)){K.call(h,j);break}i&&(M=t)}c&&((j=!l&&j)&&m--,e&&p.push(j))}if(m+=o,c&&o!==m){for(k=0;l=b[k++];)l(p,q,f,g);if(e){if(m>0)for(;o--;)p[o]||q[o]||(q[o]=Ba.call(h));q=u(q)}K.apply(h,q),i&&!e&&q.length>0&&m+b.length>1&&Aa.uniqueSort(h)}return i&&(M=t,C=r),p};return c?f(e):e}function y(a,b){var c,d=[],e=[],f=Q[a+" "];if(!f){for(b||(b=p(a)),c=b.length;c--;)f=w(b[c]),f[L]?d.push(f):e.push(f);f=Q(a,x(e,d)),f.selector=a}return f}function z(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,k=!d&&p(a=j.selector||a);if(c=c||[],1===k.length){if(f=k[0]=k[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&9===b.nodeType&&H&&B.relative[f[1].type]){if(b=(B.find.ID(g.matches[0].replace(ga,ha),b)||[])[0],!b)return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=ba.needsContext.test(a)?0:f.length;e--&&(g=f[e],!B.relative[h=g.type]);)if((i=B.find[h])&&(d=i(g.matches[0].replace(ga,ha),fa.test(f[0].type)&&m(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&q(f),!a)return K.apply(c,d),c;break}}return(j||y(a,k))(d,b,!H,c,!b||fa.test(a)&&m(b.parentNode)||b),c}var A,B,C,D,E,F,G,H,I,J,K=Ia,L=Aa.expando,M=0,N=0,O=e(),P=e(),Q=e(),R=e(),S=function(a,b){return a===b&&(E=!0),0},T="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",U="(?:\\\\[\\da-fA-F]{1,6}"+Ea+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",V="\\["+Ea+"*("+U+")(?:"+Ea+"*([*^$|!~]?=)"+Ea+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+U+"))|)"+Ea+"*\\]",W=":("+U+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+V+")*)|.*)\\)|)",X=new RegExp(Ea+"+","g"),Y=new RegExp("^"+Ea+"*,"+Ea+"*"),Z=new RegExp("^"+Ea+"*([>+~]|"+Ea+")"+Ea+"*"),$=new RegExp(Ea+"|>"),_=new RegExp(W),aa=new RegExp("^"+U+"$"),ba={ID:new RegExp("^#("+U+")"),CLASS:new RegExp("^\\.("+U+")"),TAG:new RegExp("^("+U+"|[*])"),ATTR:new RegExp("^"+V),PSEUDO:new RegExp("^"+W),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Ea+"*(even|odd|(([+-]|)(\\d*)n|)"+Ea+"*(?:([+-]|)"+Ea+"*(\\d+)|))"+Ea+"*\\)|)","i"),bool:new RegExp("^(?:"+T+")$","i"),needsContext:new RegExp("^"+Ea+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Ea+"*((?:-\\d)?\\d*)"+Ea+"*\\)|)(?=[^-]|$)","i")},ca=/^(?:input|select|textarea|button)$/i,da=/^h\d$/i,ea=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,fa=/[+~]/,ga=new RegExp("\\\\[\\da-fA-F]{1,6}"+Ea+"?|\\\\([^\\r\\n\\f])","g"),ha=function(a,b){var c="0x"+a.slice(1)-65536;return b?b:c<0?String.fromCharCode(c+65536):String.fromCharCode(c>>10|55296,1023&c|56320)},ja=function(){n()},la=r(function(a){return a.disabled===!0&&h(a,"fieldset")},{dir:"parentNode",next:"legend"});try{K.apply(ia=ka.call(Ha.childNodes),Ha.childNodes),ia[Ha.childNodes.length].nodeType}catch(a){K={apply:function(a,b){Ia.apply(a,ka.call(b))},call:function(a){Ia.apply(a,ka.call(arguments,1))}}}d.matches=function(a,b){return d(a,null,null,b)},d.matchesSelector=function(a,b){if(n(a),H&&!R[b+" "]&&(!I||!I.test(b)))try{var c=J.call(a,b);if(c||ta.disconnectedMatch||a.document&&11!==a.document.nodeType)return c}catch(a){R(b,!0)}return d(b,F,null,[a]).length>0},d.contains=function(a,b){return(a.ownerDocument||a)!=F&&n(a),Aa.contains(a,b)},d.attr=function(a,c){(a.ownerDocument||a)!=F&&n(a);var d=B.attrHandle[c.toLowerCase()],e=d&&qa.call(B.attrHandle,c.toLowerCase())?d(a,c,!H):b;return e!==b?e:a.getAttribute(c)},d.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},Aa.uniqueSort=function(a){var b,c=[],d=0,e=0;if(E=!ta.sortStable,D=!ta.sortStable&&ka.call(a,0),Ca.call(a,S),E){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)Da.call(a,c[d],1)}return D=null,a},Aa.fn.uniqueSort=function(){return this.pushStack(Aa.uniqueSort(ka.apply(this)))},B=Aa.expr={cacheLength:50,createPseudo:f,match:ba,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ga,ha),a[3]=(a[3]||a[4]||a[5]||"").replace(ga,ha),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||d.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&d.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return ba.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&_.test(c)&&(b=p(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ga,ha).toLowerCase();return"*"===a?function(){return!0}:function(a){return h(a,b)}},CLASS:function(a){var b=O[a+" "];return b||(b=new RegExp("(^|"+Ea+")"+a+"("+Ea+"|$)"))&&O(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(e){var f=d.attr(e,a);return null==f?"!="===b:!b||(f+="","="===b?f===c:"!="===b?f!==c:"^="===b?c&&0===f.indexOf(c):"*="===b?c&&f.indexOf(c)>-1:"$="===b?c&&f.slice(-c.length)===c:"~="===b?(" "+f.replace(X," ")+" ").indexOf(c)>-1:"|="===b&&(f===c||f.slice(0,c.length+1)===c+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),i="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,j){var k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=i&&b.nodeName.toLowerCase(),s=!j&&!i,t=!1;if(q){if(f){for(;p;){for(m=b;m=m[p];)if(i?h(m,r):1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(l=q[L]||(q[L]={}),k=l[a]||[],n=k[0]===M&&k[1],t=n&&k[2],m=n&&q.childNodes[n];m=++n&&m&&m[p]||(t=n=0)||o.pop();)if(1===m.nodeType&&++t&&m===b){l[a]=[M,n,t];break}}else if(s&&(l=b[L]||(b[L]={}),k=l[a]||[],n=k[0]===M&&k[1],t=n),t===!1)for(;(m=++n&&m&&m[p]||(t=n=0)||o.pop())&&((i?!h(m,r):1!==m.nodeType)||!++t||(s&&(l=m[L]||(m[L]={}),l[a]=[M,t]),m!==b)););return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=B.pseudos[a]||B.setFilters[a.toLowerCase()]||d.error("unsupported pseudo: "+a);return e[L]?e(b):e.length>1?(c=[a,a,"",b],B.setFilters.hasOwnProperty(a.toLowerCase())?f(function(a,c){for(var d,f=e(a,b),g=f.length;g--;)d=na.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:f(function(a){var b=[],c=[],d=y(a.replace(Fa,"$1"));return d[L]?f(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){
return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:f(function(a){return function(b){return d(a,b).length>0}}),contains:f(function(a){return a=a.replace(ga,ha),function(b){return(b.textContent||Aa.text(b)).indexOf(a)>-1}}),lang:f(function(a){return aa.test(a||"")||d.error("unsupported lang: "+a),a=a.replace(ga,ha).toLowerCase(),function(b){var c;do if(c=H?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===G},focus:function(a){return a===c()&&F.hasFocus()&&!!(a.type||a.href||~a.tabIndex)},enabled:k(!1),disabled:k(!0),checked:function(a){return h(a,"input")&&!!a.checked||h(a,"option")&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!B.pseudos.empty(a)},header:function(a){return da.test(a.nodeName)},input:function(a){return ca.test(a.nodeName)},button:function(a){return h(a,"input")&&"button"===a.type||h(a,"button")},text:function(a){var b;return h(a,"input")&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:l(function(){return[0]}),last:l(function(a,b){return[b-1]}),eq:l(function(a,b,c){return[c<0?c+b:c]}),even:l(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:l(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:l(function(a,b,c){var d;for(d=c<0?c+b:c>b?b:c;--d>=0;)a.push(d);return a}),gt:l(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},B.pseudos.nth=B.pseudos.eq;for(A in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})B.pseudos[A]=i(A);for(A in{submit:!0,reset:!0})B.pseudos[A]=j(A);o.prototype=B.filters=B.pseudos,B.setFilters=new o,ta.sortStable=L.split("").sort(S).join("")===L,n(),ta.sortDetached=g(function(a){return 1&a.compareDocumentPosition(F.createElement("fieldset"))}),Aa.find=d,Aa.clearCaches=function(){D=null,O=null,P=null,Q=null,O=e(),P=e(),Q=e()},Aa.expr[":"]=Aa.expr.pseudos,Aa.unique=Aa.uniqueSort,d.compile=y,d.select=z,d.setDocument=n,d.tokenize=p,d.escape=Aa.escapeSelector,d.getText=Aa.text,d.isXML=Aa.isXMLDoc,d.selectors=Aa.expr,d.support=Aa.support,d.uniqueSort=Aa.uniqueSort}();var Ja=function(a,c,d){for(var e=[],f=d!==b;(a=a[c])&&9!==a.nodeType;)if(1===a.nodeType){if(f&&Aa(a).is(d))break;e.push(a)}return e},Ka=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},La=Aa.expr.match.needsContext,Ma=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;Aa.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?Aa.find.matchesSelector(d,a)?[d]:[]:Aa.find.matches(a,Aa.grep(b,function(a){return 1===a.nodeType}))},Aa.fn.extend({find:function(a){var b,c,d=this.length,e=this;if("string"!=typeof a)return this.pushStack(Aa(a).filter(function(){for(b=0;b<d;b++)if(Aa.contains(e[b],this))return!0}));for(c=this.pushStack([]),b=0;b<d;b++)Aa.find(a,e[b],c);return d>1?Aa.uniqueSort(c):c},filter:function(a){return this.pushStack(j(this,a||[],!1))},not:function(a){return this.pushStack(j(this,a||[],!0))},is:function(a){return!!j(this,"string"==typeof a&&La.test(a)?Aa(a):a||[],!1).length}});var Na,Oa=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Pa=Aa.fn.init=function(a,c,d){var e,f;if(!a)return this;if(d=d||Na,"string"==typeof a){if(e="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:Oa.exec(a),!e||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(e[1]){if(c=c instanceof Aa?c[0]:c,Aa.merge(this,Aa.parseHTML(e[1],c&&c.nodeType?c.ownerDocument||c:wa,!0)),Ma.test(e[1])&&Aa.isPlainObject(c))for(e in c)ua(this[e])?this[e](c[e]):this.attr(e,c[e]);return this}return f=wa.getElementById(e[2]),f&&(this[0]=f,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):ua(a)?d.ready!==b?d.ready(a):a(Aa):Aa.makeArray(a,this)};Pa.prototype=Aa.fn,Na=Aa(wa);var Qa=/^(?:parents|prev(?:Until|All))/,Ra={children:!0,contents:!0,next:!0,prev:!0};Aa.fn.extend({has:function(a){var b=Aa(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(Aa.contains(this,b[a]))return!0})},closest:function(a,b){var c,d=0,e=this.length,f=[],g="string"!=typeof a&&Aa(a);if(!La.test(a))for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&Aa.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?Aa.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?na.call(Aa(a),this[0]):na.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(Aa.uniqueSort(Aa.merge(this.get(),Aa(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),Aa.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return Ja(a,"parentNode")},parentsUntil:function(a,b,c){return Ja(a,"parentNode",c)},next:function(a){return k(a,"nextSibling")},prev:function(a){return k(a,"previousSibling")},nextAll:function(a){return Ja(a,"nextSibling")},prevAll:function(a){return Ja(a,"previousSibling")},nextUntil:function(a,b,c){return Ja(a,"nextSibling",c)},prevUntil:function(a,b,c){return Ja(a,"previousSibling",c)},siblings:function(a){return Ka((a.parentNode||{}).firstChild,a)},children:function(a){return Ka(a.firstChild)},contents:function(a){return null!=a.contentDocument&&ja(a.contentDocument)?a.contentDocument:(h(a,"template")&&(a=a.content||a),Aa.merge([],a.childNodes))}},function(a,b){Aa.fn[a]=function(c,d){var e=Aa.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=Aa.filter(d,e)),this.length>1&&(Ra[a]||Aa.uniqueSort(e),Qa.test(a)&&e.reverse()),this.pushStack(e)}});var Sa=/[^\x20\t\r\n\f]+/g;Aa.Callbacks=function(a){a="string"==typeof a?l(a):Aa.extend({},a);var b,c,d,e,g=[],h=[],i=-1,j=function(){for(e=e||a.once,d=b=!0;h.length;i=-1)for(c=h.shift();++i<g.length;)g[i].apply(c[0],c[1])===!1&&a.stopOnFalse&&(i=g.length,c=!1);a.memory||(c=!1),b=!1,e&&(g=c?[]:"")},k={add:function(){return g&&(c&&!b&&(i=g.length-1,h.push(c)),function b(c){Aa.each(c,function(c,d){ua(d)?a.unique&&k.has(d)||g.push(d):d&&d.length&&"string"!==f(d)&&b(d)})}(arguments),c&&!b&&j()),this},remove:function(){return Aa.each(arguments,function(a,b){for(var c;(c=Aa.inArray(b,g,c))>-1;)g.splice(c,1),c<=i&&i--}),this},has:function(a){return a?Aa.inArray(a,g)>-1:g.length>0},empty:function(){return g&&(g=[]),this},disable:function(){return e=h=[],g=c="",this},disabled:function(){return!g},lock:function(){return e=h=[],c||b||(g=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],h.push(c),b||j()),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},Aa.extend({Deferred:function(c){var d=[["notify","progress",Aa.Callbacks("memory"),Aa.Callbacks("memory"),2],["resolve","done",Aa.Callbacks("once memory"),Aa.Callbacks("once memory"),0,"resolved"],["reject","fail",Aa.Callbacks("once memory"),Aa.Callbacks("once memory"),1,"rejected"]],e="pending",f={state:function(){return e},always:function(){return g.done(arguments).fail(arguments),this},catch:function(a){return f.then(null,a)},pipe:function(){var a=arguments;return Aa.Deferred(function(b){Aa.each(d,function(c,d){var e=ua(a[d[4]])&&a[d[4]];g[d[1]](function(){var a=e&&e.apply(this,arguments);a&&ua(a.promise)?a.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[d[0]+"With"](this,e?[a]:arguments)})}),a=null}).promise()},then:function(c,e,f){function g(c,d,e,f){return function(){var i=this,j=arguments,k=function(){var a,k;if(!(c<h)){if(a=e.apply(i,j),a===d.promise())throw new TypeError("Thenable self-resolution");k=a&&("object"==typeof a||"function"==typeof a)&&a.then,ua(k)?f?k.call(a,g(h,d,m,f),g(h,d,n,f)):(h++,k.call(a,g(h,d,m,f),g(h,d,n,f),g(h,d,m,d.notifyWith))):(e!==m&&(i=b,j=[a]),(f||d.resolveWith)(i,j))}},l=f?k:function(){try{k()}catch(a){Aa.Deferred.exceptionHook&&Aa.Deferred.exceptionHook(a,l.error),c+1>=h&&(e!==n&&(i=b,j=[a]),d.rejectWith(i,j))}};c?l():(Aa.Deferred.getErrorHook?l.error=Aa.Deferred.getErrorHook():Aa.Deferred.getStackHook&&(l.error=Aa.Deferred.getStackHook()),a.setTimeout(l))}}var h=0;return Aa.Deferred(function(a){d[0][3].add(g(0,a,ua(f)?f:m,a.notifyWith)),d[1][3].add(g(0,a,ua(c)?c:m)),d[2][3].add(g(0,a,ua(e)?e:n))}).promise()},promise:function(a){return null!=a?Aa.extend(a,f):f}},g={};return Aa.each(d,function(a,c){var h=c[2],i=c[5];f[c[1]]=h.add,i&&h.add(function(){e=i},d[3-a][2].disable,d[3-a][3].disable,d[0][2].lock,d[0][3].lock),h.add(c[3].fire),g[c[0]]=function(){return g[c[0]+"With"](this===g?b:this,arguments),this},g[c[0]+"With"]=h.fireWith}),f.promise(g),c&&c.call(g,g),g},when:function(a){var b=arguments.length,c=b,d=Array(c),e=ka.call(arguments),f=Aa.Deferred(),g=function(a){return function(c){d[a]=this,e[a]=arguments.length>1?ka.call(arguments):c,--b||f.resolveWith(d,e)}};if(b<=1&&(o(a,f.done(g(c)).resolve,f.reject,!b),"pending"===f.state()||ua(e[c]&&e[c].then)))return f.then();for(;c--;)o(e[c],g(c),f.reject);return f.promise()}});var Ta=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;Aa.Deferred.exceptionHook=function(b,c){a.console&&a.console.warn&&b&&Ta.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,c)},Aa.readyException=function(b){a.setTimeout(function(){throw b})};var Ua=Aa.Deferred();Aa.fn.ready=function(a){return Ua.then(a).catch(function(a){Aa.readyException(a)}),this},Aa.extend({isReady:!1,readyWait:1,ready:function(a){(a===!0?--Aa.readyWait:Aa.isReady)||(Aa.isReady=!0,a!==!0&&--Aa.readyWait>0||Ua.resolveWith(wa,[Aa]))}}),Aa.ready.then=Ua.then,"complete"===wa.readyState||"loading"!==wa.readyState&&!wa.documentElement.doScroll?a.setTimeout(Aa.ready):(wa.addEventListener("DOMContentLoaded",p),a.addEventListener("load",p));var Va=function(a,c,d,e,g,h,i){var j=0,k=a.length,l=null==d;if("object"===f(d)){g=!0;for(j in d)Va(a,c,j,d[j],!0,h,i)}else if(e!==b&&(g=!0,ua(e)||(i=!0),l&&(i?(c.call(a,e),c=null):(l=c,c=function(a,b,c){return l.call(Aa(a),c)})),c))for(;j<k;j++)c(a[j],d,i?e:e.call(a[j],j,c(a[j],d)));return g?a:l?c.call(a):k?c(a[0],d):h},Wa=/^-ms-/,Xa=/-([a-z])/g,Ya=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};s.uid=1,s.prototype={cache:function(a){var b=a[this.expando];return b||(b={},Ya(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[r(b)]=c;else for(d in b)e[r(d)]=b[d];return e},get:function(a,c){return c===b?this.cache(a):a[this.expando]&&a[this.expando][r(c)]},access:function(a,c,d){return c===b||c&&"string"==typeof c&&d===b?this.get(a,c):(this.set(a,c,d),d!==b?d:c)},remove:function(a,c){var d,e=a[this.expando];if(e!==b){if(c!==b){Array.isArray(c)?c=c.map(r):(c=r(c),c=c in e?[c]:c.match(Sa)||[]),d=c.length;for(;d--;)delete e[c[d]]}(c===b||Aa.isEmptyObject(e))&&(a.nodeType?a[this.expando]=b:delete a[this.expando])}},hasData:function(a){var c=a[this.expando];return c!==b&&!Aa.isEmptyObject(c)}};var Za=new s,$a=new s,_a=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ab=/[A-Z]/g;Aa.extend({hasData:function(a){return $a.hasData(a)||Za.hasData(a)},data:function(a,b,c){return $a.access(a,b,c)},removeData:function(a,b){$a.remove(a,b)},_data:function(a,b,c){return Za.access(a,b,c)},_removeData:function(a,b){Za.remove(a,b)}}),Aa.fn.extend({data:function(a,c){var d,e,f,g=this[0],h=g&&g.attributes;if(a===b){if(this.length&&(f=$a.get(g),1===g.nodeType&&!Za.get(g,"hasDataAttrs"))){for(d=h.length;d--;)h[d]&&(e=h[d].name,0===e.indexOf("data-")&&(e=r(e.slice(5)),u(g,e,f[e])));Za.set(g,"hasDataAttrs",!0)}return f}return"object"==typeof a?this.each(function(){$a.set(this,a)}):Va(this,function(c){var d;if(g&&c===b){if(d=$a.get(g,a),d!==b)return d;if(d=u(g,a),d!==b)return d}else this.each(function(){$a.set(this,a,c)})},null,c,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){$a.remove(this,a)})}}),Aa.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=Za.get(a,b),c&&(!d||Array.isArray(c)?d=Za.access(a,b,Aa.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=Aa.queue(a,b),d=c.length,e=c.shift(),f=Aa._queueHooks(a,b),g=function(){Aa.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return Za.get(a,c)||Za.access(a,c,{empty:Aa.Callbacks("once memory").add(function(){Za.remove(a,[b+"queue",c])})})}}),Aa.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),arguments.length<d?Aa.queue(this[0],a):c===b?this:this.each(function(){var b=Aa.queue(this,a,c);Aa._queueHooks(this,a),"fx"===a&&"inprogress"!==b[0]&&Aa.dequeue(this,a)})},dequeue:function(a){return this.each(function(){Aa.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=Aa.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};for("string"!=typeof a&&(c=a,a=b),a=a||"fx";h--;)d=Za.get(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var bb=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,cb=new RegExp("^(?:([+-])=|)("+bb+")([a-z%]*)$","i"),db=["Top","Right","Bottom","Left"],eb=wa.documentElement,fb=function(a){return Aa.contains(a.ownerDocument,a)},gb={composed:!0};eb.getRootNode&&(fb=function(a){return Aa.contains(a.ownerDocument,a)||a.getRootNode(gb)===a.ownerDocument});var hb=function(a,b){return a=b||a,"none"===a.style.display||""===a.style.display&&fb(a)&&"none"===Aa.css(a,"display")},ib={};Aa.fn.extend({show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){hb(this)?Aa(this).show():Aa(this).hide()})}});var jb=/^(?:checkbox|radio)$/i,kb=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,lb=/^$|^module$|\/(?:java|ecma)script/i;!function(){var a=wa.createDocumentFragment(),b=a.appendChild(wa.createElement("div")),c=wa.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),ta.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",ta.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,b.innerHTML="<option></option>",ta.option=!!b.lastChild}();var mb={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};mb.tbody=mb.tfoot=mb.colgroup=mb.caption=mb.thead,mb.th=mb.td,ta.option||(mb.optgroup=mb.option=[1,"<select multiple='multiple'>","</select>"]);var nb=/<|&#?\w+;/,ob=/^([^.]*)(?:\.(.+)|)/;Aa.event={global:{},add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r=Za.get(a);if(Ya(a))for(d.handler&&(g=d,d=g.handler,f=g.selector),f&&Aa.find.matchesSelector(eb,f),d.guid||(d.guid=Aa.guid++),(j=r.events)||(j=r.events=Object.create(null)),(h=r.handle)||(h=r.handle=function(c){return"undefined"!=typeof Aa&&Aa.event.triggered!==c.type?Aa.event.dispatch.apply(a,arguments):b}),c=(c||"").match(Sa)||[""],k=c.length;k--;)i=ob.exec(c[k])||[],o=q=i[1],p=(i[2]||"").split(".").sort(),o&&(m=Aa.event.special[o]||{},o=(f?m.delegateType:m.bindType)||o,m=Aa.event.special[o]||{},l=Aa.extend({type:o,origType:q,data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&Aa.expr.match.needsContext.test(f),namespace:p.join(".")},g),(n=j[o])||(n=j[o]=[],n.delegateCount=0,m.setup&&m.setup.call(a,e,p,h)!==!1||a.addEventListener&&a.addEventListener(o,h)),m.add&&(m.add.call(a,l),l.handler.guid||(l.handler.guid=d.guid)),f?n.splice(n.delegateCount++,0,l):n.push(l),Aa.event.global[o]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=Za.hasData(a)&&Za.get(a);if(q&&(i=q.events)){for(b=(b||"").match(Sa)||[""],j=b.length;j--;)if(h=ob.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=Aa.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||Aa.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)Aa.event.remove(a,n+b[j],c,d,!0);Aa.isEmptyObject(i)&&Za.remove(a,"handle events")}},dispatch:function(a){var c,d,e,f,g,h,i=new Array(arguments.length),j=Aa.event.fix(a),k=(Za.get(this,"events")||Object.create(null))[j.type]||[],l=Aa.event.special[j.type]||{};for(i[0]=j,c=1;c<arguments.length;c++)i[c]=arguments[c];if(j.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,j)!==!1){for(h=Aa.event.handlers.call(this,j,k),c=0;(f=h[c++])&&!j.isPropagationStopped();)for(j.currentTarget=f.elem,d=0;(g=f.handlers[d++])&&!j.isImmediatePropagationStopped();)j.rnamespace&&g.namespace!==!1&&!j.rnamespace.test(g.namespace)||(j.handleObj=g,j.data=g.data,e=((Aa.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),e!==b&&(j.result=e)===!1&&(j.preventDefault(),j.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,j),j.result}},handlers:function(a,c){var d,e,f,g,h,i=[],j=c.delegateCount,k=a.target;if(j&&k.nodeType&&!("click"===a.type&&a.button>=1))for(;k!==this;k=k.parentNode||this)if(1===k.nodeType&&("click"!==a.type||k.disabled!==!0)){for(g=[],h={},d=0;d<j;d++)e=c[d],f=e.selector+" ",h[f]===b&&(h[f]=e.needsContext?Aa(f,this).index(k)>-1:Aa.find(f,this,null,[k]).length),h[f]&&g.push(e);g.length&&i.push({elem:k,handlers:g})}return k=this,j<c.length&&i.push({elem:k,handlers:c.slice(j)}),i},addProp:function(a,b){Object.defineProperty(Aa.Event.prototype,a,{enumerable:!0,configurable:!0,get:ua(b)?function(){if(this.originalEvent)return b(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(b){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[Aa.expando]?a:new Aa.Event(a)},special:{load:{noBubble:!0},click:{setup:function(a){var b=this||a;return jb.test(b.type)&&b.click&&h(b,"input")&&E(b,"click",!0),!1},trigger:function(a){var b=this||a;return jb.test(b.type)&&b.click&&h(b,"input")&&E(b,"click"),!0},_default:function(a){var b=a.target;return jb.test(b.type)&&b.click&&h(b,"input")&&Za.get(b,"click")||h(b,"a")}},beforeunload:{postDispatch:function(a){a.result!==b&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},Aa.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},Aa.Event=function(a,c){return this instanceof Aa.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.defaultPrevented===b&&a.returnValue===!1?B:C,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,c&&Aa.extend(this,c),this.timeStamp=a&&a.timeStamp||Date.now(),void(this[Aa.expando]=!0)):new Aa.Event(a,c)},Aa.Event.prototype={constructor:Aa.Event,isDefaultPrevented:C,isPropagationStopped:C,isImmediatePropagationStopped:C,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=B,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=B,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=B,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},Aa.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},Aa.event.addProp),Aa.each({focus:"focusin",blur:"focusout"},function(a,b){function c(a){if(wa.documentMode){var c=Za.get(this,"handle"),d=Aa.event.fix(a);d.type="focusin"===a.type?"focus":"blur",d.isSimulated=!0,c(a),d.target===d.currentTarget&&c(d)}else Aa.event.simulate(b,a.target,Aa.event.fix(a))}Aa.event.special[a]={setup:function(){var d;return E(this,a,!0),!!wa.documentMode&&(d=Za.get(this,b),d||this.addEventListener(b,c),Za.set(this,b,(d||0)+1),void 0)},trigger:function(){return E(this,a),!0},teardown:function(){var a;return!!wa.documentMode&&(a=Za.get(this,b)-1,void(a?Za.set(this,b,a):(this.removeEventListener(b,c),Za.remove(this,b))))},_default:function(b){return Za.get(b.target,a)},delegateType:b},Aa.event.special[b]={setup:function(){var d=this.ownerDocument||this.document||this,e=wa.documentMode?this:d,f=Za.get(e,b);f||(wa.documentMode?this.addEventListener(b,c):d.addEventListener(a,c,!0)),Za.set(e,b,(f||0)+1)},teardown:function(){var d=this.ownerDocument||this.document||this,e=wa.documentMode?this:d,f=Za.get(e,b)-1;f?Za.set(e,b,f):(wa.documentMode?this.removeEventListener(b,c):d.removeEventListener(a,c,!0),Za.remove(e,b))}}}),Aa.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){Aa.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||Aa.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),Aa.fn.extend({on:function(a,b,c,d){return D(this,a,b,c,d)},one:function(a,b,c,d){return D(this,a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,Aa(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof a){for(f in a)this.off(f,c,a[f]);return this}return c!==!1&&"function"!=typeof c||(d=c,c=b),d===!1&&(d=C),this.each(function(){Aa.event.remove(this,a,d,c)})}});var pb=/<script|<style|<link/i,qb=/checked\s*(?:[^=]|=\s*.checked.)/i,rb=/^\s*<!\[CDATA\[|\]\]>\s*$/g;Aa.extend({htmlPrefilter:function(a){return a},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=fb(a);if(!(ta.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||Aa.isXMLDoc(a)))for(g=y(h),f=y(a),d=0,e=f.length;d<e;d++)J(f[d],g[d]);if(b)if(c)for(f=f||y(a),g=g||y(h),d=0,e=f.length;d<e;d++)I(f[d],g[d]);else I(a,h);return g=y(h,"script"),g.length>0&&z(g,!i&&y(a,"script")),h},cleanData:function(a){for(var c,d,e,f=Aa.event.special,g=0;(d=a[g])!==b;g++)if(Ya(d)){if(c=d[Za.expando]){if(c.events)for(e in c.events)f[e]?Aa.event.remove(d,e):Aa.removeEvent(d,e,c.handle);d[Za.expando]=b}d[$a.expando]&&(d[$a.expando]=b)}}}),Aa.fn.extend({detach:function(a){return L(this,a,!0)},remove:function(a){return L(this,a)},text:function(a){return Va(this,function(a){return a===b?Aa.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return K(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=F(this,a);b.appendChild(a)}})},prepend:function(){return K(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=F(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return K(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return K(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(Aa.cleanData(y(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return Aa.clone(this,a,b)})},html:function(a){return Va(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b&&1===c.nodeType)return c.innerHTML;if("string"==typeof a&&!pb.test(a)&&!mb[(kb.exec(a)||["",""])[1].toLowerCase()]){a=Aa.htmlPrefilter(a);try{for(;d<e;d++)c=this[d]||{},1===c.nodeType&&(Aa.cleanData(y(c,!1)),c.innerHTML=a);c=0}catch(a){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return K(this,arguments,function(b){var c=this.parentNode;Aa.inArray(this,a)<0&&(Aa.cleanData(y(this)),c&&c.replaceChild(b,this))},a)}}),Aa.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){Aa.fn[a]=function(a){for(var c,d=[],e=Aa(a),f=e.length-1,g=0;g<=f;g++)c=g===f?this:this.clone(!0),Aa(e[g])[b](c),ma.apply(d,c.get());return this.pushStack(d)}});var sb=new RegExp("^("+bb+")(?!px)[a-z%]+$","i"),tb=/^--/,ub=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)},vb=function(a,b,c){var d,e,f={};for(e in b)f[e]=a.style[e],a.style[e]=b[e];d=c.call(a);for(e in b)a.style[e]=f[e];return d},wb=new RegExp(db.join("|"),"i");!function(){function b(){if(k){j.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",k.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",eb.appendChild(j).appendChild(k);var b=a.getComputedStyle(k);d="1%"!==b.top,i=12===c(b.marginLeft),k.style.right="60%",g=36===c(b.right),e=36===c(b.width),k.style.position="absolute",f=12===c(k.offsetWidth/3),eb.removeChild(j),k=null}}function c(a){return Math.round(parseFloat(a))}var d,e,f,g,h,i,j=wa.createElement("div"),k=wa.createElement("div");k.style&&(k.style.backgroundClip="content-box",k.cloneNode(!0).style.backgroundClip="",ta.clearCloneStyle="content-box"===k.style.backgroundClip,Aa.extend(ta,{boxSizingReliable:function(){return b(),e},pixelBoxStyles:function(){return b(),g},pixelPosition:function(){return b(),d},reliableMarginLeft:function(){return b(),i},scrollboxSize:function(){return b(),f},reliableTrDimensions:function(){var b,c,d,e;return null==h&&(b=wa.createElement("table"),c=wa.createElement("tr"),d=wa.createElement("div"),b.style.cssText="position:absolute;left:-11111px;border-collapse:separate",c.style.cssText="box-sizing:content-box;border:1px solid",c.style.height="1px",d.style.height="9px",d.style.display="block",eb.appendChild(b).appendChild(c).appendChild(d),e=a.getComputedStyle(c),h=parseInt(e.height,10)+parseInt(e.borderTopWidth,10)+parseInt(e.borderBottomWidth,10)===c.offsetHeight,eb.removeChild(b)),h}}))}();var xb=["Webkit","Moz","ms"],yb=wa.createElement("div").style,zb={},Ab=/^(none|table(?!-c[ea]).+)/,Bb={position:"absolute",visibility:"hidden",display:"block"},Cb={letterSpacing:"0",fontWeight:"400"};Aa.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=M(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,i=r(c),j=tb.test(c),k=a.style;return j||(c=P(i)),h=Aa.cssHooks[c]||Aa.cssHooks[i],d===b?h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:k[c]:(g=typeof d,"string"===g&&(f=cb.exec(d))&&f[1]&&(d=v(a,c,f),g="number"),null!=d&&d===d&&("number"!==g||j||(d+=f&&f[3]||(Aa.cssNumber[i]?"":"px")),ta.clearCloneStyle||""!==d||0!==c.indexOf("background")||(k[c]="inherit"),h&&"set"in h&&(d=h.set(a,d,e))===b||(j?k.setProperty(c,d):k[c]=d)),void 0)}},css:function(a,c,d,e){var f,g,h,i=r(c),j=tb.test(c);return j||(c=P(i)),h=Aa.cssHooks[c]||Aa.cssHooks[i],h&&"get"in h&&(f=h.get(a,!0,d)),f===b&&(f=M(a,c,e)),"normal"===f&&c in Cb&&(f=Cb[c]),""===d||d?(g=parseFloat(f),d===!0||isFinite(g)?g||0:f):f}}),Aa.each(["height","width"],function(a,b){Aa.cssHooks[b]={get:function(a,c,d){if(c)return!Ab.test(Aa.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?S(a,b,d):vb(a,Bb,function(){return S(a,b,d)})},set:function(a,c,d){var e,f=ub(a),g=!ta.scrollboxSize()&&"absolute"===f.position,h=g||d,i=h&&"border-box"===Aa.css(a,"boxSizing",!1,f),j=d?R(a,b,d,i,f):0;return i&&g&&(j-=Math.ceil(a["offset"+b[0].toUpperCase()+b.slice(1)]-parseFloat(f[b])-R(a,b,"border",!1,f)-.5)),j&&(e=cb.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=Aa.css(a,b)),Q(a,c,j)}}}),Aa.cssHooks.marginLeft=N(ta.reliableMarginLeft,function(a,b){if(b)return(parseFloat(M(a,"marginLeft"))||a.getBoundingClientRect().left-vb(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),Aa.each({margin:"",padding:"",border:"Width"},function(a,b){Aa.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+db[d]+b]=f[d]||f[d-2]||f[0];return e}},"margin"!==a&&(Aa.cssHooks[a+b].set=Q)}),Aa.fn.extend({css:function(a,c){return Va(this,function(a,c,d){var e,f,g={},h=0;if(Array.isArray(c)){for(e=ub(a),f=c.length;h<f;h++)g[c[h]]=Aa.css(a,c[h],!1,e);return g}return d!==b?Aa.style(a,c,d):Aa.css(a,c)},a,c,arguments.length>1)}}),Aa.Tween=T,T.prototype={constructor:T,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||Aa.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(Aa.cssNumber[c]?"":"px")},cur:function(){var a=T.propHooks[this.prop];return a&&a.get?a.get(this):T.propHooks._default.get(this)},run:function(a){var b,c=T.propHooks[this.prop];return this.options.duration?this.pos=b=Aa.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):T.propHooks._default.set(this),this}},T.prototype.init.prototype=T.prototype,T.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=Aa.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){Aa.fx.step[a.prop]?Aa.fx.step[a.prop](a):1!==a.elem.nodeType||!Aa.cssHooks[a.prop]&&null==a.elem.style[P(a.prop)]?a.elem[a.prop]=a.now:Aa.style(a.elem,a.prop,a.now+a.unit)}}},T.propHooks.scrollTop=T.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},Aa.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},Aa.fx=T.prototype.init,Aa.fx.step={};var Db,Eb,Fb=/^(?:toggle|show|hide)$/,Gb=/queueHooks$/;Aa.Animation=Aa.extend($,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return v(c.elem,a,cb.exec(b),c),c}]},tweener:function(a,b){ua(a)?(b=a,a=["*"]):a=a.match(Sa);for(var c,d=0,e=a.length;d<e;d++)c=a[d],$.tweeners[c]=$.tweeners[c]||[],$.tweeners[c].unshift(b)},prefilters:[Y],prefilter:function(a,b){b?$.prefilters.unshift(a):$.prefilters.push(a)}}),Aa.speed=function(a,b,c){var d=a&&"object"==typeof a?Aa.extend({},a):{complete:c||!c&&b||ua(a)&&a,duration:a,easing:c&&b||b&&!ua(b)&&b};return Aa.fx.off?d.duration=0:"number"!=typeof d.duration&&(d.duration in Aa.fx.speeds?d.duration=Aa.fx.speeds[d.duration]:d.duration=Aa.fx.speeds._default),null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){ua(d.old)&&d.old.call(this),d.queue&&Aa.dequeue(this,d.queue)},d},Aa.fn.extend({fadeTo:function(a,b,c,d){return this.filter(hb).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=Aa.isEmptyObject(a),f=Aa.speed(b,c,d),g=function(){var b=$(this,Aa.extend({},a),f);(e||Za.get(this,"finish"))&&b.stop(!0);
};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return"string"!=typeof a&&(d=c,c=a,a=b),c&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=Aa.timers,g=Za.get(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&Gb.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));!b&&d||Aa.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=Za.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=Aa.timers,g=d?d.length:0;for(c.finish=!0,Aa.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),Aa.each(["toggle","show","hide"],function(a,b){var c=Aa.fn[b];Aa.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(W(b,!0),a,d,e)}}),Aa.each({slideDown:W("show"),slideUp:W("hide"),slideToggle:W("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){Aa.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),Aa.timers=[],Aa.fx.tick=function(){var a,c=0,d=Aa.timers;for(Db=Date.now();c<d.length;c++)a=d[c],a()||d[c]!==a||d.splice(c--,1);d.length||Aa.fx.stop(),Db=b},Aa.fx.timer=function(a){Aa.timers.push(a),Aa.fx.start()},Aa.fx.interval=13,Aa.fx.start=function(){Eb||(Eb=!0,U())},Aa.fx.stop=function(){Eb=null},Aa.fx.speeds={slow:600,fast:200,_default:400},Aa.fn.delay=function(b,c){return b=Aa.fx?Aa.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=wa.createElement("input"),b=wa.createElement("select"),c=b.appendChild(wa.createElement("option"));a.type="checkbox",ta.checkOn=""!==a.value,ta.optSelected=c.selected,a=wa.createElement("input"),a.value="t",a.type="radio",ta.radioValue="t"===a.value}();var Hb,Ib=Aa.expr.attrHandle;Aa.fn.extend({attr:function(a,b){return Va(this,Aa.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){Aa.removeAttr(this,a)})}}),Aa.extend({attr:function(a,c,d){var e,f,g=a.nodeType;if(3!==g&&8!==g&&2!==g)return"undefined"==typeof a.getAttribute?Aa.prop(a,c,d):(1===g&&Aa.isXMLDoc(a)||(f=Aa.attrHooks[c.toLowerCase()]||(Aa.expr.match.bool.test(c)?Hb:b)),d!==b?null===d?void Aa.removeAttr(a,c):f&&"set"in f&&(e=f.set(a,d,c))!==b?e:(a.setAttribute(c,d+""),d):f&&"get"in f&&null!==(e=f.get(a,c))?e:(e=Aa.find.attr(a,c),null==e?b:e))},attrHooks:{type:{set:function(a,b){if(!ta.radioValue&&"radio"===b&&h(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d=0,e=b&&b.match(Sa);if(e&&1===a.nodeType)for(;c=e[d++];)a.removeAttribute(c)}}),Hb={set:function(a,b,c){return b===!1?Aa.removeAttr(a,c):a.setAttribute(c,c),c}},Aa.each(Aa.expr.match.bool.source.match(/\w+/g),function(a,b){var c=Ib[b]||Aa.find.attr;Ib[b]=function(a,b,d){var e,f,g=b.toLowerCase();return d||(f=Ib[g],Ib[g]=e,e=null!=c(a,b,d)?g:null,Ib[g]=f),e}});var Jb=/^(?:input|select|textarea|button)$/i,Kb=/^(?:a|area)$/i;Aa.fn.extend({prop:function(a,b){return Va(this,Aa.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[Aa.propFix[a]||a]})}}),Aa.extend({prop:function(a,c,d){var e,f,g=a.nodeType;if(3!==g&&8!==g&&2!==g)return 1===g&&Aa.isXMLDoc(a)||(c=Aa.propFix[c]||c,f=Aa.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]},propHooks:{tabIndex:{get:function(a){var b=Aa.find.attr(a,"tabindex");return b?parseInt(b,10):Jb.test(a.nodeName)||Kb.test(a.nodeName)&&a.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ta.optSelected||(Aa.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),Aa.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Aa.propFix[this.toLowerCase()]=this}),Aa.fn.extend({addClass:function(a){var b,c,d,e,f,g;return ua(a)?this.each(function(b){Aa(this).addClass(a.call(this,b,aa(this)))}):(b=ba(a),b.length?this.each(function(){if(d=aa(this),c=1===this.nodeType&&" "+_(d)+" "){for(f=0;f<b.length;f++)e=b[f],c.indexOf(" "+e+" ")<0&&(c+=e+" ");g=_(c),d!==g&&this.setAttribute("class",g)}}):this)},removeClass:function(a){var b,c,d,e,f,g;return ua(a)?this.each(function(b){Aa(this).removeClass(a.call(this,b,aa(this)))}):arguments.length?(b=ba(a),b.length?this.each(function(){if(d=aa(this),c=1===this.nodeType&&" "+_(d)+" "){for(f=0;f<b.length;f++)for(e=b[f];c.indexOf(" "+e+" ")>-1;)c=c.replace(" "+e+" "," ");g=_(c),d!==g&&this.setAttribute("class",g)}}):this):this.attr("class","")},toggleClass:function(a,c){var d,e,f,g,h=typeof a,i="string"===h||Array.isArray(a);return ua(a)?this.each(function(b){Aa(this).toggleClass(a.call(this,b,aa(this),c),c)}):"boolean"==typeof c&&i?c?this.addClass(a):this.removeClass(a):(d=ba(a),this.each(function(){if(i)for(g=Aa(this),f=0;f<d.length;f++)e=d[f],g.hasClass(e)?g.removeClass(e):g.addClass(e);else a!==b&&"boolean"!==h||(e=aa(this),e&&Za.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||a===!1?"":Za.get(this,"__className__")||""))}))},hasClass:function(a){var b,c,d=0;for(b=" "+a+" ";c=this[d++];)if(1===c.nodeType&&(" "+_(aa(c))+" ").indexOf(b)>-1)return!0;return!1}});var Lb=/\r/g;Aa.fn.extend({val:function(a){var c,d,e,f=this[0];{if(arguments.length)return e=ua(a),this.each(function(d){var f;1===this.nodeType&&(f=e?a.call(this,d,Aa(this).val()):a,null==f?f="":"number"==typeof f?f+="":Array.isArray(f)&&(f=Aa.map(f,function(a){return null==a?"":a+""})),c=Aa.valHooks[this.type]||Aa.valHooks[this.nodeName.toLowerCase()],c&&"set"in c&&c.set(this,f,"value")!==b||(this.value=f))});if(f)return c=Aa.valHooks[f.type]||Aa.valHooks[f.nodeName.toLowerCase()],c&&"get"in c&&(d=c.get(f,"value"))!==b?d:(d=f.value,"string"==typeof d?d.replace(Lb,""):null==d?"":d)}}}),Aa.extend({valHooks:{option:{get:function(a){var b=Aa.find.attr(a,"value");return null!=b?b:_(Aa.text(a))}},select:{get:function(a){var b,c,d,e=a.options,f=a.selectedIndex,g="select-one"===a.type,i=g?null:[],j=g?f+1:e.length;for(d=f<0?j:g?f:0;d<j;d++)if(c=e[d],(c.selected||d===f)&&!c.disabled&&(!c.parentNode.disabled||!h(c.parentNode,"optgroup"))){if(b=Aa(c).val(),g)return b;i.push(b)}return i},set:function(a,b){for(var c,d,e=a.options,f=Aa.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=Aa.inArray(Aa.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),Aa.each(["radio","checkbox"],function(){Aa.valHooks[this]={set:function(a,b){if(Array.isArray(b))return a.checked=Aa.inArray(Aa(a).val(),b)>-1}},ta.checkOn||(Aa.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var Mb=a.location,Nb={guid:Date.now()},Ob=/\?/;Aa.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(a){}return d=c&&c.getElementsByTagName("parsererror")[0],c&&!d||Aa.error("Invalid XML: "+(d?Aa.map(d.childNodes,function(a){return a.textContent}).join("\n"):b)),c};var Pb=/^(?:focusinfocus|focusoutblur)$/,Qb=function(a){a.stopPropagation()};Aa.extend(Aa.event,{trigger:function(c,d,e,f){var g,h,i,j,k,l,m,n,o=[e||wa],p=qa.call(c,"type")?c.type:c,q=qa.call(c,"namespace")?c.namespace.split("."):[];if(h=n=i=e=e||wa,3!==e.nodeType&&8!==e.nodeType&&!Pb.test(p+Aa.event.triggered)&&(p.indexOf(".")>-1&&(q=p.split("."),p=q.shift(),q.sort()),k=p.indexOf(":")<0&&"on"+p,c=c[Aa.expando]?c:new Aa.Event(p,"object"==typeof c&&c),c.isTrigger=f?2:3,c.namespace=q.join("."),c.rnamespace=c.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=b,c.target||(c.target=e),d=null==d?[c]:Aa.makeArray(d,[c]),m=Aa.event.special[p]||{},f||!m.trigger||m.trigger.apply(e,d)!==!1)){if(!f&&!m.noBubble&&!va(e)){for(j=m.delegateType||p,Pb.test(j+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),i=h;i===(e.ownerDocument||wa)&&o.push(i.defaultView||i.parentWindow||a)}for(g=0;(h=o[g++])&&!c.isPropagationStopped();)n=h,c.type=g>1?j:m.bindType||p,l=(Za.get(h,"events")||Object.create(null))[c.type]&&Za.get(h,"handle"),l&&l.apply(h,d),l=k&&h[k],l&&l.apply&&Ya(h)&&(c.result=l.apply(h,d),c.result===!1&&c.preventDefault());return c.type=p,f||c.isDefaultPrevented()||m._default&&m._default.apply(o.pop(),d)!==!1||!Ya(e)||k&&ua(e[p])&&!va(e)&&(i=e[k],i&&(e[k]=null),Aa.event.triggered=p,c.isPropagationStopped()&&n.addEventListener(p,Qb),e[p](),c.isPropagationStopped()&&n.removeEventListener(p,Qb),Aa.event.triggered=b,i&&(e[k]=i)),c.result}},simulate:function(a,b,c){var d=Aa.extend(new Aa.Event,c,{type:a,isSimulated:!0});Aa.event.trigger(d,null,b)}}),Aa.fn.extend({trigger:function(a,b){return this.each(function(){Aa.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return Aa.event.trigger(a,b,c,!0)}});var Rb=/\[\]$/,Sb=/\r?\n/g,Tb=/^(?:submit|button|image|reset|file)$/i,Ub=/^(?:input|select|textarea|keygen)/i;Aa.param=function(a,b){var c,d=[],e=function(a,b){var c=ua(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==c?"":c)};if(null==a)return"";if(Array.isArray(a)||a.jquery&&!Aa.isPlainObject(a))Aa.each(a,function(){e(this.name,this.value)});else for(c in a)ca(c,a[c],b,e);return d.join("&")},Aa.fn.extend({serialize:function(){return Aa.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=Aa.prop(this,"elements");return a?Aa.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!Aa(this).is(":disabled")&&Ub.test(this.nodeName)&&!Tb.test(a)&&(this.checked||!jb.test(a))}).map(function(a,b){var c=Aa(this).val();return null==c?null:Array.isArray(c)?Aa.map(c,function(a){return{name:b.name,value:a.replace(Sb,"\r\n")}}):{name:b.name,value:c.replace(Sb,"\r\n")}}).get()}});var Vb=/%20/g,Wb=/#.*$/,Xb=/([?&])_=[^&]*/,Yb=/^(.*?):[ \t]*([^\r\n]*)$/gm,Zb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,$b=/^(?:GET|HEAD)$/,_b=/^\/\//,ac={},bc={},cc="*/".concat("*"),dc=wa.createElement("a");dc.href=Mb.href,Aa.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Mb.href,type:"GET",isLocal:Zb.test(Mb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":cc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":Aa.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?fa(fa(a,Aa.ajaxSettings),b):fa(Aa.ajaxSettings,a)},ajaxPrefilter:da(ac),ajaxTransport:da(bc),ajax:function(c,d){function e(c,d,e,i){var k,n,o,v,w,x=d;l||(l=!0,j&&a.clearTimeout(j),f=b,h=i||"",y.readyState=c>0?4:0,k=c>=200&&c<300||304===c,e&&(v=ga(p,y,e)),!k&&Aa.inArray("script",p.dataTypes)>-1&&Aa.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),v=ha(p,v,y,k),k?(p.ifModified&&(w=y.getResponseHeader("Last-Modified"),w&&(Aa.lastModified[g]=w),w=y.getResponseHeader("etag"),w&&(Aa.etag[g]=w)),204===c||"HEAD"===p.type?x="nocontent":304===c?x="notmodified":(x=v.state,n=v.data,o=v.error,k=!o)):(o=x,!c&&x||(x="error",c<0&&(c=0))),y.status=c,y.statusText=(d||x)+"",k?s.resolveWith(q,[n,x,y]):s.rejectWith(q,[y,x,o]),y.statusCode(u),u=b,m&&r.trigger(k?"ajaxSuccess":"ajaxError",[y,p,k?n:o]),t.fireWith(q,[y,x]),m&&(r.trigger("ajaxComplete",[y,p]),--Aa.active||Aa.event.trigger("ajaxStop")))}"object"==typeof c&&(d=c,c=b),d=d||{};var f,g,h,i,j,k,l,m,n,o,p=Aa.ajaxSetup({},d),q=p.context||p,r=p.context&&(q.nodeType||q.jquery)?Aa(q):Aa.event,s=Aa.Deferred(),t=Aa.Callbacks("once memory"),u=p.statusCode||{},v={},w={},x="canceled",y={readyState:0,getResponseHeader:function(a){var b;if(l){if(!i)for(i={};b=Yb.exec(h);)i[b[1].toLowerCase()+" "]=(i[b[1].toLowerCase()+" "]||[]).concat(b[2]);b=i[a.toLowerCase()+" "]}return null==b?null:b.join(", ")},getAllResponseHeaders:function(){return l?h:null},setRequestHeader:function(a,b){return null==l&&(a=w[a.toLowerCase()]=w[a.toLowerCase()]||a,v[a]=b),this},overrideMimeType:function(a){return null==l&&(p.mimeType=a),this},statusCode:function(a){var b;if(a)if(l)y.always(a[y.status]);else for(b in a)u[b]=[u[b],a[b]];return this},abort:function(a){var b=a||x;return f&&f.abort(b),e(0,b),this}};if(s.promise(y),p.url=((c||p.url||Mb.href)+"").replace(_b,Mb.protocol+"//"),p.type=d.method||d.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(Sa)||[""],null==p.crossDomain){k=wa.createElement("a");try{k.href=p.url,k.href=k.href,p.crossDomain=dc.protocol+"//"+dc.host!=k.protocol+"//"+k.host}catch(a){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=Aa.param(p.data,p.traditional)),ea(ac,p,d,y),l)return y;m=Aa.event&&p.global,m&&0===Aa.active++&&Aa.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!$b.test(p.type),g=p.url.replace(Wb,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Vb,"+")):(o=p.url.slice(g.length),p.data&&(p.processData||"string"==typeof p.data)&&(g+=(Ob.test(g)?"&":"?")+p.data,delete p.data),p.cache===!1&&(g=g.replace(Xb,"$1"),o=(Ob.test(g)?"&":"?")+"_="+Nb.guid++ +o),p.url=g+o),p.ifModified&&(Aa.lastModified[g]&&y.setRequestHeader("If-Modified-Since",Aa.lastModified[g]),Aa.etag[g]&&y.setRequestHeader("If-None-Match",Aa.etag[g])),(p.data&&p.hasContent&&p.contentType!==!1||d.contentType)&&y.setRequestHeader("Content-Type",p.contentType),y.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+cc+"; q=0.01":""):p.accepts["*"]);for(n in p.headers)y.setRequestHeader(n,p.headers[n]);if(p.beforeSend&&(p.beforeSend.call(q,y,p)===!1||l))return y.abort();if(x="abort",t.add(p.complete),y.done(p.success),y.fail(p.error),f=ea(bc,p,d,y)){if(y.readyState=1,m&&r.trigger("ajaxSend",[y,p]),l)return y;p.async&&p.timeout>0&&(j=a.setTimeout(function(){y.abort("timeout")},p.timeout));try{l=!1,f.send(v,e)}catch(a){if(l)throw a;e(-1,a)}}else e(-1,"No Transport");return y},getJSON:function(a,b,c){return Aa.get(a,b,c,"json")},getScript:function(a,c){return Aa.get(a,b,c,"script")}}),Aa.each(["get","post"],function(a,c){Aa[c]=function(a,d,e,f){return ua(d)&&(f=f||e,e=d,d=b),Aa.ajax(Aa.extend({url:a,type:c,dataType:f,data:d,success:e},Aa.isPlainObject(a)&&a))}}),Aa.ajaxPrefilter(function(a){var b;for(b in a.headers)"content-type"===b.toLowerCase()&&(a.contentType=a.headers[b]||"")}),Aa._evalUrl=function(a,b,c){return Aa.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(a){Aa.globalEval(a,b,c)}})},Aa.fn.extend({wrapAll:function(a){var b;return this[0]&&(ua(a)&&(a=a.call(this[0])),b=Aa(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this},wrapInner:function(a){return ua(a)?this.each(function(b){Aa(this).wrapInner(a.call(this,b))}):this.each(function(){var b=Aa(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=ua(a);return this.each(function(c){Aa(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){Aa(this).replaceWith(this.childNodes)}),this}}),Aa.expr.pseudos.hidden=function(a){return!Aa.expr.pseudos.visible(a)},Aa.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},Aa.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(a){}};var ec={0:200,1223:204},fc=Aa.ajaxSettings.xhr();ta.cors=!!fc&&"withCredentials"in fc,ta.ajax=fc=!!fc,Aa.ajaxTransport(function(c){var d,e;if(ta.cors||fc&&!c.crossDomain)return{send:function(f,g){var h,i=c.xhr();if(i.open(c.type,c.url,c.async,c.username,c.password),c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),c.crossDomain||f["X-Requested-With"]||(f["X-Requested-With"]="XMLHttpRequest");for(h in f)i.setRequestHeader(h,f[h]);d=function(a){return function(){d&&(d=e=i.onload=i.onerror=i.onabort=i.ontimeout=i.onreadystatechange=null,"abort"===a?i.abort():"error"===a?"number"!=typeof i.status?g(0,"error"):g(i.status,i.statusText):g(ec[i.status]||i.status,i.statusText,"text"!==(i.responseType||"text")||"string"!=typeof i.responseText?{binary:i.response}:{text:i.responseText},i.getAllResponseHeaders()))}},i.onload=d(),e=i.onerror=i.ontimeout=d("error"),i.onabort!==b?i.onabort=e:i.onreadystatechange=function(){4===i.readyState&&a.setTimeout(function(){d&&e()})},d=d("abort");try{i.send(c.hasContent&&c.data||null)}catch(a){if(d)throw a}},abort:function(){d&&d()}}}),Aa.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),Aa.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return Aa.globalEval(a),a}}}),Aa.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),Aa.ajaxTransport("script",function(a){if(a.crossDomain||a.scriptAttrs){var b,c;return{send:function(d,e){b=Aa("<script>").attr(a.scriptAttrs||{}).prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),wa.head.appendChild(b[0])},abort:function(){c&&c()}}}});var gc=[],hc=/(=)\?(?=&|$)|\?\?/;Aa.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=gc.pop()||Aa.expando+"_"+Nb.guid++;return this[a]=!0,a}}),Aa.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.jsonp!==!1&&(hc.test(c.url)?"url":"string"==typeof c.data&&0===(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&hc.test(c.data)&&"data");if(i||"jsonp"===c.dataTypes[0])return f=c.jsonpCallback=ua(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,i?c[i]=c[i].replace(hc,"$1"+f):c.jsonp!==!1&&(c.url+=(Ob.test(c.url)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||Aa.error(f+" was not called"),h[0]},c.dataTypes[0]="json",g=a[f],a[f]=function(){h=arguments},e.always(function(){g===b?Aa(a).removeProp(f):a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,gc.push(f)),h&&ua(g)&&g(h[0]),h=g=b}),"script"}),ta.createHTMLDocument=function(){var a=wa.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}(),Aa.parseHTML=function(a,b,c){if("string"!=typeof a)return[];"boolean"==typeof b&&(c=b,b=!1);var d,e,f;return b||(ta.createHTMLDocument?(b=wa.implementation.createHTMLDocument(""),d=b.createElement("base"),d.href=wa.location.href,b.head.appendChild(d)):b=wa),e=Ma.exec(a),f=!c&&[],e?[b.createElement(e[1])]:(e=A([a],b,f),f&&f.length&&Aa(f).remove(),Aa.merge([],e.childNodes))},Aa.fn.load=function(a,c,d){var e,f,g,h=this,i=a.indexOf(" ");return i>-1&&(e=_(a.slice(i)),a=a.slice(0,i)),ua(c)?(d=c,c=b):c&&"object"==typeof c&&(f="POST"),h.length>0&&Aa.ajax({url:a,type:f||"GET",dataType:"html",data:c}).done(function(a){g=arguments,h.html(e?Aa("<div>").append(Aa.parseHTML(a)).find(e):a)}).always(d&&function(a,b){h.each(function(){d.apply(this,g||[a.responseText,b,a])})}),this},Aa.expr.pseudos.animated=function(a){return Aa.grep(Aa.timers,function(b){return a===b.elem}).length},Aa.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=Aa.css(a,"position"),l=Aa(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=Aa.css(a,"top"),i=Aa.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),ua(b)&&(b=b.call(a,c,Aa.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},Aa.fn.extend({offset:function(a){if(arguments.length)return a===b?this:this.each(function(b){Aa.offset.setOffset(this,a,b)});var c,d,e=this[0];if(e&&e.getClientRects)return e.getClientRects().length?(c=e.getBoundingClientRect(),d=e.ownerDocument.defaultView,{top:c.top+d.pageYOffset,left:c.left+d.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var a,b,c,d=this[0],e={top:0,left:0};if("fixed"===Aa.css(d,"position"))b=d.getBoundingClientRect();else{for(b=this.offset(),c=d.ownerDocument,a=d.offsetParent||c.documentElement;a&&(a===c.body||a===c.documentElement)&&"static"===Aa.css(a,"position");)a=a.parentNode;a&&a!==d&&1===a.nodeType&&(e=Aa(a).offset(),e.top+=Aa.css(a,"borderTopWidth",!0),e.left+=Aa.css(a,"borderLeftWidth",!0))}return{top:b.top-e.top-Aa.css(d,"marginTop",!0),left:b.left-e.left-Aa.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&"static"===Aa.css(a,"position");)a=a.offsetParent;return a||eb})}}),Aa.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d="pageYOffset"===c;Aa.fn[a]=function(e){return Va(this,function(a,e,f){var g;return va(a)?g=a:9===a.nodeType&&(g=a.defaultView),f===b?g?g[c]:a[e]:void(g?g.scrollTo(d?g.pageXOffset:f,d?f:g.pageYOffset):a[e]=f)},a,e,arguments.length)}}),Aa.each(["top","left"],function(a,b){Aa.cssHooks[b]=N(ta.pixelPosition,function(a,c){if(c)return c=M(a,b),sb.test(c)?Aa(a).position()[b]+"px":c})}),Aa.each({Height:"height",Width:"width"},function(a,c){Aa.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){Aa.fn[e]=function(f,g){var h=arguments.length&&(d||"boolean"!=typeof f),i=d||(f===!0||g===!0?"margin":"border");return Va(this,function(c,d,f){var g;return va(c)?0===e.indexOf("outer")?c["inner"+a]:c.document.documentElement["client"+a]:9===c.nodeType?(g=c.documentElement,Math.max(c.body["scroll"+a],g["scroll"+a],c.body["offset"+a],g["offset"+a],g["client"+a])):f===b?Aa.css(c,d,i):Aa.style(c,d,f,i)},c,h?f:b,h)}})}),Aa.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){Aa.fn[b]=function(a){return this.on(b,a)}}),Aa.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},hover:function(a,b){return this.on("mouseenter",a).on("mouseleave",b||a)}}),Aa.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,b){Aa.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}});var ic=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;Aa.proxy=function(a,c){var d,e,f;return"string"==typeof c&&(d=a[c],c=a,a=d),ua(a)?(e=ka.call(arguments,2),f=function(){return a.apply(c||this,e.concat(ka.call(arguments)))},f.guid=a.guid=a.guid||Aa.guid++,f):b},Aa.holdReady=function(a){a?Aa.readyWait++:Aa.ready(!0)},Aa.isArray=Array.isArray,Aa.parseJSON=JSON.parse,Aa.nodeName=h,Aa.isFunction=ua,Aa.isWindow=va,Aa.camelCase=r,Aa.type=f,Aa.now=Date.now,Aa.isNumeric=function(a){var b=Aa.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))},Aa.trim=function(a){return null==a?"":(a+"").replace(ic,"$1")},"function"==typeof d&&d.amd&&d("jqueryCafe",[],function(){return Aa});var jc=a.jQuery,kc=a.$;return Aa.noConflict=function(b){return a.$===Aa&&(a.$=kc),b&&a.jQuery===Aa&&(a.jQuery=jc),Aa},Aa}),d("utilities/ColorUtils",["jqueryCafe"],function(a){function b(b){var d;return b=b||"",d=c(b),!d||a.isEmptyObject(b)?null:(d.originalInput=b,d.roundA=y(100*d.a)/100,d.r<1&&(d.r=y(d.r)),d.g<1&&(d.g=y(d.g)),d.b<1&&(d.b=y(d.b)),d)}function c(a){var b={r:0,g:0,b:0},c=1;return"string"==typeof a&&(a=d(a)),a&&"object"==typeof a?(a.hasOwnProperty("r")&&a.hasOwnProperty("g")&&a.hasOwnProperty("b")?b=e(a.r,a.g,a.b):a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("v")?(a.s=s(a.s),a.v=s(a.v),b=g(a.h,a.s,a.v)):a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("l")&&(a.s=s(a.s),a.l=s(a.l),b=i(a.h,a.s,a.l)),a.hasOwnProperty("a")&&(c=a.a),isNaN(b.r)||isNaN(b.g)||isNaN(b.b)?null:(c=l(c),{r:z(255,A(b.r,0)),g:z(255,A(b.g,0)),b:z(255,A(b.b,0)),a:c})):null}function d(a){var b,c;if(a=a.replace(v,"").replace(w,"").toLowerCase(),b=!1,C[a])a=C[a],b=!0;else if("transparent"===a)return{r:0,g:0,b:0,a:0};return(c=B.rgb.exec(a))?{r:c[1],g:c[2],b:c[3]}:(c=B.rgba.exec(a))?{r:c[1],g:c[2],b:c[3],a:c[4]}:(c=B.hsl.exec(a))?{h:c[1],s:c[2],l:c[3]}:(c=B.hsla.exec(a))?{h:c[1],s:c[2],l:c[3],a:c[4]}:(c=B.hsv.exec(a))?{h:c[1],s:c[2],v:c[3]}:(c=B.hsva.exec(a))?{h:c[1],s:c[2],v:c[3],a:c[4]}:(c=B.hex8.exec(a))?{a:r(c[1]),r:p(c[2]),g:p(c[3]),b:p(c[4])}:(c=B.hex6.exec(a))?{r:p(c[1]),g:p(c[2]),b:p(c[3])}:(c=B.hex3.exec(a))?{r:p(c[1]+""+c[1]),g:p(c[2]+""+c[2]),b:p(c[3]+""+c[3])}:null}function e(a,b,c){return{r:255*o(a,255),g:255*o(b,255),b:255*o(c,255)}}function f(a,b,c){var d,e,f,g,h,i;if(a=o(a,255),b=o(b,255),c=o(c,255),d=A(a,b,c),e=z(a,b,c),h=d,i=d-e,g=0===d?0:i/d,d===e)f=0;else{switch(d){case a:f=(b-c)/i+(b<c?6:0);break;case b:f=(c-a)/i+2;break;case c:f=(a-b)/i+4}f/=6}return{h:f,s:g,v:h}}function g(a,b,c){var d,e,f,g,h,i,j,k,l;return a=6*o(a,360),b=o(b,100),c=o(c,100),d=x.floor(a),e=a-d,f=c*(1-b),g=c*(1-e*b),h=c*(1-(1-e)*b),i=d%6,j=[c,g,f,f,h,c][i],k=[h,c,c,g,f,f][i],l=[f,f,h,c,c,g][i],{r:255*j,g:255*k,b:255*l}}function h(a,b,c){var d,e,f,g,h,i;if(a=o(a,255),b=o(b,255),c=o(c,255),g=A(a,b,c),h=z(a,b,c),f=(g+h)/2,g===h)d=e=0;else{switch(i=g-h,e=f>.5?i/(2-g-h):i/(g+h),g){case a:d=(b-c)/i+(b<c?6:0);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return{h:d,s:e,l:f}}function i(a,b,c){function d(a,b,c){return c=c<0?c+1:c,c=c>1?c-1:c,c<1/6?a+6*(b-a)*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a}var e,f,g,h,i;return a=o(a,360),b=o(b,100),c=o(c,100),0===b?e=f=g=c:(h=c<.5?c*(1+b):c+b-c*b,i=2*c-h,e=d(i,h,a+1/3),f=d(i,h,a),g=d(i,h,a-1/3)),{r:255*e,g:255*f,b:255*g}}function j(a,b,c,d){var e=[u(y(a).toString(16)),u(y(b).toString(16)),u(y(c).toString(16))];return d&&e[0].charAt(0)===e[0].charAt(1)&&e[1].charAt(0)===e[1].charAt(1)&&e[2].charAt(0)===e[2].charAt(1)?e[0].charAt(0)+e[1].charAt(0)+e[2].charAt(0):e.join("")}function k(a,b,c,d){var e=[u(q(d)),u(y(a).toString(16)),u(y(b).toString(16)),u(y(c).toString(16))];return e.join("")}function l(a){return a=parseFloat(a),(isNaN(a)||a<0||a>1)&&(a=1),a}function m(a){return"string"==typeof a&&a.indexOf(".")!==-1&&1===parseFloat(a)}function n(a){return"string"==typeof a&&a.indexOf("%")!==-1}function o(a,b){var c;return m(a)&&(a="100%"),c=n(a),a=z(b,A(0,parseFloat(a))),c&&(a=parseInt(a*b,10)/100),x.abs(a-b)<1e-6?1:a%b/parseFloat(b)}function p(a){return parseInt(a,16)}function q(a){return y(255*parseFloat(a)).toString(16)}function r(a){return p(a)/255}function s(a){return a<=1&&(a=100*a+"%"),a}function t(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&(c[a[b]]=b);return c}function u(a){return 1===a.length?"0"+a:""+a}var v=/^[\s,#]+/,w=/\s+$/,x=Math,y=x.round,z=x.min,A=x.max,B=function(){var a="[-\\+]?\\d+%?",b="[-\\+]?\\d*\\.\\d+%?",c="(?:"+b+")|(?:"+a+")",d="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?",e="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?";return{rgb:new RegExp("rgb"+d),rgba:new RegExp("rgba"+e),hsl:new RegExp("hsl"+d),hsla:new RegExp("hsla"+e),hsv:new RegExp("hsv"+d),hsva:new RegExp("hsva"+e),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}(),C={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},D=t(C);return a.colorUtils={equals:function(a,b){return!(!a||!b)&&this.toRGBString(a)===this.toRGBString(b)},isColorName:function(a){return!!C[a]},toHSL:function(a,b){var c=this.toHSLA(a,b);return c?{h:c.h,s:c.s,l:c.l}:null},toHSLA:function(a,c){var d,e=c?a:b(a);return e?(d=h(e.r,e.g,e.b),{h:360*d.h,s:100*d.s,l:100*d.l,a:e.a}):null},toHSLString:function(a,c){var d,e,f,g,i=c?a:b(a);return i?(d=h(i.r,i.g,i.b),e=y(360*d.h),f=y(100*d.s),g=y(100*d.l),1===i.a?"hsl("+e+", "+f+"%, "+g+"%)":"hsla("+e+", "+f+"%, "+g+"%, "+i.roundA+")"):null},toHSVA:function(a,c){var d,e=c?a:b(a);return e?(d=f(e.r,e.g,e.b),{h:360*d.h,s:100*d.s,v:100*d.v,a:e.a}):null},toHSV:function(a,b){var c=this.toHSVA(a,b);return c?{h:c.h,s:c.s,v:c.v}:null},toHSVString:function(a,c){var d,e,g,h,i=c?a:b(a);return i?(d=f(i.r,i.g,i.b),e=y(360*d.h),g=y(100*d.s),h=y(100*d.v),1===i.a?"hsv("+e+", "+g+"%, "+h+"%)":"hsva("+e+", "+g+"%, "+h+"%, "+i.roundA+")"):null},toHEX:function(a,c,d){var e=d?a:b(a);return e?j(e.r,e.g,e.b,c):null},toHEXString:function(a,c,d){var e=d?a:b(a);return e?"#"+this.toHEX(e,c,!0):null},toHEX8:function(a,c){var d=c?a:b(a);return d?k(d.r,d.g,d.b,d.a):null;
},toHEX8String:function(a,c){var d=c?a:b(a);return d?"#"+this.toHEX8(d,!0):null},toRGBA:function(a,c){var d=c?a:b(a);return d?{r:y(d.r),g:y(d.g),b:y(d.b),a:d.a}:null},toRGB:function(a,b){var c=this.toRGBA(a,b);return c?{r:c.r,g:c.g,b:c.b}:null},toRGBString:function(a,c){var d=c?a:b(a);return d?1===d.a?"rgb("+y(d.r)+", "+y(d.g)+", "+y(d.b)+")":"rgba("+y(d.r)+", "+y(d.g)+", "+y(d.b)+", "+d.roundA+")":null},toName:function(a,c){var d=c?a:b(a);return d?0===d.a?"transparent":d.a<1?"":D[j(d.r,d.g,d.b,!0)]||"":""}},a.colorUtils}),d("utilities/EditorConstants",[],function(){function a(){function a(a){var b=a.getMonth()+1,c=a.getDate();return[a.getFullYear(),(b>9?"":"0")+b,(c>9?"":"0")+c].join("")}function b(){var a,b,c=d.length;for(a=0;a<c;a++)if(b=d[a],!b||!b.length||4!==b.length){c=-1;break}return c}var c,d,e,f,g,h,i,j,k,l,m;return F?F:(c="5636-2KZG-08ET",d=c.split("-"),f=b(),e=d.join("").length,i=new Date,F={},g=d[1]+d[2],j=parseInt(g,36).toString().substring(0,8),k=j.slice(0,4),l=j.slice(4,6),m=j.slice(6,8),h=new Date(k+"-"+l+"-"+m).getTime()-i.getTime(),i=a(i),F.e=j,F.d={y:parseInt(k,10),m:parseInt(l,10),d:parseInt(m,10)},F.c=i,F.r=h<0?0:Math.ceil(h/864e5),F.u=f,F.k=e,F.t=E,I&&(F.fd=!0),F)}function c(a,c,d){var e,f,g,h,i,j,k={};if(!a)return k;for(e=a.split(/(?:\s|,)+/g),c=c===b||c,h=d===b||d,f=0,g=e.length;f<g;f++)i=c?e[f].toUpperCase():e[f].toLowerCase(),i.indexOf(":")!==-1&&2===(j=i.split(":")).length&&(i=j[0],h=j[1]),k[i]=h;return k}function d(a){var b,c=[];if(a)if(Object.keys)c=Object.keys(a);else for(b in a)c.push(b);return c}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I=!0;return I=!0,e={NATIVE_COMMAND:1,CUSTOM_COMMAND:2,CUSTOM_COMMAND_BLOCK:3,CUSTOM_COMMAND_RANGE:5,SYSTEM_COMMAND:4},f={ROOT_NODE:99,ELEM_NODE:1,ATTR_NODE:2,TEXT_NODE:3,CDATA_NODE:4,COMMENT_NODE:8,DOC_NODE:9,DOCTYPE_NODE:10},g={A:"A",ABBR:"ABBR",ACRONYM:"ACRONYM",ADDRESS:"ADDRESS",APPLET:"APPLET",AREA:"AREA",ARTICLE:"ARTICLE",ASIDE:"ASIDE",AUDIO:"AUDIO",B:"B",BASE:"BASE",BASEFONT:"BASEFONT",BDI:"BDI",BDO:"BDO",BIG:"BIG",BLOCKQUOTE:"BLOCKQUOTE",BODY:"BODY",BR:"BR",BUTTON:"BUTTON",CANVAS:"CANVAS",CAPTION:"CAPTION",CENTER:"CENTER",CITE:"CITE",CODE:"CODE",COL:"COL",COLGROUP:"COLGROUP",DATA:"DATA",DATALIST:"DATALIST",DD:"DD",DEL:"DEL",DETAILS:"DETAILS",DFN:"DFN",DIALOG:"DIALOG",DIR:"DIR",DIV:"DIV",DL:"DL",DT:"DT",EM:"EM",EMBED:"EMBED",FIELDSET:"FIELDSET",FIGCAPTION:"FIGCAPTION",FIGURE:"FIGURE",FONT:"FONT",FOOTER:"FOOTER",FORM:"FORM",FRAME:"FRAME",FRAMESET:"FRAMESET",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",HEAD:"HEAD",HEADER:"HEADER",HR:"HR",HTML:"HTML",I:"I",IFRAME:"IFRAME",IMG:"IMG",INPUT:"INPUT",INS:"INS",KBD:"KBD",LABEL:"LABEL",LEGEND:"LEGEND",LI:"LI",LINK:"LINK",MAIN:"MAIN",MAP:"MAP",MARK:"MARK",META:"META",METER:"METER",NAV:"NAV",NOFRAMES:"NOFRAMES",NOSCRIPT:"NOSCRIPT",OBJECT:"OBJECT",OL:"OL",OPTGROUP:"OPTGROUP",OPTION:"OPTION",OUTPUT:"OUTPUT",P:"P",PARAM:"PARAM",PICTURE:"PICTURE",PRE:"PRE",PROGRESS:"PROGRESS",Q:"Q",RP:"RP",RT:"RT",RUBY:"RUBY",S:"S",SAMP:"SAMP",SCRIPT:"SCRIPT",SECTION:"SECTION",SELECT:"SELECT",SMALL:"SMALL",SOURCE:"SOURCE",SPAN:"SPAN",STRIKE:"STRIKE",STRONG:"STRONG",STYLE:"STYLE",SUB:"SUB",SUMMARY:"SUMMARY",SUP:"SUP",SVG:"SVG",TABLE:"TABLE",TBODY:"TBODY",TD:"TD",TEMPLATE:"TEMPLATE",TEXTAREA:"TEXTAREA",TFOOT:"TFOOT",TH:"TH",THEAD:"THEAD",TIME:"TIME",TITLE:"TITLE",TR:"TR",TRACK:"TRACK",TT:"TT",U:"U",UL:"UL",VAR:"VAR",VIDEO:"VIDEO",WBR:"WBR"},A={TOGGLE:1,MENU:2,COLOR:3,ENABLED:4},h=["image/bmp","image/png","image/jpg","image/jpeg","image/gif"],i=["bmp","png","jpg","jpeg","gif"],j=["bmp","png","jpg","jpeg","gif","svg"],y=c("a,abbr,acronym,address,applet,area,article,aside,audio,b,base,basefont,bdi,bdo,big,blockquote,br,button,canvas,caption,center,cite,code,col,colgroup,datalist,dd,del,details,dfn,dialog,dir,div,dl,dt,em,embed,fieldset,figcaption,figure,font,footer,form,frame,frameset,h1,h2,h3,h4,h5,h6,head,header,hr,html,i,iframe,img,input,ins,kbd,keygen,label,legend,li,link,main,map,mark,menu,menuitem,meta,meter,nav,noframes,noscript,object,ol,optgroup,option,output,p,param,pre,progress,q,rp,rt,ruby,s,samp,script,section,select,small,source,span,strike,strong,style,sub,summary,sup,table,tbody,td,textarea,tfoot,th,thead,time,title,tr,track,tt,u,ul,var,video,wbr, #text, #comment"),k=c("address,applet,blockquote,button,center,dd,del,dir,div,dl,dt,fieldset,form,frameset,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,p,pre,script,table,tbody,td,tfoot,th,thead,tr,ul"),m=c("svg"),l=c("form,input,option,optgroup,select,button,datalist,textarea"),n=c("head,base,bgsound,link,meta,noframes,style,template,title"),s=c("a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),u="p,h1,h2,h3,h4,h5,h6,div,li,dt,dd,blockquote",t=c(u),z=c("address,article,aside,audio,blockquote,canvas,dd,div,dl,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,hr,noscript,ol,output,p,pre,section,table,tfoot,ul,video"),v=c("colgroup,dd,dt,li,option,options,p,td,tfoot,th,thead, tr"),x=c("area,base,basefont,br,col,command,embed,hr,img,input, isindex,keygen,link,menuitem,meta,param,source,track,wbr"),r="onafterprint,onanimationcancel,onanimationend,onanimationiteration,\t\tonbeforeinstallprompt,onbeforeprint,onbeforeunload,onblur,oncopy,ondeviceorientationabsolute,\t\tonDOMContentLoaded,onerror,onfocus,ongamepadconnected,onhashchange,onlanguagechange,onload,\t\tonmessage,onmessageerror,onoffline,ononline,onorientationchange,onpagehide,onpageshow,onpaste,\t\tonpopstate,onrejectionhandled,onstorage,ontransitioncancel,onunhandledrejection,onunload,\t\tonvrdisplayconnect,onvrdisplaydisconnect,onvrdisplaypresentchange,ondragdrop,onvrdisplayactivate,\t\tonvrdisplayblur,onvrdisplaydeactivate,onvrdisplayfocus,onvrdisplaypointerrestricted,\t\tonvrdisplaypointerunrestricted,onafterscriptexecute,onanimationstart,onbeforescriptexecute,ondrag,\t\tondragend,ondragenter,ondragleave,ondragover,ondragstart,ondrop,onfullscreenchange,onfullscreenerror,\t\tongotpointercapture,onkeydown,onkeypress,onkeyup,onlostpointercapture,onpointercancel,onpointerdown,\t\tonpointerenter,onpointerleave,onpointerlockchange,onpointerlockerror,onpointermove,onpointerout,\t\tonpointerover,onpointerup,onreadystatechange,onscroll,onselectionchange,onselectstart,ontouchcancel,\t\tontouchend,ontouchmove,ontouchstart,ontransitionend,ontransitionrun,ontransitionstart,onvisibilitychange,\t\tonwheel,onauxclick,onclick,oncompositionend,oncompositionstart,oncompositionupdate,oncontextmenu,oncut,\t\tondblclick,onDOMActivate,onDOMMouseScroll,onfocusin,onfocusout,ongesturechange,ongestureend,\t\tongesturestart,onmousedown,onmouseenter,onmouseleave,onmousemove,onmouseout,onmouseover,onmouseup,\t\tonmousewheel,onMozMousePixelScroll,onmsContentZoom,onMSGestureChange,onMSGestureEnd,onMSGestureHold,\t\tonMSGestureStart,onMSGestureTap,onMSInertiaStart,onMSManipulationStateChanged,onsecuritypolicyviolation,\t\tonselect,onshow,onwebkitmouseforcechanged,onwebkitmouseforcedown,onwebkitmouseforceup,\t\tonwebkitmouseforcewillbegin,tabindex,contenteditable,onactivate,onafterupdate,onbeforeactivate,\t\tonbeforecopy,onbeforecut,onbeforedeactivate,onbeforepaste,onbeforeupdate,oncellchange,oncontrolselect,\t\tondataavailable,ondatasetchanged,ondatasetcomplete,ondeactivate,onerrorupdate,onfilterchange,onhelp,\t\tonlayoutcomplete,onlosecapture,onmove,onmoveend,onmovestart,onpage,onpropertychange,onresize,onresizeend,\t\tonresizestart,onrowenter,onrowexit,onrowsdelete,onrowsinserted,onbeforeeditfocus,onchange,onabort,\t\tonbounce,onfinish,onstart,onreset,onsubmit,oncanplay,oncanplaythrough,ondurationchange,onemptied,\t\tonended,onloadeddata,onloadedmetadata,onloadstart,onpause,onplay,onplaying,onprogress,onratechange,\t\tonseeked,onseeking,onstalled,onsuspend,ontimeupdate,onvolumechange,onwaiting,\t\tonmssitemodejumplistitemremoved,onmsthumbnailclick,onstoragecommit,onstop",w=c("altGlyph,altGlyphDef,altGlyphItem,animate,animateColor,animateMotion,animateTransform,circle,clipPath,color-profile,cursor,defs,desc,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,font-face,font-face-format,font-face-name,font-face-src,font-face-uri,foreignObject,g,glyph,glyphRef,hkern,image,line,linearGradient,marker,mask,metadata,missing-glyph,mpath,path,pattern,polygon,polyline,radialGradient,rect,script,set,stop,svg,switch,symbol,text,textPath,tref,tspan,use,view,vkern,a,altGlyph,altGlyphDef,altGlyphItem,animate,animateColor,animateMotion,animateTransform,circle,clipPath,color-profile,cursor,defs,desc,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,font,font-face,font-face-format,font-face-name,font-face-src,font-face-uri,foreignObject,g,glyph,glyphRef,hkern,image,line,linearGradient,marker,mask,metadata,missing-glyph,mpath,path,pattern,polygon,polyline,radialGradient,rect,script,set,stop,style,svg,switch,symbol,text,textPath,title,tref,tspan,use,view,vkern"),p="strong,b,i,em,sub,sup,strike,u,font,span",q=c(p),o={LINK:!0,STYLE:!0},C={fontWeight:{styleName:"bold"},fontStyle:{styleName:"italic"},verticalAlign:{styleName:"subscript superscript"},textDecoration:{styleName:"strikethrough underline"},color:{styleName:"fontcolor"},backgroundColor:{styleName:"fontbgcolor"},fontFamily:{styleName:"fontfamily"},fontSize:{styleName:"fontsize"},"line-height":{styleName:"lineheight"},"text-align":{styleName:""}},D={bold:{reg:/bold/i,attrName:"fontWeight",tag:["STRONG","B"],wrap:"<strong></strong>",format:!0,buttonType:A.TOGGLE},italic:{reg:/italic/i,attrName:"fontStyle",tag:["I","EM"],wrap:"<em></em>",format:!0,buttonType:A.TOGGLE},subscript:{reg:/sub/i,attrName:"verticalAlign",tag:["SUB"],otherTag:"SUP",otherWrap:"<sup></sup>",wrap:"<sub></sub>",format:!0,buttonType:A.TOGGLE},superscript:{reg:/super/i,attrName:"verticalAlign",tag:["SUP"],otherTag:"SUB",otherWrap:"<sub></sub>",wrap:"<sup></sup>",format:!0,buttonType:A.TOGGLE},strikethrough:{reg:/line\-through/i,attrName:"textDecoration",tag:["STRIKE"],wrap:"<strike></strike>",format:!0,buttonType:A.TOGGLE},underline:{reg:/underline/i,attrName:"textDecoration",tag:["U"],wrap:"<u></u>",format:!0,buttonType:A.TOGGLE},fontcolor:{reg:"",attrName:"color",tag:["FONT"],commandName:"ForeColor",wrap:"<font></font>",format:!0,buttonType:A.COLOR},fontbgcolor:{reg:"",attrName:"backgroundColor",tag:["FONT"],commandName:"BackColor",wrap:"<font></font>",format:!0,buttonType:A.COLOR},link:{reg:/none/i,attrName:"",tag:["A"],format:!1,buttonType:A.TOGGLE},fontfamily:{reg:/none/i,attrName:"",tag:[""],commandName:"fontName",format:!0,buttonType:A.MENU},fontsize:{reg:/none/i,attrName:"",tag:[""],format:!0,buttonType:A.MENU},paragraphformat:{reg:/none/i,attrName:"",tag:[""],format:!0,buttonType:A.MENU},lineheight:{reg:"",attrName:"lineHeight",tag:[""],format:!0,buttonType:A.MENU}},G={width:20,height:20},H=["Arial","Courier","sans-serif","ë§ì ê³ ë","êµ´ë¦¼","ë°í","ê¶ì","ëì"],B={ZERO_WIDTH_SPACE:"â",SPACE:" ",NBSP:"Â "},{verify:a,CommandTypes:e,CONTENTS_ID:"cafe-note-contents",CURSOR_ELEM_ID:"cafe-cursor",DUMY_PASTE_ELEM:"_cafe_paste_temp",NodeTypes:f,NodeNames:g,SupportImageType:h,SupportImageExtension:i,SupportImageExtensionAll:j,EDITOR_MIN_HEIGHT:100,INDENT_MARGIN:"20px",INDENT_STYLE:"margin-left",DEFAULT_FONT_SIZE:"10pt",DEFAULT_FONT_FAMILY:"'\\AD74 \\B9BC ', Gulim, Arial",DEFAULT_LINE_HEIGHT:"1.2",DEFAULT_FONT_FAMILY_JS:"'êµ´ë¦¼', Gulim, Arial",BlockElements:k,ForeignElements:m,FormElements:l,HeadElements:n,HTMLElements:y,IgnoreHeadElements:o,InlineElements:s,StyleElementsStr:p,StyleElements:q,InvalidAttributes:r,LineElementsStr:u,LineBlockElements:t,LineElementsArr:d(t),LineBreakElements:z,SelfCloseElements:v,SVGElements:w,TAB_COUNT:8,VoidElements:x,DIV_CLASS:"cui-div",keys:d,toMap:c,INDENT_STRING:"    ",ButtonTypes:A,USERDATA_ATTRIBUTE_NAME:"data-cafe-userdata",NoImageData:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==",ComputedStyles:C,NodeStyles:D,DefaultImageSize:G,DefaultFontFormats:H,BASE64_ENCRIPTION_KEY:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",UNICODE_CHAR_CODE:B}}),d("utilities/ScriptLoader",["jqueryCafe"],function(a){function b(){var a=this;a.queue=[],a.queueLoadedCallback={},a.queueState={}}return b.prototype={loadScript:function(b,c){function d(){a(e).remove(),e.onreadystatechange=e.onload=e.onerror=e=null,c()}var e,f;e=document.createElement("script"),e.type="text/javascript",e.async=!0,e.src=b,e.readyState?e.onreadystatechange=function(){"loaded"!==e.readyState&&"complete"!==e.readyState||d()}:e.onload=function(){d()},e.onerror=function(){d()},f=document.getElementsByTagName("head")[0],f.appendChild(e)},addQueue:function(a,b){var c=this;c.queueState[a]||(c.queue.push(a),c.queueState[a]="QUEUE","function"==typeof b&&(c.queueLoadedCallback[a]=b))},loadScripts:function(b){function c(c){g.loadScript(c,function(){var d=a.inArray(c,g.queue);d!==-1&&g.queue.splice(d,1),g.queueState[c]="LOADED",g.queueLoadedCallback[c]&&g.queueLoadedCallback[c].call(g),g.loadScripts(b)})}var d,e,f,g=this;if(f=g.queue.length)for(e=0;e<f;e++){if(d=g.queue[e],"QUEUE"===g.queueState[d]){g.queueState[d]="LOADING",c(d),g.loadScripts(b);break}e===f&&g.loadScripts(b)}else"function"==typeof b&&b.call()},loadQueue:function(a){this.loadScripts(a)},loadContentAjax:function(b,c,d){b&&c&&a.ajax({url:b,async:!1,timeout:2e3,error:function(c,e){console&&console.log&&console.log("loading failed["+e+"]: "+b),d&&a.isFunction(d)&&d(c,e)},complete:function(a,b){c("success"===b?a.responseText:"")}})}},b}),d("utilities/UnitConverter",["jqueryCafe"],function(a){function b(){var a,b,c,d;return a=document.getElementsByTagName("body")[0],b=document.createElement("DIV"),b.setAttribute("id","_elem"),b.style.width="1in",b.style.height="1cm",b.style.left="-100%",a.appendChild(b),c=window.getComputedStyle(b),d=c.width,n=parseFloat(d),o=parseFloat(c.height),o=Math.ceil(100*o)/100,a.removeChild(b),n}function c(){return n===-1&&(n=b()),n}function d(){return o===-1&&b(),o}function e(a,b){var c,d;return c=parseFloat(a),b=b||2,d=Math.pow(10,b),parseInt(c*d,10)/d}function f(a,b){var d,f;return(b||/px$/i.test(p(a)))&&(d=parseFloat(a),f=d*(q/c()),f=e(f,0)),f}function g(a,b){var d,f;return(b||/pt$/i.test(p(a)))&&(d=parseFloat(a),f=d*c()/q,f=e(f,0)),f}function h(a,b){var d,f;return(b||/in(?:ch)?$/i.test(p(a)))&&(d=parseFloat(a),f=d*c(),f=e(f,0)),f}function i(a,b){var d,f;return(b||/cm$/i.test(p(a)))&&(d=parseFloat(a),f=d*r*c(),f=e(f,2)),f}function j(a,b){var d,f;return(b||/px$/i.test(p(a)))&&(f=parseFloat(a),d=f/c(),d=e(d,2)),d}function k(a,b){var c,f;return(b||/px$/i.test(p(a)))&&(f=parseFloat(a),c=f/d(),c=e(c,2)),c}function l(a){var b;return a=p(a),/pt$/i.test(a)?b=g(a,!0):/in(?:ch)?$/i.test(a)?b=h(a,!0):/cm$/i.test(a)?b=i(a,!0):/px$/i.test(a)&&(b=a),b}function m(a){return!!/(em|ex|ch|rem|vw|vh|vmin|vmax|%)$/i.test(p(a))}var n=-1,o=-1,p=a.trim,q=72,r=.393701;return{getDPI:c,toPX:l,convertPXToPT:f,convertINToPX:h,convertPTToPX:g,convertCMToPX:i,convertPXToIN:j,convertPXToCM:k,isRelativeLengthUnit:m}}),d("utilities/StyleParser",["jqueryCafe","utilities/UnitConverter"],function(a,b){function c(a){return a=o(a),/^[a-z]+[A-Z][a-z]+$/.test(a)&&(a=a.replace(/(.)([A-Z])/g,"$1-$2")),a.toLowerCase()}function d(a){var b=r.toPX(a);return b&&(b=b>0&&b<1?1:b,b+="px"),b}function e(a,b){var c,d=!1;return c=t[a],c&&q(b,c)!==-1&&(d=!0),d}function f(a){var b=a.split(/\s/),c=[b[0],b[0],b[0],b[0]];return b[1]&&(c[1]=b[1],c[3]=b[1]),b[2]&&(c[2]=b[2]),b[3]&&(c[3]=b[3]),c}function g(a,b,c){for(var d=["-top","-right","-bottom","-left"],e=d.length;e--;)a[b+d[e]]||(a[b+d[e]]=c[e])}function h(a){for(var b,c={},d=a.length;d--;)b=a[d],"string"==typeof b&&(b=b.toLowerCase(),c[b]=!0);return c}function i(a,b){var c,d=[],e="border-"+b;return a[e+"-size"]&&d.push(a[e+"-size"]),a[e+"-style"]&&d.push(a[e+"-style"]),a[e+"-color"]&&d.push(a[e+"-color"]),3===d.length&&(c=d.join(" "),a[e]||(a[e]=c),delete a[e+"-size"],delete a[e+"-style"],delete a[e+"-color"]),c}function j(a){i(a,"top"),i(a,"right"),i(a,"bottom"),i(a,"left")}function k(a,b,c){var d,e="border-"+b;d=a[e],d||(a[e]=c)}function l(a){var b=a.border;b&&"none"!==b&&(k(a,"top",b),k(a,"right",b),k(a,"bottom",b),k(a,"left",b),delete a.border)}function m(a,b){var d,e,f,g,h,i={};for(a+=";";a.length>0;)d=a.indexOf(";"),f=a.substring(0,d),/url\s*\(/i.test(f)&&(e=a.indexOf(")"),e!==-1&&e>d&&(e=a.indexOf(";",e),f=a.substring(0,e+1),d=e)),e=f.indexOf(":"),e!==-1&&(g=c(o(f.substring(0,e))),h=o(f.substring(e+1)),b||(h=h?h.toLowerCase():""),i[g]=h),a=a.substring(d+1);return i}function n(a,b){var c,e,f,g,h,i="(?:\\s|^)(?:-)?\\d*(?:\\.\\d+)?\\s*(?:pt|in|cm)($|[^a-z])",j=new RegExp(i,"gi"),k=new RegExp(i,"i");switch(/^border/i.test(a)&&/hairline/i.test(b)&&(b=b.replace(/hairline/i,"dotted")),/windowtext/i.test(b)&&(b=b.replace(/windowtext/i,"#000000")),a){case"border":case"border-left":case"border-right":case"border-top":case"border-bottom":case"border-left-style":case"border-right-style":case"border-top-style":case"border-bottom-style":case"border-left-width":case"border-right-width":case"border-top-width":case"border-bottom-width":case"height":case"margin-left":case"margin-right":case"margin-bottom":case"margin-top":case"text-indent":case"width":e=j.exec(b),e?(f=d(e[0]),c=b.replace(e[0]," "+f+" ")):c=b;break;case"border-width":case"margin":case"padding":for(e=b.split(/\s/),g=e.length,c=[],h=0;h<g;h++)k.test(e[h])&&(e[h]=d(e[h])),c.push(e[h]);c=0!==g?c.join(" "):b;break;case"font-weight":c=parseInt(b,10)>=700?"bold":b;break;default:c=b}return c}var o=a.trim,p=a.extend,q=a.inArray,r=b,s={"text-decoration":!0},t={"background-color":["transparent"],"font-weight":["normal","400"],"font-size":["medium"],"font-style":["normal"],"text-decoration":["none"]};return{parse:function(b,c){var d,i,k,o,p,q,r,t={},u=[],v=!1,w=!1,x=!1,y=!1;if(c?(u=c.styles||u,v=c.opType||v,w=c.useCompressIndent||!1,x=c.useCompressBorderDirection||!1,y=c.useDecompressBorder||!1):c={},!b||!a.isArray(u))return t;x&&(u=u.concat(["border-left-color","border-right-color","border-top-color","border-bottom-color","border-left-style","border-right-style","border-top-style","border-bottom-style","border-left-width","border-right-width","border-top-width","border-bottom-width","border-style","border-color","border-width"])),r=h(u),o=m(b,c.plain||!1);for(p in o)q=o[p],p.length>0&&q.length>0&&(!!r[p]^v||e(p,q)||(t[p]&&s[p]?t[p]+=" "+q:t[p]=q,t[p]=n(p,t[p])));return t.margin&&(k=f(t.margin),g(t,"margin",k),delete t.margin),t.padding&&(k=f(t.padding),g(t,"padding",k),delete t.padding),w&&(d=t["text-indent"],i=t["margin-left"],d&&i&&(t["margin-left"]=parseInt(d,10)+parseInt(i,10)+"px",delete t["text-indent"])),x&&j(t),y&&l(t),t},serialize:function(b,d){var e,f,g,i,j="",k="",l="",m=[],n=!1;if(d&&(m=d.styles||m,n=d.opType||n,k=d.prefix||k,l=d.suffix||l,i=d.plain||!1),!b||!a.isArray(m))return j;e=h(m);for(f in b)g=o(b[f]),g&&g.length>0&&(!i&&!!e[f]^n||(j+=k+c(f)+":"+g+";"+l));return j},mergeStyle:function(a,b,c){var d,e,f={};return c?(d=a,e=b):(d=b,e=a),p(f,d,e),f}}}),d("utilities/CSSParser",["jqueryCafe","utilities/StyleParser"],function(a,b){function c(a){var b,c,d,e,f,g=/<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gi;if(b=a.match(g))for(d="",f=b.length,c=0;c<f;c++)e=b[c],d+=e.replace(/<[\/]{0,1}(style)[^><]*>/gi,"");return d}function d(a){for(var b,c;(b=a.indexOf("/*"))!==-1;)c=a.indexOf("*/",b),a=e(a,b,c,2);return a=a.replace(/<!--/g,"").replace(/-->/g,"")}function e(a,b,c,d){var e,f;return e=a.substring(0,b),f=a.substring(c+d,a.length),e+f}function f(a){return a.replace(/@(?:[^{\;])+{(?:[^}])*}/gim,"")}function g(a){return a=a.replace(/mso-(?:[^;])+;(?:\\@\"\;)?/gi,""),a=a.replace(/\s*(\n|\r\n)$/gm,"")}function h(a,b){var c,d,e,f=a.indexOf("#");if(f!==-1){for(c=a.split(","),e=c.length,a=[];e--;)d=c[e],d.indexOf("#")===-1&&"_:-ms-lang(x)"!==r(d)||a.push(d);a=a.join(",")}return a=a.replace(/\n/gi,""),b&&(a=a.replace(/[\s\uFEFF\xA0]+,/gi,",")),r(a)}function i(a,b){return s.parse(a,b)}function j(a){var b;return b=/^\.(?:\w)+$/i.test(a)?"class":/^(?:\w)+$/i.test(a)?"tag":/^\#(?:\w)+$/i.test(a)?"id":"complex"}function k(a){var b,c,d,e=a.replace(/\s{2,}/," ").split(/\s/),f=e.length;for(d=j(e[0]),b=1;b<f&&"complex"!==d;b++)if(c=j(e[b]),d!==c){d="complex";break}return d}function l(b,c){var d,e,f,g,j,l,m,n,o={},p=0;for(c=c?a.extend({},t,c):t,e=b.split("}"),g=e.length,c.typeCheck&&(o.___types={class:[],complex:[],id:[],tag:[]});g--;)f=e[g],m=f.split("{"),j=h(m[0],c.trimSpace),l=r(m[1]),j.length>0&&l.length>0&&(d=i(l,c),o[j]?o[j]=s.mergeStyle(o[j],d):(o[j]=d,q.push(j),p++),c.typeCheck&&(n=k(j),o.___types[n].push(j)));return o.___seq=q,o.length=p,o}function m(a){var b,c,d,e,f,g,h={};for(b=a.split(/\s*\}\s*/gm),c=b.length;c--;)if(g=b[c],""!==g){if(d=g.split(/\s*\{\s*/gm),e=r(d[0]),f=r(d[1]),""!==f&&f.indexOf(":")===-1)return!1;e.length>0&&f.length>0&&(h[e]?h[e]=f+(/;$/.test(f)?"":";")+h[e]:(h[e]=f,q.push(e)))}return h.___seq=q,h}function n(a,b,e){var h,i;return b=b||{},q=[],h=e?a:c(a),h&&(h=d(h),h=f(h),b.usePlainParse?i=m(h):(h=g(h),i=l(h,b))),i}function o(a,b,c){a[b]=c,a.___seq.push(b)}function p(b,c,d){var e,f,g,h="",i={plain:!1,prefix:"\t",rename:!1,suffix:"\n"};if(c&&(i=a.extend({},i,c)),d||(i.rename=!1),b.___seq)for(f=b.___seq.length;f--;)e=b.___seq[f],g=b[e],h+=i.rename?d[e]+" {\n"+b[e]+"}\n":e+" {\n"+s.serialize(g,i)+"}\n";else for(e in b)/^(?:length|___types|___seq)/i.test(e)||(g=b[e],h+=e+" {\n"+s.serialize(g,i)+"}\n");return h}var q,r=a.trim,s=b,t={unitconvert_properties:!0,compress:!0,typeCheck:!1,trimSpace:!1};return{parse:n,addRule:o,serialize:p}}),d("utilities/HTMLFilter",["jqueryCafe","utilities/EditorConstants","utilities/CSSParser"],function(a,c,d){function e(k,l){function m(a,b,c){return a.replace(b,function(a,b,d){var e,f=a,g=a.length;return e=d.substring(b+g),/<\!\[\s*endif\s*\]\-\->/gim.test(e)?f:(/^\s*-->/.test(e)?c&&(D=!0):f="<!--"+f+"-->",f)})}function n(){var a,b,c={};for(a in y)p(a)||(b=y[a],q(b,c))}function o(a,b){var c,d,e,f=0;for(f=0,c=a.length;f<c;f++)d=a[f].toLowerCase(),!b[d]&&y[d]&&(p(d)||(e=y[d],q(e,b)))}function p(b){return a.inArray(b,z)!==-1}function q(a,b){var c=a.id,d=a.dependencies;b[c]=!0,o(d,b),z.push(c)}function r(a){var b,c,d,e;for(b=a.find("[data-cafe-filter]"),d=b.length;d--;)switch(c=b.eq(d),e=c.attr("data-cafe-filter").toLowerCase()){case"remove":c.remove();break;case"unwrap":/^(?:P|H[1-6])$/i.test(c[0].nodeName)?c[0].removeAttribute("data-cafe-filter"):c.replaceWith(c[0].childNodes);break;case"pagebreak":c.attr("contenteditable","false");break;case"image":c.css("display","inline-block").css("visibility","visible").attr("unselectable","on").removeAttr("data-cui-selected").removeAttr("data-cafe-filter").removeAttr("data-cui-id"),c.css("border-top-width")||c.css("border-width","0px")}}function s(a){var b,c,d;for(b=a.find("[data-cui-filter]"),d=b.length;d--;)c=b.eq(d),c.removeAttr("data-cui-filter")}function t(a){a.find("table[data-cui-selected=true], th[data-cui-selected=true], td[data-cui-selected=true]").removeAttr("data-cui-selected")}var u,v,w=this,x=k||{},y={},z=[],A=[],B=!0,C=!1,D=!1;v=h(x.invalid_elements||g),v=v.split(f),u=x.useDefalutFilter===b||k.useDefalutFilter,w.filter=function(a,b){var c,d;return c=a,c&&(c=w.trimContent(c),d=w.parse(c),c=b?d:w.toString(d)),c},w.extractHeadComments=function(a){var b,c=/<head\b[^<]*(?:(?!<\/head>)<[^<]*)*<\/head>/gim,d=/<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gim,e={comments:[],contents:null},f="__CUI_TEMP_STYLE_",g=[];for(a=a.replace(d,function(a){var b=g.length;return g.push(a),f+b+"__"}),e.contents=a.replace(c,function(a){var b=a.replace(/<!--((?:.|\s)*?)-->/gi,function(a,b){var c,d;return/__CUI_TEMP_STYLE_/.test(b)&&(c=b.match(/__CUI_TEMP_STYLE_(\d+)__/),c[1]&&(d=parseInt(c[1],10),b=b.replace(f+d+"__",g[d]))),e.comments.push(b),""});return b}),b=g.length;b--;)e.contents=e.contents.replace(f+b+"__",g[b]);return e},w.trimContent=function(a){var b,c,d,e=a,f=v.length;for("object"==typeof a&&a.html&&(e=a.html()),C=!1;f--;)D=!1,b=v[f],/meta/i.test(b)||(c=new RegExp("<"+b+"\\b[^<]*(?:(?!<\\/"+b+">)<[^<]*)*<\\/"+b+">","gim"),d=m(e,c,!0),e!==d||D||(c=new RegExp("<"+b+"\\b[^<]*?>","gim"),d=m(e,c,!1)),e!==d&&(e=d,C=!0));return e=e.replace(/<img\b[^>]*>/gi,function(a){var b=/src(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/i.exec(a);return b&&b[1]&&/^cid:/i.test(b[1])&&(a=a.replace(b[0],"")),a})},w.colgroupFilter=function(a){return/<colgroup\b[^>]*>/i.test(a)&&!/<\/colgroup\>/i.test(a)&&(a=a.replace(/<colgroup>(?:<col\b[^>]*>\s*)+/gi,function(a){return a+"</colgroup>"})),/<col\b[^>]*>/i.test(a)&&(a=a.replace(/<col\b[^>]*>/gi,function(a){var b,c,d="",e=a.match(/span\s*=\s*[\'\"]?(\d+)[\'\"]?/i);if(e&&e[1])for(b=parseInt(e[1],10),c=a.replace(e[0],"");b--;)d+=c;else d=a;return d})),a},w.parseDom=function(a){var b,c,d;for(B&&w.initFilters(),c=0,b=z.length;c<b;c++)d=y[z[c]],d.action&&d.action(a);if(u&&A.length>0)for(c=0,b=A.length;c<b;c++)A[c](a,"raw");return a},w.filterNoAttributeSpanWithPseudoClass=function(b){var e,f,g,h,i,j,k,l,m,n=[],o=a("style",b);if(!o||0===o.length)return b;for(f=0;f<o.length;f++){g=d.parse(o[f].outerHTML,{usePlainParse:!0});for(i in g)for(j=i.trim().split(","),e=0;e<j.length;e++)h=j[e].trim(),h&&h.indexOf(":")>-1&&n.push(h)}for(f=0;f<n.length;f++)try{for(m=n[f],l=b[0].querySelectorAll(m),e=0;e<l.length;e++)k=l[e],k.nodeType===c.NodeTypes.ELEM_NODE&&"SPAN"===k.nodeName&&0===k.attributes.length&&k.setAttribute(c.USERDATA_ATTRIBUTE_NAME,!0)}catch(a){}return b},w.filterEventAttributes=function(a){return l&&l.ie?(a=a.replace(/<[^>]*(onerror)\s*=\s*/gi,function(a){return a.replace(arguments[1],"data-cui-filter")}),a=a.replace(/<[^>]*(onload)\s*=\s*/gi,function(a){return a.replace(arguments[1],"data-cui-filter")})):a=a.replace(/<[^\/][^>]+>/gi,function(a){return a.replace(/(?:onerror|onload)\s*=\s*/gi,"data-cui-filter=")}),a},w.parse=function(b,c){var d,e,f,g,h,i={};if(f=a('<xbody data-cui-filter="true" ></xbody>'),"string"==typeof b)b=w.filterEventAttributes(b),f.append(j(b));else{if("object"!=typeof b||!b[0])return f;b.jquery?(f.remove(),f=b):(h="BODY"===b[0].nodeName?b[0].childNodes:b[0],f.append(h))}for(f=w.filterNoAttributeSpanWithPseudoClass(f),B&&w.initFilters(),e=0,d=z.length;e<d;e++)g=y[z[e]],g.action&&g.action(f,c,i);if(u&&A.length>0)for(e=0,d=A.length;e<d;e++)A[e](f,c);return i.hasInvalid&&(C=i.hasInvalid),f},w.toString=function(a,b){var d="";return"object"==typeof a&&a.html?d='<body id="'+c.CONTENTS_ID+'"'+(b||"")+">"+h(a.html())+"</body>":"string"==typeof a&&(d=a),d},w.addFilter=function(a,b,c){if(a){if(B=!0,i(a))return void A.push(a);!c&&i(b)&&(c=b,b=[]),null===b&&i(c)&&(b=[]),a=a.toLowerCase(),y[a]={id:a,dependencies:b,action:c}}},w.initFilters=function(){return B&&(z=[],n(),B=!1),z},w.clearFilter=function(){y={},B=!0},w.clone=function(){var a,b=new e(x);for(a in y)b.addFilter(a.id,a.dependencies,a.action);return b},w.getFilterCount=function(){var a,b=0;for(a in y)b++;return b},w.refresh=function(){z=[],B=!0,w.initFilters()},w.hasInvalid=function(){return C},w.addFilter(r),w.addFilter(s),w.addFilter(t)}var f=/(?:\s|\,)+/,g="script",h=a.trim,i=a.isFunction,j=a.parseHTML;return e}),d("utilities/NodeTracker",[],function(){return function(a,b){function c(a,b,c){var d,f;if(a){if(a[c])return a[c];if(a!==e){if(d=a[b])return d;for(f=a.parentNode;f&&f!==e;f=f.parentNode)if(d=f[b])return d}}}var d=a,e=b;this.current=function(a){return a&&(d=a),d},this.next=function(){return d=c(d,"nextSibling","firstChild")},this.nextSibling=function(){return d=d.nextSibling},this.prev=function(){return d=c(d,"previousSibling","lastChild")},this.prevSibling=function(){return d=d.previousSibling}}}),d("utilities/RuleSet",["jqueryCafe","utilities/EditorConstants","utilities/NodeTracker"],function(a,c,d){function e(a){this.init(a||{}),this.formElements=c.FormElements}function f(a,c){return a===b?c||!1:a}var g,h,i,j,k,l,m,n,o,p,q,r,s,t=c.toMap,u=c.NodeTypes,v="class, style, title";return i="font,#text",g="script,frameset,frame,svg,base,basefont,bgsound,link,meta,noframes,script,style,template,title,form,input,option,optgroup,select,button,datalist,textarea",h="onafterprint,onanimationcancel,onanimationend,onanimationiteration,onbeforeinstallprompt,onbeforeprint,onbeforeunload,onblur,oncopy,oncut,ondeviceorientationabsolute,onDOMContentLoaded,onerror,onfocus,ongamepadconnected,onhashchange,onlanguagechange,onload,onmessage,onmessageerror,onoffline,ononline,onorientationchange,onpagehide,onpageshow,onpaste,onpopstate,onrejectionhandled,onstorage,ontransitioncancel,onunhandledrejection,onunload,onvrdisplayconnect,onvrdisplaydisconnect,onvrdisplaypresentchange,ondragdrop,onvrdisplayactivate,onvrdisplayblur,onvrdisplayconnect,onvrdisplaydeactivate,onvrdisplaydisconnect,onvrdisplayfocus,onvrdisplaypointerrestricted,onvrdisplaypointerunrestricted,onvrdisplaypresentchange,onoffline,ononline,onafterscriptexecute,onanimationcancel,onanimationend,onanimationiteration,onanimationstart,onbeforescriptexecute,oncopy,oncut,onDOMContentLoaded,ondrag,ondragend,ondragenter,ondragleave,ondragover,ondragstart,ondrop,onfullscreenchange,onfullscreenerror,ongotpointercapture,onkeydown,onkeypress,onkeyup,onlostpointercapture,onpaste,onpointercancel,onpointerdown,onpointerenter,onpointerleave,onpointerlockchange,onpointerlockerror,onpointermove,onpointerout,onpointerover,onpointerup,onreadystatechange,onscroll,onselectionchange,onselectstart,ontouchcancel,ontouchend,ontouchmove,ontouchstart,ontransitioncancel,ontransitionend,ontransitionrun,ontransitionstart,onvisibilitychange,onwheel,onafterscriptexecute,onauxclick,onblur,onclick,oncompositionend,oncompositionstart,oncompositionupdate,oncontextmenu,oncopy,oncut,ondblclick,onDOMActivate,onDOMMouseScroll,onerror,onfocus,onfocusin,onfocusout,onfullscreenchange,onfullscreenerror,ongesturechange,ongestureend,ongesturestart,onkeydown,onkeypress,onkeyup,onmousedown,onmouseenter,onmouseleave,onmousemove,onmouseout,onmouseover,onmouseup,onmousewheel,onMozMousePixelScroll,onmsContentZoom,onMSGestureChange,onMSGestureEnd,onMSGestureHold,onMSGestureStart,onMSGestureTap,onMSInertiaStart,onMSManipulationStateChanged,onpaste,onscroll,onsecuritypolicyviolation,onselect,onshow,ontouchcancel,ontouchend,ontouchmove,ontouchstart,onwebkitmouseforcechanged,onwebkitmouseforcedown,onwebkitmouseforceup,onwebkitmouseforcewillbegin,onwheel,tabindex,contenteditable",k="a,b,br,cite,del,dfn,em,embed,i,img,ins,kbd,label,mark,s,samp,small,span,strong,strike,sub,sup,u,#text,#comment",j="li:ul,dt:dl,dd:dl",l="P",m="audio,bgsound,base,embed,iframe,meta,object,param,progress,source,title,track,video,noframes,script,style,template,title",n="base,bgsound,link,meta,noframes,style,template,title",o="applet,basefont,big,button,canvas,caption,datalist,dialog,figcaption,form,frame,frameset,input,keygen,menu,menuitem,meter,noframes,noscript,optgroup,option,output,rp,rt,ruby,select,textarea,time,tt,wbr",p="abbr,acronym,address,article,aside,bdi,bdo,center,code,details,figure,footer,header,kbd,main,nav,pre,q,samp,section,tfoot",q="applet,canvas,embed,iframe,object,svg",s="acronym,cite,del,dfn,dir,ins,summary,var,strong,b,i,em,sub,sup,strike,u",r="",e.prototype={settings:{},schema:{},init:function(b){var d=this;b=b||{},d.applySchema=f(b.apply_schema),d.removeComments=f(b.remove_comments),d.removeEmptyElement=f(b.remove_empty_element),d.removeHiddenElements=f(b.remove_hidden_elements),d.gatherHeadElement=f(b.gather_head_element),d.useCombineElement=f(b.use_combine_element),
d.forceInsertTdchild=f(b.force_insert_tdchild,!1),d.useSingleLineElements=f(b.use_singleline_element),d.combineElements=t(f(b.combine_elements,i)),d.componentElements=t(f(b.component_elements,j)),d.invalidElements=t(f(b.invalid_elements,g)),d.invalidAttributes=t(f(b.invalid_attributes,h),!1),d.removeEmptyElements=t(f(b.remove_empty_elements,s)),d.commentElements=t(f(b.comment_elements,m)),d.moveElements=t(f(b.move_elements,n)),d.unwrapElements=t(f(b.unwrap_elements,p)),d.removeElements=t(f(b.remove_elements,o)),d.unsupprtedElements=t(f(b.unsupported_elements,q)),d.notifyElements=t(f(b.notify_elements,"script")),d.contentsElements=t(k+",map"),d.schema={},d.replaceMap={},d.appendEmptylinAtLast=b.append_emptyline_at_last,d.oldIE=b.old_ms_ie||!1,d.ie=b.ms_ie||!1,d.new_line_without_blank=b.new_line_without_blank||!1,d.blockquote=b.allow_blockquote?",blockquote":"",d.enable_object_contents=b.enable_object_contents,d.addRule=function(b,c,e,f){var g,h,i,j={};for(c=c||"",j.validAttributes=t((v+", "+c).toLowerCase()),"string"==typeof e&&(j.validChild=t(e.toUpperCase())),null===f?j.defaultChild=null:j.defaultChild=(f||"span").toUpperCase(),g=b.toUpperCase().split(/[\s,]+/),h=0,i=g.length;h<i;h++)d.schema[g[h]]=a.extend({},j)},d.addReplaceTag=function(a,b,c){var e={to:b.toUpperCase(),handle:c};d.replaceMap[a.toUpperCase()]=e},d.addRule("body, xbody","","h1,h2,h3,h4,h5,h6,hr,ol,p,table,ul,dl,fieldset"+d.blockquote,"p"),d.addRule("h1,h2,h3,h4,h5,h6,p,li,legend","",k+", map"),d.addRule("map","","area"),d.addRule("ol","reversed,start,type","h1,h2,h3,h4,h5,h6,li,ol,p,ul,dl,table,fieldset"),d.addRule("ul","","h1,h2,h3,h4,h5,h6,li,ol,p,ul,table,fieldset"),d.addRule("dt,dd,li","style,class",k+",hr,ol,ul,table"),d.blockquote&&d.addRule("blockquote","","h1,h2,h3,h4,h5,h6,ol,p,table,ul,dl,blockquote","p"),d.addRule("dl","style,class","dt,dd"),d.addRule("table","width, height, border, bordercolor, cellspacing, cellpadding","caption, colgroup, thead, tfoot, tbody, tr, col",null),d.addRule("colgroup","","col",null),d.addRule("tbody, thead, tfoot","","tr",null),d.addRule("tr","colspan,rowspan,height","td, th",null),d.addRule("td","colspan,rowspan,width","h1,h2,h3,h4,h5,h6,p,table,ul,ol,dl,fieldset"+d.blockquote,"p"),d.addRule("th","colspan,rowspan,width","h1,h2,h3,h4,h5,h6,p,table,ul,ol,dl,fieldset"+d.blockquote,"p"),d.addRule("a","href,target,rel,media,hreflang,type",k),d.addRule(k,"",k,null),d.addRule("span","",k+",map"),d.addRule("fieldset","",k+",h1,h2,h3,h4,h5,h6,ol,p,table,ul,dl,legend"),d.enable_object_contents||d.addRule("object","name, type, usemap, width, hieght","param",null),d.addReplaceTag("acronym","abbr"),d.addReplaceTag("cite","em"),d.addReplaceTag("del","strike"),d.addReplaceTag("dfn","em"),d.addReplaceTag("dir","ul"),d.addReplaceTag("ins","u"),d.addReplaceTag("summary","p"),d.addReplaceTag("label","span"),d.addReplaceTag("var","em"),d.addReplaceTag("font","span",function(a,b){var c,d,e,f,g,h="";if(g=b||a,d=a.getAttribute("size")){switch(parseInt(d,10)){case 1:d="7.5pt";break;case 2:d="9pt";break;case 3:d="12pt";break;case 4:d="13.5pt";break;case 5:d="18pt";break;case 6:d="24pt";break;default:d="36pt"}h=h+"font-size: "+d+";",g.removeAttribute("size")}return e=a.getAttribute("color"),e&&(h=h+"color: "+e+";",g.removeAttribute("color")),f=a.getAttribute("face"),f&&(h=h+"font-family: "+f+";",g.removeAttribute("face")),c=a.getAttribute("style"),c&&c.length>0&&(h+=c),g.setAttribute("style",h),g}),d.addReplaceTag("div","table",function(a,b,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s="",t=new RegExp("[^;]*;","gi");for(b||(b=d.createNode("table"),d.afterNode(a,b)),j=b.attributes,h=d.createNode("colgroup"),b.appendChild(h),i=d.createNode("col"),h.appendChild(i),e=d.createNode("tbody"),b.appendChild(e),f=d.createNode("tr"),e.appendChild(f),g=d.createNode("td"),f.appendChild(g),n=j.length;n--;){if(k=j[n],"string"==typeof k)l=k,m=b.getAttribute(l);else if(l=k.name,m=k.value,"style"===l)for(m&&!/\;\s*$/.test(m)&&(m+=";"),p=m.match(t),q=p?p.length:0,m="",r=0;r<q;r++)o=p[r],o.indexOf("orphans")<0&&o.indexOf("text-align")<0&&(m+=o+" ");g.setAttribute(l,m),"class"!==l&&b.removeAttribute(l)}for(s=b.getAttribute("class")||"",s=s.length>0?s+=" cui-div-cell":"cui-div-cell",g.setAttribute("class",s),b.setAttribute("class",c.DIV_CLASS);a.firstChild;)g.appendChild(a.firstChild);return g})},getElementRule:function(a){var b,c=this;return a=a.toUpperCase(),b=c.schema[a]||{}},getAttributeRule:function(a){var b,c=this;return b=c.getElementRule(a),b.validAttributes},getComponentParent:function(a){var b,c=this;return a?(b=c.componentElements[a.toUpperCase()],b||l):l},getDefaultChild:function(a){var b,c=this;return b=c.getElementRule(a),b.defaultChild},getInvalidStyles:function(){return["float"]},isInvalidElement:function(a){var b=this.invalidElements[a.toUpperCase()];return!b&&/\:/i.test(a)&&(b=!0),b},isNotifyElement:function(a){return this.notifyElements[a.toUpperCase()]},isNotifyAttributes:function(a){return this.invalidAttributes[a.toLowerCase()]},isInvalidAttributes:function(a,c){var d=this.invalidAttributes[a.toLowerCase()];return d=d!==b&&d,!/([-A-Za-z0-9_]+)/i.test(a)||!(!d&&/^data\-/i.test(a))&&((!/contenteditable/i.test(a)||!/false/i.test(c))&&((!/tabindex/i.test(a)||!/^\-/.test(c))&&d))},removeHTMLTagAttributes:function(b,e){var f,g,h,i,j,k=b.attributes,l=!1,m=b;for(k["data-cui-media-source"]&&(l=!0,g=k["data-cui-media-source"].nodeValue,m=a.parseHTML(g)[0],i=new d(m)),j=m;l&&j&&j.nodeType!==u.TEXT_NODE;)if(j=this.removeQuotInAttribute(j),j.getAttribute("src")?h="src":j.getAttribute("data")&&(h="data"),h){if(g=j.getAttribute(h),g=g.replace(/\"/g,""),/data:text\/html/.test(g)&&(/base64/.test(g)&&(g=g.replace("data:text/html;base64,",""),g=this.base64Decoder(g)),/%3C/.test(g)&&(g=g.replace("data:text/html,",""),g=decodeURIComponent(g))),f=g.replace(/<[^>]*>?/g,""),g!==f&&(g=f,e.hasInvalidAttribute=!0),j.nodeName===c.NodeNames.IFRAME)for(;g.search(/javascript:/gi)!==-1;)g=g.replace(/javascript:/gi,"");""===g?j.removeAttribute(h):a(j).attr(h,g),j=i.next()}else j=i.next();return m=this.removeQuotInAttribute(m),m=a(m).prop("outerHTML"),l&&a(b).attr("data-cui-media-source",m),b},removeQuotInAttribute:function(a){var b;if(!a||!c.NodeNames[a.nodeName]||!a.attributes)return a;for(b=0;b<a.attributes.length;b++)a.setAttribute(a.attributes[b].name,a.attributes[b].value.replace(/\"/gi,""));return a},base64Decoder:function(a){var b="";if(window.atob)try{b=window.atob(a)}catch(c){b=this._base64Decoder(a)}else b=this._base64Decoder(a);return b},_base64Decoder:function(a){var b,d,e,f,g,h,i,j="",k=0,l=c.BASE64_ENCRIPTION_KEY;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");k<a.length;)f=l.indexOf(a.charAt(k++)),g=l.indexOf(a.charAt(k++)),h=l.indexOf(a.charAt(k++)),i=l.indexOf(a.charAt(k++)),b=f<<2|g>>4,d=(15&g)<<4|h>>2,e=(3&h)<<6|i,j+=String.fromCharCode(b),64!==h&&(j+=String.fromCharCode(d)),64!==i&&(j+=String.fromCharCode(e));return j},isValid:function(a){var b=this,c=a.parentNode;return!!b.isValidChild(c,a)&&!b.schema.invalid_elems[a.nodeName]},isCommentElement:function(a){var b=this;return b.commentElements[a]},isComponentElement:function(a){var b=this;return b.componentElements[a]},isMovableElement:function(a){var b=this;return b.moveElements[a]},isOfficeElement:function(a){return/^\w[\d\w]*\:\w+/i.test(a)},isReplace:function(a){return this.replaceMap[a.toUpperCase()]},isRemoveElement:function(a){return this.removeElements[a.toUpperCase()]},isRemoveEmptyElement:function(a){return this.removeEmptyElements[a.toUpperCase()]},isUnsupportedElement:function(a){return this.unsupprtedElements[a.toUpperCase()]},isUnwrapElement:function(a){return this.unwrapElements[a.toUpperCase()]},replaceNode:function(a,b){var c,d,e,f,g,h,i,j,k,l=this,m=a.nodeName,n=l.replaceMap[m];if(n)if(a.ownerDocument){for(c=a.ownerDocument.createElement(n.to),f=a.attributes,h=0,g=f.length;h<g;h++)if(e=f[h],"string"==typeof e?(i=e,j=a.getAttribute(i)):(i=e.name,j=e.value),!l.isInvalidAttributes(i))try{c.setAttribute(i,j)}catch(a){}for(n.handle&&n.handle(a,c,b);a.firstChild;)c.appendChild(a.firstChild);d=a.parentNode||a.parentElement,d.insertBefore(c,a),d.removeChild(a),a=c}else"DIV"===a.nodeName&&(k=a),a.nodeName=n.to,n.handle&&(a=n.handle(a,null,b)),k&&k.parentNode&&k.parentNode.removeChild(k);return a},isOldIE:function(){return this.oldIE},isIE:function(){return this.ie},isCombine:function(a){return this.combineElements[a.toUpperCase()]},isStyleElement:function(a){return this.contentsElements[a.toUpperCase()]},isValidChild:function(a,b){var c,d=this;if(b.nodeType===u.COMMENT_NODE)return!0;c=d.getElementRule(a.nodeName);try{if(c&&c.validChild[b.nodeName.toUpperCase()])return!0}catch(a){return!1}return!1}},e}),d("utilities/Node",["jqueryCafe","utilities/EditorConstants","utilities/StyleParser","utilities/NodeTracker"],function(a,c,d,e){function f(a,b){this.nodeName=a,this.nodeType=b,this.nodeType===j.ELEM_NODE?(this.attributes=[],this.attrMap={},this.style={}):this.nodeType===j.TEXT_NODE&&(this.textContent="")}function g(a){for(var b="";a--;)b+=p;return b}function h(a){var b,c="";if(a){for(b in a)c+=a[b]?a[b].indexOf('"')>0?b+"='"+a[b]+"' ":b+'="'+a[b]+'" ':b+" ";c.length>0&&(c=c.substring(0,c.length-1))}return c}function i(a,b){var c,d=a.firstChild,f=[];for(c=new e(d,a);d&&d!==a;)b(d)&&f.push(d),d=c.next();return f}var j=c.NodeTypes,k=c.VoidElements,l=c.toMap("table, colgroup, col, thead, tbody, tfoot, caption, tr, th, td"),m=c.LineBlockElements,n=d,o=a("<temp></temp>"),p=c.INDENT_STRING;return f.prototype={parentNode:null,firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,isProduce:!1,append:function(a){var b=this;return a.parentNode&&a.remove(),a.parentNode=b,null===b.firstChild?b.firstChild=a:(b.lastChild.nextSibling=a,a.previousSibling=b.lastChild),b.lastChild=a,a},appendChild:function(a){return this.append(a)},after:function(a){var b=this,c=b.parentNode;return a.parentNode&&a.remove(),c.insertAfter(a,b),a},attr:function(a,c){var d,e,f,g=this,h=!1,i=!1;if(g.nodeType!==j.ELEM_NODE)return b;if(a=a?a.toLowerCase():"",a&&(c||null===c)){for(d=g.attributes.length;d--;)if(e=g.attributes[d],e.name===a){i=!0,e.value=c;break}null===c?(i&&g.attributes.splice(d,1),delete g.attrMap[a]):(i||g.attributes.push({name:a,value:c}),"style"===a&&(c.indexOf("&quot;")>-1&&(h=!0,c=c.replace(/&quot;/g,'"')),g.style=n.parse(c,{plain:!0}),c=n.serialize(g.style),h&&(c=c.replace(/\"/g,"&quot;"))),g.attrMap[a]=c)}else a&&(f=g.attrMap[a]);return f},getAttribute:function(a){return this.attr(a)},removeAttribute:function(a){return this.attr(a,null)},setAttribute:function(a,b){a&&(b||null===b)&&this.attr(a,b)},before:function(a){var b=this,c=b.parentNode;return a.parentNode&&a.remove(),c.insertBefore(a,b),a},children:function(a){for(var c,d=this,e=d.firstChild,f=[];e;)c=a===b||a===e.nodeName,c&&f.push(e),e=e.nextSibling;return f},combine:function(a,b){var c,d=this,e=d.nodeType;if(b||d.isCombinable(a))if(e===j.TEXT_NODE&&a.nodeType===e)d.textContent=d.textContent+a.textContent,a.remove();else if(e===j.ELEM_NODE){for(c=a.firstChild;c;)d.append(c),c=c.nextSibling;a.remove()}return d},isCombinable:function(a){var b,c,d,e=this;if(a.parentNode!==e.parentNode)return!1;if(e.nodeName!==a.nodeName)return!1;if(e.nextSibling!==a&&e.previousSibling!==a)return!1;if(e.nodeType===j.TEXT_NODE)return!0;if(e.nodeType!==j.ELEM_NODE)return!1;if(e.attributes.length!==a.attributes.length)return!1;for(b in e.attrMap)if(c=e.attrMap[b],d=a.attrMap[b],c!==d)return!1;return!0},css:function(a,c){var d,e=this;return e.nodeType!==j.ELEM_NODE?b:(a&&c?(e.style[a]=c,d=n.serialize(e.style),d=d.replace(/&quot;/gi,'"'),e.attrMap.style=d,d=null):a&&(d=e.style[a]),d)},clone:function(a){var b,c,d,e,g,h=this;if(b=new f(h.nodeName,h.nodeType),h.attributes)for(b.attributes=[],d=0,c=h.attributes.length;d<c;d++)e=h.attributes[d],b.attr(e.name,e.value);if(a&&(g=h.firstChild))for(;g;)b.append(g.clone(a)),g=g.nextSibling;return b},closest:function(a){var b,c,d=this,e=!1;for(a=a||m,b=d.parentNode;b&&"BODY"!==b.nodeName;){if(c=b.nodeName,a[c]){e=!0;break}b=b.parentNode}return e?b:null},getNodesByTagName:function(a){return a=a.toUpperCase(),i(this,function(b){return b.nodeName===a})},getNodesByAttr:function(a){return a=a.toLowerCase(),i(this,function(b){return!(b.nodeType!==j.ELEM_NODE||!b.attr(a))})},getNodes:function(a,b){return a=a.toUpperCase(),b=b.toLowerCase(),i(this,function(c){return!(c.nodeType!==j.ELEM_NODE||c.nodeName!==a||!c.attr[b])})},findElements:function(a,b){return i(a,b)},hasLineChildren:function(a){var b,c,d=this,f=new e(d),g=!1;for(c=f.next();c;){if(b=c.nodeName,/^(?:p|li|ol|ul|h1|h2|h3|h4|h5|h6|div)$/i.test(b)){g=!0;break}if(c===a)break;c=f.next()}return g},toCommentNode:function(){var a,b,c=this;return a=c.toString(),b=f.create("#comment",j.COMMENT_NODE),b.textContent=a,c.parentNode.insertBefore(b,c),c.remove(),b},remove:function(){var a,b=this,c=b.parentNode,d=b.nextSibling,e=b.previousSibling;if(c){switch(a=(d?2:0)+(e?1:0)){case 3:e.nextSibling=d,d.previousSibling=e;break;case 2:c.firstChild=d,d.previousSibling=null;break;case 1:c.lastChild=e,e.nextSibling=null;break;default:c.lastChild=null,c.firstChild=null}b.parentNode=null,b.nextSibling=null,b.previousSibling=null}return b},removeChild:function(a){return a?a.remove():a},replace:function(a,b){var c=this,d=c.firstChild;if(a.parent&&a.remove(),c.parentNode.insertBefore(a,c),b===!0&&d)for(;d;)a.append(d),d=d.next;return c.remove(),c},wrap:function(a){var b=this,c=b.parentNode;return"string"==typeof a&&(a=f.create(a,j.ELEM_NODE)),a.parentNode&&a.remove(),c.insertBefore(a,b),a.append(b),a},insertAfter:function(a,b){var c=this;return a.parentNode&&a.remove(),b.parentNode===c&&(b===c.lastChild?c.lastChild=a:b.nextSibling.previousSibling=a,a.previousSibling=b,a.nextSibling=b.nextSibling,b.nextSibling=a),a.parentNode=c,a},insertBefore:function(a,b){var c=this;return a.parentNode&&a.remove(),b.parentNode===c&&(b===c.firstChild?c.firstChild=a:b.previousSibling.nextSibling=a,a.previousSibling=b.previousSibling,a.nextSibling=b,b.previousSibling=a),a.parentNode=c,a},isEmpty:function(a){var c=this,d=!1,f=c.firstChild,g=new e(f,c);if(a[c.nodeName])return!1;if(c.nodeType===j.ELEM_NODE&&null===f)return!0;for(;f&&f!==c;){switch(f.nodeType){case j.ELEM_NODE:d=a[f.nodeName],d=d===b||!d,f.isInserted&&(d=!1);break;case j.TEXT_NODE:d=0===f.textContent.length;break;case j.COMMENT_NODE:d=!1}if(!d)break;f=g.next()}return d},isHidden:function(){var a=this;return!!a.attr("hidden")||(!!/hidden/i.test(a.css("visibility"))||!!/none/i.test(a.css("display")))},unwrap:function(){for(var a,b=this,c=b.firstChild;c;)a=c.nextSibling,b.parentNode.insertBefore(c,b),c=a;b.remove()},_trim:function(a){var b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;return a.replace(b,"")},toElements:function(){},toFormatString:function(a){var b,c,d,e,f=this,i="",n=!1,p="",q=f.nodeName;if(a=a||0,c=g(a),f.nodeType===j.TEXT_NODE)o.empty(),i=o.append(f.textContent).html();else if(f.nodeType===j.ELEM_NODE)if(e=h(f.attrMap),e=e.length>0?" "+e:e,i="<"+q+e,d=f.firstChild,m[q]){if(i=c+i+">",d)for(;d;)i+=d.toFormatString(a),d=d.nextSibling;i+="</"+q+">\n"}else if(l[q])if("COL"===q)i+="/>";else{if("TABLE"===q&&d&&(b=d.closest(),b&&"LI"===b.nodeName&&b===f.parentNode&&(n=!0,a++,c="\n"+g(a))),i=c+i+("COLGROUP"!==q?">\n":">"),d)for(;d;)i+=d.toFormatString(a+1),d=d.nextSibling;n&&(c=g(a),a--,p=g(a)),i+=("COLGROUP"!==q?c:"")+"</"+q+">\n"+p}else if(/^(?:UL|OL)$/i.test(q)){if("LI"===f.parentNode.nodeName?(a++,c=g(a),i="\n"+c+i+">\n"):i=c+i+">\n",d)for(;d;)i+=d.toFormatString(a+1),d=d.nextSibling;i+=c+"</"+q+">\n","LI"===f.parentNode.nodeName&&(i+=g(a-1))}else if(k[q])i+="/>","HR"===q&&(i+="\n");else{if(i+=">",d)for(;d;)i+=d.toFormatString(a),d=d.nextSibling;i+="</"+q+">"}else if(f.nodeType===j.COMMENT_NODE)i="<!--"+f._trim(f.textContent)+"-->",/^(TD|TH|BODY|DIV)$/i.test(f.parentNode.nodeName)&&(i=c+i+"\n");else if(d=f.firstChild)for(;d;)i+=d.toFormatString(a),d=d.nextSibling;return i},toString:function(){var a,b,c,d=this,e="";if(b=d.nodeType,b===j.ELEM_NODE){if(c=h(d.attrMap),c=c.length>0?" "+c:c,e+="<"+d.nodeName+c+">",!k[d.nodeName]){for(a=d.firstChild;a;)e+=a.toString(),a=a.nextSibling;e+="</"+d.nodeName+">"}}else if(b===j.TEXT_NODE)e=d.textContent;else if(b===j.COMMENT_NODE)e="<!--"+d.textContent+"-->";else if(b===j.ROOT_NODE)for(a=d.firstChild;a;)e+=a.toString(),a=a.nextSibling;return e}},f.create=function(a,b,c){var d,e,g;if(b=b||j.ELEM_NODE,a=3!==b?a.toUpperCase():a,d=new f(a,b),d.attrMap={},c)for(d.attributes=c,e=d.attributes.length;e--;)g=c[e],d.attr(g.name,g.value);else d.attributes=[],d.attrMap={},d.styles={};return d},f}),d("utilities/TreeBuilder",["jqueryCafe","utilities/EditorConstants","utilities/Node","utilities/NodeTracker","utilities/RuleSet"],function(a,c,d,e,f){function g(a){return/^[\s\uFEFF\xA0]+$/.test(a)}function h(){var a=[];return a.current=function(){return this[this.length-1]},a.prev=function(){return this.length-2>=0?this[this.length-2]:null},a.lastOpenBlock=function(a){var b,c,d=this.length;for(a=a||r;d--;)if(c=this[d].node,this[d].open===!0&&a[c.nodeName]){b=this[d];break}return b},a.lastOpen=function(a){for(var c,d,e=this.length;e--;)if(d=this[e].node,this[e].open===!0&&(a===b||a===d.nodeName)){c=this[e];break}return c},a.remove=function(a){var c=this.length;a!==b&&c>a&&this.splice(a,1)},a.clean=function(){this.length=0},a.isEmpty=function(){return 0===this.length},a}function i(a){this.schema=new f(a||{})}var j,k,l,m,n,o,p=c.toMap,q=c.NodeTypes,r=c.BlockElements,s=c.SelfCloseElements,t=c.VoidElements,u=c.LineBlockElements;return k=p("script, style"),n=p("col, colgroup, table, tbody, td, tr, th, thead, tfoot"),j=p("address, article, aside, center, details, dialog, dir, div, dl, fieldset, figcaption, figure, footer, header, hgroup, main, menu, nav, ol, p, section, summary, ul",!0),m=p("b,big,code,em,font,i,s,small,strike,strong,tt,u"),l=p("html, head, body"),o=p("OL, UL, TABLE, TBODY, THEAD, TFOOT, TR"),i.prototype={startTagReg:/<(?:([A-Za-z0-9\-_\:\.]+)((?:\s+[^"'>]+(?:(?:"[^"]*")|(?:'[^']*')|[^>]*))*|\/|\s+)>)/m,endTagReg:/<\/([^>]+)>/m,officeStartReg:/^<\w\:\w+/m,PITagReg:/^<\?([^\s\/<>]+) ?([\w\W]*?)[?\/]>/m,attrReg:/([-A-Za-z0-9_]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,root:null,state:null,elemHandles:{},attrHandles:{},addElementHandler:function(a,b){var c=this;a&&b&&(a=a.toUpperCase(),c.elemHandles[a]={nodes:[],handle:b})},addAttrHanadler:function(a,b){var c=this;c.attrHandles[a]={nodes:[],handle:b}},parse:function(a,b){var c,d,e,f,g,h,i,j=this,m=!1;for(j._init(b||{}),a&&(a=a.replace(/\&nbsp;/g,"Â "));a.length>0;)f=a.charAt(0),"<"===f&&(f=a.charAt(1),"!"===f?"<!--"===a.substring(0,4)?(i=a.indexOf("-->"),i!==-1&&(j._onCommentElement(a.substring(4,i)),a=a.substring(i+3),m=!1)):/<\!\[CDATA\[/i.test(a.substring(0,9))?(i=a.indexOf("]]>"),i!==-1&&(j._onCommentElement(a.substring(0,i+3)),a=a.substring(i+3),m=!1)):/<!DOCTYPE/i.test(a.substring(0,9))&&(i=a.indexOf(">"),i!==-1&&(a=a.substring(i+1),m=!1)):"?"===f?(d=a.match(j.PITagReg),d&&(a=a.substring(d[0].length),m=!1)):"/"===f?(d=a.match(j.endTagReg),d&&(a=a.substring(d[0].length),e=d[1].split(/\s+/)[0],j._onEndElement(e),m=!1)):(d=a.match(j.startTagReg),d&&0===a.indexOf(d[0])&&(k[d[1]]?(g=new RegExp("<\\/"+d[1]+"(?:[^>]*)>","im"),g.test(a)?(h=RegExp.leftContext?RegExp.leftContext.substring(d[0].length):"",a=RegExp.rightContext):(h=a.substring(d[0].length),a=""),j._onSpecialElement(d[1],d[2],h)):(a=a.substring(d[0].length),c=d[1].toUpperCase(),l[c]?0===j._getLastStack().length&&j._pushItem(j.root):j._onStartElement(c,d[2])),m=!1))),m&&(i=a.indexOf("<"),i===-1?(j._onTextElement(a),a=""):0===i?(j._onTextElement(a.substring(0,1)),a=a.substring(1)):(j._onTextElement(a.substring(0,i)),a=a.substring(i))),m=!0;return j._closeAllTableStack(),j.root},_appendNodeItem:function(a,b,c,d){var e,f,g,h,i,j=this,k=j.styleStack,l=j._getLastStack(),n=a.nodeName;return e=j._getLastOpen(),c=c!==!1,e?(h=e.node,g=h.lastChild,g&&a.nodeType===q.TEXT_NODE&&g.nodeType===q.TEXT_NODE?(g.textContent+=a.textContent,b=!1):h.append(a)):a.nodeType===q.ELEM_NODE&&(f=l.current(),f&&"BODY"===f.node.nodeName&&(h=f.node,h.append(a))),b&&j._pushItem(a),c&&m[n]?(i=a.clone(),k.push({index:j.styleStack.length,node:i,open:!0,origin:a})):u[n]&&d!==!0&&j._inheritStyleElement(),a},_appendTableItem:function(a){var b=this,c=b.tableStackContainer.current(),d=c.lastOpen(),e={index:c.length,node:a,open:!0};d&&("COLGROUP"===d.nodeName&&"COL"!==a.nodeName&&(b._closeElement("COLGROUP",c),d=c.lastOpen()),d.node.append(a)),"COL"!==a.nodeName&&c.push(e)},_init:function(a){this.state="init",this.stack=h(),this.styleStack=h(),this.tableStackContainer=h(),this.htmlNode=d.create("HTML",q.ROOT_NODE),this.headNode=d.create("HEAD",q.ROOT_NODE),this.root=d.create("BODY",q.ROOT_NODE),this._pushItem(this.root),this.schema.inherit_style_element=!0,this.schema.invalid_attributes=a.invalid_attributes||{}},_closeElement:function(a,b){var c,d,e=this;d=b||e._getLastStack(),c=d.lastOpen(a),c&&(c.open=!1,d.pop()),m[a]&&e._closeStyleElement(a)},_closeStack:function(a){var b,c=this,d=c._getLastStack();a&&a.index&&(d.length=a.index,b=a.node.nodeName),m[b]&&c._closeStyleElement(b)},_closeStyleElement:function(a){var b,c=this;b=c.styleStack.lastOpen(a),b&&c.styleStack.remove(b.index)},_inheritStyleElement:function(){var a,b,c,d=this,e=d.styleStack;if((a=e.length)>0)for(b=0;b<a;b++)c=d._appendNodeItem(e[b].node.clone(),!0,!1),c&&(c.isInheritedStyleElement=!0)},_pushItem:function(a){var b=this,c=b._getLastStack(),d={index:c.length,node:a,open:!0};return c.push(d),d},_onAttr:function(a,b){var c=this,d=[];return b.replace(c.attrReg,function(a,b,e,f,g){var h;return b=b.toLowerCase(),h=e||f||g||b,c.schema.isInvalidAttributes(b,h)?/^data\-/i.test(b)&&d.push({name:b,value:h}):d.push({name:b,value:h}),""}),d},_onCommentElement:function(a){var b,c,e,f=this;f.schema.removeComments||(b=d.create("#comment",q.COMMENT_NODE),b.textContent=a,c=f._getLastStack(!0),e=c.current().node,e.append(b))},_onEndElement:function(a){var c,e,f=this;a=a.toUpperCase(),n[a]?f._onEndTableElement(a):s[a]?(e=f._getLastOpen(a),f._closeStack(e),"P"===a&&e===b&&(e=d.create(a,q.ELEM_NODE),e.emptyElement=!0,f._appendNodeItem(e,!1,!1,!0))):t[a]?"BR"===a&&(c=d.create(a,q.ELEM_NODE),f._appendNodeItem(c)):f._closeElement(a),m[a]===!0&&f._closeStyleElement(a)},_onSpecialElement:function(a,b,c){var e,f,g=this;f=d.create("#text",q.TEXT_NODE),f.textContent=c,e=d.create(a,q.ELEM_NODE,b),e.append(f),g._appendNodeItem(e)},_onStartElement:function(a,b){var c,e,f,g,h,i=this;b&&(c=i._onAttr(a,b)),n[a]?i._onStartTableElement(a,c):(e=d.create(a,q.ELEM_NODE,c),h=i._getLastStack(),j[a]&&(g=h.lastOpen("P"),i._closeStack(g)),s[a]&&(g=h.lastOpen(a),"LI"===a&&g?(f=h.lastOpenBlock({OL:!0,UL:!0}),f&&f.index<g.index&&i._closeStack(g)):i._closeStack(g)),i._isRequireStyleElements(e)&&i._inheritStyleElement(),i._appendNodeItem(e,!t[a]))},_onStartTableElement:function(a,b){var c,e,f,g,h=this;"TABLE"===a?(h.state="table_head",g=h._createTableStack()):g=h.tableStackContainer.current(),/^(?:COLGROUP)$/.test(a)&&(c=g.lastOpen("COLGROUP"),c&&h._closeElement("COLGROUP",g)),"table_head"===h.state&&/^(?:THEAD|TFOOT|TBODY|TR)$/.test(a)&&(h._closeElement("COLGROUP",g),h.state="table_body"),"COL"===a&&"table_head"===h.state&&(c=g.lastOpen("COLGROUP"),c||h._createBlockElement("COLGROUP")),"table_head"!==h.state&&"table_body"!==h.state||(/^(?:th|td|tr|tbody|thead|tfoot)$/i.test(a)?(f=h._getLastOpen(a,g),f&&h._closeElement(a,g)):s[a]&&(f=h._getLastOpen(a,g),h._closeStack(f,g)),h.styleStack.clean(),e=d.create(a,q.ELEM_NODE,b),h._appendTableItem(e))},_onEndTableElement:function(a){var b,c=this,d=c.tableStackContainer,e=d.current();"TABLE"===a?(1===d.length&&(c.state="body_in"),c._closeTableStack()):e&&(b=e.lastOpen(a),b&&(b.open=!1,e.pop()))},_isRequireStyleElements:function(a){var c,d,e=this,f=!1,g=e.state,h=e.styleStack,i=e._getLastStack(),j=i.current(),k=h.current(),l=a.nodeName,m=!1,n=j.node.isInheritedStyleElement;if(!/^table_/i.test(g)&&h.length>0&&n===b&&!u[l]){for(c=k.origin,d=j.node;d&&"BODY"!==d.nodeName;){if(d===c){m=!0;break}d=d.parentNode}f=!m}return f},_onTextElement:function(a){var b,c,e,f,h,i=this,j=i._getLastStack(),k=j.current();if(c=k?k.node:null)if(e=g(a),h=c.nodeName,e)o[h]||(i.root.firstChild||/^table_/i.test(i.state))&&(b=d.create("#text",q.TEXT_NODE),b.textContent=a,i._isRequireStyleElements(b)&&i._inheritStyleElement(),i._appendNodeItem(b));else{if("UL"===h||"OL"===h)i._createBlockElement("LI");else if(/^table_/i.test(i.state)&&(f=j.lastOpenBlock(n),f&&!/^(?:TD|TH)$/i.test(f.node.nodeName)))return;b=d.create("#text",q.TEXT_NODE),a=a.replace(/&#(?:820[3-5]|65279);/gi,"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;"),b.textContent=a,i._isRequireStyleElements(b)&&i._inheritStyleElement(),i._appendNodeItem(b)}},_getLastStack:function(a){var b,c=this,d=c.tableStackContainer,e=d.length,f=/^table_/i.test(c.state),g=!1;if(a)b=f?d[e-1]:c.stack;else if(f){for(;e--;)if(b=d[e],c._isOpenedCell(b)){g=!0;break}b=g?b:c.stack}else b=c.stack;return b},_getLastOpen:function(a,b){var c=this,d=b||c._getLastStack();return d.lastOpen(a)},_getLastOpenBlock:function(a,b){var c=this,d=b||c._getLastStack();return d.lastOpenBlock(a)},_isOpenedCell:function(a){var b,c=this,d=a||c.tableStackContainer.current();return!(!d||!(b=d.lastOpenBlock({TD:!0,TH:!0})))},_createTableStack:function(){for(var a=this,b=a.tableStackContainer,c=h();!b.isEmpty()&&!a._isOpenedCell();)a._closeTableStack();return b.push(c),c},_closeTableStack:function(){var a,b,c,d,e,f,g,h,i,j=this;a=j.tableStackContainer.current(),b=j.tableStackContainer.prev(),c=null!==b?b.lastOpenBlock({TD:!0,TH:!0}):null,d=j._getLastStack(!0),e=j._getLastOpenBlock(p("p,h1,h2,h3,h4,h5,h6"),d),f=d.lastOpen(),g=a[0].node,h=j._getLastStack(),i=j._getLastOpenBlock(p("li"),h),i=i?i.node:null,!c&&!e&&f&&f.node&&f.node!==g?f.node.append(g):c?i?i.append(g):c.node.append(g):j.root.append(g),j.tableStackContainer.pop()},_closeAllTableStack:function(){for(var a=this,b=a.tableStackContainer;!b.isEmpty();)a._closeTableStack()},_createBlockElement:function(a){var b,c=this;return a=a?a.toUpperCase():"P",b=d.create(a,q.ELEM_NODE),b.isInserted=!0,c._appendNodeItem(b,!0),b},serialize:function(a,b){return b?a.toFormatString():a.toString()}},i}),d("utilities/ParsingHelper",["jqueryCafe","utilities/EditorConstants","utilities/TreeBuilder","utilities/Node","utilities/NodeTracker","utilities/StyleParser"],function(a,c,d,e,f,g){function h(){}var i,j=c.NodeTypes,k=c.toMap,l=k("body,tr,td,th,tbody,thead,tfoot,table"),m=k("border-collapse,border-spacing,caption-side,color,cursor,empty-cells,font-style,font-variant,font-weight,letter-spacing,line-height,list-style-image,list-style-position,list-style-type,orphans,overflow-wrap,resize,text-align,text-indent,text-shadow,text-transform,visibility,white-space,word-spacing,word-break,word-wrap,font-family,font-size",!1),n=c.LineBlockElements,o=c.LineBreakElements,p=c.keys(o).join(","),q=k("b,cite,dfn,em,i,ins,s,strike,strong,sup,sub,u"),r=!1;return h.prototype={init:function(a,b){a.ownerDocument?(r=!0,i=a.ownerDocument):(r=!1,i=null),this.oldIE=b.isOldIE||!1,this.IE=b.isIE||!1,this.forceBRToEmptyLine=b.forceBRToEmptyLine||!1},final:function(){i=null},afterNode:function(b,c){return r?a(b).after(c):b.after(c),c},appendNode:function(b,c){return r?a(b).append(c):b.append(c),c},appendNodes:function(b,c){var d;if(r)a(b).append(c);else for(;0!==c.length;)d=c.shift(),b.append(d);return b},applyBlockStyle:function(a){var b,c,d,e,f,h=this,i=h.getAllChildren(a),k="style",l="SPAN",m=a.getAttribute(k),n=h.filterInheritedStyle(m),o=g.serialize(n);if(o&&0!==o.length)for(c=0,d=i.length;c<d;c++)if(b=i[c],b.nodeName===l||/^(?:table|ul|ol)$/i.test(b.nodeName))f=g.parse(b.getAttribute(k),{plain:!0}),f=h.mergedStyle(f,n),b.setAttribute(k,f);else{if(b.nodeType===j.COMMENT_NODE)continue;e=h.wrapNode(b,l),e.setAttribute(k,o)}},applyInhertedStyle:function(a,b){var c,d,e,f,g,h,i=this,k="style",l="SPAN";if(e=a.getAttribute(k),e=i.filterInheritedStyle(e,!0),h=a.parentNode&&/^(?:body|xbody|x-link)$/i.test(a.parentNode.nodeName),q[a.nodeName])l=a.nodeName;else if(!e||0===e.length)return;for(f=a.firstChild;f;)f.nodeType!==j.TEXT_NODE||/^(?:\u00A0|\s)+$/i.test(f.textContent)||b.push(f),f=f.nextSibling;for(c=0,d=b.length;c<d;c++)if(f=b[c],f.parentNode===a){if(f.nodeType===j.ELEM_NODE)g=i.createNode(l),i.moveChild(f,g),f.appendChild(g);else if(f.nodeType===j.TEXT_NODE){if(h&&/^(?:\u00A0|\s)+$/i.test(f.textContent))continue;g=i.wrapNode(f,l)}else{if(f.nodeType===j.COMMENT_NODE||f.nodeType===j.DOC_NODE)continue;g=i.wrapNode(f,l)}e&&e.length>0&&g.setAttribute(k,e)}},inheritedStyles:function(a){var b,c,d,e=this,f=a.nodeName,h=a.firstChild,i="style",j=a.getAttribute(i)||"";h&&h===a.lastChild&&h.nodeName===f&&j.length>0&&(c=e.filterInheritedStyle(j),b=g.parse(h.getAttribute(i),{plain:!0}),d=e.mergedStyle(b,c),h.setAttribute(i,d),e.removeJSObj(c),c=null)},mergedStyle:function(a,b){var c,d,e=this;a=a||{};for(c in b)a[c]||(a[c]=b[c]);return d=g.serialize(a),e.removeJSObj(a),a=null,d},removeJSObj:function(a){var b;for(b in a)delete a[b]},beforeNode:function(b,c){return r?a(b).before(c):b.before(c),c},cloneAttribute:function(a,b){var c,d=a.attributes,e=d?d.length:0;for(c=0;c<e;c++)b.setAttribute(d[c].name,d[c].value);return b},cloneNode:function(a){var b,c,d,e,f;if(a){if(r)for(b=i.createElement(a.nodeName),c=a.attributes,e=0,f=c.length;e<f;e++){d=c[e];try{b.setAttribute(d.name,d.value)}catch(a){}}else b=a.clone();return b}},closestParent:function(a,b){var c,d=a.parentNode,e=!1;for(b=b||{};d;){if(c=d.nodeName,b[c]){e=!0;break}d=d.parentNode}return e?d:null},combine:function(a,b,c){var d,e=this,f=a.nodeType,g=a.parentNode||a.parentElement;if(c||e.isCombinable(a,b))if(f===j.TEXT_NODE&&f===b.nodeType)a.textContent=a.textContent+b.textContent,g.removeChild(b);else if(f===j.ELEM_NODE){for(d=b.firstChild;d;)a.appendChild(d),d=d.nextSibling;g.removeChild(b)}},createComment:function(a){var b,c,d,f,g,h="";if(r){if(b=a.outerHTML,"META"===a.nodeName&&0===b.length){for(d=a.attributes,f=d.length;f--;)g=d[f],h+=" "+g.name+'="'+g.value+'"';b="<meta"+h+">"}b=b.replace(/-->/g,"--&gt;").replace(/<!--/g,"&lt;!--"),c=i.createComment(b)}else b=a.toString(),b=b.replace(/-->/g,"--&gt;").replace(/<!--/g,"&lt;!--"),c=e.create("#comment",j.COMMENT_NODE),b=b.replace(/\&amp;/gi,"&").replace(/\&lt;/gi,"<").replace(/\&gt;/g,">").replace(/\&quot;/g,'"'),c.textContent=b;return c},createEmptyLineNode:function(a){var b,c,d,f,g=this;if(r?(c=i.createElement("p"),g.oldIE||g.IE&&!g.forceBRToEmptyLine?b=i.createTextNode("Â "):(b=i.createElement("br"),g.forceBRToEmptyLine&&g.IE&&b.setAttribute("cui-ebr","true"))):(c=e.create("p",j.ELEM_NODE),g.oldIE||g.IE&&!g.forceBRToEmptyLine?b=g.createTextNode("Â "):(b=e.create("br",j.ELEM_NODE),g.forceBrToEmptyLine&&g.IE&&b.setAttribute("cui-ebr","true"))),a){for(f=a;f&&f.firstChild;)f=f.firstChild;f.appendChild(b),d=a}else d=b;return c.appendChild(d),c.isInserted=!0,c},createElements:function(b){var c=[];return r&&b&&(c=a(b)),c[0]},createNode:function(a){var b;return b=r?i.createElement(a):e.create(a,j.ELEM_NODE),b.isInserted=!0,b},createTextNode:function(a){var b;return r?b=i.createTextNode(a):(b=e.create("#text",j.TEXT_NODE),b.textContent=a),b},css:function(b,c,d){return r?(d=null===d?"":d,a(b).css(c,d)):b.css(c,d),b},filterInheritedStyle:function(a,b){var c,d,e=g.parse(a,{plain:!0}),f={};for(c in m)d=e[c],d&&(f[c]=d);for(c in e)delete e[c];return e=null,b?g.serialize(f):f},findElementByTagName:function(b,c){var d;return d=r?a(b).find(c):b.getNodesByTagName(c),d[0]},getLeafNode:function(a,b){for(var c=a,d=b?"firstChild":"lastChild";c&&c[d];)c=c[d];return c},getChildren:function(b,c){var d,e,f,g=[];if(r)g=a(b).find(c.join(","));else for(e=0,f=c.length;e<f;e++)d=b.getNodesByTagName(c[e]),d.length>0&&(g=g.concat(d));return g},getTextChildren:function(a){var b,c=a.firstChild,d=[];for(b=new f(c,a);c&&c!==a;)3===c.nodeType&&d.push(c),c=b.next();return d},getAllChildren:function(a){
for(var b=[],c=a.firstChild;c;)b.push(c),c=c.nextSibling;return b},hasClass:function(a,b){var c,d,e=a.getAttribute("class"),f=!1;for(e=e?e.split(/\s+/):[],c=e.length;c--;)if(d=e[c],d===b){f=!0;break}return f},hasBlockElement:function(a){var b;return 1===a.nodeType&&(b=r?a.querySelectorAll(p):a.findElements(a,function(a){return o[a.nodeName]}),b.length>=1)},hashHandle:function(a){var b=0,c=a.length,d=0;if(!c)return b;for(;d<c;++d)b=(b<<5)-b+a.charCodeAt(d),b|=0;return b},hasStyle:function(b,c,d){var e,f=!1;return b&&c&&d&&(d=d.toLowerCase(),c=c.toLowerCase(),e=r?b.style?b.style[c]:a(b).css(c):b.css(c),e=e&&e.toLowerCase(),f=d===e),f},isCombinable:function(a,b){var c,d,e,f,g;if(a.parentNode!==b.parentNode)return!1;if(a.nodeName!==b.nodeName)return!1;if(a.nextSibling!==b&&a.previousSibling!==b)return!1;if(a.nodeType===j.TEXT_NODE)return!0;if(a.nodeType!==j.ELEM_NODE)return!1;if(e=a.attributes,e.length!==b.attributes.length)return!1;for(f=0,g=e.length;f<g;f++)if(c=e[f],d="string"==typeof c?c:c.name,a.getAttribute(d)!==b.getAttribute(d))return!1;return!0},isEmptyNode:function(a,c,d){var e=!1,g=a.firstChild,h=new f(g,a);if(c[a.nodeName])return!1;if(a.nodeType===j.ELEM_NODE&&null===g)return!0;for(;g&&g!==a;){switch(g.nodeType){case j.ELEM_NODE:e=c[g.nodeName],e=e===b||!e,g.isInserted&&(e=!1);break;case j.TEXT_NODE:e=d?/^[\s\uFEFF\xA0]$/.test(g.textContent):0===g.textContent.length;break;case j.COMMENT_NODE:e=!1}if(!e)break;g=h.next()}return e},isHiddenNode:function(b){var c,d;return!!b&&(d=b.nodeType,d!==j.TEXT_NODE&&d!==j.COMMENT_NODE&&(r?(c=a(b),!!c.attr("hidden")||(!!/hidden/i.test(c.css("visibility"))||!!/none/i.test(c.css("display")))):b.isHidden()))},isRemovableSpan:function(a){var b,c,d,e,f=a.parentNode,g=a.nodeName,h=a.attributes,i=h?h.length:0,j=!0;if(f&&g===f.nodeName&&!/OL|UL|BLOCKQUOTE/.test(g)&&(b=f.attributes,i===b.length)){for(c=0;c<i;c++)if(d=h[c],e=b[c],d.name!==e.name||d.value!==e.value){j=!1;break}return j}return!1},moveNodes:function(a,b,c){var d,e,f=this,g=b.length,h=c?f.afterNode:f.beforeNode;if(a){if(g>0&&b[0]===a&&(c=!0,h=f.afterNode),c)for(e=0;e<g;e++)d=b[e],a!==d&&(h(a,d),a=d);else for(e=g-1;e>=0;e--)d=b[e],h(a,d);return b[g-1]}},moveChild:function(a,b){for(var c,d=a.firstChild;d;)c=d,d=c.nextSibling,b.appendChild(c);return b},removeNode:function(a){var b;a.remove&&!r?a.remove():a.removeChild&&(b=a.parentNode)&&b.removeChild(a)},removeNodeFunc:function(a,b){var c,d,e,f=this,g=a.parentNode;return c=a,n[g.nodeName]&&a===g.lastChild&&a===g.firstChild&&(d=f.IE?f.createTextNode(r?"Â ":"&nbsp;"):f.createNode("BR"),f.appendNode(g,d)),a.nextSibling?a=b.nextSibling():(e=f.getLeafNode(a),e&&b.current(e),a=b.next(),a&&a.parentNode===c&&(a=null)),f.removeNode(c),c=null,a},replaceNode:function(a,b){var c=this,d=a.parentNode;r?(d.insertBefore(b,a),c.removeNode(a)):a.replace(b)},splitNode:function(a){var b,c=this,d=a.parentNode,e=a.nextSibling;if(l[d.nodeName])c.beforeNode(d,a);else{for(b=c.cloneNode(d),c.afterNode(d,b);e;)c.appendNode(b,e),e=e.nextSibling;c.beforeNode(b,a)}return a},toHash:function(a){var b,c,d=this,e=a.attributes,f="";for(f+=a.nodeName+"_",b=0,c=e.length;b<c;b++)f+=" "+e[b].name+"_"+e[b].value;return f=d.hashHandle(f)},unwrapNode:function(a){var b,c=this;if(r){for(b=a.parentNode;a.firstChild;)b.insertBefore(a.firstChild,a);c.removeNode(a)}else a.unwrap()},wrapNode:function(a,b){var c,d;return r?(c=a.parentNode||a.parentElement,d=i.createElement(b),c.insertBefore(d,a),d.appendChild(a)):d=a.wrap(b),d}},h}),d("utilities/HtmlParser",["jqueryCafe","utilities/TreeBuilder","utilities/EditorConstants","utilities/Node","utilities/NodeTracker","utilities/RuleSet","utilities/ParsingHelper","utilities/StyleParser"],function(a,b,c,d,e,f,g,h){function i(a,b,c){var d,e,f,g,h;for(d=a.attributes||[],e=d.length;e--;)if(f=d[e],g="string"==typeof f?f:f.name,h=a.getAttribute(g),b.isInvalidAttributes(g,h)){try{a.setAttribute(g,"")}catch(a){}finally{a.removeAttribute(g)}!c.hasInvalidAttribute&&b.isNotifyAttributes(g)&&(c.hasInvalidAttribute=!0)}else/^(?:data\-|class|style|id|lang|src)/i.test(g)||j(a,g);a.getAttribute("style")&&!b.isIE()&&a.setAttribute("style",a.getAttribute("style").replace(/\"/gm,"'")),a=b.removeHTMLTagAttributes(a,c)}function j(a,b){var c,d,e=b.toLowerCase(),f=a.getAttribute(b);switch(e){case"align":/^(?:div|col|colgroup|table|tbody|td|tr|th|thead)$/i.test(a.nodeName)||(c="text-align",d=!0);break;case"bgcolor":c="background-color",d=!0;break;case"width":case"height":c=e,f=f.indexOf("%")===-1?f+" px":f;break;case"src":"IMG"===a.nodeName&&/^cid:/i.test(f)&&(d=!0);break;case"frame":case"rules":case"spellcheck":case"sortable":case"summary":d=!0}c&&I.css(a,c,f),d&&a.removeAttribute(b)}function k(a){var b,c,d="style",e=a.getAttribute(d),f=e?h.parse(e,{plain:!0}):{},g=/^(?:0\.\d+\s*pt)$/gi;for(b in f)c=f[b],/border/.test(b)&&g.test(c)&&(f[b]=c.replace(g,"1px"));e=h.serialize(f),e&&e.length>0&&a.setAttribute(d,e)}function l(a){var b,c,d;if(b=G?a.childNodes:a.children(),b&&0!==b.length)return c=b[0],d=m(b),d.COLGROUP&&(c=I.moveNodes(a.firstChild,d.COLGROUP,!0)),d.THEAD&&(c=I.moveNodes(c,d.THEAD,!0)),d.TBODY&&(c=I.moveNodes(c,d.TBODY,!0)),d.TFOOT&&I.moveNodes(a.lastChild,d.TFOOT,!0),!0}function m(a){var b,c,d,e=a.length,f=[],g={};for(d=0;d<e;d++)b=a[d],c=b.nodeName,"COLGROUP"!==c||b.childNodes.length?g[c]?g[c].push(b):g[c]=[b]:f.push(d);if(f.length)for(d=f.length-1;d>=0;d--)I.removeNode(a[f[d]]);return g}function n(a){var b,d=I.closestParent(a,c.LineBlockElements);return!(!d||"BR"!==a.nodeName)&&(b=I.closestParent(d,{TD:!0,TH:!0}),d=b?b:d,I.getLeafNode(d)===a)}function o(a){return/\u0009/.test(a)&&(a=a.replace(/\u0009/g,K)),/\u0020\u0020/.test(a)&&(a=a.replace(/\u0020\u0020/g,U+V)),a}function p(a,b){var d,e,f,g,h,i,j,k,l=c.LineBlockElements,m=a.firstChild,n=/\n/;for(g=I.filterInheritedStyle(b,!0);m;){if(h=m.nodeName,i=m.nodeType,i===M.TEXT_NODE)d=m.textContent,d=o(d),e=d&&n.test(d)?d.split("\n"):[d],f=q(m,e,g,f),f!==m&&(I.removeNode(m),m=f),/\n$/.test(d)&&(f=null);else if(l[h]){for(g&&m.setAttribute("data-pre-style",g),d=I.getTextChildren(m),j=0,k=d.length;j<k;j++)d[j].textContent=o(d[j].textContent);f=null}else l[h]||/(?:^TABLE$|^UL$|^OL$|^HR$|^P$)/i.test(h)?f=null:(f||(f=I.wrapNode(m,"P"),g&&f.setAttribute("data-pre-style",g)),f.appendChild(m),m=f);m=m.nextSibling}}function q(a,b,c,d){var e,f,g,h,i,j,k=!d;for(f=0,g=b.length;f<g;f++)h=b[f],j=h,i=I.createTextNode(j),k?(I.beforeNode(a,i),i=I.wrapNode(i,"P")):(d.appendChild(i),k=!0,i=d),c&&i.setAttribute("data-pre-style",c);return e=a.previousSibling||a}function r(a,b){var c,d="";for(c=0;c<S;c++)d+=c%2?a:b?" ":V;return d}function s(a){var b=a.textContent;/(\n\s+)$/.test(b)?b=b.replace(/(\n\s+)$/g,""):/(\n\s*(\S))/g.test(b)&&(b=b.replace(/\n\s+(\S)/g," $1"),b=b.replace(/\s+/g," "),/\s+$/.test(b)&&(b=b.replace(/\s+$/,""))),/\u0020/.test(b)&&(b=b.replace(/\u0020/g,U)),/\u00A0\u00A0/.test(b)&&(b=b.replace(/\u00A0\u00A0/g,U+V)),/(\S)\u00A0(\S)/.test(b)&&(b=b.replace(/(\S)\u00A0(\S)/g,"$1"+V+"$2")),/(\S)\u00A0(\S)/.test(b)&&(b=b.replace(/(\S)\u00A0(\S)/g,"$1"+V+"$2")),/\u0020\n|\u0020$/.test(b)&&(b=b.replace(/\u0020(\n)|\u0020$/g,U+"$1")),a.textContent=b}function t(b){var d,e,f,g,h,i,j=b.startContainer;for(j.nodeType===c.NodeTypes.ELEM_NODE&&c.StyleElements[j.nodeName]&&(g=j.cloneNode()),f=a(j).parents(c.StyleElementsStr),d=f.length-1;d>=0;d--)e=f[d].cloneNode(),h||(h=e),i&&i.appendChild(e),i=e;return g&&(e&&e!==g?i.appendChild(g):e||(h=g)),h}function u(a){return!(!a||1!==a.attributes.length||"style"!==a.attributes[0].name)&&(!(2!==a.style.length||!a.style.fontFamily||!a.style.fontSize)||!(1!==a.style.length||!a.style.fontFamily&&!a.style.fontSize))}function v(a){var b;return b=a.childNodes?a.childNodes:a.children(),1===b.length&&b[0].nodeName===T.SPAN}function w(b,f,g,h,j){var m,o,q,w,y,A,C,F,L,N,O,S,T,V,$,_,aa,ba,ca,da,ea=/[\u200B\uFEFF]/gi,fa=c.keys(c.LineBlockElements),ga=function(a,b){return""===a.replace(/\u00A0/g,"")&&1===a.length?0===b||b===O-1?a:a.replace(/\u00A0/g," "):a};for(H=b.ownerDocument,G=!!H,D(b,!0),I.hasBlockElement(b)&&E(b,I),o=b.firstChild,m=new e(o,b),G?(g.headNode=H.createElement("head"),J=U):(g.headNode=d.create("head",M.ELEM_NODE),J="&nbsp;"),K=r(J),_={};o&&o!==b;){if(q=o.nodeName.toUpperCase(),w=o.parentNode,L=o.nodeType,"DIV"===q||a(o).hasClass("cui-div-cell")||(_={}),L===M.TEXT_NODE){if(w&&/body$|fieldset/i.test(w.nodeName)&&/^[\s\uFEFF\xA0\n]+$/gi.test(o.textContent)){o=I.removeNodeFunc(o,m);continue}if(/^(?:(?:&#(?:10|xa);)|\u000A)+$/g.test(o.textContent)&&(o.textContent=o.textContent.replace(/^(?:(?:&#(?:10|xa);)|\u000A)+$/g,J)),N=o.textContent,ea.test(N)){if(1===N.length){o=I.removeNodeFunc(o,m);continue}o.textContent=N.replace(ea,"")}if(w&&w.firstChild===o&&w.lastChild===o&&"SPAN"===w.nodeName&&0===w.attributes.length){I.unwrapNode(w);continue}j?s(o):(O=N.length,o.textContent=N.replace(/[^\S\r\n]{1,}/g,ga))}if(L===M.ELEM_NODE&&i(o,f,g),"TABLE"===q){if(!l(o)&&!a(o).find("TD, TH").length){o=I.removeNodeFunc(o,m);continue}}else/^(?:TD|TH|UL|OL|DL)$/i.test(q)?D(o):"DIV"===q&&o.firstChild!==o.lastChild&&D(o);if(f.isNotifyElement(q)&&(g.hasInvalidElement=!0),f.isRemoveElement(q))o=I.removeNodeFunc(o,m);else if((f.isOldIE()||!f.new_line_without_blank&&f.isIE())&&"BR"===q&&n(o))y=I.createTextNode(G?U:"&nbsp;"),I.replaceNode(o,y),o=y,m.current(o);else if(f.isUnsupportedElement(q))y=x(o),I.replaceNode(o,y),o=y;else if(f.isUnwrapElement(q))y=o,"PRE"===q?p(y,y.getAttribute("style")):(D(y),I.applyBlockStyle(y)),o=m.next(),I.unwrapNode(y);else if(f.removeHiddenElements&&I.isHiddenNode(o))o=I.removeNodeFunc(o,m,!0);else if(f.removeEmptyElement&&f.isRemoveEmptyElement(q)&&I.isEmptyNode(o,W))o=I.removeNodeFunc(o,m);else if(f.isMovableElement(q))y=o,I.hasClass(o,"cui-content-default")?o=I.removeNodeFunc(o,m):(o=m.nextSibling(),f.isCommentElement(q)&&(C=I.createComment(y),I.removeNode(y),y=C,G||y.remove()),g.headNode.appendChild(y));else if(f.gatherHeadElement&&Q[q])y=o,o=m.nextSibling(),G||y.remove(),I.hasClass(o,"cui-content-default")||g.headNode.appendChild(y);else{if(f.useCombineElement&&f.isCombine(q)){if(C=o.nextSibling,C&&I.isCombinable(o,C)){I.combine(o,C,!0);continue}}else{if(f.isCommentElement(q)){y=I.createComment(o),I.replaceNode(o,y),m.current(y),o=y;continue}if(f.isReplace(q)){"DIV"===q&&(I.hasClass(o,"3DWordSection1")||I.hasClass(o,"WordSection1"))?(D(o),y=o,o=m.next(),I.unwrapNode(y)):"DIV"===q&&!I.hasBlockElement(o)&&o.firstChild?(aa=o.firstChild,/^font$/i.test(aa.nodeName)&&o.lastChild===aa&&null===aa.firstChild&&I.hasStyle(o,"display","inline")?(y=o,m.next(),o=m.next(),I.removeNode(y)):(y=I.createNode("P"),I.cloneAttribute(o,y),I.moveChild(o,y),I.replaceNode(o,y),o=y),m.current(o)):"DIV"===q&&_?($=I.toHash(o),ba=o.childNodes&&1===o.childNodes.length,_[$]?(ba?_[$]++:_=null,y=o,o=m.next(),I.unwrapNode(y),o.children&&o.children.length||(_=null)):(ba?_[$]=1:_=null,o=f.replaceNode(o,I),"TD"!==o.nodeName&&(o=I.findElementByTagName(o,"TD")),m.current(o))):(o=f.replaceNode(o,I),m.current(o));continue}if(f.isOfficeElement(q)){o.firstChild?(y=o,o=m.next(),I.unwrapNode(y)):o=I.removeNodeFunc(o,m);continue}if(f.isInvalidElement(q)||P[q]){o=I.removeNodeFunc(o,m,!0);continue}}if(!f.isValidChild(w,o))if(A=f.getDefaultChild(w.nodeName),o.nodeType===M.COMMENT_NODE){if(f.removeComments){o=I.removeNodeFunc(o,m);continue}}else{if(L===M.TEXT_NODE&&Z[w.nodeName]){o=I.removeNodeFunc(o,m);continue}if(A&&X[q]){if(T=I.getChildren(o,fa),f.useSingleLineElements&&0===T.length&&(F=o.previousSibling,F&&F.nodeName===A&&F.isInserted&&F.appendChild(o)),o.parentNode.nodeName!==A){if("P"===A&&T.length>0){I.applyInhertedStyle(o,T),y=o,o=m.next(),o.nodeType===c.NodeTypes.TEXT_NODE&&"\n"===o.nodeValue?o.remove():(I.inheritedStyles(y),I.unwrapNode(y));continue}C=o.nextSibling,T=B(f,C),w=I.wrapNode(o,A),w.isInserted=!0,T.length>0&&(I.appendNodes(w,T),T=null)}}else{if(Y[q]){if(S=I.closestParent(o,{LI:!0,TD:!0,TH:!0}),c.LineBlockElements[q]&&S&&"LI"===S.nodeName){y=o,C=o.nextSibling,C&&C.parentNode.insertBefore(I.createNode("BR"),C),I.applyBlockStyle(y),o=m.next(),I.unwrapNode(y);continue}o=w.firstChild===o?I.beforeNode(w,o):w.lastChild===o?I.afterNode(w,o):I.splitNode(o);continue}if(f.isReplace(q)&&null!==A){o=f.replaceNode(o,I),m.current(o);continue}if(!f.isComponentElement(q)){o.firstChild&&!R[q]?(y=o,o=m.next(),I.unwrapNode(y)):o=I.removeNodeFunc(o,m,!0);continue}A=f.getComponentParent(q),F=o.previousSibling,C=o.nextSibling,F&&F.nodeName===A?I.appendNode(F,o):C&&C.nodeName===A?I.beforeNode(C.firstChild,o):I.wrapNode(o,A)}}if("SPAN"===q&&0===o.attributes.length||I.isRemovableSpan(o))y=o,o=m.next(),I.unwrapNode(y);else if("SPAN"!==q||0===o.attributes.length){if(f.forceInsertTdchild&&/^(?:td|th)$/i.test(q)&&(o.firstChild||I.appendNode(o,I.createEmptyLineNode())),!f.isIE()&&/^(?:td|th)$/i.test(q)&&k(o),"A"===q&&(ca=o.getAttribute("href"))&&(f.isIE()&&(y=document.createElement("div"),y.innerHTML=ca,ca=y.innerText),/^(\s*)j(\s*)a(\s*)v(\s*)a(\s*)s(\s*)c(\s*)r(\s*)i(\s*)p(\s*)t(\s*):/gim.test(ca)&&(o.setAttribute("href","#"),g.hasInvalidElement=!0)),G&&f.isIE()&&"P"===q&&!/<\/P>$/i.test(o.outerHTML))try{y=I.createElements(o.outerHTML+"</P>"),I.replaceNode(o,y),m.current(y)}catch(a){console&&console.log(a.toString())}o=m.next()}else{for(V=null,v(o)&&(V=o.childNodes[0]);u(V);)y=V,o.style.fontFamily=y.style.fontFamily||o.style.fontFamily,o.style.fontSize=y.style.fontSize||o.style.fontSize,V=v(y)?y.childNodes[0]:null,I.unwrapNode(y);o=m.next()}}}if(z(b,f,fa),o=b.firstChild,o&&o===b.lastChild&&o.nodeType===M.COMMENT_NODE&&b.appendChild(I.createEmptyLineNode()),f.appendEmptylinAtLast){for(o=b.lastChild;o&&o.nodeType===M.COMMENT_NODE&&o.previousSibling;)o=o.previousSibling;o&&/^(?:TABLE|HR)$/.test(o.nodeName)&&(h&&/^(?:TABLE)$/.test(o.nodeName)?(da=t(h),y=I.createEmptyLineNode(da)):y=I.createEmptyLineNode(),b.appendChild(y))}return b.firstChild||b.lastChild||(y=I.createEmptyLineNode(),b.appendChild(y)),b}function x(a){var b,c,e,f,g="IMG";if(b=G?H.createElement(g):d.create(g,M.ELEM_NODE),a.attributes)for(c=0,e=a.attributes.length;c<e;c++)f=a.attributes[c],b.setAttribute(N+f.name,f.value);return b.setAttribute(N+"tag",a.nodeName),b.setAttribute("src",O),b}function y(a,b){var d,e;1===b.nodeType&&c.LineBlockElements[b.nodeName]&&(d=a?I.createTextNode(G?U:"&nbsp;"):I.createNode("BR"),1===b.childElementCount&&b.lastChild.nodeName===T.SPAN?b.lastChild.appendChild(d):b.appendChild(d),a||(e=d.previousSibling,e&&3===e.nodeType&&/^(?:[\u200B\uFEFF\s\n])+$/.test(e.textContent)&&I.removeNode(e)))}function z(a,b,c){var d,e,f,g,h,i=b.isIE(),j=I.getChildren(a,c),k=!1,l=!0,m=a.firstChild,n="data-pre-style";if(m&&m===a.lastChild&&I.isEmptyNode(m,W))return y(i,m),a;for(e=0,f=j.length;e<f;e++)d=j[e],g=d.getAttribute(n),g&&(I.isEmptyNode(d,W)?g=null:(h=I.createNode("span"),I.moveChild(d,h),d.appendChild(h),h.setAttribute("style",g)),d.removeAttribute(n)),("LI"===d.nodeName||d.firstChild||null===d.previousSibling&&null===d.nextSibling)&&!g&&I.isEmptyNode(d,W)&&(k=!0,y(i,d));for(;m;){if(1===m.nodeType&&m.firstChild){l=!1;break}m=m.nextSibling}return l&&a.lastChild&&(1===a.lastChild.nodeType?y(i,a.lastChild):a.lastChild.nodeType===M.COMMENT_NODE&&a.appendChild(I.createEmptyLineNode())),a}function A(a){var b,c;return 1===a.nodeType&&(G?b=a.querySelectorAll("p,li,ul,ol,h1,h2,h3,h4,h5,h6,div").length:(c=I.getLeafNode(a),b=a.hasLineChildren(c)?1:0),0!==b)}function B(a,b){for(var c,d=[];b;){if(c=b.nodeName,3===b.nodeType||b.nodeType>=8&&b.nodeType<=10)d.push(b);else{if(!a.isStyleElement(c))break;if(A(b))break;d.push(b)}b=b.nextSibling}return d}function C(a,b){var c=b?"previousSibling":"nextSibling",d=a[c],e=d?a.nodeName:"";return/(?:p|h[1-6]|ul|ol|table|pre)/i.test(e)}function D(a,b){for(var c,d=a.firstChild;d;)if(d.nodeType===M.TEXT_NODE&&/^[\s\uFEFF\xA0\n]+$/gi.test(d.textContent)){if(b&&!C(d,!0)&&!C(d,!1)){d=d.nextSibling;continue}c=d,d=d.nextSibling,a.removeChild(c)}else d=d.nextSibling}function E(a,b){for(var d,e,f=a.firstChild;f;)e=f.nodeName,c.InlineElements[e]&&!b.hasBlockElement(f)&&b.isEmptyNode(f,W,!0)?(d=f,f=f.nextSibling,a.removeChild(d)):f=f.nextSibling}function F(a){this.defaultSchema=a||new f}var G,H,I,J,K,L=c.toMap,M=c.NodeTypes,N="data-cui-",O=c.NoImageData,P=c.FormElements,Q=c.HeadElements,R=c.SVGElements,S=c.TAB_COUNT,T=c.NodeNames,U=c.UNICODE_CHAR_CODE.NBSP,V=c.UNICODE_CHAR_CODE.SPACE,W=L("iframe video audio object script area base basefont br col frame hr img input isindex link meta param embed source track"),X=L("a, area, b, br, cite, del, dfn, em, embed, i, img, ins, kbd, label, map, s, samp, small, span, strong, strike, sub, sup, u, #text, #comment"),Y=L("table, ul, ol, p, h1, h2, h3, h4, h5, h6"),Z=L("br, map, colgroup, img, hr, table, tbody, tfoot, thead, tr");return I=new g,F.prototype={attrHandles:{},attrHandleList:[],elemHandles:{},elemHandleList:[],headNode:null,bodyNode:null,_hasInvalidAttribute:!1,_hasInvalidElement:!1,_init:function(){},addElementHandler:function(a,b,c,d){var e=this;a&&b&&c&&d&&(e.elemHandleList.dirty=!0,a=a.toLowerCase(),c=c.toUpperCase(),e.elemHandles[a]={id:a,dependencies:b,tag:c,handle:d})},addAttrHandler:function(a,b,c,d){var e=this;a&&b&&c&&d&&(e.attrHandleList.dirty=!0,a=a.toLowerCase(),c=c.toLowerCase(),e.attrHandles[a]={id:a,dependencies:b,attrName:c,handle:d})},getBodyNode:function(){return this.bodyNode},getHeadNode:function(){return this.headNode},parse:function(a,c){var d=this,e={},g={};if(d.schema=c?new f(c):d.defaultSchema,d.builder=new b(c),d.root=d.builder.parse(a),I.init(d.root,{isOldIE:d.schema.isOldIE(),isIE:d.schema.isIE(),forceBRToEmptyLine:d.schema.new_line_without_blank}),d.root=d._execElemeHandle(d.root,e),d.root=d._execAttrHandle(d.root,e),d.schema.applySchema)try{d.bodyNode=w(d.root,d.schema,g),d.headNode=g.headNode,d._hasInvalidElement=g.hasInvalidElement||!1,d._hasInvalidAttribute=g.hasInvalidAttribute||!1}catch(a){}return d.root},validDoc:function(a,b,c,d){var e=this,f={};e.schema=b?b:e.defaultSchema,e.root=a,I.init(a,{isOldIE:e.schema.isOldIE(),isIE:e.schema.isIE(),forceBRToEmptyLine:e.schema.new_line_without_blank});try{e.bodyNode=w(e.root,e.schema,f,c,d),e.headNode=f.headNode,e._hasInvalidElement=f.hasInvalidElement||!1,e._hasInvalidAttribute=f.hasInvalidAttribute||!1}catch(a){}return e.root},getTreeBuilder:function(a){var c=this;return c.builder||(c.builder=new b(a?new f(a):c.defaultSchema)),c.builder},replaceTextDecoration:function(a){return a=a.replace(/text\-decoration\-line\s*\:([^\;]*)(\;|\")/gi,function(a,b,c){var d=a;return/none|underline|overline|initial|inherit|line\-through/.test(b)&&(d="text-decoration:"+b+c),d})},_requires:function(a,b,c){var d,e,f,g=this,h=0,i=c?g.elemHandles:g.attrHandles;for(h=0,d=a.length;h<d;h++)e=a[h].toLowerCase(),b[e]&&!i[e]||g._isLoaded(e,c)||(f=i[e],g._loadHandle(f,b,c))},_initHandles:function(a){var b=this;return a&&b.elemHandleList.dirty?(b.elemHandleList=[],b.elemHandleList.dirty=!1):!a&&b.attrHandleList.dirty&&(b.attrHandleList=[],b.attrHandleList.dirty=!1),b._initHandleChain(a),a?b.elemHandleList:b.attrHandleList},_isLoaded:function(b,c){var d=this,e=c?d.elemHandleList:d.attrHandleList;return a.inArray(b,e)!==-1},_loadHandle:function(a,b,c){var d,e=this,f=a?a.id:null,g=a?a.dependencies:[];a&&!b[f]&&(b[f]=!0,e._requires(g,b,c),d=c?e.elemHandleList:e.attrHandleList,d.push(f))},_initHandleChain:function(a){var b,c,d=this,e=a?d.elemHandles:d.attrHandles,f={};for(b in e)d._isLoaded(b,a)||(c=e[b],d._loadHandle(c,f,a))},_execElemeHandle:function(a,b){var c,d,e,f,g,h,i,j=this;for(h=j._initHandles(!0),d=0,e=h.length;d<e;d++)i=j.elemHandles[h[d]],c=i.tag,f=i.handle,g=a.getNodesByTagName(c),g.length>0&&f(g,I,b);return a},_execAttrHandle:function(a,b){var c,d,e,f,g,h,i,j=this;for(h=j._initHandles(!1),d=0,e=h.length;d<e;d++)i=j.attrHandles[h[d]],c=i.attrName,f=i.handle,g=a.getNodesByAttr(c),g.length>0&&f(g,I,b);return a},hasInvalidElement:function(){return this._hasInvalidElement||!1},hasInvalidAttribute:function(){return this._hasInvalidAttribute||!1},hasInvalidItem:function(){return this._hasInvalidElement||this._hasInvalidAttribute||!1},serialize:function(a,b){return b?a.toFormatString():a.toString()},destroy:function(){var a=this;I.final(),a.schema=null,a.root=null,a.bodyNode=null,a.headNode=null,a._hasInvalidElement=null,a._hasInvalidAttribute=null,a.attrHandleList=null,a.attrHandles=null,a.elemHandleList=null,a.elemHandles=null,H=null}},F}),d("ui/Core",["jqueryCafe"],function(a){function c(b,c){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,!(!b.href||!f||"map"!==e.nodeName.toLowerCase())&&(g=a("img[usemap='#"+f+"']")[0],!!g&&d(g))):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e="cui-";return a.ui=a.ui||{},a.extend(a.ui,{prefix:e,panelTypes:{edit:"iframe"},keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38,SHIFT:16,NUM2:50,EQUAL_SIGN:187,COMPOSING:229,NUM_0:48,NUM_9:57,CHAR_A:65,CHAR_Z:90,NUMPAD_0:96,NUMPAD_DIVISION:111,SEMICOLON:186,GRAVE_ACCENT:192,BRACKET_LEFT:219,QUOTES:222,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90},isNavigationKeyCode:{33:!0,34:!0,35:!0,36:!0,37:!0,38:!0,39:!0,40:!0},isFunction:function(a){return"function"==typeof a},addPrefixToClasses:function(a){for(var b=0,c=a.length;b<c;b++)a[b]=e+a[b];return a},makeHTML:function(b){var c,d,e,f,g,h,i;if(!b||!b.tag)return"string"==typeof b?b:"";if(c="<"+b.tag,d=b.attr)for(f in d)g=d[f],c+=" "+f+'="'+(a.isArray(g)?g.join(" "):g)+'"';if(c+=">",e=b.contents)for(h=0,i=e.length;h<i;h++)c+=this.makeHTML(e[h]);return c+="</"+b.tag+">",b.after&&(c+=this.makeHTML(b.after)),c},documentchanged:function(){var a=window.cafe||b;a&&a.activeEditor&&a.activeEditor.trigger&&a.activeEditor.trigger("documentchanged")},browser:function(){var a=window.cafe||b;return a&&a.browser?a.browser:null},getIEVersion:function(){var a=window.cafe||b;return a&&a.browser&&a.browser.ie?a.browser.version:null},getScrollbarWidth:function(){var a,b,c,d;return this._scrollbarWidth?this._scrollbarWidth:(d=document.createElement("div"),d.style.visibility="hidden",d.style.width="100px",document.body.appendChild(d),a=d.offsetWidth,d.style.overflow="scroll",b=document.createElement("div"),b.style.width="100%",d.appendChild(b),c=b.offsetWidth,d.parentNode.removeChild(d),this._scrollbarWidth=a-c,this._scrollbarWidth)}}),a.fn.extend({scrollParent:function(b){var c=this.css("position"),d="absolute"===c,e=b?/(auto|scroll|hidden)/:/(auto|scroll)/,f=this.parents().filter(function(){var b=a(this);return(!d||"static"!==b.css("position"))&&e.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==c&&f.length?f:a(this[0].ownerDocument||window.document)},uniqueId:function(){var a=0;return function(){return this.each(function(){this.id||(this.id=e+"id-"+ ++a)})}}(),removeUniqueId:function(){return this.each(function(){new RegExp("^"+e+"id-\\d+$").test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}),focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a.ui.plugin={add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c,d){var e,f=a.plugins[b];if(f&&(d||a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType))for(e=0;e<f.length;e++)a.options[f[e][0]]&&f[e][1].apply(a.element,c)}},!0}),d("ui/Widget",["jqueryCafe","ui/Core"],function(a){var c=a.ui.prefix,d=0,e=Array.prototype.slice,f={disabled:c+"state-disabled",hover:c+"state-hover",focus:c+"ui-state-focus"};return a.cleanData=function(b){return function(c){var d,e,f;for(f=0;null!=(e=c[f]);f++)try{d=a._data(e,"events"),d&&d.remove&&a(e).triggerHandler("remove")}catch(a){}b(c)}}(a.cleanData),a.widget=function(b,d,e){var f,g,h,i,j={},k=b.split(".")[0];return b=b.split(".")[1],f=c+b,e||(e=d,d=a.Widget),a.expr[":"][f.toLowerCase()]=function(b){return!!a.data(b,f)},a[k]=a[k]||{},g=a[k][b],h=a[k][b]=function(a,b){return this._createWidget?arguments.length?this._createWidget(a,b):void 0:new h(a,b)},a.extend(h,g,{version:e.version,_proto:a.extend({},e),_childConstructors:[]}),i=new d,i.options=a.widget.extend({},i.options),i.htmlData={},a.each(e,function(b,c){return a.isFunction(c)?void(j[b]=function(){var a=function(){return d.prototype[b].apply(this,arguments)},e=function(a){return d.prototype[b].apply(this,a)};return function(){var b,d=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=c.apply(this,arguments),this._super=d,this._superApply=f,b}}()):void(j[b]=c)}),h.prototype=a.widget.extend(i,{widgetEventPrefix:g?i.widgetEventPrefix||b:b},j,{constructor:h,namespace:k,widgetName:b,widgetFullName:f}),g?(a.each(g._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,h,c._proto)}),delete g._childConstructors):d._childConstructors.push(h),a.widget.bridge(b,h),h},a.widget.extend=function(c){for(var d,f,g=e.call(arguments,1),h=0,i=g.length;h<i;h++)for(d in g[h])f=g[h][d],g[h].hasOwnProperty(d)&&f!==b&&(a.isPlainObject(f)?c[d]=a.isPlainObject(c[d])?a.widget.extend({},c[d],f):a.widget.extend({},f):c[d]=f);return c},a.widget.bridge=function(c,d){var f=d.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=e.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,h?this.each(function(){var d,e=a.data(this,f);return"instance"===g?(j=e,!1):e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):void 0):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")}):this.each(function(){var b=a.data(this,f);b?(b.option(g||{}),b._init&&b._init()):a.data(this,f,new d(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1,create:null},_createWidget:function(c,e){return this.uuid=d++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),c),this.bindings=a(),this.hoverable=a(),this.focusable=a(),e!==b&&(e=a(e||this.defaultElement||this)[0],this.element=a(e),this._registerElementInfo(e)),this._create(),e!==b&&(this._trigger("create",null,this._getCreateEventData()),this._init()),this},_registerElementInfo:function(b){b!==this&&(a.data(b,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===b&&this.destroy()}}),this.document=a(b.style?b.ownerDocument:b.document||b),this.window=a(this.document[0].defaultView||this.document[0].parentWindow))},getHTMLData:function(){var a=this.htmlData;return a.attr.id=this.getID(),a},getID:function(){return c+this.uuid},init:function(){var b=a("#"+this.getID())[0];b&&(this.element=a(b),this._registerElementInfo(b),this._init())},create:function(b){return b=b||"body",a(b).append(a.ui.makeHTML(this.getHTMLData())),this.init(),this},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(a){this.element&&(this._destroy(),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+f.disabled),this.bindings.off(this.eventNamespace),this.hoverable.removeClass(f.hover),this.focusable.removeClass(f.focus),this.options=null,this.htmlData&&(this.htmlData=null),a&&this.element.remove(),this.element=null)},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;g<e.length-1;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),1===arguments.length)return f[c]===b?null:f[c];f[c]=d}else{if(1===arguments.length)return this.options[c]===b?null:this.options[c];if(this.options[c]===d)return this;h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.element&&this.element.toggleClass(this.widgetFullName+"-disabled",!!b),b&&(this.hoverable.removeClass(f.hover),this.focusable.removeClass(f.focus))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(b,c,d){var e,g=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,h){function i(){if(b||g.options.disabled!==!0&&!a(this).hasClass(f.disabled))return("string"==typeof h?g[h]:h).apply(g,arguments)}"string"!=typeof h&&(i.guid=h.guid=h.guid||i.guid||a.guid++);var j=d.match(/^([\w:-]*)\s*(.*)$/),k=j[1]+g.eventNamespace,l=j[2];l?e.on(k,l,i):c.on(k,i)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.off(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){var c=a(b.currentTarget);c.addClass(f.hover),a.ui.getIEVersion()&&this._on(this.document,{keydown:function(){c.removeClass(f.hover),this._off(this.document,"keydown")},wheel:function(){c.removeClass(f.hover),this._off(this.document,"wheel")},scroll:function(){c.removeClass(f.hover),this._off(this.document,"scroll")}})},mouseleave:function(b){a(b.currentTarget).removeClass(f.hover),this._off(this.document,"keydown"),this._off(this.document,"wheel"),this._off(this.document,"scroll")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass(f.focus)},focusout:function(b){a(b.currentTarget).removeClass(f.focus)}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}}),a.widget}),d("ui/Position",["jqueryCafe","ui/Core"],function(a){return function(){function c(a,b,c){return[parseFloat(a[0])*(o.test(a[0])?b/100:1),parseFloat(a[1])*(o.test(a[1])?c/100:1)]}function d(b,c){return parseInt(a.css(b,c),10)||0}function e(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var f,g,h=Math.max,i=Math.abs,j=Math.round,k=/left|center|right/,l=/top|center|bottom/,m=/[\+\-]\d+(\.[\d]+)?%?/,n=/^\w+/,o=/%$/,p=a.fn.position;a.position={scrollbarWidth:function(){if(f!==b)return f;var c,d,e=a("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),g=e.children()[0];
return a("body").append(e),c=g.offsetWidth,e.css("overflow","scroll"),d=g.offsetWidth,c===d&&(d=e[0].clientWidth),e.remove(),f=c-d},getScrollInfo:function(b){var c=b.isWindow||b.isDocument?"":b.element.css("overflow-x"),d=b.isWindow||b.isDocument?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:f?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]),e=!!c[0]&&9===c[0].nodeType;return{element:c,isWindow:d,isDocument:e,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d||e?c.width():c.outerWidth(),height:d||e?c.height():c.outerHeight()}}},a.fn.position=function(b){if(!b||!b.of)return p.apply(this,arguments);b=a.extend({},b);var f,o,q,r,s,t,u=a(b.of),v=a.position.getWithinInfo(b.within),w=a.position.getScrollInfo(v),x=(b.collision||"flip").split(" "),y={};return t=e(u),u[0].preventDefault&&(b.at="left top"),o=t.width,q=t.height,r=t.offset,s=a.extend({},r),a.each(["my","at"],function(){var a,c,d=(b[this]||"").split(" ");1===d.length&&(d=k.test(d[0])?d.concat(["center"]):l.test(d[0])?["center"].concat(d):["center","center"]),d[0]=k.test(d[0])?d[0]:"center",d[1]=l.test(d[1])?d[1]:"center",a=m.exec(d[0]),c=m.exec(d[1]),y[this]=[a?a[0]:0,c?c[0]:0],b[this]=[n.exec(d[0])[0],n.exec(d[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===b.at[0]?s.left+=o:"center"===b.at[0]&&(s.left+=o/2),"bottom"===b.at[1]?s.top+=q:"center"===b.at[1]&&(s.top+=q/2),f=c(y.at,o,q),s.left+=f[0],s.top+=f[1],this.each(function(){var k,l,m=a(this),n=m.outerWidth(),p=m.outerHeight(),t=d(this,"marginLeft"),z=d(this,"marginTop"),A=n+t+d(this,"marginRight")+w.width,B=p+z+d(this,"marginBottom")+w.height,C=a.extend({},s),D=c(y.my,m.outerWidth(),m.outerHeight()),E=e(u.closest(".cui-cafe")).offset;"right"===b.my[0]?C.left-=n:"center"===b.my[0]&&(C.left-=n/2),"bottom"===b.my[1]?C.top-=p:"center"===b.my[1]&&(C.top-=p/2),C.left+=D[0],C.top+=D[1],g||(C.left=j(C.left),C.top=j(C.top)),k={marginLeft:t,marginTop:z},a.each(["left","top"],function(c,d){a.ui.position[x[c]]&&a.ui.position[x[c]][d](C,{targetWidth:o,targetHeight:q,elemWidth:n,elemHeight:p,collisionPosition:k,collisionWidth:A,collisionHeight:B,offset:[f[0]+D[0],f[1]+D[1]],my:b.my,at:b.at,within:v,elem:m})}),b.using&&(l=function(a){var c=r.left-C.left,d=c+o-n,e=r.top-C.top,f=e+q-p,g={target:{element:u,left:r.left,top:r.top,width:o,height:q},element:{element:m,left:C.left,top:C.top,width:n,height:p},horizontal:d<0?"left":c>0?"right":"center",vertical:f<0?"top":e>0?"bottom":"middle"};o<n&&i(c+d)<o&&(g.horizontal="center"),q<p&&i(e+f)<q&&(g.vertical="middle"),h(i(c),i(d))>h(i(e),i(f))?g.important="horizontal":g.important="vertical",b.using.call(this,a,g)}),m.hasClass("cui-tooltip")&&"BUTTON"===u[0].nodeName&&n+C.left>E.left+u.closest(".cui-cafe")[0].offsetWidth&&(C.left=C.left+o-n),m.offset(a.extend(C,{using:l}))})},a.ui.position={fit:{left:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollLeft:d.offset.left,f=d.width,g=a.left-b.collisionPosition.marginLeft,i=e-g,j=g+b.collisionWidth-f-e;b.collisionWidth>f?i>0&&j<=0?(c=a.left+i+b.collisionWidth-f-e,a.left+=i-c):j>0&&i<=0?a.left=e:i>j?a.left=e+f-b.collisionWidth:a.left=e:i>0?a.left+=i:j>0?a.left-=j:a.left=h(a.left-g,a.left)},top:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollTop:d.offset.top,f=b.within.height,g=a.top-b.collisionPosition.marginTop,i=e-g,j=g+b.collisionHeight-f-e;b.collisionHeight>f?i>0&&j<=0?(c=a.top+i+b.collisionHeight-f-e,a.top+=i-c):j>0&&i<=0?a.top=e:i>j?a.top=e+f-b.collisionHeight:a.top=e:i>0?a.top+=i:j>0?a.top-=j:a.top=h(a.top-g,a.top)}},flip:{left:function(a,b){var c,d,e=b.within,f=e.offset.left+e.scrollLeft,g=e.width,h=e.isWindow?e.scrollLeft:e.offset.left,j=a.left-b.collisionPosition.marginLeft,k=j-h,l=j+b.collisionWidth-g-h,m="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,n="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,o=-2*b.offset[0];k<0?(c=a.left+m+n+o+b.collisionWidth-g-f,(c<0||c<i(k))&&(a.left+=m+n+o)):l>0&&(d=a.left-b.collisionPosition.marginLeft+m+n+o-h,(d>0||i(d)<l)&&(a.left+=m+n+o))},top:function(a,b){var c,d,e=b.within,f=e.offset.top+e.scrollTop,g=e.height,h=e.isWindow?e.scrollTop:e.offset.top,j=a.top-b.collisionPosition.marginTop,k=j-h,l=j+b.collisionHeight-g-h,m="top"===b.my[1],n=m?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,o="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];k<0?(d=a.top+n+o+p+b.collisionHeight-g-f,a.top+n+o+p>k&&(d<0||d<i(k))&&(a.top+=n+o+p)):l>0&&(c=a.top-b.collisionPosition.marginTop+n+o+p-h,a.top+n+o+p>l&&(c>0||i(c)<l)&&(a.top+=n+o+p))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,f,h=document.getElementsByTagName("body")[0],i=document.createElement("div");b=document.createElement(h?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},h&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in d)b.style[f]=d[f];b.appendChild(i),c=h||document.documentElement,c.insertBefore(b,c.firstChild),i.style.cssText="position: absolute; left: 10.7432222px;",e=a(i).offset().left,g=e>10&&e<11,b.innerHTML="",c.removeChild(b)}()}(),a.ui.position}),d("ui/Mouse",["jqueryCafe","ui/Widget"],function(a){var b,c=!1;return a(document).mouseup(function(){c=!1}),a.widget("ui.mouse",{options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_eventNS:"."+a({}).uniqueId()[0].id,_mouseInit:function(c){var d=this;this.element.on("mousedown."+this._eventNS,function(a){return d._mouseDown(a)}).on("click."+this._eventNS,function(b){if(!0===a.data(b.target,d._eventNS+".preventClickEvent"))return a.removeData(b.target,d._eventNS+".preventClickEvent"),b.stopImmediatePropagation(),!1}),this.started=!1,b=c},_mouseFinal:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&(this.window.off(this._eventNS),this.document.off(this._eventNS))},_mouseDown:function(b){if(!c){this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=1===b.which,f=!("string"!=typeof this.options.cancel||!b.target.nodeName)&&a(b.target).closest(this.options.cancel).length;return!(e&&!f&&this._mouseCapture(b))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(b)!==!1,!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},this.document.on("mousemove."+this._eventNS,this._mouseMoveDelegate).on("mouseup."+this._eventNS,this._mouseUpDelegate),this.window.on("mouseup."+this._eventNS,this._mouseUpDelegate),b.preventDefault(),c=!0,!0))}},_mouseMove:function(c){return a.ui.ie&&(!document.documentMode||document.documentMode<9)&&!c.button?this._mouseUp(c):c.which?this._mouseStarted?(this._mouseDrag(c),c.preventDefault()):(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,c)!==!1,this._mouseStarted?this._mouseDrag(c):this._mouseUp(c)),!this._mouseStarted):b?!this._mouseStarted:this._mouseUp(c)},_mouseUp:function(b){return this.window.off("mouseup."+this._eventNS,this._mouseUpDelegate),this.document.off("mousemove."+this._eventNS,this._mouseMoveDelegate).off("mouseup."+this._eventNS,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),c=!1,!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}),d("ui/Resizable",["jqueryCafe","ui/Core","ui/Mouse","ui/Widget"],function(a){return a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{controlPoint:!1,aspectRatioPoint:null,keepOriginalSize:!1,keepPosition:!1,display:null,alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(a){return parseInt(a,10)||0},_isNumber:function(a){return!isNaN(parseInt(a,10))},_hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0||(b[d]=1,e=b[d]>0,b[d]=0,e)},_create:function(){var b,c,d,e,f,g,h,i,j,k=a.ui.browser(),l=this,m=this.options;if(a.extend(this,{_aspectRatio:!!m.aspectRatio,aspectRatio:m.aspectRatio,doc:m.doc,originalElement:this.element,_proportionallyResizeElements:[],_helper:m.helper||m.ghost||m.animate?m.helper||"cui-resizable-helper":null}),this.originalElement.addClass("cui-resizable"),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a("<div class='cui-wrapper' style='"+(m.controlPoint?"":"overflow: hidden;")+"'></div>").css({display:m.display||"",position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:m.keepPosition?"auto":this.element.css("top"),left:m.keepPosition?"auto":this.element.css("left"),float:this.element.css("float"),"z-index":this.element.css("z-index"),"vertical-align":this.element.css("vertical-align")})),this.element=this.element.parent().data("cui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,i=this.originalElement[0].style,j=i.margin,j?this.element.css("margin",j):(j=i.marginLeft,j&&this.element.css("marginLeft",j),j=i.marginTop,j&&this.element.css("marginTop",j),j=i.marginRight,j&&this.element.css("marginRight",j),j=i.marginBottom,j&&this.element.css("marginBottom",j)),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),k.ie?(h=this.originalElement[0].getAttribute("src"),h=h.replace(/&#10;/g,"").replace(/\n/g,"").replace(/&#61;/g,"="),this.element.attr("contenteditable","false").css("opacity",.6),"true"!==this.originalElement.attr("data-cui-alt-image")?(this.element.css("background-image","url('"+h+"')").css("background-repeat","no-repeat"),"data:image/svg+xml;base64,"!==h.substring(0,26)&&this.element.css("background-size",this.element.outerWidth()+"px "+this.element.outerHeight()+"px")):this.element.attr("data-cui-alt-image","true"),this.originalElement.attr("unselectable","off").css("display","none")):k.webkit&&(this.originalElement.css({"margin-top":"0px","margin-left":"0px",top:"0px",left:"0px",margin:"0px"}),this.element.css("opacity",.8)),this._proportionallyResize()),this.handles=m.handles||(a(".cui-resizable-handle",this.element).length?{n:".cui-resizable-n",e:".cui-resizable-e",s:".cui-resizable-s",w:".cui-resizable-w",se:".cui-resizable-se",sw:".cui-resizable-sw",ne:".cui-resizable-ne",nw:".cui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),b=this.handles.split(","),this.handles={},c=0;c<b.length;c++)d=a.trim(b[c]),g=m.controlPoint?" cui-control-point":"",f="cui-resizable-"+d,m.aspectRatioPoint&&a.inArray(d,m.aspectRatioPoint.split(/(?:,(?:\s){0,})/))!==-1&&(g+=" cui-resizable-aspectRatio"),e=a("<div unselectable='on' class='cui-resizable-handle "+f+g+"'></div>"),e.css({zIndex:m.zIndex}).attr("data-cafe-filter","remove"),"se"===d&&e.addClass("cui-icon cui-icon-gripsmall-diagonal-se"),this.handles[d]=".cui-resizable-"+d,this.element.append(e);this._renderAxis=function(b){var c,d,e,f;b=b||this.element;for(c in this.handles)this.handles[c].constructor===String&&(this.handles[c]=this.element.children(this.handles[c]).first().show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(d=a(this.handles[c],this.element),f=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),e=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join(""),b.css(e,f),this._proportionallyResize()),a(this.handles[c]).length},this._renderAxis(this.element),this._handles=a(".cui-resizable-handle",this.element),this._handles.mouseover(function(){l.resizing||(this.className&&(e=this.className.match(new RegExp("cui-resizable-(se|sw|ne|nw|n|e|s|w)","i"))),l.axis=e&&e[1]?e[1]:"se")}),m.autoHide&&(this._handles.hide(),a(this.element).addClass("cui-resizable-autohide").mouseenter(function(){m.disabled||(a(this).removeClass("cui-resizable-autohide"),l._handles.show())}).mouseleave(function(){m.disabled||l.resizing||(a(this).addClass("cui-resizable-autohide"),l._handles.hide())})),this._mouseInit(m.checkIFrame)},_destroy:function(){this._mouseFinal();var b,c=function(b){a(b).removeClass("cui-resizable cui-resizable-disabled cui-resizable-resizing").removeData("resizable").removeData("cui-resizable").unbind(".resizable").find("cui-resizable-handle").remove()};return this.newStyle?(this.originalElement.css("opacity",""),this.elementIsWrapper&&(c(this.element),this.element.remove())):(this.elementIsWrapper&&(c(this.element),b=this.element,this.options.keepOriginalSize?this.originalElement.css({position:b.css("position"),marginLeft:b.css("margin-left"),marginTop:b.css("margin-top")}).insertBefore(b):this.originalElement.css({position:b.css("position"),top:this.options.keepPosition?"auto":b.css("top"),left:this.options.keepPosition?"auto":b.css("left"),marginLeft:b.css("margin-left"),marginTop:b.css("margin-top")}).insertBefore(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle)),c(this.originalElement),this.originalElement.hasClass()||this.originalElement.removeAttr("class"),this},_mouseCapture:function(b){var c,d,e=!1;for(c in this.handles)d=a(this.handles[c])[0],(d===b.target||a.contains(d,b.target))&&(e=!0);return!this.options.disabled&&e},_mouseStart:function(b){var c,d,e,f=this.options,g=this.element;return this.resizing=!0,this._renderProxy(),c=this._num(this.helper.css("left")),d=this._num(this.helper.css("top")),f.containment&&(c+=a(f.containment).scrollLeft()||0,d+=a(f.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:c,top:d},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:g.width(),height:g.height()},this.originalSize=this._helper?{width:g.outerWidth(),height:g.outerHeight()}:{width:g.width(),height:g.height()},this.sizeDiff={width:g.outerWidth()-g.width(),height:g.outerHeight()-g.height()},this.originalPosition={left:c,top:d},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio="number"==typeof f.aspectRatio?f.aspectRatio:this.originalSize.width/this.originalSize.height||1,f.aspectRatioPoint&&(this._aspectRatio=a.inArray(this.axis,f.aspectRatioPoint.split(/(?:,(?:\s){0,})/))!==-1),e=a(".cui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"===e?this.axis+"-resize":e),g.addClass("cui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var c,d,e=this.originalMousePosition,f=this.axis,g=b.pageX-e.left||0,h=b.pageY-e.top||0,i=this._change[f];return this._updatePrevProperties(),!!i&&(c=i.apply(this,[b,g,h]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(c=this._updateRatio(c,b)),c=this._respectSize(c,b),this._updateCache(c),this._propagate("resize",b),d=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),a.isEmptyObject(d)||(this._updatePrevProperties(),this._trigger("resize",b,this.ui()),this._applyChanges()),this.newStyle&&(this.originalElement.outerWidth(this.size.width),this.originalElement.outerHeight(this.size.height),this.element.css({top:this.originalElement.offset().top,left:this.originalElement.offset().left})),!1)},_mouseStop:function(b){var c,d,e,f,g,h,i,j=this.options,k=this;return this.resizing=!1,this._helper&&(c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),e=d&&this._hasScroll(c[0],"left")?0:k.sizeDiff.height,f=d?0:k.sizeDiff.width,g={width:k.helper.width()-f,height:k.helper.height()-e},j.animate||(j.keepPosition?this.element.css(g):(h=parseInt(k.element.css("left"),10)+(k.position.left-k.originalPosition.left)||null,i=parseInt(k.element.css("top"),10)+(k.position.top-k.originalPosition.top)||null,this.element.css(a.extend(g,{top:i,left:h})))),k.helper.height(k.size.height),k.helper.width(k.size.width),this._helper&&!j.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this.element.removeClass("cui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var a={},b=this.options;return b.keepPosition||(this.position.top!==this.prevPosition.top&&(a.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(a.left=this.position.left+"px")),this.size.width!==this.prevSize.width&&(a.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(a.height=this.size.height+"px"),this.helper.css(a),a},_updateVirtualBoundaries:function(a){var b,c,d,e,f,g=this.options;f={minWidth:this._isNumber(g.minWidth)?g.minWidth:0,maxWidth:this._isNumber(g.maxWidth)?g.maxWidth:1/0,minHeight:this._isNumber(g.minHeight)?g.minHeight:0,maxHeight:this._isNumber(g.maxHeight)?g.maxHeight:1/0},(this._aspectRatio||a)&&(b=f.minHeight*this.aspectRatio,d=f.minWidth/this.aspectRatio,c=f.maxHeight*this.aspectRatio,e=f.maxWidth/this.aspectRatio,b>f.minWidth&&(f.minWidth=b),d>f.minHeight&&(f.minHeight=d),c<f.maxWidth&&(f.maxWidth=c),e<f.maxHeight&&(f.maxHeight=e)),this._vBoundaries=f},_updateCache:function(a){this.offset=this.helper.offset(),this._isNumber(a.left)&&(this.position.left=a.left),this._isNumber(a.top)&&(this.position.top=a.top),this._isNumber(a.height)&&(this.size.height=a.height),this._isNumber(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,c=this.size,d=this.axis;return this._isNumber(a.width)?a.height=a.width/this.aspectRatio:this._isNumber(a.height)&&(a.width=a.height*this.aspectRatio),"sw"===d&&(a.left=b.left+(c.width-a.width),a.top=null),"nw"===d&&(a.top=b.top+(c.height-a.height),a.left=b.left+(c.width-a.width)),a},_respectSize:function(a){var b=this._vBoundaries,c=this.axis,d=this._isNumber(a.width)&&b.maxWidth&&b.maxWidth<a.width,e=this._isNumber(a.height)&&b.maxHeight&&b.maxHeight<a.height,f=this._isNumber(a.width)&&b.minWidth&&b.minWidth>a.width,g=this._isNumber(a.height)&&b.minHeight&&b.minHeight>a.height,h=this.originalPosition.left+this.originalSize.width,i=this.position.top+this.size.height,j=/sw|nw|w/.test(c),k=/nw|ne|n/.test(c);return f&&(a.width=b.minWidth),g&&(a.height=b.minHeight),d&&(a.width=b.maxWidth),e&&(a.height=b.maxHeight),f&&j&&(a.left=h-b.minWidth),d&&j&&(a.left=h-b.maxWidth),g&&k&&(a.top=i-b.minHeight),e&&k&&(a.top=i-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a},_getPaddingPlusBorderDimensions:function(a){function b(a,b){var c=parseInt(a[0].style[b]||a.css(b));return isNaN(c)?0:c}for(var c=0,d=[],e=[b(a,"borderTopWidth"),b(a,"borderRightWidth"),b(a,"borderBottomWidth"),b(a,"borderLeftWidth")],f=[b(a,"paddingTop"),b(a,"paddingRight"),b(a,"paddingBottom"),b(a,"paddingLeft")];c<4;c++)d[c]=parseInt(e[c],10)||0,d[c]+=parseInt(f[c],10)||0;return{height:d[0]+d[2],width:d[1]+d[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){for(var b,c=0,d=this.helper||this.element;c<this._proportionallyResizeElements.length;c++)b=this._proportionallyResizeElements[c],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(b)),b.css({height:d.height()-this.outerDimensions.height||0,width:d.width()-this.outerDimensions.width||0});a.ui.browser().ie&&"auto"!==d.css("background-size")&&d.css("background-size",d.width()+"px "+d.height()+"px")}},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset(),this._helper?(this.helper=this.helper||a("<div "+(c.controlPoint?"":"style='overflow: hidden;")+"'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=this.originalSize,d=this.originalPosition;return{left:d.left+b,width:c.width-b}},n:function(a,b,c){var d=this.originalSize,e=this.originalPosition;return{top:e.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!==b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition,handles:this._handles}}}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).resizable("instance"),c=b.options,d=function(b){a(b).each(function(){var b=a(this);b.data("ui-resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof c.alsoResize||c.alsoResize.parentNode?d(c.alsoResize):c.alsoResize.length?(c.alsoResize=c.alsoResize[0],d(c.alsoResize)):a.each(c.alsoResize,function(a){d(a)})},resize:function(b,c){var d=a(this).resizable("instance"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("ui-resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);"number"==typeof c&&c>=0&&(f[b]=c||null)}),b.css(f)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?i(e.alsoResize):a.each(e.alsoResize,function(a,b){i(a,b)})},stop:function(){a(this).removeData("resizable-alsoresize")}}),a.ui.resizable}),d("ui/Draggable",["jqueryCafe","ui/Core","ui/Mouse","ui/Widget"],function(a){var b=a.ui.prefix;return a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass(b+"draggable"),this.options.disabled&&this.element.addClass(b+"draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(a,b){this._super(a,b),"handle"===a&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is("."+b+"draggable-dragging")?void(this.destroyOnClear=!0):(this._mouseFinal(),this.element.removeClass(b+"draggable "+b+"draggable-dragging "+b+"draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(c){var d=this.document[0],e=this.options;try{d.activeElement&&"body"!==d.activeElement.nodeName.toLowerCase()&&a(d.activeElement).blur()}catch(a){}return!(this.helper||e.disabled||a(c.target).closest("."+b+"resizable-handle").length>0)&&(this.handle=this._getHandle(c),!!this.handle&&(a(e.iframeFix===!0?"iframe":e.iframeFix).each(function(){a("<div class='"+b+"draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0))},_mouseStart:function(c){var d=this.options;return this.helper=this._createHelper(c),this.helper.addClass(b+"draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,a.extend(this.offset,{click:{left:c.pageX-this.offset.left,top:c.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(c,!1),this.originalPageX=c.pageX,this.originalPageY=c.pageY,d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt),this._setContainment(),this._trigger("start",c)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,c),this._mouseDrag(c,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,c),!0)},_mouseDrag:function(b,c){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b,!0),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b)),this.dropped&&(d=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",b)!==!1&&c._clear()}):this._trigger("stop",b)!==!1&&this._clear(),!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),this.element.focus(),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is("."+b+"draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){return!this.options.handle||!!a(b.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass(b+"draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass(b+"draggable-handle")},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d[0]===this.element[0]||/(fixed|absolute)/.test(d.css("position"))||d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_isRootNode:function(a){return/(html|body)/i.test(a.tagName)||a===this.document[0]},_getParentOffset:function(){var b=this.offsetParent.offset(),c=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==c&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var a=this.element.position(),b=this._isRootNode(this.scrollParent[0]);return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+(b?0:this.scrollParent.scrollTop()),left:a.left-(parseInt(this.helper.css("left"),10)||0)+(b?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options,f=this.document[0],g=a(f),h=a(window);return this.relativeContainer=null,e.containment?"window"===e.containment?void(this.containment=[h.scrollLeft()-this.offset.relative.left-this.offset.parent.left,h.scrollTop()-this.offset.relative.top-this.offset.parent.top,h.scrollLeft()+h.width()-this.helperProportions.width-this.margins.left,h.scrollTop()+(h.height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===e.containment?void(this.containment=[0,0,g.width()-this.helperProportions.width-this.margins.left,(g.height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):e.containment.constructor===Array?void(this.containment=e.containment):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),c=a(e.containment),d=c[0],void(d&&(b="hidden"!==c.css("overflow"),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=c))):void(this.containment=null);
},_convertPositionTo:function(a,b){b||(b=this.position);var c="absolute"===a?1:-1,d=this._isRootNode(this.scrollParent[0]);return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"===this.cssPosition?-this.offset.scroll.top:d?0:this.offset.scroll.top)*c,left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"===this.cssPosition?-this.offset.scroll.left:d?0:this.offset.scroll.left)*c}},_generatePosition:function(a,b){var c,d,e,f,g=this.options,h=this._isRootNode(this.scrollParent[0]),i=a.pageX,j=a.pageY;return h&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),b&&(this.containment&&(this.relativeContainer?(d=this.relativeContainer.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,a.pageX-this.offset.click.left<c[0]&&(i=c[0]+this.offset.click.left),a.pageY-this.offset.click.top<c[1]&&(j=c[1]+this.offset.click.top),a.pageX-this.offset.click.left>c[2]&&(i=c[2]+this.offset.click.left),a.pageY-this.offset.click.top>c[3]&&(j=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,j=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,i=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f),"y"===g.axis&&(i=this.originalPageX),"x"===g.axis&&(j=this.originalPageY)),{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:h?0:this.offset.scroll.top),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:h?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass(b+"draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d,this],!0),"drag"===b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.draggable}),d("ui/Button",["jqueryCafe","ui/Core","ui/Widget"],function(a){var b,c,d,e,f,g;return b=a.ui.prefix,d=a.ui.addPrefixToClasses(["button","widget","state-default","corner-all"]),e=a.ui.addPrefixToClasses(["button-icons-only","button-icon-onlyc","button-text-icons","button-text-icon-primary","button-text-icon-secondary","button-text-only"]).join(" "),f=b+"state-active",g=b+"icon",a.widget("ui.button",{options:{togglable:!1,click:null,pressed:!1,iconOnly:!1,disabled:!1,label:null,tooltip:!0,icons:{primary:null,secondary:null}},_create:function(){var c=this.options,e=c.label||"&#160;",f=c.icons,g=c.tooltip,h=this._makeButtonClasses(d.slice(0)),i=['<span class="'+b+'button-text">'+e+"</span>"];this.htmlData={tag:"button",attr:{type:"button",role:"button"}},(f.primary||f.secondary)&&(f.primary&&i.unshift("<span class='"+this._makeIconClasses("primary")+"'></span>"),f.secondary&&i.push("<span class='"+this._makeIconClasses("secondary")+"'></span>")),g&&(this._title=a.trim("string"==typeof g?g:e),this.htmlData.attr.title=this._title),c.pressed&&(h.push(b+"toggle-on"),this.htmlData.attr["aria-pressed"]="true"),c.disabled&&(h.push(b+"state-disabled"),this.htmlData.attr.disabled="true"),this.htmlData.attr.class=h,this.htmlData.contents=i},_init:function(){var b=this.options,d=b.togglable,e=d?"":f;"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this.buttonElement=this.element,null===b.label&&(b.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.on("mouseenter"+this.eventNamespace,function(){b.disabled||this===c&&a(this).addClass(f)}).on("mouseleave"+this.eventNamespace,function(){b.disabled||a(this).removeClass(e)}).on("click"+this.eventNamespace,function(c){b.disabled&&(c.preventDefault(),c.stopImmediatePropagation()),b.click&&a.isFunction(b.click)&&b.click(c)}),this._manageToggle()},_destroy:function(){this.buttonElement.off()},widget:function(){return this.buttonElement},_manageToggle:function(){var b=this,d=this.options,e=d.togglable,g=this.eventNamespace;e?this.buttonElement.on("click.togglable"+g,function(){return!d.disabled&&void b._press(!d.pressed)}):this.buttonElement.on("mousedown"+g,function(){return!d.disabled&&(a(this).addClass(f),c=this,void b.document.one("mouseup"+g,function(){c=null}))}).on("mouseup"+g,function(){return!d.disabled&&void a(this).removeClass(f)}).on("keydown"+g,function(b){return!d.disabled&&void(b.keyCode!==a.ui.keyCode.SPACE&&b.keyCode!==a.ui.keyCode.ENTER||a(this).addClass(f))}).on("keyup"+g+" blur"+g,function(){a(this).removeClass(f)})},_setOption:function(a,c){var d;if(this._super(a,c),"disabled"===a)return d=this.buttonElement,this.widget().toggleClass(b+"state-disabled",!!c),this.element.prop("disabled",!!c),void(c?(this.option.togglable?d.removeClass(b+"state-focus"):d.removeClass(b+"state-focus "+f),this._trigger("disabled"),d.attr("title")&&d.removeAttr("title")):(this._title&&d.attr("title",this._title),this._trigger("enabled")));if("togglable"===a)this._manageToggle();else if("pressed"===a)return void this._press();this._resetButton()},refresh:function(){var a=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass(b+"button-disabled");a!==this.options.disabled&&this._setOption("disabled",a)},_makeButtonClasses:function(a){var c=this.options.icons,d=c.primary&&c.secondary;return c.primary||c.secondary?a.push(this.options.iconOnly?d?b+"button-icons-only":b+"button-icon-only":b+"button-text-icon"+(d?"s":c.primary?"-primary":"-secondary")):a.push(b+"button-text-only"),a},_makeIconClasses:function(a){var c=this.options.icons;return b+"button-icon-"+a+" "+g+" "+g+"-"+c[a]},_resetButton:function(){var c=this.buttonElement.removeClass(e),d=a("<span></span>",this.document[0]).addClass(b+"button-text").html(this.options.label).appendTo(c.empty()).text(),f=this.options.icons,g=this.options.tooltip;f.primary||f.secondary?(f.primary&&c.prepend("<span class='"+this._makeIconClasses("primary")+"'></span>"),f.secondary&&c.append("<span class='"+this._makeIconClasses("secondary")+"'></span>")):c.addClass(b+"button-text-only"),g&&c.attr("title",a.trim("string"==typeof g?g:d)),this._press()},_press:function(a){"undefined"==typeof a&&(a=this.options.pressed),this.buttonElement[a?"addClass":"removeClass"](b+"toggle-on").attr("aria-pressed",a),this.options.pressed=a}}),a.ui.button}),d("ui/ButtonSet",["jqueryCafe","ui/Core","ui/Widget","ui/Button"],function(a){return a.widget("ui.buttonset",{options:{contents:[]},_create:function(){function b(c){var d,e;for(d=0,e=c.length;d<e;d++)f=c[d],"button"===f.tag?h.push(f):a.isArray(f.contents)&&b(f.contents)}function c(b){return a.grep(b,function(a){return"cui-corner-all"!==a&&"cui-corner-left"!==a&&"cui-corner-right"!==a})}var d,e,f,g,h=[];if(g=this.options.contents,b(g),this.htmlData={tag:"span",attr:{class:["cui-buttonset"]}},e=h.length,1===e)return void(this.htmlData.contents=g);for(d=0;d<e;d++)f=h[d],"button"===f.tag&&(f.attr.class=c(f.attr.class),0===d?f.attr.class.push("cui-corner-left"):d===e-1&&f.attr.class.push("cui-corner-right"));this.htmlData.contents=g}}),a.ui.buttonset}),d("ui/Container",["jqueryCafe","ui/Core","ui/Widget"],function(a){var b=a.ui.prefix;return a.widget("ui.container",{_create:function(){this.htmlData={tag:"div",attr:{class:[b+"container"]}},this.htmlData.contents=[]}}),a.ui.container}),d("ui/Columns",["jqueryCafe","ui/Core","ui/Widget"],function(a){return a.widget("ui.columns",{options:{itemCount:1},_create:function(){this.htmlData={tag:"div",attr:{class:["cui-columns","cui-columns-"+this.options.itemCount]},contents:[]}}}),a.ui.columns}),d("ui/Panel",["jqueryCafe","ui/Core","ui/Widget"],function(a){var b=a.ui.prefix;return a.widget("ui.panel",{options:{tag:"iframe",src:null,title:null,height:"200px"},_create:function(){var a=this.options,c=a.height,d=a.title||"",e=a.tag;this.htmlData={tag:e,attr:{class:[b+"panel"],"data-cui-title":d,style:"width: 100%;height: "+parseInt(c,10)+"px;display:block;"}},"iframe"===e?(this.htmlData.attr.allowTransparency="true",this.htmlData.attr.src=this.options.src||"about:blank"):"textarea"===e&&(this.htmlData.attr.spellcheck="false")},_init:function(){var a=this;"iframe"===this.options.tag&&this.element.on("load",function(){a._trigger("load")})}}),a.ui.panel}),d("ui/Tabs",["jqueryCafe","ui/Core","ui/Widget","ui/Panel"],function(a){var c=window.location;return a.widget("ui.tabs",{options:{panelData:[],position:"bottom",hasTooltip:!1,hideTabList:!1,active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var a=/#.*$/;return function(b){var d,e;b=b.cloneNode(!1),d=b.href.replace(a,""),e=c.href.replace(a,"");try{d=decodeURIComponent(d)}catch(a){}try{e=decodeURIComponent(e)}catch(a){}return b.hash.length>1&&d===e}}(),_create:function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=this.options,s=r.panelData,t=r.position,u=r.navHeight,v=r.active,w=r.hasTooltip,x=[];if(s&&s.length){for("bottom"!==t&&"top"!==t&&(t="bottom"),null===v&&(r.active=v=0),this.running=!1,j={tag:"div",attr:{class:["cui-tabs","cui-widget"],role:"tablist"},contents:[]},r.collapsible&&j.attr.class.push("cui-tabs-collapsible"),u&&(m="line-height:"+u+"px;  height:"+u+"px; padding: 0px;"),k={tag:"ul",attr:{class:["cui-tabs-nav","cui-helper-reset","cui-helper-clearfix","cui-bar","cui-border-"+("bottom"===t?"top":"bottom"),"cui-position-"+t],style:r.hideTabList?"display: none;":""},contents:[]},b=0,c=s.length;b<c;b++)d=a({}).uniqueId()[0].id,e=a({}).uniqueId()[0].id,f=s[b].name||"",g=s[b].label||"",h=s[b].icon,i=s[b].contents||[],q="",o=h?[{tag:"img",attr:{class:["cui-tab-image"],src:h,style:" height:"+(u-3)+"px;"}}]:g||f||"TAB",n={class:["cui-state-default","cui-corner-"+t],"data-cui-name":f,tabindex:"-1","aria-controls":e,"aria-labelledby":d,"aria-selected":b===v,"aria-expanded":b===v},w&&(n.title=f),l={tag:"li",attr:n,contents:[{tag:"a",attr:{"data-cui-name":f,href:"#"+e,class:["cui-tabs-anchor"],role:"presentation",tabindex:"-1",id:d,style:m},contents:o}]},b===v?l.attr.class.push("cui-tabs-active","cui-state-active"):l.attr.class.push("cui-priority-secondary"),q+=b===v?"":"display: none;",s[b].maxHeight&&(q+=" max-Height: "+s[b].maxHeight+"px;",q+=" overflow-y: auto;"),s[b].minHeight&&(q+=" min-height: "+s[b].minHeight+"px;"),p={tag:"div",attr:{id:e,"aria-labelledby":d,class:["cui-tabs-panel","cui-corner-"+("bottom"===t?"top":"bottom")],"data-cui-name":f,role:"tabpanel","aria-hidden":b===v,style:q},contents:i},k.contents.push(l),x.push(p);"bottom"===t?j.contents=x.concat([k]):j.contents=[k].concat(x),this.htmlData=j}},_init:function(){var a=this.options;this.running=!1,this._processTabsInit(),this.active=this._findActive(a.active),this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.active.length&&this.load(a.active)},_processTabsInit:function(){var b=this,c=".cui-state-disabled",d=".cui-tabs-anchor";this.tablist=this._getList().delegate("> li","mousedown"+this.eventNamespace,function(b){a(this).is(c)&&b.preventDefault()}).delegate(d,"focus"+this.eventNamespace,function(){a(this).closest("li").is(c)&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])"),this.anchors=this.tabs.map(function(){return a("a",this)[0]}),this.panels=a(),this.anchors.each(function(c,d){var e,f,g,h=a(d).closest("li"),i=h.attr("aria-controls");b._isLocal(d)?(e=d.hash,f=b.element.find(b._sanitizeSelector(e))):(g=h.attr("aria-controls")||a({}).uniqueId()[0].id,e="#"+g,f=b.element.find(e),f.length||(f=b._createPanel(g),f.insertAfter(b.panels[c-1]||b.tablist)),f.attr("aria-live","polite")),f.length&&(b.panels=b.panels.add(f)),i&&h.data(".cui-tabs-aria-controls",i)})},_tabKeydown:function(b){var c=a(this.document[0].activeElement).closest("li"),d=this.tabs.index(c),e=!0;if(!this._handlePageNav(b)){switch(b.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:d++;break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:e=!1,d--;break;case a.ui.keyCode.END:d=this.anchors.length-1;break;case a.ui.keyCode.HOME:d=0;break;case a.ui.keyCode.SPACE:return b.preventDefault(),clearTimeout(this.activating),void this._activate(d);case a.ui.keyCode.ENTER:return b.preventDefault(),clearTimeout(this.activating),void this._activate(d!==this.options.active&&d);default:return}b.preventDefault(),clearTimeout(this.activating),d=this._focusNextTab(d,e),b.ctrlKey||(c.attr("aria-selected","false"),this.tabs.eq(d).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",d)},this.delay))}},_panelKeydown:function(b){this._handlePageNav(b)||b.ctrlKey&&b.keyCode===a.ui.keyCode.UP&&(b.preventDefault(),this.active.focus())},_handlePageNav:function(b){return b.altKey&&b.keyCode===a.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):b.altKey&&b.keyCode===a.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(b,c){function d(){return b>e&&(b=0),b<0&&(b=e),b}for(var e=this.tabs.length-1;a.inArray(d(),this.options.disabled)!==-1;)b=c?b+1:b-1;return b},_focusNextTab:function(a,b){return a=this._findNextTab(a,b),this.tabs.eq(a).focus(),a},_setOption:function(a,b){return"active"===a?void this._activate(b):"disabled"===a?void this._setupDisabled(b):(this._super(a,b),"collapsible"===a&&(this.element.toggleClass("cui-tabs-collapsible",b),b||this.options.active!==!1||this._activate(0)),"event"===a&&this._setupEvents(b),void("heightStyle"===a&&this._setupHeightStyle(b)))},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var b=this.options,c=this.tablist.children(":has(a[href])");b.disabled=a.map(c.filter(".cui-state-disabled"),function(a){return c.index(a)}),this._processTabs(),b.active!==!1&&this.anchors.length?this.active.length&&!a.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=a()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):b.active=this.tabs.index(this.active):(b.active=!1,this.active=a()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("cui-tabs-active cui-state-active").removeClass("cui-priority-secondary").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var b=this;this.tablist=this._getList().addClass("cui-tabs-nav cui-elper-reset cui-helper-clearfix cui-widget-header cui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(b){a(this).is(".cui-state-disabled")&&b.preventDefault()}).delegate(".cui-tabs-anchor","focus"+this.eventNamespace,function(){a(this).closest("li").is(".cui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("cui-state-default cui-corner-"+this.options.position).attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return a("a",this)[0]}).addClass("cui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=a(),this.anchors.each(function(c,d){var e,f,g,h=a(d).uniqueId().attr("id"),i=a(d).closest("li"),j=i.attr("aria-controls");b._isLocal(d)?(e=d.hash,g=e.substring(1),f=b.element.find(b._sanitizeSelector(e))):(g=i.attr("aria-controls")||a({}).uniqueId()[0].id,e="#"+g,f=b.element.find(e),f.length||(f=b._createPanel(g),f.insertAfter(b.panels[c-1]||b.tablist)),f.attr("aria-live","polite")),f.length&&(b.panels=b.panels.add(f)),j&&i.data("cui-tabs-aria-controls",j),i.attr({"aria-controls":g,"aria-labelledby":h}),f.attr("aria-labelledby",h)}),this.panels.addClass("cui-tabs-panel cui-widget-content cui-corner-"+("top"===this.options.position?"bottom":"top")).attr("role","tabpanel")},_getList:function(){return this.tablist||this.element.find("ol.cui-tabs-nav, ul.cui-tabs-nav").eq(0)},_createPanel:function(b){return a("<div>").attr("id",b).addClass("cui-tabs-panel cui-widget-content cui-corner-bottom").data("cui-tabs-destroy",!0)},_setupDisabled:function(b){a.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1);for(var c,d=0;c=this.tabs[d];d++)b===!0||a.inArray(d,b)!==-1?a(c).addClass("cui-state-disabled").attr("aria-disabled","true"):a(c).removeClass("cui-state-disabled").removeAttr("aria-disabled");this.options.disabled=b},_setupEvents:function(b){var c={};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(a){a.preventDefault()}}),this._on(this.anchors,c),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(b){var c,d=this.element.parent();"fill"===b?(c=d.height(),c-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var b=a(this),d=b.css("position");"absolute"!==d&&"fixed"!==d&&(c-=b.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){c-=a(this).outerHeight(!0)}),this.panels.each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===b&&(c=0,this.panels.each(function(){c=Math.max(c,a(this).height("").height())}).height(c))},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),f=e.closest("li"),g=f[0]===d[0],h=g&&c.collapsible,i=h?a():this._getPanelForTab(f),j=d.length?this._getPanelForTab(d):a(),k={oldPanelName:j.attr("data-cui-name"),oldTab:d,oldPanel:j,newPanelName:i.attr("data-cui-name"),newTab:h?a():f,newPanel:i};b.preventDefault(),f.hasClass("cui-state-disabled")||f.hasClass("cui-tabs-loading")||this.running||g&&!c.collapsible||this._trigger("beforeActivate",b,k)===!1||(c.active=!h&&this.tabs.index(f),this.active=g?a():f,this.xhr&&this.xhr.abort(),j.length||i.length||a.error("Cafe UI Tabs: Mismatching fragment identifier."),i.length&&this.load(this.tabs.index(f),b),this._toggle(b,k))},_toggle:function(b,c){function d(){f.running=!1,f._trigger("activate",b,c)}function e(){c.newTab.closest("li").removeClass("cui-priority-secondary").addClass("cui-tabs-active cui-state-active"),g.length&&f.options.show?f._show(g,f.options.show,d):(g.show(),d())}var f=this,g=c.newPanel,h=c.oldPanel;this.running=!0,h.length&&this.options.hide?this._hide(h,this.options.hide,function(){c.oldTab.closest("li").removeClass("cui-tabs-active cui-state-active").addClass("cui-priority-secondary"),e()}):(c.oldTab.closest("li").removeClass("cui-tabs-active cui-state-active").addClass("cui-priority-secondary"),h.hide(),e()),h.attr("aria-hidden","true"),c.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),g.length&&h.length?c.oldTab.attr("tabIndex",-1):g.length&&this.tabs.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1),g.attr("aria-hidden","false"),c.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(b){var c,d=this._findActive(b);d[0]!==this.active[0]&&(d.length||(d=this.active),c=d.find(".cui-tabs-anchor")[0],this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop}))},_findActive:function(b){return b===!1?a():this.tabs.eq(b)},_getIndex:function(a){return"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},_destroy:function(){this.tablist.off(this.eventNamespace),this.running=null,this.active=null,this.tablist=null,this.tabs=null,this.anchors=null,this.panels=null},enable:function(c){var d=this.options.disabled;d!==!1&&(c===b?d=!1:(c=this._getIndex(c),d=a.isArray(d)?a.map(d,function(a){return a!==c?a:null}):a.map(this.tabs,function(a,b){return b!==c?b:null})),this._setupDisabled(d))},disable:function(c){var d=this.options.disabled;if(d!==!0){if(c===b)d=!0;else{if(c=this._getIndex(c),a.inArray(c,d)!==-1)return;d=a.isArray(d)?a.merge([c],d).sort():[c]}this._setupDisabled(d)}},load:function(b,c){b=this._getIndex(b);var d=this,e=this.tabs.eq(b),f=e.find(".cui-tabs-anchor"),g=this._getPanelForTab(e),h={tab:e,panel:g};this._isLocal(f[0])||(this.xhr=a.ajax(this._ajaxSettings(f,c,h)),this.xhr&&"canceled"!==this.xhr.statusText&&(e.addClass("cui-tabs-loading"),g.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){g.html(a),d._trigger("load",c,h)},1)}).complete(function(a,b){setTimeout(function(){"abort"===b&&d.panels.stop(!1,!0),e.removeClass("cui-tabs-loading"),g.removeAttr("aria-busy"),a===d.xhr&&delete d.xhr},1)})))},_ajaxSettings:function(b,c,d){var e=this;return{url:b.attr("href"),beforeSend:function(b,f){return e._trigger("beforeLoad",c,a.extend({jqXHR:b,ajaxSettings:f},d))}}},_getPanelForTab:function(b){var c=a(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+c))}}),a.ui.tabs}),d("ui/Menu",["jqueryCafe","ui/Core","ui/Widget","ui/Position"],function(a){return a.widget("ui.menu",{delay:300,options:{menuItems:[],displayed:!1,floated:!0,icons:{submenu:"arrow-right"},position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null,classes:null},_clickHandler:{},_itemSelector:"> *",_menuSelector:"ul",_hasIcon:!1,_create:function(){var a,b,c=this,d=this.options,e=d.role;a=d.menuItems,b={tag:"ul",attr:{class:["cui-menu","cui-widget","cui-widget-content"],role:e,tabIndex:0}},d.floated&&b.attr.class.push("cui-float","cui-front"),d.displayed||(b.attr.style="display: none;"),d.disabled&&(b.attr.class.push("cui-state-disabled"),b.attr["aria-disabled"]="true"),b.contents=c._createMenuItem(a),c._hasIcon&&b.attr.class.push("cui-menu-icons"),b.contents.length&&(b.attr["aria-activedescendant"]=b.contents[0].attr.id),this.htmlData=b},_init:function(){var b=this,c={};this.activeMenu=this.element,this.mouseHandled=!1,c["mousedown .cui-menu-item"]=function(a){a.preventDefault()},c["click .cui-menu-item"]=function(b){var c=a(b.target);!this.mouseHandled&&c.not(".cui-state-disabled").length&&(this.select(b),b.isPropagationStopped()||(this.mouseHandled=!0),c.has(".cui-menu").length?this.expand(b):!this.element.is(":focus")&&a(this.document[0].activeElement).closest(".cui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".cui-menu").length&&clearTimeout(this.timer)),this._clickHandler[b.currentTarget.id]&&this._clickHandler[b.currentTarget.id](b))},c["mouseenter .cui-menu-item"]=function(b){var c=a(b.currentTarget);c.siblings(".cui-state-active").removeClass("cui-state-active"),this.focus(b,c)},c["mouseleave .cui-menu"]="collapseAll",c.mouseleave="collapseAll",c.focus=function(a,c){var d=b.active||b.element.find(b._itemSelector).eq(0);c||b.focus(a,d)},c.blur=function(c){b._delay(function(){a.contains(this.element[0],this.document[0].activeElement)||b.collapseAll(c)})},c.keydown="_keydown",this._on(c),this.element.find("span.cui-menu-item").data("cui-menu-submenu-carat",!0),this.document.on("click."+this.getID(),function(a){b._closeOnDocumentClick(a)&&b.collapseAll(a),b.mouseHandled=!1})},_destroy:function(){var b,c=this;c._close(),clearTimeout(c.timer),c.element.find(".cui-menu-item").children().each(function(){var b=a(this);b.data("cui-menu-submenu-carat")&&b.removeData("cui-menu-submenu-carat")}),c.document.off("."+c.getID());for(b in c._clickHandler)delete c._clickHandler[b];c._clickHandler=null,c._itemSelector=null,c._menuSelector=null,c._hasIcon=null},_keydown:function(b){function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var d,e,f,g,h,i=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".cui-state-disabled, .cui-state-unselectable")&&this.expand(b);break;case a.ui.keyCode.ENTER:this.active&&!this.active.is(".cui-state-disabled, .cui-state-unselectable")&&this.active.click();break;case a.ui.keyCode.SPACE:this._activate(b);break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:i=!1,e=this.previousFilter||"",f=String.fromCharCode(b.keyCode),g=!1,clearTimeout(this.filterTimer),f===e?g=!0:f=e+f,h=new RegExp("^"+c(f),"i"),d=this.activeMenu.find(this._itemSelector).filter(function(){return h.test(a(this).text())}),d=g&&d.index(this.active.next())!==-1?this.active.nextAll(".cui-menu-item"):d,d.length||(f=String.fromCharCode(b.keyCode),h=new RegExp("^"+c(f),"i"),d=this.activeMenu.find(this._itemSelector).filter(function(){return h.test(a(this).text())})),d.length?(this.focus(b,d),d.length>1?(this.previousFilter=f,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}i&&b.preventDefault()},_activate:function(a){this.active.is(".cui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(a):this.select(a))},refresh:function(){var b,c,d=this,e=this.options.icons.submenu,f=this.element.find(this._menuSelector);this.element.toggleClass("cui-menu-icons",!!this.element.find(".cui-icon").length),f.filter(":not(.cui-menu)").addClass("cui-menu cui-widget cui-widget-content cui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var b=a(this),c=b.parent(),d=a("<span>").addClass("cui-menu-icon cui-icon "+e).data("cui-menu-submenu-carat",!0);c.attr("aria-haspopup","true").prepend(d),b.attr("aria-labelledby",c.attr("id"))}),b=f.add(this.element),c=b.find(this._itemSelector),c.not(".cui-menu-item").each(function(){var b=a(this);d._isDivider(b)&&b.addClass("cui-widget-content cui-menu-divider")}),c.not(".cui-menu-item, .cui-menu-divider").addClass("cui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),c.filter(".cui-state-disabled").attr("aria-disabled","true"),this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_createMenuItem:function(b){var c,d,e,f,g=this,h=this.options,i=[],j=null,k="cui-icon-"+h.icons.submenu,l=h.role;for(c=0,d=b.length;c<d;c++)e=b[c],e&&(f={tag:"li",attr:{},contents:[]},a.isEmptyObject(e)?(f.attr.class=["cui-widget-content","cui-menu-divider"],j=f):(j&&(i.push(j),j=null),f.attr={class:["cui-menu-item"],id:a({}).uniqueId()[0].id,tabindex:"-1",role:"menuitem"},e.name&&(f.attr["data-cui-name"]=e.name),e.alias&&(f.attr["data-cui-alias"]=e.alias),e.unselectable&&f.attr.class.push("cui-state-unselectable"),e.classes&&f.attr.class.push(e.classes),e.disabled&&(f.attr.class.push("cui-state-disabled"),f.attr["aria-disabled"]="true"),e.icon&&(f.contents.push({tag:"span",attr:{class:["cui-icon","cui-icon-"+e.icon]}}),f.attr.class.push("cui-has-icon"),g._hasIcon=!0),e.pressed&&(f.attr.class.push("cui-pressed"),e.icon||f.contents.unshift({tag:"span",attr:{class:["cui-toggle","cui-icon","cui-icon-check"]}})),f.contents.push(e.text||""),e.shortcut&&f.contents.push({tag:"span",attr:{class:["cui-menu-shortcut"]},contents:[e.shortcut]}),e.menuItems&&(f.attr["aria-haspopup"]="true",f.contents.unshift({tag:"span",attr:{class:["cui-menu-icon","cui-icon",k]}}),f.contents.push({tag:"ul",attr:{class:["cui-menu","cui-widget","cui-widget-content","cui-front"],role:l,"aria-hidden":"true","aria-expanded":"false",style:"display: none;"},contents:g._createMenuItem(e.menuItems)})),e.click&&(g._clickHandler[f.attr.id]=e.click),i.push(f)));return i},_setOption:function(b,c){var d,e,f,g;if("icons"===b&&this.element.find(".cui-menu-icon").removeClass(this.options.icons.submenu).addClass(c.submenu),"disabled"===b&&this.element.toggleClass("cui-state-disabled",!!c).attr("aria-disabled",c),"menuItems"===b){if(!Array.isArray(c))return;for(g="",f=this._createMenuItem(c),d=0,e=f.length;d<e;d++)g+=a.ui.makeHTML(f[d]);this.element.empty().append(g)}this._super(b,c)},focus:function(a,b){var c,d;return this.blur(a,a&&"focus"===a.type),this._scrollIntoView(b),this.active=b.first(),b.hasClass("cui-state-disabled")||b.hasClass("cui-state-unselectable")?(this.active.parent().closest(".cui-menu-item").removeClass("cui-state-focus"),!1):(d=this.active.addClass("cui-state-focus").removeClass("cui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",d.attr("id")),this.active.parent().closest(".cui-menu-item").addClass("cui-state-active"),a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),c=b.children(".cui-menu"),c.length&&a&&/^mouse/.test(a.type)&&this._startOpening(c),this.activeMenu=b.parent(),void this._trigger("focus",a,{item:b}))},_scrollIntoView:function(b){var c,d,e,f,g,h;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0,d=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,e=b.offset().top-this.activeMenu.offset().top-c-d,f=this.activeMenu.scrollTop(),g=this.activeMenu.height(),h=b.outerHeight(),e<0?this.activeMenu.scrollTop(f+e):e+h>g&&this.activeMenu.scrollTop(f+e-g+h))},blur:function(a,b){b||clearTimeout(this.timer),this.active&&(this.active.removeClass("cui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer),"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".cui-menu").not(b.parents(".cui-menu")).hide().attr("aria-hidden","true"),b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c),this._resizeMenu(b)},_resizeMenu:function(b){var c,d,e,f,g;if(b=b||this.element,c=b.width("").outerWidth(),d=a(".cui-menu-shortcut",b),e=0,f=d.length){for(g=0;g<f;g++)e=Math.max(e,d.eq(g).width());c+=e}b.outerWidth(c)},collapseAll:function(b,c){clearTimeout(this.timer),this.timer=this._delay(function(){var d=c?this.element:a(b&&b.target).closest(this.element.find(".cui-menu"));d.length||(d=this.element),this._close(d),this.blur(b),this.activeMenu=d},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element),a.find(".cui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".cui-state-active").not(".cui-state-focus").removeClass("cui-state-active")},close:function(a){this._close(a)},_closeOnDocumentClick:function(b){return!a(b.target).closest(".cui-menu").length},_isDivider:function(a){return!/[^\-\u2014\u2013\s]/.test(a.text())},collapse:function(a){var b=this.active&&this.active.parent().closest(".cui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".cui-menu ").find(this._itemSelector).first();
b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".cui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".cui-menu-item").length},_move:function(a,b,c){var d;this.active&&(d="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".cui-menu-item").eq(-1):this.active[a+"All"](".cui-menu-item").eq(0)),d&&d.length&&this.active||(d=this.activeMenu.find(this._itemSelector)[b]()),this.focus(c,d)},nextPage:function(b){var c,d,e;return this.active?void(this.isLastItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.nextAll(".cui-menu-item").each(function(){return c=a(this),c.offset().top-d-e<0}),this.focus(b,c)):this.focus(b,this.activeMenu.find(this._itemSelector)[this.active?"last":"first"]()))):void this.next(b)},previousPage:function(b){var c,d,e;return this.active?void(this.isFirstItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.prevAll(".cui-menu-item").each(function(){return c=a(this),c.offset().top-d+e>0}),this.focus(b,c)):this.focus(b,this.activeMenu.find(this._itemSelector).first()))):void this.next(b)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".cui-menu-item");var c={item:this.active};this.active.has(".cui-menu").length||this.collapseAll(b,!0),this._trigger("select",b,c)}}),a.ui.menu}),d("ui/SelectMenu",["jqueryCafe","ui/Core","ui/Widget","ui/Position","ui/Menu"],function(a){return a.widget("ui.selectmenu",{options:{label:"",menuItems:[],fixedLabel:!1,iconOnly:!1,belongTo:null,disabled:null,icons:{primary:null,button:"arrow-down"},position:{my:"left top",at:"left bottom",collision:"flip none"},width:null,maxHeight:null,tooltip:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){this.ids={button:this.getID()},this._drawButton(),this._drawMenu()},_init:function(){this.selectedIndex=-1,this.selectedValue=this.options.label,this._initButton(),this._initMenu(),this.options.disabled&&this.disable()},_drawButton:function(){var b=this.options,c=b.tooltip,d=b.label||"&#160;",e={tag:"button",attr:{type:"button",tabindex:b.disabled?-1:0,class:["cui-selectmenu-button","cui-widget","cui-state-default","cui-corner-all"],role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-haspopup":"true"},contents:[{tag:"span",attr:{class:["cui-icon","cui-icon-"+b.icons.button]},contents:[]},{tag:"span",attr:{class:"cui-selectmenu-text"},contents:[d]}]};b.icons.primary&&e.contents.unshift({tag:"span",attr:{class:["cui-button-icon-primary","cui-icon","cui-icon-"+b.icons.primary]},contents:[]}),c&&(e.attr.title=this._title="string"===a.type(c)?c:d),b.iconOnly&&e.attr.class.push("cui-button-icon-only"),this.htmlData=e},_initButton:function(){this.button=this.element,this.buttonItem=a("span.cui-selectmenu-text",this.button),this._on(this.button,this._buttonEvents),this._hoverable(this.button),this._focusable(this.button)},_drawMenu:function(b){var c,d,e,f,g,h,i=this;for(this.menuInstance=a.ui.menu({menuItems:this.options.menuItems,displayed:!0,floated:!1,role:"listbox",select:function(a,b){a.preventDefault(),i.options.fixedLabel||i._select(b.item.data("cui-selectmenu-item"),a)}}),this.ids.menu=this.menuInstance.getID(),e=this.menuInstance.getHTMLData(),e.attr["aria-hidden"]="true",e.attr["aria-labelledby"]=this.ids.button,g=e.contents,d=g.length,c=0;c<d;c++)g[c].attr.class.push("cui-selectmenu-menuitem");return b?void this.menuWrap.append(a.ui.makeHTML(e)):(this.htmlData.attr["aria-owns"]=this.ids.menu,f={tag:"div",attr:{class:["cui-selectmenu-menu","cui-front"]},contents:[]},this.options.maxHeight&&(h="max-height: "+parseInt(this.options.maxHeight,10),e.attr.style=(e.attr.style||"")+h+"px;",f.attr.style="max-height: "+(h+2)+"px; overflow: hidden;"),f.contents.push(e),void(this.htmlData.after=f))},_initMenu:function(){var b,c,d,e,f,g=this;for(this.menuInstance.init(),this.menu=a("#"+this.ids.menu),this.menuWrap=this.menu.parent(),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1},this.menuInstance._on(this.menu,{click:function(b){var c=a(b.target);c.attr("aria-haspopup")||c.hasClass("cui-togglable")||g.close()},mouseleave:function(){g.options.fixedLabel&&(g.menu.find(".cui-state-focus").removeClass("cui-state-focus"),g.menuInstance.close())}}),this.refresh(),d=this.menuItems,b=0,c=d.length;b<c;b++)e=a(d[b]),f=g.options.menuItems[b],e.data("cui-selectmenu-item",{index:b,item:f,label:f&&f.label?f.label:e.text(),disabled:e.prop("disabled")})},refresh:function(){this._refreshMenu(),this._resizeButton()},_refreshMenu:function(){var a;this.menuInstance.refresh(),this.menuItems=this.menu.find("li"),a=this._getSelectedItem(),a&&this.menuInstance.focus(null,a)},open:function(a){var b,c=this;this.options.disabled||(this.menu.find(".cui-state-focus").removeClass("cui-state-focus"),b=this._getSelectedItem(),b&&this.menuInstance.focus(null,b),this.isOpen=!0,this._toggleAttr(),this._position(),this._resizeMenu(function(){c._position(),c._documentEventHander(!0),c._trigger("open",a)}))},_position:function(){this.menuWrap.position(a.extend({of:this.element,within:a(this.options.belongTo||this.document)},this.options.position))},close:function(a){this.isOpen&&(this.menuInstance.close(this.menuInstance.element),this.isOpen=!1,this._toggleAttr(),this._documentEventHander(!1),this._trigger("close",a))},widget:function(){return this.button},menuWidget:function(){return this.menu},index:function(a){return a===b?this.selectedIndex:(a<0?(this.selectedIndex=-1,this.selectedValue=this.menuItems.eq(0).data("cui-selectmenu-item").label):(this._select(this.menuItems.eq(a).data("cui-selectmenu-item")),this.selectedValue=this.menuItems.eq(a).data("cui-selectmenu-item").label),this)},_renderButtonItem:function(a){this.buttonItem.html(a.label||"&#160;")},_move:function(a,b){var c,d,e=".cui-menu-item";this.isOpen?c=this.menuItems.eq(this.focusIndex):(c=this.menuItems.eq(this.selectedIndex),e+=":not(.cui-state-disabled)"),d="first"===a||"last"===a?c["first"===a?"prevAll":"nextAll"](e).eq(-1):c[a+"All"](e).eq(0),d.length&&this.menuInstance.focus(b,d)},_getSelectedItem:function(){return this.selectedIndex===-1?null:this.menuItems.eq(this.selectedIndex)},_toggle:function(a){this[this.isOpen?"close":"open"](a)},_documentEventHander:function(b){function c(){j.isOpen&&j.close()}function d(b){a(b.target).ownerDocument!==j.document[0]&&c()}function e(b){a(b.target).closest(".cui-selectmenu-menu, #"+j.ids.button).length||c()}var f,g,h,i,j=this,k="."+j.getID(),l=["mousedown","keydown"].join(k+" "),m=["wheel","dommousescroll"].join(k+" "),n=j.document.find("iframe.cui-panel");for(h=this.window[0],i=a(this.document),b?(i.on(l,"*",e),this.options.autoCloseViaScroll&&i.on(m,e),h.addEventListener("resize",c)):(i.off(l,"*",e),this.options.autoCloseViaScroll&&i.off(m,e),h.removeEventListener("resize",c)),f=0,g=n.length;f<g;f++){try{h=n[f].contentWindow}catch(a){continue}i=a(h.document),b?(i.on(l,"*",d),this.options.autoCloseViaScroll&&i.on(m,d),h.addEventListener("blur",c)):(i.off(l,"*",d),this.options.autoCloseViaScroll&&i.off(m,d),h.removeEventListener("blur",c))}},_buttonEvents:{mousedown:function(a){a.preventDefault()},click:"_toggle",keydown:function(b){var c=!0;switch(b.keyCode){case a.ui.keyCode.TAB:case a.ui.keyCode.ESCAPE:this.close(b),c=!1;break;case a.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(b);break;case a.ui.keyCode.UP:b.altKey?this._toggle(b):this._move("prev",b);break;case a.ui.keyCode.DOWN:b.altKey?this._toggle(b):this._move("next",b);break;case a.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(b):this._toggle(b);break;case a.ui.keyCode.LEFT:this._move("prev",b);break;case a.ui.keyCode.RIGHT:this._move("next",b);break;case a.ui.keyCode.HOME:case a.ui.keyCode.PAGE_UP:this._move("first",b);break;case a.ui.keyCode.END:case a.ui.keyCode.PAGE_DOWN:this._move("last",b);break;default:this.menu.trigger(b),c=!1}c&&b.preventDefault()}},_selectFocusedItem:function(a){var b=this.menuItems.eq(this.focusIndex);b.hasClass("cui-state-disabled")||this._select(b.data("cui-selectmenu-item"),a)},_select:function(b,c){var d={item:b.item,index:b.index,label:b.label},e=this.selectedIndex;return this._trigger("select",c||a.Event("select"),d),b.index===e?this:(this.selectedIndex=b.index,this.selectedValue=b.label,this._renderButtonItem(b),this.options.label=b.label,this._setAria(b),this._trigger("change",c||a.Event("change"),d),void this.close(c))},_setAria:function(a){var b=this.menuItems.eq(a.index).attr("id");this.button.attr({"aria-labelledby":b,"aria-activedescendant":b}),this.menu.attr("aria-activedescendant",b)},_findIndexByLabel:function(a){var b,c=this.options.menuItems,d=c.length;for(b=0;b<d;b++)if(c[b].label===a)return b;return-1},_setOption:function(b,c){var d,e=this.button;"icons"===b&&e.find("span.cui-icon").removeClass(this.options.icons.button).addClass(c.button),this._super(b,c),"disabled"===b&&(this.menuInstance.option("disabled",c),e.toggleClass("cui-state-disabled",!!c).attr("aria-disabled",c),c?(e.attr("tabindex",-1),e.attr("title")&&e.removeAttr("title"),this.close()):(e.attr("tabindex",0),this._title&&e.attr("title",this._title))),"width"===b&&this._resizeButton(),"menuItems"===b&&(this.menuInstance&&this.menuInstance.destroy(),this._drawMenu(!0),this.button.attr("aria-owns",this.ids.menu),this._initMenu()),"label"===b&&(d=this._findIndexByLabel(c),d===-1?(this._renderButtonItem({label:c}),this.selectedIndex=-1):this.index(d)),"tooltip"===b&&(this._title="string"===a.type(c)?c:this.options.label,e.attr("title",this._title))},_toggleAttr:function(){this.button.toggleClass("cui-corner-top",this.isOpen).toggleClass("cui-corner-all",!this.isOpen).toggleClass("cui-state-active",this.isOpen).attr("aria-expanded",this.isOpen)[this.isOpen?"removeAttr":"attr"]("title",this._title).removeData("cui-tooltip-title"),this.menuWrap.toggleClass("cui-selectmenu-open",this.isOpen)},_resizeButton:function(){this.button.outerWidth(this.options.width)},_resizeMenu:function(b){var c,d=this,e=this.menuWrap,f=this.menu,g=this.options.maxHeight,h=a("> .cui-selectmenu-menuitem",this.menu),i=a("> .cui-menu-shortcut",h),j=f.hasClass("cui-limited-height"),k=f[0].style.width,l=0,m=i.length;if(!k){if(k=f.outerWidth(),m){for(c=0;c<m;c++)l=Math.max(l,i.eq(c).width());k+=l}g&&f.outerHeight()>g?(k+=a.ui.getScrollbarWidth(),j||f.addClass("cui-limited-height"),e.css("max-height","")):j&&f.removeClass("cui-limited-height"),f.width(Math.max(d.button.width(),k))}b&&"function"==typeof b&&b()},_destroy:function(){var b,c,d,e,f=this;if(f.close(),f.menuItems){for(d=f.menuItems,c=d.length,b=0;b<c;b++)e=a(d[b]),e.removeData("cui-selectmenu-item");f.menuItems=null}f.menuInstance&&f.menuInstance.destroy(),f.menuWrap=null,f.menu=null,f.menuInstance=null}}),a.ui.selectmenu}),d("ui/Tooltip",["jqueryCafe","ui/Core","ui/Widget"],function(a){return a.widget("ui.tooltip",{options:{content:function(){var b=a(this).attr("title")||"";return a("<a>").text(b).html()},hide:!1,items:"[title]:not([disabled])",position:{my:"left top+3",at:"left bottom",collision:"flipfit flip"},show:!1,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(b,c){var d=(b.attr("aria-describedby")||"").split(/\s+/);d.push(c),b.data("cui-tooltip-id",c).attr("aria-describedby",a.trim(d.join(" ")))},_removeDescribedBy:function(b){var c=b.data("cui-tooltip-id"),d=(b.attr("aria-describedby")||"").split(/\s+/),e=a.inArray(c,d);e!==-1&&d.splice(e,1),b.removeData("cui-tooltip-id"),d=a.trim(d.join(" ")),d?b.attr("aria-describedby",d):b.removeAttr("aria-describedby")},_create:function(){var b=this.options;this._on({mouseover:"open"}),a.ui.getIEVersion()&&this._on({scroll:"close",wheel:"close"}),this.tooltips={},this.parents={},b.disabled&&this._disable(),this.liveRegion=a("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("cui-helper-hidden-accessible").appendTo(this.element)},_setOption:function(b,c){var d=this;return"disabled"===b?(this[c?"_disable":"_enable"](),void(this.options[b]=c)):(this._super(b,c),void("content"===b&&a.each(this.tooltips,function(a,b){d._updateContent(b)})))},_disable:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur");e.target=e.currentTarget=d[0],b.close(e,!0)}),this.element.find(this.options.items).addBack().each(function(){var b=a(this);b.is("[title]")&&b.data("cui-tooltip-title",b.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var b=a(this);b.data("cui-tooltip-title")&&b.attr("title",b.data("cui-tooltip-title"))})},open:function(b){var c=this,d=a(b?b.target:this.element).closest(this.options.items);d.length&&!d.data("cui-tooltip-id")&&(d.attr("title")&&d.data("cui-tooltip-title",d.attr("title")),d.data("cui-tooltip-open",!0),b&&"mouseover"===b.type&&d.parents().each(function(){var b,d=a(this);d.data("cui-tooltip-open")&&(b=a.Event("blur"),b.target=b.currentTarget=this,c.close(b,!0)),d.attr("title")&&(d.uniqueId(),c.parents[this.id]={element:this,title:d.attr("title")},d.attr("title",""))}),this._updateContent(d,b))},_updateContent:function(a,b){var c,d=this.options.content,e=this,f=b?b.type:null;return"string"==typeof d?this._open(b,a,d):(c=d.call(a[0],function(c){a.data("cui-tooltip-open")&&e._delay(function(){b&&(b.type=f),this._open(b,a,c)})}),void(c&&this._open(b,a,c)))},_open:function(b,c,d){function e(a,b){if(!a||!b)return null;for(;a&&"BODY"!==a.nodeName;){if(a===b)return a;a=a.parentNode}return null}function f(a){l.of=a,g.is(":hidden")||g.position(l)}var g,h,i,j,k=this,l=a.extend({},this.options.position);if(d){if(g=this._find(c),g.length)return void g.find(".cui-tooltip-content").html(d);g=a(".cui-tooltip",this.element),g.length&&g.each(function(){k._forceClose(a(this).data("target"))}),c.is("[title]")&&(b&&"mouseover"===b.type?c.attr("title",""):c.removeAttr("title")),g=this._tooltip(c),this._addDescribedBy(c,g.attr("id")),g.find(".cui-tooltip-content").html(d),this.liveRegion.children().remove(),d.clone?(j=d.clone(),j.removeAttr("id").find("[id]").removeAttr("id")):j=d,a("<div>").html(j).appendTo(this.liveRegion),this.options.track&&b&&/^mouse/.test(b.type)?(this._on(this.document,{mousemove:f}),f(b)):g.position(a.extend({of:c},this.options.position)),this.hiding=!1,this.closing=!1,g.hide(),this._show(g,this.options.show),this.options.show&&this.options.show.delay&&(i=this.delayedShow=setInterval(function(){g.is(":visible")&&(f(l.of),clearInterval(i))},a.fx.interval)),this._trigger("open",b,{tooltip:g}),h={keyup:function(b){if(b.keyCode===a.ui.keyCode.ESCAPE){var d=a.Event(b);d.currentTarget=c[0],this.close(d,!0)}}},c[0]!==this.element[0]&&(h.remove=function(){this._removeTooltip(g)}),b&&"mouseover"!==b.type||(h.mouseleave="close"),this._on(this.document,{mousemove:function(a){e(a.target,c[0])||k._forceClose(c)}}),this._on(!0,c,h),a.ui.getIEVersion()&&this._on(this.document,{keydown:function(a){e(a.target,c[0])||k._forceClose(c)}})}},close:function(b){var c=this,d=a(b?b.currentTarget:this.element),e=this._find(d);e.length||(d=a(this.tooltips[a(".cui-tooltip",this.element).attr("id")]),e=this._find(d)),this.closing||(clearInterval(this.delayedShow),d.data("cui-tooltip-title")&&!d.attr("title")&&d.attr("title",d.data("cui-tooltip-title")),this._removeDescribedBy(d),this.hiding=!0,e.stop(!0),this._hide(e,this.options.hide,function(){c._removeTooltip(a(this)),this.hiding=!1,this.closing=!1}),d.removeData("cui-tooltip-open"),this._off(d,"mouseleave keyup"),d[0]!==this.element[0]&&this._off(d,"remove"),this._off(this.document,"mousemove"),a.ui.getIEVersion()&&this._off(this.document,"keydown"),b&&"mouseleave"===b.type&&a.each(this.parents,function(b,d){a(d.element).attr("title",d.title),delete c.parents[b]}),this.closing=!0,this._trigger("close",b,{tooltip:e}),this.hiding||(this.closing=!1))},_forceClose:function(b){var c=a.Event("blur");this.closing=!1,this.hiding=!1,c.currentTarget=b,this.close(c,!0)},_tooltip:function(b){var c,d,e=["cui-tooltip"];return c=a("<div>").attr("role","tooltip").addClass(e.join(" ")+" "+(this.options.tooltipClass||"")),d=c.uniqueId().attr("id"),a("<div>").addClass("cui-tooltip-content").appendTo(c),c.appendTo(this.element).data("target",b),this.tooltips[d]=b,c},_find:function(b){var c=b.data("cui-tooltip-id");return c?a("#"+c):a()},_removeTooltip:function(a){a.remove(),delete this.tooltips[a.attr("id")]},_destroy:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur");e.target=e.currentTarget=d[0],b.close(e,!0),a("#"+c).remove(),d.data("cui-tooltip-title")&&(d.attr("title")||d.attr("title",d.data("cui-tooltip-title")),d.removeData("cui-tooltip-title"))}),this.liveRegion.remove()}}),a.ui.tooltip}),d("ui/ContextMenu",["jqueryCafe","ui/Core","ui/Widget","ui/Position","ui/Menu"],function(a){var b=a.ui.prefix,c=50,d="all";return a.widget("ui.contextmenu",{options:{target:document,context:"normal",menuItems:[],autoRegistration:!0,footerItem:[],hasInput:!1},_create:function(){this.menuInstance=null,this.isOpen=!1,this.htmlData={tag:"div",attr:{class:[b+"contextmenu",b+"front"],style:"display:none;"},contents:[this._createMenu(),this._createFooter()]}},_init:function(){var b=this;this.menuInstance.init(),this.footer=a(".cui-contextmenu-footer",this.element),this.element.on("click"+this.eventNamespace,function(c){var d=a(c.target);d.attr("aria-haspopup")||"LI"!==c.target.nodeName&&"SPAN"!==c.target.nodeName||b.close()}),this.options.autoRegistration&&this._registerContextMenu()},_destroy:function(){var b,c,d,e,f,g,h=this,i=h.options;this.resizeTimer&&(clearTimeout(this.resizeTimer),this.resizeTimer=null),i&&i.target&&a(i.target).length&&(b=a(i.target)[0],c="IFRAME"===b.tagName,d=c?b.contentWindow:window,e=a(d.document),f=a.ui.browser(),g=f&&f.ie&&window.ActiveXObject,h._autoHideByEvent(!1),g&&parseInt(f.version,10)<11?b.onreadystatechange=null:a(b).off("load.cui-contextmenu"),e.off("contextmenu.cui-contextmenu")),this.menuInstance.destroy(),this.footer=null},_resize:function(){var b,c=this,d=this.element,e=a(".cui-menu-shortcut",d),f=0,g=e.length;this.resizeTimer&&(clearTimeout(this.resizeTimer),this.resizeTimer=null),this.resizeTimer=setTimeout(function(){d.css({left:"-1000px",top:"-1000px"}).show(0,function(){if(g)for(b=0;b<g;b++)f=Math.max(f,e.eq(b).width());d.width(d.width()+f),c.outerWidth=d.outerWidth()+f,d.hide()})},0)},_registerContextMenu:function(){function b(b){var d=a(b);d.off("contextmenu.cui-contextmenu").on("contextmenu.cui-contextmenu",function(a){i&&parseInt(h.version,10)<10?setTimeout(function(){c.open(a)},200):c.open(a),a.preventDefault?a.preventDefault():a.returnValue=!1}),c._resize()}var c=this,d=a(this.options.target)[0],e="IFRAME"===d.tagName,f=e?d.contentWindow:window,g=f.document,h=a.ui.browser(),i=h&&h.ie&&window.ActiveXObject;"complete"===g.readyState&&b(g),e&&(i&&parseInt(h.version,10)<11?d.onreadystatechange=function(){if(d.contentWindow){var a=d.contentWindow.document;if("complete"!==a.readyState)return;b(a)}}:a(d).off("load.cui-contextmenu").on("load.cui-contextmenu",function(){d.contentWindow&&d.contentWindow.document&&b(d.contentWindow.document)}))},_createMenu:function(){var b,c,e,f,g,h,i,j,k=[],l=this.options.menuItems;for(b=0,g=l.length;b<g;b++)i=l[b],i&&(!j||Object.keys(j).length||Object.keys(i).length)&&(k.push(i),j=i);for(this.menuInstance=a.ui.menu({menuItems:k,displayed:!0,floated:!1,select:function(a){a.preventDefault()}}),c=this.menuInstance.getHTMLData(),c.attr["aria-hidden"]="true",e=c.contents,b=0,g=e.length;b<g;b++)f=e[b],h=k[b],f&&h&&f.attr["data-cui-name"]===h.name&&(f.attr["data-cui-context"]=h.context||d,h.context_disable&&(f.attr["data-cui-context-disable"]=h.context_disable));return this.menuInstance.htmlData=c},_createFooter:function(a){var b;if(a=a||this.options.footerItems,a&&Array.isArray(a)&&a.length)return b={tag:"div",attr:{class:["cui-contextmenu-footer","cui-widget"],tabindex:"-1"},contents:a}},_setOption:function(b,c){this._super(b,c),"menuItems"===b&&this.menuInstance.option(b,c),"footerItem"===b&&this.footer.replaceWith(a.ui.makeHTML(this._createFooter(c)))},_arrangeMenu:function(){function b(b,c,d){var e,f=a.trim(b).split(" "),g=f.length;for(e=0;e<g;e++)if(d){if(c.indexOf(f[e])!==-1)return!0}else if(c===f[e])return!0;return!1}function c(e){var g,h,i,j,k,l,m=a("> li",e),n=m.length,o=!1,p=!1;for(g=0;g<n;g++)h=m.eq(g),h.hasClass("cui-menu-divider")?(l&&l.hide(),l=h):(i=h.attr("data-cui-context"),j=h.attr("data-cui-context-disable"),o=i===d||b(i,f,!0),o&&(l&&(l.show(),l=null),k=a("> .cui-menu",h),k.length&&c(k),j&&(p=b(j,f,!1),p?h.addClass("cui-state-disabled").attr("aria-disabled","true"):h.removeClass("cui-state-disabled").removeAttr("aria-disabled"))),h.toggle(o));l&&l.hide()}var e=this.options,f=e.context;c(this.menuInstance.element)},_autoHideByEvent:function(b){function c(a){j.close(a)}function d(b){j.isOpen&&a(b.target).ownerDocument!==j.document[0]&&(j.options.hasInput&&"blur"===b.type||c(b))}function e(b){j.isOpen&&!a(b.target).closest(".cui-contextmenu").length&&c(b)}var f,g,h,i,j=this,k=j.document.find("iframe.cui-panel"),l="."+j.getID(),m=["mousedown","keydown"].join(l+" ");for(h=a(j.document),i=j.window[0],b?(h.on(m,"*",e),i.addEventListener("wheel",e),i.addEventListener("dommousescroll",e)):(h.off(m,"*",e),i.removeEventListener("wheel",e),i.removeEventListener("dommousescroll",e)),f=0,g=k.length;f<g;f++){try{i=k[f].contentWindow}catch(a){continue}h=a(i.document),b?(h.on(m,"*",d),i.addEventListener("wheel",d),i.addEventListener("dommousescroll",d),i.addEventListener("blur",d)):(h.off(m,"*",d),i.removeEventListener("wheel",d),i.removeEventListener("dommousescroll",d),i.removeEventListener("blur",d))}},_calculatePosition:function(b,d,e){var f,g,h,i,j,k,l,m=b.ownerDocument!==this.document[0],n=this.element,o=this.outerWidth||n.outerWidth(),p=n.outerHeight();return m?(h=a(this.options.target),f=a(h[0].contentWindow)):(h=a(b),f=this.window),g=h.offset(),k=g.left,l=g.top,i=f.scrollLeft(),j=f.scrollTop(),o<c&&(n.css("width",""),o=n.outerWidth(),this.outerWidth=o),d+o>f.width()+i&&(d-=o),e+p>f.height()+j&&(e-=p),m&&(d+=k-i,e+=l-j),d<k&&(d=k),e<l&&(e=l),{left:d,top:e}},open:function(b){var c,d=this,e=d.options,f=d.element,g=a(e.target)[0];if(!e.disabled)return d.isOpen&&d.close(),b=b||{target:g,pageX:0,pageY:0},c={originEvent:b,widget:d,menu:d.menuInstance,element:d.element,target:g},d._trigger("beforeopen",b,c),d._arrangeMenu(),f.finish().show().offset(d._calculatePosition(b.target,b.pageX,b.pageY)),d._autoHideByEvent(!0),d.isOpen=!0,d._trigger("open",b,c),this},close:function(){var b=this,c=a.Event(),d={widget:b,menu:b.menuInstance,element:b.element,target:a(b.options.target)[0]};return b._trigger("beforeclose",c,d),b._autoHideByEvent(!1),b.menuInstance.close(this.menuInstance.element),this.element.hide(),b.isOpen=!1,b._trigger("close",c,d),this}}),a.ui.contextmenu}),d("ui/SplitButton",["jqueryCafe","ui/Core","ui/Widget","ui/Position","ui/Button","ui/Menu","ui/Tooltip"],function(a){var b=a.ui.prefix;return a.widget("ui.splitbutton",{options:{menuItems:[],click:null,icon:null,belongTo:null,position:{my:"left top",at:"left bottom",collision:"flip none"},maintooltip:!1,maintitle:null,menutooltip:!1,menutitle:null},_create:function(){this.htmlData={tag:"div",attr:{class:[b+"splitbutton",b+"widget"]},contents:[]},this._createMainButton(),this._createMenuButton(),this._createMenu()},_init:function(){this._initMainButton(),this._initMenuButton(),this._initMenu()},_createMainButton:function(){var a=this.options,c={tag:"button",attr:{type:"button",role:"button",class:[b+"button",b+"widget",b+"button-icon-only",b+"state-default",b+"splitbutton-main",b+"corner-left"]},contents:[{tag:"span",attr:{class:[b+"button-icon-primary",b+"icon",b+"icon-"+this.options.icon]},contents:[]},{tag:"span",attr:{class:[b+"button-text"]},contents:["&#160;"]}]};a.maintooltip&&a.maintitle&&(c.attr.title=a.maintitle),this.htmlData.contents.push(c)},_createMenuButton:function(){var a=this.options,c={tag:"button",attr:{type:"button",role:"button",class:[b+"button",b+"widget",b+"button-icon-only",b+"state-default",b+"splitbutton-menu",b+"corner-right"]},contents:[{tag:"span",attr:{class:[b+"button-icon-primary",b+"icon",b+"icon-arrow-down"]},contents:[]},{tag:"span",attr:{class:[b+"button-text"]},contents:["&#160;"]}]};a.menutooltip&&a.menutitle&&(c.attr.title=a.menutitle),this.htmlData.contents.push(c)},_createMenu:function(){var b,c,d,e;c=this.options.menuItems,b=c.length,b>0&&(d={menuItems:c,displayed:!1,role:"listbox",select:function(a){a.preventDefault()}},this.menu=a.ui.menu(d),e=this.menu.getHTMLData(),e.attr["aria-hidden"]="true",this.isMenuOpened=!1,this.htmlData.contents.push(e))},_initMainButton:function(){function c(){d._onMouseLeaveButtons(),d.mainbutton.removeClass(b+"splitbutton-hover")}var d=this;this.mainbutton=this.element.find("."+b+"splitbutton-main"),this._on(this.mainbutton,{click:function(b){d.options.click.apply(this.element,[b]),d.isMenuOpened&&a(d.menu.element).show()},mouseover:function(){d._onMouseOverButtons(),d.mainbutton.addClass(b+"splitbutton-hover")},mouseleave:c}),a.ui.getIEVersion()&&(this._on(this.mainbutton,{wheel:c,scroll:c}),this._on(this.document,{keydown:c}),this._press())},_initMenuButton:function(){function c(){d._onMouseLeaveButtons(),d.menubutton.removeClass(b+"splitbutton-hover")}var d=this;this.menubutton=this.element.find("."+b+"splitbutton-menu"),this._on(this.menubutton,{mousedown:function(a){a.preventDefault()},click:this._onClickMenuButton,mouseover:function(){d._onMouseOverButtons(),d.menubutton.addClass(b+"splitbutton-hover")},mouseleave:c}),a.ui.getIEVersion()&&(this._on(this.menubutton,{wheel:c,scroll:c}),this._on(this.document,{keydown:c}))},_initMenu:function(){var a=this;this.menu&&(this.menu.init(),this.menu._off(this.menu.element,"mouseleave"),this.menu._closeOnDocumentClick=function(){return!1},this.menu._isDivider=function(){return!1},this.menu._on(this.menu.element,{click:function(){a.closeMenu()}}))},_destroy:function(){this.isMenuOpened&&this.closeMenu(),this._off(this.mainbutton),this._off(this.document),this.menu._off(this.menu.element),this.menu.destroy()},_setOption:function(a,b){function c(a,b,c){b?(a.trigger("buttondisabled").addClass(d),c&&a.removeAttr("title")):(c&&a.attr("title",c),a.removeClass(d).trigger("buttonenabled"))}var d="cui-button-disabled cui-state-disabled",e=this.options;this._super(a,b),this._press(),"disabled"===a&&(c(this.mainbutton,b,e.maintooltip&&e.maintitle?e.maintitle:null),c(this.menubutton,b,e.menutooltip&&e.menutitle?e.menutitle:null))},_press:function(a){"undefined"==typeof a&&(a=this.options.pressed),this.mainbutton[a?"addClass":"removeClass"](b+"toggle-on").attr("aria-pressed",a),this.options.pressed=a},_position:function(){this.menu.element.position(a.extend({of:this.element,within:a(this.options.belongTo||this.document)},this.options.position))},openMenu:function(){function b(){f.isMenuOpened&&f.closeMenu()}var c,d,e,f=this,g=f.eventNamespace,h=f.document.find("iframe.cui-panel");if(this.menu)for(f.menu.element.show(),f._position(),f.isMenuOpened=!0,f.selectedMenuButton(),f._on(f.document,{mousedown:f._onClickDocument,mousewheel:b,dommousescroll:b}),this.window[0].addEventListener("resize",b),c=0,d=h.length;c<d;c++){try{e=h[c].contentWindow}catch(a){continue}a(e.document).on("mousedown."+g,"*",b).on("mousewheel."+g+" dommousescroll"+g,b),e.addEventListener("blur",b)}},closeMenu:function(){function b(){f.isMenuOpened&&f.closeMenu()}var c,d,e,f=this,g=f.eventNamespace,h=f.document.find("iframe.cui-panel");if(f.menu)for(a(f.menu.element).hide(),f.isMenuOpened=!1,f.unselectedMenuButton(),f._off(f.document),this.window[0].removeEventListener("resize",b),c=0,d=h.length;c<d;c++){try{e=h[c].contentWindow}catch(a){continue}a(e.document).off(g),e.removeEventListener("blur",b)}},selectedMainButton:function(){this.mainbutton&&this.mainbutton.addClass(b+"toggle-on")},unselectedMainButton:function(){this.mainbutton&&this.mainbutton.removeClass(b+"toggle-on")},selectedMenuButton:function(){this.menubutton&&this.menubutton.addClass(b+"toggle-on")},unselectedMenuButton:function(){this.menubutton&&this.menubutton.removeClass(b+"toggle-on")},_onMouseOverButtons:function(){this.mainbutton&&this.menubutton&&(this.mainbutton.addClass(b+"state-hover"),this.menubutton.addClass(b+"state-hover"))},_onMouseLeaveButtons:function(){this.mainbutton&&this.menubutton&&(this.mainbutton.removeClass(b+"state-hover"),this.menubutton.removeClass(b+"state-hover"))},_onClickDocument:function(b){this.isMenuOpened&&(a(b.target).closest("#"+this.getID()).length||this.closeMenu())},_onClickMenuButton:function(){this.menu&&(this.isMenuOpened?this.closeMenu():this.openMenu())}}),a.ui.splitbutton}),d("ui/Label",["jqueryCafe","ui/Core","ui/Widget"],function(a){return a.widget("ui.label",{options:{label:""},_create:function(){var a=this.options,b=a.label||"&nbsp",c=[b];this.htmlData={tag:"label",contents:c,attr:{class:["cui-label"],"aria-disabled":"false"}}},_setOption:function(a,b){this._super(a,b),"label"===a&&b&&"string"==typeof b&&this.widget().html(b)}}),a.ui.label}),d("ui/TextBox",["jqueryCafe","ui/Core","ui/Widget"],function(a){return a.widget("ui.textbox",{options:{multiline:!1,disabled:!1,rows:8,cols:3,width:null,type:"text",min:null,max:null,force:null,maxlength:null,text:"",placeholder:""},_create:function(){var a=this.options,b=a.width,c=a.multiline?"textarea":"input";this.htmlData={tag:c,attr:{id:this.getID(),role:"textbox",style:"resize:none;",placeholder:"",class:["cui-textbox","cui-state-default"]}},a.maxlength&&(this.htmlData.attr.maxlength=a.maxlength),a.multiline&&a.rows&&(this.htmlData.attr.rows=a.rows),a.multiline&&a.cols&&(this.htmlData.attr.cols=a.cols),!a.multiline&&b&&(/^[0-9]+$/.test(b)&&(b+="px"),this.htmlData.attr.style+="width:"+b+";"),!a.multiline&&a.type&&(this.htmlData.attr.type="password"===a.type?a.type:"text"),a.placeholder&&(this.htmlData.attr.placeholder=a.placeholder)},_init:function(){var a=this,b=this.options,c=this.element,d=this.eventNamespace;c.on("change"+d,function(b){a._validateMinMax(),a._trigger("change",b,{value:a.element.val()})}).on("mouseup"+d,function(){a._validateMinMax()}).on("keydown"+d,function(a){var c,d=b.type;if(/number|integer/i.test(d)){if(a=a||window.event,c=a.which||a.keyCode,c>=48&&c<=57||c>=96&&c<=105||8===c||9===c||46===c||37===c||39===c)return;if("number"===d&&(190===c||110===c))return;return!1}}).on("keyup"+d,function(c){var d,e,f,g=b.type;if(/number|integer/i.test(g)){if(c=c||window.event,c&&(e=c.which||c.keyCode),8===e||9===e||46===e||37===e||39===e)return;c&&c.target&&c.target.value&&(d=new RegExp("number"===g?"\\d*(\\.?\\d*)":"\\d*","g"),f=c.target.value.match(d),c.target.value=f?f[0]:"")}a._validateMinMax(!0),a._trigger("change",c,{value:a.element.val()})}).on("focus"+d+" blur"+d,function(){a._validateMinMax(!0)}),b.disabled&&c.attr("disabled",!0),b.text&&c.val("number"===b.type?parseFloat(b.text)||"":b.text).change(),b.placeholder&&c.attr("placeholder",b.placeholder)},_destroy:function(){this.element.off(this.eventNamespace)},_setOption:function(a,b){"text"===a&&(b="number"===this.options.type?parseFloat(b)||"":b,this.element.val(b).change()),this._super(a,b)},_validateMinMax:function(a){var b,c=this.options,d=c.max,e=c.min,f=c.force,g=this.element.val();/number|integer/i.test(c.type)&&(b="number"===c.type?parseFloat(g):parseInt(g,10),(g||f)&&(e&&g<e&&(!/^0/i.test(g)&&a||(b=e)),d&&g>d&&(b=d),g!==b.toString()&&this.element.val(b)))},value:function(a){return"undefined"==typeof a?this.element.val():void this._setOption("text",a)},disable:function(){this.element.attr("disabled","true"),
this._super()},enable:function(){this.element.removeAttr("disabled"),this._super()}}),a.ui.textbox}),d("ui/Checkbox",["jqueryCafe","ui/Core","ui/Widget"],function(a){var b,c,d,e;return b=a.ui.prefix,c=b+"icon",d=c+"-check",e=c+"-blank",a.widget("ui.checkbox",{options:{click:null,checked:!1,label:"",tooltip:!1},_create:function(){var b,c,d=this.options,e=[];this.htmlData={tag:"div",attr:{id:this.getID(),role:"checkbox",class:this._makeCheckboxClasses()}},b='<button type="button" class="'+this._makeButtonClasses()+'">',b+='<span class="'+this._makeIconClasses()+'">',b+="</span></button>",e.push(b),d.label=d.label?a.trim(d.label):"",c='<label class="'+this._makeLabelClasses()+'">'+d.label+"</label>",e.push(c),"boolean"==typeof d.tooltip?d.tooltip&&d.label&&(this.htmlData.attr.title=d.label):d.tooltip&&(this.htmlData.attr.title=a.trim(d.tooltip)),this.htmlData.contents=e},_init:function(){var b=this,c=this.options;c.checked&&this.element.attr("checked",!0),this._on(this.element,{click:function(d){var e={},f=this.element;d.preventDefault(),d.stopImmediatePropagation(),c.disabled||(f.attr("checked",!f.attr("checked")),e.checked=b.isChecked(),c.click&&a.isFunction(c.click)&&c.click(d,e),b.refresh())}})},_setOption:function(a,b){this._super(a,b),"checked"===a&&"boolean"==typeof b&&this.element.attr("checked",b),"undefined"!=typeof b&&this.refresh()},_makeCheckboxClasses:function(){return b+"widget "+b+"checkbox"},_makeButtonClasses:function(){return b+"state-default "+b+"corner-all "+b+"checkbox-button"},_makeIconClasses:function(){return c+" "+(this.options.checked?d:e)},_makeLabelClasses:function(){return b+"checkbox-text "+b+"state-unselectabled"},isChecked:function(){return!!this.element.attr("checked")},refresh:function(){var f,g,h=this.isChecked(),i=this.options;f=this.element.find("."+c),g=this.element.find("."+b+"checkbox-text"),h?(f.removeClass(e),f.addClass(d)):(f.removeClass(d),f.addClass(e)),i.label=i.label?a.trim(i.label):"",g.text(i.label),i.tooltip&&"boolean"!=typeof i.tooltip?this.element.attr("title",a.trim(i.tooltip)):i.tooltip&&i.label?this.element.attr("title",a.trim(i.label)):this.element.removeAttr("title")}}),a.ui.checkbox}),d("ui/Radio",["jqueryCafe","ui/Core","ui/Widget","ui/Checkbox"],function(a){return a.widget("ui.radio",a.ui.checkbox,{options:{group:"default",groupRange:null},_makeRangeElement:function(){this.options.groupRange?(this.rangeElement=a(this.options.groupRange),this.rangeElement.length||(this.rangeElement=this.element.parent())):this.rangeElement=this.element.parent()},_addToGroup:function(){var a=this.rangeElement.data("groups")||{};a[this.options.group]||(a[this.options.group]=[]),a[this.options.group].push(this.element),this.rangeElement.data("groups",a)},_init:function(){var b=this,c=this.options;this._makeRangeElement(),this._addToGroup(this.element),c.checked&&(this.element.attr("checked",!0),this._uncheckOtherMembers(this.element)),this.element.on("click",function(d){var e,f={},g=b.element;d.preventDefault(),d.stopImmediatePropagation(),c.disabled||(e=!!g.attr("checked"),e||(g.attr("checked",!0),b._uncheckOtherMembers(g),f.checked=b.isChecked()),c.click&&a.isFunction(c.click)&&c.click(d,f),b.refresh())})},_setOption:function(a,b){this._super(a,b),"checked"===a&&"boolean"==typeof b&&this._uncheckOtherMembers(this.element)},_makeButtonClasses:function(){return"cui-radio-button"},_makeLabelClasses:function(){return"cui-radio-text"},_makeIconClasses:function(){return"cui-icon "+(this.options.checked?"cui-icon-bullet":"cui-icon-radio-off")},_getGroup:function(){var a=this.rangeElement.data("groups");if(a&&a[this.options.group])return a[this.options.group]},_uncheckOtherMembers:function(a){var b,c=this._getGroup();if(c&&c.length)for(b=0;b<c.length;b++)c[b]!==a&&c[b].attr("checked",!1)},refresh:function(){var b,c,d,e,f=this.options,g=this.element.find(".cui-radio-text");if(f.label=f.label?a.trim(f.label):"",g.text(f.label),f.tooltip&&"boolean"!=typeof f.tooltip?this.element.attr("title",a.trim(f.tooltip)):f.tooltip&&f.label?this.element.attr("title",a.trim(f.label)):this.element.removeAttr("title"),d=this._getGroup(),d&&d.length)for(b=0;b<d.length;b++)e=!!d[b].attr("checked"),c=d[b].find(".cui-icon"),e?(c.removeClass("cui-icon-radio-off"),c.addClass("cui-icon-radio-on")):(c.removeClass("cui-icon-radio-on"),c.addClass("cui-icon-radio-off"))}}),a.ui.checkbox}),d("ui/FileInput",["jqueryCafe","ui/Core","ui/Widget"],function(a){return a.widget("ui.fileinput",{options:{width:b,placeholder:"",tooltip:!0,title:"Choose a file",editable:!1},_create:function(){var c,d,e,f,g=this.options,h=function(){return a('<input type="file">').get(0).files!==b}();e='placeholder="'+g.placeholder+'" ',h?(c=g.tooltip?'title="'+g.title+'"':"",d='<button type="button" class="cui-fileinput-button cui-state-default" '+c+'><span class="cui-icon cui-icon-browse" /></button>'):d="",g.accept&&g.accept.length>0&&(f=g.accept.toString()),this.htmlData={tag:"div",attr:{role:"fileinput",class:"cui-fileinput-group cui-state-default"+(g.editable?"":" cui-fileinput-noneditable")},contents:["<div class='cui-fileinput-path-wrap"+(h?" cui-has-button":"")+'\'><input class="cui-fileinput-path cui-state-default" '+e+(g.editable?"":'disabled="disabled"')+" /></div>"+d+'<input type="file" class="cui-fileinput-hidden" accept='+f+" />"]},g.width&&(this.htmlData.attr.style="width:"+g.width+";")},_init:function(){var b=this.element,c=this.hiddenElement=a(".cui-fileinput-hidden",b),d=this.pathElement=a(".cui-fileinput-path",b);this.wrapElement=a(".cui-fileinput-path-wrap",b),this.buttonElement=a(".cui-fileinput-button",b),d.on("change",function(c,d,e){b.trigger("change",[a(this).val(),d,e]),c.preventDefault(),c.stopPropagation()}),c.on("change",function(b){var c,e,f=a(this);if(b&&(b.preventDefault(),b.stopPropagation()),b&&b.target&&b.target.files){if(c=b.target.files[0],!c)return;e=new window.FileReader,e.onload=function(a){var b=a.target.result,c=b.substring(5,b.indexOf(";")),e=b.substring(b.indexOf(",")+1,b.length);d.trigger("change",[c,e])},d.val(f.val()),c.type.match("image.*")?e.readAsDataURL(c):d.trigger("change",[c.type])}else d.val(f.val()).change()})},_destroy:function(){this.buttonElement.off(".fileinput"),this.wrapElement.off(".fileinput"),this.pathElement.off("change"),this.hiddenElement.off("change"),this.buttonElement=null,this.wrapElement=null,this.pathElement=null,this.hiddenElement=null},_bindEvents:function(a){function b(){c.element.hasClass("cui-state-disabled")||c.hiddenElement.val("").trigger("click")}var c=this,d=this.buttonElement,e=this.wrapElement;a?(d.on("click.fileinput",b),!this.options.editable&&e.hasClass("cui-has-button")&&e.on("click.fileinput",b)):(d.off(".fileinput"),e.off(".fileinput"))},value:function(a){return a===b?this.pathElement.val():void this.pathElement.val(a).change()},disable:function(){this.buttonElement.addClass("cui-state-disabled").attr("disabled","disabled").removeAttr("title"),this.pathElement.attr("disabled","disabled").addClass("cui-textbox-disabled"),this._bindEvents(!1)},enable:function(){var a=this.options,b=this.pathElement;this.buttonElement.removeAttr("disabled").removeClass("cui-state-disabled"),a.tooltip&&this.buttonElement.attr("title",a.title),b.removeClass("cui-textbox-disabled"),a.editable&&b.removeAttr("disabled"),this._bindEvents(!0)}}),a.ui.fileinput}),d("ui/ColorPicker",["jqueryCafe","utilities/ColorUtils","ui/Core","ui/Widget"],function(a){var c=a.ui.prefix;return a.widget("ui.colorpicker",{options:{color:{r:null,g:null,b:null}},_create:function(){var a=["<div class= '"+c+"color'><div class='"+c+"color-overlay'><div class='"+c+"color-selector cui-icon cui-icon-colorpicker-pointer'></div></div></div>","<div class='"+c+"hue'><div class='"+c+"hue-selector cui-icon cui-icon-arrow-right'></div></div>","<div class='"+c+"colorpicker-rgb-red "+c+"colorpicker-field'><span>Red</span><span style='float:right'><input class='"+c+"corner-all' type='text' maxlength='3' size='3' /></span></div>","<div class='"+c+"colorpicker-rgb-green "+c+"colorpicker-field'><span>Green</span><span style='float:right'><input class='"+c+"corner-all' type='text' maxlength='3' size='3' /></span></div>","<div class='"+c+"colorpicker-rgb-blue "+c+"colorpicker-field'><span>Blue</span><span style='float:right'><input class='"+c+"corner-all' type='text' maxlength='3' size='3' /></span></div>","<div class='"+c+"colorpicker-hex "+c+"colorpicker-field'><span>#</span><span style='float:right'><input class='"+c+"corner-all' type='text' maxlength='6' size='6' /></span></div>","<div class='"+c+"colorpicker-currnetColor-preview'></div>"];this.htmlData={tag:"div",attr:{class:[c+"colorpicker"]}},this.htmlData.contents=a},_init:function(){this.rInput=this.element.find("."+c+"colorpicker-rgb-red input"),this.gInput=this.element.find("."+c+"colorpicker-rgb-green input"),this.bInput=this.element.find("."+c+"colorpicker-rgb-blue input"),this.hInput=this.element.find("."+c+"colorpicker-hex input"),this.preview=this.element.find("."+c+"colorpicker-currnetColor-preview"),this.hueArea=this.element.find("."+c+"hue"),this.hueSel=this.element.find("."+c+"hue-selector"),this.sbArea=this.element.find("."+c+"color"),this.sbSel=this.element.find("."+c+"color-selector"),this.options.color&&"string"==typeof this.options.color&&(this.options.color=this.HEXToRGB(this.options.color)),this.update(this.options.color,"rgb"),this.bindEvent()},_setOption:function(a,b){this._super(a,b)},RGBToHSV:function(b){return a.colorUtils.toHSV(b)},HSVToRGB:function(b){return b?a.colorUtils.toRGB({h:b.h,s:b.s+"%",v:b.v+"%"}):null},RGBToHEX:function(b){return a.colorUtils.toHEX(b)},HEXToRGB:function(b){return a.colorUtils.toRGB(b)},HSVToHEX:function(b){return b?a.colorUtils.toHEX({h:b.h,s:b.s+"%",v:b.v+"%"}):null},HEXToHSV:function(b){return a.colorUtils.toHSV(b)},getValidRGB:function(a){var b=255,c=255,d=255;return a&&"object"==typeof a?(b=isNaN(a.r)?b:Number(a.r),c=isNaN(a.g)?c:Number(a.g),d=isNaN(a.b)?d:Number(a.b),{r:Math.min(255,Math.max(0,b)),g:Math.min(255,Math.max(0,c)),b:Math.min(255,Math.max(0,d))}):{r:b,g:c,b:d}},getValidHEX:function(a){if(!a||!a.match)return"ffffff";var b=a.match(/^[a-f0-9]{6}$/i);return b?b.toString().toLowerCase():"ffffff"},getValidHSV:function(a){var b=0,c=0,d=100;return a&&"object"==typeof a?(b=isNaN(a.h)?b:Number(a.h),c=isNaN(a.s)?c:Number(a.s),d=isNaN(a.v)?d:Number(a.v),{h:Math.min(360,Math.max(0,b)),s:Math.min(100,Math.max(0,c)),v:Math.min(100,Math.max(0,d))}):{h:b,s:c,v:d}},syncColor:function(a){var b={rgb:null,hsv:null,hex:null};return a.rgb&&"object"==typeof a.rgb?(b.rgb=this.getValidRGB(a.rgb),b.hsv=this.getValidHSV(this.RGBToHSV(b.rgb)),b.hex=this.getValidHEX(this.RGBToHEX(b.rgb))):a.hex&&"string"==typeof a.hex?(b.hex=this.getValidHEX(a.hex),b.rgb=this.getValidRGB(this.HEXToRGB(b.hex)),b.hsv=this.getValidHSV(this.RGBToHSV(b.rgb))):a.hsv&&"object"==typeof a.hsv&&(b.hsv=this.getValidHSV(a.hsv),b.rgb=this.getValidRGB(this.HSVToRGB(b.hsv)),b.hex=this.getValidHEX(this.RGBToHEX(b.rgb))),b},setInputDefaultValue:function(a,b){b.data("defaultValue",a?a:"0")},setRGBFields:function(a,b){var d,e,f,g=this.getValidRGB(a);b?(d=b.find("."+c+"colorpicker-rgb-red input"),e=b.find("."+c+"colorpicker-rgb-green input"),f=b.find("."+c+"colorpicker-rgb-blue input")):(d=this.rInput,e=this.gInput,f=this.bInput),d.val(g.r),e.val(g.g),f.val(g.b),this.setInputDefaultValue(g.r,d),this.setInputDefaultValue(g.g,e),this.setInputDefaultValue(g.b,f)},setHEXFields:function(a,b){var d,e=this.getValidHEX(a);d=b?b.find("."+c+"colorpicker-hex input"):this.hInput,d.val(e),this.setInputDefaultValue(e,d)},setPreview:function(a){var b=this.getValidHEX(a);this.preview.css("background-color","#"+b)},setHueSelector:function(a){var b,c,d,e=this.getValidHSV(a);b=e.h,c=200-200*b/360,d=parseInt(c,10),this.hueSel.css("top",d).attr("data-otop",c)},getHueWithPos:function(a){return parseInt(360*(200-a)/200,10)},getHue:function(){var a=this.hueSel.attr("data-otop");return a=Number(a),this.getHueWithPos(a)},setSaturationAndBrightnessSelector:function(a){var b,c,d,e,f=this.getValidHSV(a);b=200*f.s/100,c=parseInt(b,10),d=200*(100-f.v)/100,e=parseInt(d,10),this.sbSel.css("left",c).attr("data-oleft",b).css("top",e).attr("data-otop",d)},getSaturationWithPos:function(a){return parseInt(100*a/200,10)},getBrightnessWithPos:function(a){return parseInt(100-100*a/200,10)},getSaturationAndBrightness:function(){var a,b,c,d;return a=parseInt(this.sbSel.attr("data-oleft"),10),b=this.getSaturationWithPos(a),c=parseInt(this.sbSel.attr("data-otop"),10),d=this.getBrightnessWithPos(c),{s:b,v:d}},setSaturationAndBrightnessOverlayColor:function(a){var b,c=this.getValidHSV(a);c.s=100,c.v=100,b=this.HSVToHEX(c),this.sbArea.css("background-color","#"+b)},update:function(a,c,d){if(d===b&&(d=!1),"hsv"===c)this.color=this.syncColor({hsv:a});else if("rgb"===c)this.color=this.syncColor({rgb:a});else{if("hex"!==c)return;this.color=this.syncColor({hex:a})}this.setPreview(this.color.hex,this.element),this.setSaturationAndBrightnessOverlayColor(this.color.hsv,this.element),this.setHueSelector(this.color.hsv,this.element),this.setSaturationAndBrightnessSelector(this.color.hsv,this.element),d?(this.setInputDefaultValue(this.color.rgb.r,this.rInput),this.setInputDefaultValue(this.color.rgb.g,this.gInput),this.setInputDefaultValue(this.color.rgb.b,this.bInput),this.setInputDefaultValue(this.color.hex,this.hInput)):(this.setRGBFields(this.color.rgb,this.element),this.setHEXFields(this.color.hex,this.element)),this._trigger("change",{},{color:this.color})},_bNumberKey:function(a){return!(a<48||a>57)},_onKeydown:function(a){var b;return a=a||window.event,b=a.which||a.keyCode,(b>=48&&b<=57||b>=96&&b<=105||8===b||9===b||46===b||37===b||39===b||110===b)&&void 0},_onKeyup:function(b){var c,d,e,f,g=b.data[0],h=b.data[1],i=a(this).val(),j=!!i;if(i=j?i:"0",c=a(this).data().defaultValue,d=null,e=this.selectionStart,f=this.selectionEnd,i!==c){if("hex"!==h){if(/\D/.test(i))return void a(this).val(c?c:"0");switch(h){case"red":d={r:i,g:g.color.rgb.g,b:g.color.rgb.b};break;case"green":d={r:g.color.rgb.r,g:i,b:g.color.rgb.b};break;case"blue":d={r:g.color.rgb.r,g:g.color.rgb.g,b:i}}d=g.getValidRGB(d)}else{if(/[^a-f0-9]/gi.test(i))return void a(this).val(c?c:"000000");6!==i.length&&(i=new Array(7-i.length).join("0")+i,j=!1),d=g.HEXToRGB(i)}g.update(d,"rgb",!j),this.setSelectionRange(e,f)}},_onChange:function(){var b=a(this),c=b.val(),d=b.data().defaultValue;c!==d&&b.val(d)},bindEvent:function(){var b,c,d,e=this,f=e.eventNamespace;this.hueArea.on("click"+f,function(f){var g,h,i,j=f.pageY;g=a(this).offset(),h=Math.round(j-g.top),i=e.color.hsv,h<0&&(h=0),b=e.getHueWithPos(h),c=i.s,d=i.v,e.update({h:b,s:c,v:d},"hsv")}),this.sbArea.on("click"+f,function(f){var g,h,i,j=f.pageX,k=f.pageY;g=a(this).offset(),h=Math.round(j-g.left),h<0&&(h=0),i=Math.round(k-g.top),i<0&&(i=0),c=e.getSaturationWithPos(h),d=e.getBrightnessWithPos(i),b=e.color.hsv.h,e.update({h:b,s:c,v:d},"hsv")}),this.rInput.on("keydown"+f,[this,"red"],this._onKeydown).on("keyup"+f,[this,"red"],this._onKeyup).on("change"+f,this._onChange),this.gInput.on("keydown"+f,[this,"green"],this._onKeydown).on("keyup"+f,[this,"green"],this._onKeyup).on("change"+f,this._onChange),this.bInput.on("keydown"+f,[this,"blue"],this._onKeydown).on("keyup"+f,[this,"blue"],this._onKeyup).on("change"+f,this._onChange),this.hInput.on("keyup"+f,[this,"hex"],this._onKeyup).on("change"+f,this._onChange)},_destroy:function(){var a=this,b=a.eventNamespace;a.hueArea.off(b),a.sbArea.off(b),a.rInput.off(b),a.gInput.off(b),a.bInput.off(b),a.hInput.off(b),a.hueArea=null,a.sbArea=null,a.rInput=null,a.gInput=null,a.bInput=null,a.hInput=null}}),a.ui.colorpicker}),d("ui/ColorTable",["jqueryCafe","ui/Core","ui/Widget","ui/ColorPicker","ui/Button","ui/ButtonSet"],function(a){return a.widget("ui.colortable",{options:{showNoColorButton:!1,noColorLabel:"No Color",click:null},_create:function(){var a,b,c,d,e,f=[],g=[],h="000000 212121 434343 666666 999999 b7b7b7 cccccc d9d9d9 ffffff ff0000 ff9900 ffff00 00ff00 00ffff 4a86e8 0000ff 9900ff ff00ff 660000 783f04 7f6000 274e13 0c343d 1c4587 073763 20124d 4c1130 990000 b45f06 bf9000 38761d 134f5c 1155cc 0b5394 351c75 741b47 cc0000 e69138 f1c232 6aa84f 45818e 3c78d8 3d85c6 674ea7 a64d79 e06666 f6b26b ffd966 93c47d 76a5af 6d9eeb 6fa8dc 8e7cc3 c27ba0 ea9999 f9cb9c ffe599 b6d7a8 a2c4c9 a4c2f4 9fc5e8 b4a7d6 d5a6bd";for(this.htmlData={tag:"div",attr:{class:["cui-colortable","cui-state-unselectabled"]},contents:[]},e=h.split(" "),a=0,c=e.length;a<c;a++)g.push(this._makeCell(e.shift()));for(a=0;a<7;a++){for(d=this._makeRow(),b=0;b<9;b++)d.contents.push(g.shift());f.push(d)}f[0].attr.class.push("cui-colortable-achromatic-row"),f[1].attr.class.push("cui-colortable-chromatic-row"),this.htmlData.contents=f,this.options.showNoColorButton&&(this.htmlData.contents.push(this._makeNoColorButton()),this.htmlData.attr.class.push("cui-colortable-has-opbutton"))},_makeRow:function(){var a={tag:"div",attr:{class:["cui-colortable-row"]},contents:[]};return a},_makeCell:function(a){var b={tag:"div",attr:{class:["cui-colortable-cell"]},contents:[{tag:"div",attr:{class:["cui-colortable-button"],style:"background-color:#"+a+";","data-cui-color":a},contents:[]}]};return b},_makeOptionalButton:function(a){var b={tag:"div",attr:{role:"button",class:["cui-colortable-optional-button"]},contents:[{tag:"span",attr:{class:["cui-colortable-optional-button-icon"]},contents:[]},{tag:"span",attr:{class:["cui-colortable-optional-button-text"]},contents:[a]}]};return b},_makeNoColorButton:function(){var a=this._makeRow(),b=this._makeOptionalButton(this.options.noColorLabel);return a.attr.class.push("cui-colortable-optional-row","cui-colortable-optional-nocolor"),b.contents[0].attr.class.push("cui-icon","cui-icon-no-color"),a.contents.push(b),a},_init:function(){this._initNoColorButton(),this._on(this.element,{click:function(b){a(b.target).hasClass("cui-colortable-button")&&(this._onChangeColor(b,b.target.getAttribute("data-cui-color")),this._applyCallback(b))},mousedown:function(a){a.preventDefault()}})},_destroy:function(){this._off(this.nocolorbutton),this.color=null,this.colorpickerpane=null,this.nocolorbutton=null},_initNoColorButton:function(){this.nocolorbutton=this.element.find(".cui-colortable-optional-nocolor"),this.nocolorbutton&&this._on(this.nocolorbutton,{click:function(a){this._onChangeColor(a,"transparent"),this._applyCallback(a)}})},_applyCallback:function(a){this.options.click&&"function"==typeof this.options.click&&this.options.click.apply(this.element,[a,this.color])},_onChangeColor:function(a,b){this.color=b,this._trigger("change",a,{color:this.color})},open:function(a){this.isColorPickerOpened&&(this.colorpickerpane.hide(),this.isColorPickerOpened=!1),this.element.show().trigger("open",a)},close:function(a){this.element.hide().trigger("close",a)}}),a.ui.colortable}),d("ui/ColorButton",["jqueryCafe","ui/Core","ui/Widget","ui/Position","ui/ColorTable"],function(a){return a.widget("ui.colorbutton",{options:{click:null,icon:null,color:"000000",showNoColorButton:!0,more:null,belongTo:null,beforeColorTableOpen:null,beforeColorTableClose:null,position:{my:"left top",at:"left bottom",collision:"flip none"},noColorLabel:"No Color",moreLabel:"More",tooltip:!1,title:""},_create:function(){var b=["colorbutton","widget"];this.htmlData={tag:"div",attr:{class:a.ui.addPrefixToClasses(b).join(" ")},contents:[]},this.options.tooltip&&this.options.title&&(this.htmlData.attr.title=this.options.title),this._createMainButton(),this._createSubButton(),this._createColorTable()},_init:function(){function b(){c.mainbutton.removeClass("cui-state-hover"),c.subbutton.removeClass("cui-state-hover")}var c=this;c._initMainButton(),c._initSubButton(),c._initColorTable(),c.setColor(null,c.options.color),c._on(c.element,{mouseover:function(){c.mainbutton.addClass("cui-state-hover"),c.subbutton.addClass("cui-state-hover")},mouseleave:b}),a.ui.getIEVersion()&&(c._on(c.element,{wheel:b,scroll:b}),c.document.on("keydown."+c.getID(),b))},_destroy:function(){var a=this;a.colortable&&(a.isColorTableOpened&&a._closeColorTable(),a.colortable.destroy()),a.mainbutton&&a._off(a.mainbutton),a.mainbutton&&a._off(a.subbutton),a.colortablemore&&(a.colortablemore.off(a.eventNamespace),a.colortablemore=null),a.document.off("."+a.getID()),a.colortable=null,a.mainbutton=null,a.subbutton=null,a.colortablepane=null,a.preview=null},_setOption:function(a,b){var c="cui-button-disabled cui-state-disabled",d=this.options;this._super(a,b),"disabled"===a&&(b?(this.mainbutton.addClass(c),this.subbutton.addClass(c),this.element.trigger("buttondisabled"),d.tooltip&&d.title&&this.element.removeAttr("title")):(this.mainbutton.removeClass(c),this.subbutton.removeClass(c),d.tooltip&&d.title&&this.element.attr("title",d.title),this.element.trigger("buttonenabled")))},_createMainButton:function(){var b=["button","widget","button-icon-only","state-default","colorbutton-main","corner-left"],c=["button-icon-primary","icon","icon-"+this.options.icon],d={tag:"button",attr:{type:"button",role:"button",class:a.ui.addPrefixToClasses(b)},contents:[{tag:"span",attr:{class:a.ui.addPrefixToClasses(c)},contents:[]},{tag:"span",attr:{class:["cui-button-text"]},contents:["&#160;"]},{tag:"span",attr:{class:["cui-colorbutton-preview"]},contents:[]}]};this.htmlData.contents.push(d)},_createSubButton:function(){var b=["button","widget","button-icon-only","state-default","colorbutton-sub","corner-right"],c=["button-icon-primary","icon","icon-arrow-down"],d={tag:"button",attr:{type:"button",role:"button",class:a.ui.addPrefixToClasses(b)},contents:[{tag:"span",attr:{class:a.ui.addPrefixToClasses(c)},contents:[]},{tag:"span",attr:{class:["cui-button-text"]},contents:["&#160;"]}]};this.htmlData.contents.push(d)},_createColorTable:function(){var b,c={tag:"div",attr:{class:["cui-colorbutton-colortable","cui-front"]},contents:[]},d=0,e=this,f=e.options;e.colortable=a.ui.colortable({showNoColorButton:f.showNoColorButton,click:function(a,b){e.setColor(a,b),e._closeColorTable(a),e._onClickMainButton(a)},noColorLabel:f.noColorLabel}),c.contents.push(e.colortable.getHTMLData()),f.showNoColorButton&&d++,a.isFunction(f.more)&&(d++,b=e._createMoreButton(),1===d&&b.attr.class.push("cui-colorbutton-colortable-more-button-only"),c.contents.push(b)),1===d?c.attr.class.push("cui-colorbutton-colortable-opbutton-one"):2===d&&c.attr.class.push("cui-colorbutton-colortable-opbutton-two"),e.htmlData.contents.push(c)},_createMoreButton:function(){var a={tag:"div",attr:{role:"button",class:["cui-colorbutton-colortable-more-button","cui-state-unselectabled"]},contents:[{tag:"span",attr:{class:["cui-colorbutton-colortable-more-button-text"]},contents:[this.options.moreLabel+"..."]}]};return a},_initMainButton:function(){this.mainbutton=this.element.find(".cui-colorbutton-main"),this.preview=this.element.find(".cui-colorbutton-preview"),this._on(this.mainbutton,{click:this._onClickMainButton})},_initSubButton:function(){this.subbutton=this.element.find(".cui-colorbutton-sub"),this._on(this.subbutton,{mousedown:function(a){a.preventDefault()},click:this._onClickSubButton})},_initColorTable:function(){var b=this;this.colortablepane=this.element.find(".cui-colorbutton-colortable"),this.colortablepane.hide(),this.isColorTableOpened=!1,this.colortable.init(),a.isFunction(this.options.more)&&(this.colortablemore=this.element.find(".cui-colorbutton-colortable-more-button"),this.colortablemore.on("click"+this.eventNamespace,function(a){b.options.more.apply(b,[a]),b._closeColorTable(a)}))},_selectButton:function(){this.mainbutton.addClass("cui-toggle-on"),this.subbutton.addClass("cui-toggle-on")},_unselectButton:function(){this.mainbutton.removeClass("cui-toggle-on"),this.subbutton.removeClass("cui-toggle-on")},_position:function(){this.colortablepane.position(a.extend({of:this.element,within:a(this.options.belongTo||this.document)},this.options.position))},_openColorTable:function(b){function c(a){h.isColorTableOpened&&h._closeColorTable(a)}var d,e,f,g,h=this,i=h.options,j=h.eventNamespace,k=h.document.find("iframe.cui-panel");for(i.tooltip&&i.title&&this.element.removeAttr("title"),a.isFunction(this.options.beforeColorTableOpen)&&i.beforeColorTableOpen.apply(),h.colortable.open(b),h.colortablepane.show(),h._position(),h.isColorTableOpened=!0,h._selectButton(),h._on(h.document,{mousedown:h._onClickDocument,mousewheel:c,dommousescroll:c}),h._on(h.window,{resize:c}),d=0,e=k.length;d<e;d++){try{f=a(k[d].contentWindow)}catch(a){continue}g=a(f[0].document),g.on("mousedown."+j,"*",c).on("mousewheel."+j+" dommousescroll"+j,c),f.on("blur"+j)}h._trigger("open",b)},_closeColorTable:function(b){var c,d,e,f,g=this,h=g.eventNamespace,i=g.options,j=g.document.find("iframe.cui-panel");for(i.tooltip&&i.title&&this.element.attr("title",i.title),a.isFunction(i.beforeColorTableClose)&&i.beforeColorTableClose.apply(),this.colortablepane.hide(),this.colortable.close(),this.isColorTableOpened=!1,this._unselectButton(),this._off(this.document),this._off(this.window),c=0,d=j.length;c<d;c++){try{e=a(j[c].contentWindow)}catch(a){continue}f=a(e[0].document),f.off(h),e.off(h)}this._trigger("close",b)},_onClickDocument:function(b){this.isColorTableOpened&&(a(b.target).closest("#"+this.getID()).length||this._closeColorTable(b))},_onClickMainButton:function(b){this.isColorTableOpened||a.isFunction(this.options.click)&&this.options.click.apply(this.element,[b,this.color])},_onClickSubButton:function(){this.isColorTableOpened?this._closeColorTable():this._openColorTable()},_isColor:function(a){return!(!a||"string"!=typeof a)&&("transparent"===a||a.match(/^[a-f0-9]{6}$/i))},_setPreviewColor:function(a){this.preview.css("background-color","transparent"===a?a:"#"+a)},getColor:function(){return this.color},setColor:function(a,b){this._isColor(b)&&(this.color=b,this._setPreviewColor(b),this._trigger("change",a,this.color))}}),a.ui.colorbutton}),d("ui/ColorInput",["jqueryCafe","ui/Core","ui/Widget","ui/ColorTable"],function(a){function b(a){return!(!a||"string"!=typeof a)&&("transparent"===a||a.match(/^[a-f0-9]{6}$/i))}function c(a){var b,c,d;return 3!==a.length?a:(b=a.charAt(0),c=a.charAt(1),d=a.charAt(2),b+b+c+c+d+d)}return a.widget("ui.colorinput",{options:{color:"transparent",noColorLabel:"No Color",moreLabel:"More",belongTo:null,more:null},_create:function(){var a,b,c;this.htmlData={tag:"div",attr:{class:["cui-colorinput"]},contents:[]},a=this._makeTextBox(),this.htmlData.contents.push(a),b=this._makeButton(),this.htmlData.contents.push(b),c=this._makeColorTable(),this.htmlData.contents.push(c)},_makeButton:function(){var b=["widget","state-unselectabled","state-default","colorinput-button"],c={tag:"span",attr:{role:"button",class:a.ui.addPrefixToClasses(b).join(" ")},contents:[{tag:"span",attr:{class:["cui-colorinput-preview"]},contents:[]}]};return c},_makeTextBox:function(){var b=["colorinput-textbox","state-unselectabled","widget","state-default"],c={tag:"span",attr:{class:a.ui.addPrefixToClasses(b).join(" ")},contents:["&nbsp#"]};return c.contents.push(this._makeInput()),c},_makeInput:function(){var a={tag:"input",attr:{type:"text",maxlength:6,size:6,class:["cui-colorinput-text"]},contents:[]};return a},_makeColorTable:function(){var b=this,c=this.options,d={tag:"div",attr:{class:["cui-colorinput-colortable","cui-front"]},contents:[]};return this.colortable=a.ui.colortable({showNoColorButton:!0,noColorLabel:c.noColorLabel,click:function(a,c){b.setColor(c),b._closeColorTable(a)}}),d.contents.push(this.colortable.getHTMLData()),a.ui.isFunction(c.more)&&(d.contents.push(this._makeMoreButton()),d.attr.class.push("cui-colorinput-colortable-more")),d},_makeMoreButton:function(){var a={tag:"div",attr:{role:"button",class:["cui-colorinput-colortable-more-button","cui-state-unselectabled"]},contents:[{tag:"span",attr:{class:["cui-colorinput-colortable-more-button-text"]},contents:[this.options.moreLabel+"..."]}]};return a},_init:function(){var a=this.options.color;this._initTextBox(),this._initButton(),this._initColorTable(),this.setColor(a)},_initTextBox:function(){var a,d=this,e=this.eventNamespace;this.inputbox=this.element.find(".cui-colorinput-textbox"),this.inputtext=this.element.find(".cui-colorinput-text"),this.inputtext.on("click"+this.eventNamespace,function(a){d.isColorTableOpened&&d._closeColorTable(a)}).on("keydown"+this.eventNamespace,function(a){var b;return a=a||window.event,b=a.which||a.keyCode,(b>=48&&b<=57||b>=96&&b<=105||b>=65&&b<=70||8===b||9===b||46===b||37===b||39===b||110===b)&&void 0}).on("change"+e+" keyup"+e+" paste"+e,function(e){a=e.target.value,a=a.replace(/[^a-f0-9]/gi,"0"),a.length>6&&(a=a.substr(0,5)),e.target.value!==a&&(e.target.value=a),0===a.length?a="transparent":3===a.length&&(a=c(a)),b(a)&&(d._updateColor(a),d._setPreviewColor(a))})},_initButton:function(){var a=this;this.button=this.element.find(".cui-colorinput-button"),this.preview=this.element.find(".cui-colorinput-preview"),this.button.on("click"+this.eventNamespace,function(b){a.isColorTableOpened?a._closeColorTable(b):a._openColorTable(b)})},_initColorTable:function(){this.colortablepane=this.element.find(".cui-colorinput-colortable"),this.colortablepane.hide(),this.isColorTableOpened=!1,this.colortable.init(),a.ui.isFunction(this.options.more)&&(this.colortablemore=this.element.find(".cui-colorinput-colortable-more-button"),this.colortablemore.on("click"+this.eventNamespace,this.options.more))},_destroy:function(){var a=this,b=this.eventNamespace;a.colortable&&(a.isColorTableOpened&&a._closeColorTable(),a.colortable.destroy()),a.inputtext.off(b),a.button.off(b),a.colortablemore&&(a.colortablemore.off(b),a.colortablemore=null),a.inputbox=null,a.inputtext=null,a.colortable=null,a.preview=null,a.button=null,a.colortablepane=null},_openColorTable:function(b){function c(a){f._closeColorTable(a)}var d,e,f=this,g=this.options,h=a(g.belongTo||this.document),i=h.find("iframe.cui-panel"),j="."+this.getID();for(this.colortable.open(b),this.colortablepane.show(),this.isColorTableOpened=!0,this._on(this.document,{mousedown:this._onClickDocument,mousewheel:c,dommousescroll:c}),d=0,e=i.length;d<e;d++)a(i.get(d).contentWindow.document).on("mousedown"+j,c);this._trigger("open",b)},_closeColorTable:function(b){var c,d,e=this.options,f=a(e.belongTo||this.document),g=f.find("iframe.cui-panel"),h="."+this.getID();for(this.colortablepane.hide(),this.colortable.close(),this.isColorTableOpened=!1,this.document.off(h),c=0,d=g.length;c<d;c++)a(g.get(c).contentWindow.document).off(h);this._trigger("close",b)},_onClickDocument:function(b){this.isColorTableOpened&&(a(b.target).closest("#"+this.getID()).length||this._closeColorTable(b))},_setColorText:function(a){b(a)&&("transparent"===a&&(a=""),this.inputtext.val(a.toLowerCase()))},_setPreviewColor:function(a){b(a)&&("transparent"===a?(this.preview.css("background-color",""),this.preview.addClass("cui-colorinput-no-color")):(this.preview.removeClass("cui-colorinput-no-color"),this.preview.css("background-color","#"+a)))},_updateColor:function(a){b(a)&&(this.color=a,this._trigger("change",{},{color:this.color}))},setColor:function(a){this._updateColor(a),this._setPreviewColor(this.color),this._setColorText(this.color)},getColor:function(){return this.color}}),a.ui.colorinput}),d("ui/Dialog",["jqueryCafe","ui/Core","ui/Widget","ui/Draggable","ui/Resizable","ui/Position","ui/Mouse","ui/Button"],function(a){var c="cui-dialog cui-widget cui-widget-content cui-corner-all cui-front",d="cui-dialog-titlebar cui-widget-header cui-corner-all cui-helper-clearfix",e="cui-dialog-title",f="cui-button cui-widget cui-state-default cui-corner-all cui-button-icon-only cui-dialog-titlebar-close",g="cui-button-icon-primary cui-icon cui-icon-close",h="cui-button-text",i="cui-dialog-content cui-widget-content",j="cui-widget-overlay cui-front",k="cui-dialog-buttonpane cui-widget-content cui-helper-clearfix",l="cui-dialog-buttonset-left",m="cui-dialog-buttonset-right";return a.widget("ui.dialog",{options:{autoOpen:!1,buttons:[],
closeOnEscape:!0,draggable:!0,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var c=a(this).css(b).offset().top;c<0&&a(this).css("top",b.top-c)}},resizable:!0,title:null,width:300,closeText:"Close",contentOverflow:!1,belongTo:null,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,beforeOpen:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){var a=this.dialogId=this.getID(),b=this.options;this.titlebarId=a+"-titlebar",this.titleId=a+"-title",this.titlebarCloseId=a+"-titlebar-close",this.contentId=a+"-content",this.buttonPaneId=a+"-buttonpane",this.leftButtonSetId=a+"-buttonset-left",this.rightButtonSetId=a+"-buttonset-right",this.htmlData={tag:"div",attr:{id:a,role:"dialog",class:c+(b.contentOverflow?" cui-overflow-content":""),tabIndex:-1},contents:[],items:this.options.items},null!==b.title&&this.htmlData.contents.push(this._createTitlebar()),this.htmlData.contents.push(this._createContent()),this.htmlData.contents.push(this._createButtonPane())},_createTitlebar:function(){return{tag:"div",attr:{id:this.titlebarId,class:d},contents:[{tag:"span",attr:{id:this.titleId,class:e},contents:[this.options.title]},{tag:"button",attr:{type:"button",id:this.titlebarCloseId,class:f},contents:[{tag:"span",attr:{class:g}},{tag:"span",attr:{class:h},contents:this.options.closeText}]}]}},_createContent:function(){return{tag:"div",attr:{id:this.contentId,class:i},contents:[]}},_createButtonPane:function(){return{tag:"div",attr:{id:this.buttonPaneId,class:k},contents:[{tag:"div",attr:{id:this.leftButtonSetId,class:l},contents:this._createButtons("left")},{tag:"div",attr:{id:this.rightButtonSetId,class:m},contents:this._createButtons("right")}]}},_createButtons:function(c){var d,e,f,g,h=[],i=this.options.buttons;for(this.footerButtons=this.footerButtons||{},this.footerButtonHandlers=this.footerButtonHandlers?this.footerButtonHandlers:{},d=0;d<i.length;d++)(i[d].float===b&&"right"===c||i[d].float===c)&&(f=i[d].text||i[d].name,g=i[d].name||a({}).uniqueId()[0].id,e=a.ui.button({label:f,tooltip:!1}),this.footerButtons[g]=e,i[d].click&&(this.footerButtonHandlers[g]=i[d].click),h.push(e.getHTMLData()));return h},_init:function(){this.uiDialog=this.element,this.uiDialogTitle=a("#"+this.titleId),this.uiDialogTitlebar=a("#"+this.titlebarId),this.uiDialogTitlebarClose=a("#"+this.titlebarCloseId),this.uiDialogButtonPane=a("#"+this.buttonPaneId),this.uiDialogLeftButtonSet=a("#"+this.leftButtonSetId),this.uiDialogRightButtonSet=a("#"+this.rightButtonSetId),this.contentPane=a("#"+this.contentId),this._initWrapper(),null!==this.options.title&&this._initTitlebar(),null!==this.options.title&&this.options.draggable&&a.fn.draggable&&this._makeDraggable(),this.options.resizable&&a.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus(),this.options.autoOpen&&this.open()},_initWrapper:function(){this.uiDialog.hide(),this._on(this.uiDialog,{keydown:function(b){var c,d,e;return this.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode===a.ui.keyCode.ESCAPE?(b.preventDefault(),void this.close(b)):b.keyCode===a.ui.keyCode.ENTER?(b.preventDefault(),void b.stopPropagation()):void(b.keyCode!==a.ui.keyCode.TAB||b.isDefaultPrevented()||(c=this.uiDialog.find(":tabbable"),d=c.filter(":first"),e=c.filter(":last"),b.target!==e[0]&&b.target!==this.uiDialog[0]||b.shiftKey?b.target!==d[0]&&b.target!==this.uiDialog[0]||!b.shiftKey||(this._delay(function(){e.focus()}),b.preventDefault()):(this._delay(function(){d.focus()}),b.preventDefault())))},mousedown:function(a){this._moveToTop(a)&&this._focusTabbable()}}),this.contentPane.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.contentPane.attr("id")})},_initTitlebar:function(){this._on(this.uiDialogTitlebar,{mousedown:function(b){a(b.target).closest(".cui-dialog-titlebar-close")||this.uiDialog.focus()}}),this._on(this.uiDialogTitlebarClose,{mouseenter:function(){this.uiDialogTitlebarClose.addClass("cui-state-hover")},mouseleave:function(){this.uiDialogTitlebarClose.removeClass("cui-state-hover")},click:function(a){a.preventDefault(),this.close(a)}}),this._title(this.uiDialogTitle),this.uiDialog.attr({"aria-labelledby":this.uiDialogTitle.attr("id")})},_initButtons:function(){var a,b;for(a in this.footerButtonHandlers)this.footerButtonHandlers[a]&&(b=this.footerButtons[a],b.init(),this._on(b.element,{click:this.footerButtonHandlers[a]}));this.isButtonInitiated=!0},_destroy:function(){var a=this;a.document.removeData("cui-dialog-instances"),a._destroyOverlay(),a.uiDialog.stop(!0,!0)},disable:a.noop,enable:a.noop,getButtons:function(){return this.footerButtons},getButton:function(a){return this.footerButtons[a]},close:function(b,c){var d,e=this;if(this._isOpen&&this._trigger("beforeClose",b,{dialog:this,element:this.uiDialog})!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{d=this.document[0].activeElement,d&&"body"!==d.nodeName.toLowerCase()&&a(d).blur()}catch(a){}this._hide(this.uiDialog,null,function(){e._trigger("close",b,{dialog:e,element:e.uiDialog,button:c})})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(b,c){var d=!1,e=this.uiDialog.siblings(".cui-front:visible").map(function(){return+a(this).css("z-index")}).get(),f=Math.max.apply(null,e);return f>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",f+1),d=!0),d&&!c&&this._trigger("focus",b,this.uiDialog),d},open:function(){var b=this;return this.isButtonInitiated||this._initButtons(),this._trigger("beforeOpen",{},{dialog:this,element:this.uiDialog}),this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=a(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,null,function(){b._focusTabbable(),b._trigger("focus",{},this.uiDialog)}),this._makeFocusTarget(),void this._trigger("open",{},{dialog:this,element:this.uiDialog}))},_focusTabbable:function(){var a=this._focusedElement;a||(a=this.contentPane.find("[autofocus]")),a.length||(a=this.contentPane.find(":tabbable")),a.length||(a=this.uiDialogButtonPane.find(":tabbable")),a.length||(a=this.uiDialogTitlebarClose.filter(":tabbable")),a.length||(a=this.uiDialog),a.eq(0).focus()},_keepFocus:function(b){function c(){var b=this.document[0].activeElement,c=this.uiDialog[0]===b||a.contains(this.uiDialog[0],b);c||this._focusTabbable()}b.preventDefault(),c.call(this),this._delay(c)},_title:function(a){this.options.title||a.html("&#160;"),a.text(this.options.title)},_makeDraggable:function(){function b(a){return{position:a.position,offset:a.offset}}var c=this,d=this.options;this.uiDialog.draggable({cancel:".cui-dialog-content, .cui-dialog-titlebar-close",handle:".cui-dialog-titlebar",containment:"document",start:function(d,e){a(this).addClass("cui-dialog-dragging"),c._blockFrames(),c._trigger("dragStart",d,b(e))},drag:function(a,d){c._trigger("drag",a,b(d))},stop:function(e,f){var g=f.offset.left-c.document.scrollLeft(),h=f.offset.top-c.document.scrollTop();d.position={my:"left top",at:"left"+(g>=0?"+":"")+g+" top"+(h>=0?"+":"")+h,of:c.window},a(this).removeClass("cui-dialog-dragging"),c._unblockFrames(),c._trigger("dragStop",e,b(f))}})},_makeResizable:function(){function b(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}var c=this,d=this.options,e=d.resizable,f=this.uiDialog.css("position"),g="string"==typeof e?e:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".cui-dialog-content",containment:"document",alsoResize:this.contentPane,maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:this._minHeight(),handles:g,start:function(d,e){a(this).addClass("cui-dialog-resizing"),c._blockFrames(),c._trigger("resizeStart",d,b(e))},resize:function(a,d){c._trigger("resize",a,b(d))},stop:function(e,f){var g=c.uiDialog.offset(),h=g.left-c.document.scrollLeft(),i=g.top-c.document.scrollTop();d.height=c.uiDialog.height(),d.width=c.uiDialog.width(),d.position={my:"left top",at:"left"+(h>=0?"+":"")+h+" top"+(i>=0?"+":"")+i,of:c.window},a(this).removeClass("cui-dialog-resizing"),c._unblockFrames(),c._trigger("resizeStop",e,b(f))}}).css("position",f)},_trackFocus:function(){this._on(this.widget(),{focusin:function(b){this._makeFocusTarget(),this._focusedElement=a(b.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var b=this._trackingInstances(),c=a.inArray(this,b);c!==-1&&b.splice(c,1)},_trackingInstances:function(){var a=this.document.data("cui-dialog-instances");return a||(a=[],this.document.data("cui-dialog-instances",a)),a},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(){var a=this.uiDialog.is(":visible");a||this.uiDialog.show(),this.uiDialog.position(this.options.position),a||this.uiDialog.hide()},_setOptions:function(b){var c=this,d=!1,e={};a.each(b,function(a,b){c._setOption(a,b),a in c.sizeRelatedOptions&&(d=!0),a in c.resizableRelatedOptions&&(e[a]=b)}),d&&(this._size(),this._position()),this.uiDialog.is(":data(cui-resizable)")&&this.uiDialog.resizable("option",e)},_setOption:function(a,b){var c,d,e=this.uiDialog;"disabled"!==a&&(this._super(a,b),"draggable"===a&&(c=e.is(":data(cui-draggable)"),c&&!b&&e.draggable("destroy"),!c&&b&&this._makeDraggable()),"position"===a&&this._position(),"resizable"===a&&(d=e.is(":data(cui-resizable)"),d&&!b&&e.resizable("destroy"),d&&"string"==typeof b&&e.resizable("option","handles",b),d||b===!1||this._makeResizable()),"title"===a&&this._title(this.uiDialogTitle),"height"===a&&this.uiDialog.height(b))},_size:function(){var a,b,c,d=this.options;this.contentPane.show().css({width:"",minHeight:"",maxHeight:"",height:""}),d.minWidth>d.width&&(d.width=d.minWidth),a=this.uiDialog.css({height:"auto",width:d.width}).outerHeight(),b=Math.max(0,d.minHeight-a),c="number"==typeof d.maxHeight?Math.max(0,d.maxHeight-a):"none","auto"===d.height?this.contentPane.css({minHeight:b,maxHeight:c,height:"auto"}):d.height<=a?this.contentPane.height(Math.max(0,b)):this.contentPane.height(Math.max(0,d.height-a)),this.uiDialog.is(":data(cui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){var b=a(this.options.belongTo||this.document),c=b.find("iframe.cui-panel");this.iframeBlocks=c.map(function(){var b=a(this);return a("<div>").css({position:"absolute",width:b.outerWidth(),height:b.outerHeight()}).appendTo(b.parent()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(b){if(a(b.target).closest(".cui-dialog").length)return!0},_createOverlay:function(){if(this.options.modal){var b=!0;this._delay(function(){b=!1}),this.document.data("cui-dialog-overlays")||this._on(this.document,{focusin:function(a){b||this._allowInteraction(a)||(a.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=a("<div>").addClass(j).appendTo(this.element.parent()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("cui-dialog-overlays",(this.document.data("cui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var a=this.document.data("cui-dialog-overlays")-1;a?this.document.data("cui-dialog-overlays",a):this.document.unbind("focusin").removeData("cui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}}),a.ui.dialog}),d("ui/NotiBar",["jqueryCafe","ui/Core","ui/Widget"],function(a){return a.widget("ui.notibar",{options:{html:"",closable:!1,type:""},_create:function(){var a=[],b=["cui-notibar"],c=this.options,d=c.html||"",e=c.type;e&&b.push("cui-state-"+e),a.push({tag:"span",attr:{class:"cui-notibar-text"},contents:d}),c.closable&&(b.push("cui-closable"),a.push({tag:"button",attr:{type:"button",tabindex:"-1",class:"cui-quit-button cui-widget cui-state-default",role:"button"},contents:[{tag:"span",attr:{class:"cui-button-text"},contents:"X"}]})),this.htmlData={tag:"div",attr:{class:b,role:"alert"},contents:a}},_init:function(){var a=this,b=this.element;b.parent().addClass("cui-notibar-parent"),a.options.closable&&b.on("click",function(){a.destroy(!0)})}}),a.ui.notibar}),d("ThemeManager",[],function(){var a;return a={themes:{},parents:{},changeUrl:function(a,b){return a.theme=b,a},getParent:function(a){return this.parents[a]?this.parents[a]:null},load:function(a,b,c){var d,e=this;e.themes[b]||(d=c.prefix+c.theme+c.suffix,a.scriptLoader.addQueue(d,function(){var d=e.getParent(b);d&&e.load(a,d,e.changeUrl(c,d))}))},add:function(a,b,c){this.themes[a]=c,b&&(this.parents[a]=b)},get:function(a){return this.themes[a]?this.themes[a]:null}}}),d("UIManager",["jqueryCafe"],function(a){function c(){}var d={NORMAL:"normal",IMAGE:"image",MEDIA:"media",TABLE:"table",EMPTY_CELL:"empty-cell",SINGLE_CELL:"single-cell",MULTI_CELL:"multi-cell",SELECTED:"selected"},e="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+";return c.prototype={widgets:null,editor:null,theme:null,dialogs:null,configs:null,panels:null,activeDialogs:[],uiComponents:{},_menuItemsCache:{},_supportBlankPage:!1,_stateofAlert:!1,create:function(b,c){var d,e,f,g,h;c&&b.theme&&c.targetId&&(e=a("#"+c.targetId)[0],e&&(this.panels=null,this.activeDialogs=[],this._menuItemsCache={},this._supportBlankPage=!1,this._stateofAlert=!1,this.theme=h=a.extend(!0,{},b.theme),this.editor=b,f=c.menuItems||{},this._processMenuItem(f),g=c.buttons||{},this._processToolButton(g,f),d=h.createUI({configs:c.configs||{},menuItems:f,buttons:g,panels:c.panels||{}}),this.dialogs=c.dialogs||{},this.widgets=d.widgets,this.configs=d.configs,this.uiComponents=d.uiComponents,d.htmlData.attr.class.push("cui-skin-"+c.configs.skin),this._render(e,d.htmlData)))},_render:function(b,c){var d=this,e=this.editor,f=a(b),g=a(a.ui.makeHTML(c));f.one("drewui",function(b){var c=a(b.relatedTarget),g=!0;c.show();try{d._postRender()}catch(a){c[0].outerHTML="",f.show(),g=!1}finally{e.trigger(g?"uicreate":"uicreatefail")}}),this.theme.drawUI(b,g[0])},_postRender:function(){var b,c,d,e=this,f=this.widgets,g=this.editor;for(b in f)f[b].init();c=f.container.element.on("contextmenu",function(a){a.preventDefault(),a.stopPropagation()}),this.theme.initUI(this,c),this.editor.configs.editor_max_height&&(this.registUIComponents(),d=this.setPanelMaxHeight(),g.on("editoraftercreate",function(){window.addEventListener("resize",function(){e.setPanelMaxHeight()})})),g.on("tabsbeforeactivate",function(a,b){"edit"===b.oldPanelName&&e.backupHeaderStates()}),g.on("tabsactivate",function(a,b){"edit"===b.newPanelName?(e.restoreHeaderStates(),g.getBody().setAttribute("contenteditable","true"),e.isAlertOpened()||this.focus()):(this.blur(),g.getBody().removeAttribute("contenteditable"))}),g.one("editorcreate",function(){var b=a(g.getBody()),c=g.configs;c.editor_max_height&&d?b.css("minHeight",d-parseFloat(b.css("margin-top"))-parseFloat(b.css("margin-bottom"))):b.css("minHeight",c.height-parseFloat(b.css("margin-top"))-parseFloat(b.css("margin-bottom")))}),c.on("mousedown",".cui-toolbar button",function(a){a.preventDefault()})},_processMenuItem:function(a,b,c){var d,e,f,g,h,i=this.editor,j=b?b+"_":"";c=c||a;for(d in a)a.hasOwnProperty(d)&&(e=a[d],h=j+d,"string"==typeof e?(g=e,e=a[d]=c[e]||{}):g=h,e.name=e.name||g,e.alias=e.alias||h,f=e.shortcut,f&&(f=i.getShortcut(f)[0]||f,i.os&&i.os.mac&&(f=this.convertMacSymbol(f)),e.shortcut=f),e.menuItems&&this._processMenuItem(e.menuItems,e.name,c))},_processToolButton:function(a,b){var c,d;for(c in a)a.hasOwnProperty(c)&&(d=a[c],/(selectmenu|splitbutton)/i.test(d.widgetType)&&this._processMenuItem(d.menuItems,c,b))},destroy:function(){var a,b,c=[],d=this,e=d.widgets,f=d.getContainer();d.theme.finalUI(d,f);for(a in e)c.push(e[a]);for(;c.length;)b=c.pop(),b.destroy(),b=null;d.theme.destroyUI(),f.find("*").off(),f.off(),f.remove(),f=null,d.widgets=e=null,d.editor=null,d.theme=null,d.dialogs=null,d.configs=null,d.panels=null,d.activeDialogs=null,d._menuItemsCache=null,d._supportBlankPage=null,d._stateofAlert=null},convertMacSymbol:function(a){return"string"!=typeof a?"":(a=a.replace(/command/i,"â"),a=a.replace(/option/i,"â¥"),a=a.replace(/shift/i,"â§"),a=a.replace(/ctrl/i,"â"))},dialog:function(b,c){var d,e,f,g,h=this,i=this.editor,j="dialog_"+b,k=this.getWidget(j),l=this.dialogs[b];if(k)return k.option("position",l.position),void k.open();if(d=this.theme,l){l.position||(l.position={my:"center",at:"center",of:this.getContainer(),collision:"fit",using:function(b){var c=a(this).css(b).offset().top;c<0&&a(this).css("top",b.top-c)}}),l.belongTo||(l.belongTo=a(this.getContainer()).attr("id")),e=d.createDialog(b,l),a(this.getContainer()).append(a.ui.makeHTML(e.htmlData)),g=e.widgets;for(f in g)g[f].init();this.widgets=a.extend(this.widgets,g),j="dialog_"+b,k=g[j],k.element.attr("data-cui-dialog",j),k.getWidget=function(a){var b;return a?(b=this.element.attr("data-cui-dialog"),h.getWidget(b+"_"+a)):this},k.element.on("dialogopen",function(b){var c=a(b.target).attr("data-cui-dialog");h.activeDialogs.push(c)}).on("dialogclose",function(b){var c=a(b.target).attr("data-cui-dialog"),d=a.inArray(c,h.activeDialogs);d>-1&&h.activeDialogs.splice(d,1)}),c||k.element.on("dialogclose",function(){i.focus()}),i.trigger("dialogcreate",{dialog:k}),k.open()}},alert:function(b){var c=this.editor,d=this,e="common_alert",f=this.getWidget("dialog_common_alert"),g=function(){d._stateOfAlert=!d._stateOfAlert};f?(this.isDialogOpened(e)&&f.close(),a(".cui-dialog-content .cui-label",f.element).html(b)):this.dialogs[e]={modal:!0,resizable:!1,width:"auto",items:[{name:"messageText",type:"label",options:{label:b}}],buttons:[{text:c.getText("ok"),click:function(){this.close()}}],beforeOpen:function(a,b){c.trigger("alertbeforeopen",a,b)},open:function(a,b){c.trigger("alertopen",a,b)},beforeClose:function(a,b){c.trigger("alertbeforeclose",a,b)},close:function(a,b){c.trigger("alertclose",a,b)}},c.one("alertbeforeopen",function(b,d){var e;a(d.target).css("max-width","400px").find(".cui-dialog-content").css("padding","1em 1em 0.1em"),g(),c.isFocused()?c.one("alertclose",function(){c.focus(),g()}):(e=document.activeElement,c.one("alertclose",function(){e.focus(),g()}))}),this.dialog(e,!0)},isDialogOpened:function(a){var b=this.activeDialogs;return a?b.indexOf(a)!==-1:b.length>0},getContext:function(b){function c(a,b,c){var d,e=0,f=a.length;for(c=c||"data-cui-selected";e<f;e++)if(d=a[e],d.tagName===b&&d.getAttribute(c))return!0;return!1}var e,f,g,h,i=this.editor.selectionManager,j=this.editor.pluginUtils;return i?(e=[],f=i.getRange(),g=i.getAncestors(),b&&j.isSelectedImageItem(b)?(h=this.editor.browser.ie?a("img[data-cui-selected]",b)[0]:b,h.getAttribute("data-cui-media")?e.push(d.MEDIA,d.SELECTED):e.push(d.IMAGE,d.SELECTED)):f.collapsed===!1?e.push(d.NORMAL,d.SELECTED):c(g,"TABLE")?(e.push(d.TABLE),g=a(g[0]).closest("table").find("th[data-cui-selected], td[data-cui-selected]"),0===g.length?e.push(d.EMPTY_CELL):1===g.length?e.push(d.SINGLE_CELL):g.length>1&&e.push(d.MULTI_CELL),e.push(d.SELECTED)):e.push(d.NORMAL),e.join(".")):d.NORMAL},getContainer:function(){return this.widgets.container.element},getEditArea:function(){return this.widgets.panel_edit.element},getWidget:function(a){var b,c,d=this.widgets;if("string"==typeof a)b=d[a];else if(a instanceof RegExp){b=[];for(c in d)a.test(c)&&b.push(d[c])}return b},_getMenuItems:function(b){return this._menuItemsCache[b]||(this._menuItemsCache[b]=a(".cui-menu li[data-cui-name='"+b+"'], .cui-menu li[data-cui-alias='"+b+"']",this.getContainer())),this._menuItemsCache[b]},disableMenuItem:function(a,c){var d=this._getMenuItems(a);if(c===b)return d.hasClass("cui-state-disabled");if(d.hasClass("cui-state-disabled")!==c)return c?d.addClass("cui-state-disabled").attr("aria-disabled","true"):d.removeClass("cui-state-disabled").removeAttr("aria-disabled"),d},toggleMenuItem:function(a,c){var d,e,f,g=this._getMenuItems(a);if(c===b)return g.hasClass("cui-pressed");if(g.hasClass("cui-pressed")!==c){if(c)for(g.addClass("cui-pressed"),d=0,e=g.length;d<e;d++)f=g.eq(d),f.hasClass("cui-selectmenu-menuitem")||f.hasClass("cui-has-icon")||f.find("span.cui-toggle").length||f.prepend('<span class="cui-toggle cui-icon cui-icon-check"></span>');else g.removeClass("cui-pressed").find("span.cui-toggle").remove();return g}},disableAllHeader:function(b,c){var d,f,g,h,i,j,k,l,m,n=[],o=this.getContainer(),p=this.widgets,q=a(".cui-menu li[data-cui-name], .cui-menu li[data-cui-alias]",o),r=[];if(b){if("string"==typeof b)b=b.split(",");else if(!a.isArray(b))return}else b=[];for(h="(?!buttonset"+(b.length?"|"+b.join("|"):"")+")",l=new RegExp("(toolbar_"+h+e+"|menubar_menu_"+h+e+")"),m=new RegExp("^("+(b.length?"?!("+b.join("|")+")":e)+")"),d=0,f=q.length;d<f;d++)j=q.eq(d),k=j.attr("data-cui-name"),a.inArray(k,r)===-1&&(r.push(k),m.test(k)?this.disableMenuItem(k,c):n.push(j.closest("[aria-labelledby]").attr("aria-labelledby")));for(g in p)i=p[g],c&&a.inArray(i.element.attr("id"),n)!==-1||l.test(g)&&i.option("disabled",c)},backupHeaderStates:function(){var b,c,d,e,f,g,h=[],i=this.getContainer(),j=this.widgets,k=a(".cui-menu li[data-cui-name], .cui-menu li[data-cui-alias]",i);for(b=0,c=k.length;b<c;b++)f=k.eq(b),g=f.attr("data-cui-name"),a.inArray(g,h)===-1&&(h.push(g),f.data("cui-prev-disabled",this.disableMenuItem(g)));for(d in j)"tabs"!==d&&(e=j[d],e.element.data("cui-prev-disabled",e.option("disabled")))},restoreHeaderStates:function(){var c,d,e,f,g,h,i,j=[],k=this.getContainer(),l=this.widgets,m=a(".cui-menu li[data-cui-name], .cui-menu li[data-cui-alias]",k);for(c=0,d=m.length;c<d;c++)h=m.eq(c),i=h.attr("data-cui-name"),f=h.data("cui-prev-disabled"),a.inArray(i,j)===-1&&(j.push(i),f!==b&&this.disableMenuItem(i,f),h.removeData("cui-prev-disabled"));for(e in l)g=l[e],"tabs"!==e&&(f=g.element.data("cui-prev-disabled"),f!==b&&g.option("disabled",f),g.element.removeData("cui-prev-disabled"))},registUIComponents:function(b){function c(b){(!f.uiComponents[b]||f.uiComponents[b].length<1)&&(f.uiComponents[b]=a(g[b],e))}var d,e=this.getContainer(),f=this,g={$panels:".cui-tabs-panel > .cui-panel",$codeviewPanel:"textarea.cui-panel[data-cui-title=codeview]",$textmodePanel:"textarea.cui-panel[data-cui-title=textmode]",$header:".cui-header",$footer:".cui-tabs-nav",$resizeHandle:".cui-container-resize-handle"};if(b)return void c(b);for(d in g)c(d)},setPanelMaxHeight:function(){var b,c,d,e=this.getContainer(),f=a(this.editor.getBody()),g=a(e).outerHeight(),h=this.editor.configs,i=this.uiComponents,j=this.editor.constants.EDITOR_MIN_HEIGHT,k=i.$header.outerHeight(!0)+(i.$footer.is(":hidden")?0:i.$footer.outerHeight(!0))+i.$resizeHandle.height();return b=h.editor_max_height-k,b=b<j?j:b,i.$panels.css("max-height",b+"px"),g>h.editor_max_height&&(i.$panels.height(b),i.$codeviewPanel.length>0&&(i.$codeviewPanel[0].style.height=b+"px"),c=parseInt(f.css("margin-top"),10),d=parseInt(f.css("margin-bottom"),10),f.css("min-height",b-c-d+"px")),i.$textmodePanel.length>0&&(k=i.$header.outerHeight(!0)+i.$resizeHandle.outerHeight(!0)-1,b=h.editor_max_height-k,b=b<j?j:b,i.$textmodePanel.css("max-height",b+"px"),g>h.editor_max_height&&i.$textmodePanel.outerHeight(b)),i.$panels.height()},closeContextMenu:function(){var a,b,c=this.getWidget(/\w+_contextmenu/);if(c&&c.length)for(a=0,b=c.length;a<b;a++)c[a].close()},isAlertOpened:function(){return this._stateOfAlert},getCurrentTabName:function(){var b=a("li.cui-state-active",this.getWidget("tabs").element)[0];return b?b.getAttribute("data-cui-name"):null},_initPanelData:function(){var a,b,c,d,e,f,g=0,h=this.configs;if(h.panel&&(e=h.panel.split(/(?:\s){1,}/),b=e.length)){for(f={},a=0;a<b;a++)d=e[a],c=this.getWidget("panel_"+d),c&&(f[d]={widget:c,element:c.element,index:g},g++);return g||(f=null),this.panels=f}},disableTabs:function(b,c){var d,e,f,g,h,i;if(!b||"string"!=typeof b)return!1;if(h=this.panels||this._initPanelData(),!h)return!1;for(g=b.split(/(?:\s){1,}/),e=g.length,f=this.getWidget("tabs"),d=0;d<e;d++)i=h[g[d]],i&&a.isNumeric(i.index)&&f[c?"disable":"enable"](i.index);return d===e},changeTab:function(b){var c,d,e;return!(!b||"string"!=typeof b)&&(!!(c=this.panels||this._initPanelData())&&(d=c[b],e=this.getWidget("tabs"),!(!d||!a.isNumeric(d.index))&&(e.option("active",d.index),!0)))},notibar:function(b,c,d){var e=a.ui.notibar({type:b,html:c,closable:d});return a(".cui-header",this.getContainer()).append(a.ui.makeHTML(e.getHTMLData())),e.init(),e}},c}),d("SelectionManager",["jqueryCafe","utilities/EditorConstants","utilities/NodeTracker","utilities/HTMLFilter","utilities/HtmlParser","utilities/RuleSet"],function(a,c,d,e,f,g){function h(h){function l(a){return"COL"!==a.nodeName}function m(b){return a(h.contentUtils.getAllChildren(b,l))}function n(a){var b=Z.createRange();1===a.nodeType?"BR"===a.nodeName?(b.setStartBefore(a),b.setEndBefore(a)):/^(?:P|H[1-6]|LI)$/i.test(a.nodeName)?(b.setStart(a,0),b.setEnd(a,0)):(b.setStartAfter(a),b.setEndAfter(a)):3===a.nodeType?(b.setStart(a,a.length),b.setEnd(a,a.length)):(a=R.children().first()[0],b.setStartBefore(a),b.setEndBefore(a)),b.collapse(!0),Z.setSingleRange(b)}function o(b){var d,e,f,g,i,j,k,l,m="";for(l=a(b).find("p, h1, h2, h3, h4, h5, h6"),f=l.length,d=0;d<f;d++)if(j=l[d],k=a(j),g=parseInt(k.css(c.INDENT_STYLE),10),g/=5){for(e=0;e<g;e++)m+="Â ";i=h.getDoc().createTextNode(""),i.nodeValue=m,k.prepend(i),m=""}}function p(){var b,d,e,f,g,i,j=a("head",Q).clone(),k=h.baseURL+"skins/"+h.configs.skin+"/designarea"+h.suffix+".css";if(a('link[href="'+k+'"]',j).remove(),/^true$/i.test(fa)){for(a("link.cui-content-default",j).remove(),b=a("style.cui-content-default",j),e=0,f=b.length;e<f;e++)d=a(b[e]),g=d.text(),g=g.replace(/body\#cafe\-note\-contents\s*\{/gi,"body {"),g=g.replace(/body\#cafe\-note\-contents\s\*\s\{/gi,"body * {"),g=g.replace(/body\#cafe\-note\-contents\s/gi,""),g=g.replace(/\#cafe\-note\-contents\stable/gi,"table"),g=g.replace(/\#cafe\-note\-contents\simg/gi,"img"),g=g.replace(/\#cafe\-note\-contents\s\[/gi,"["),g=g.replace(/body\#cafe\-note\-contents\,/gi,"body,"),d.text(g);for(i=c.USERDATA_ATTRIBUTE_NAME,b=a("["+i+"]",j),e=0,f=b.length;e<f;e++)d=b[e],d.textContent=d.textContent.replace(/#cafe\-note\-contents\s/gi,""),d.removeAttribute(i)}for(b=a("style[data-cafe-default=true]",j),e=0,f=b.length;e<f;e++)d=a(b[e]),g=d.text(),g=g.replace("html,\nbody {\n  overflow: visible !important;\n  height: auto;\n}\n",""),g=g.replace("html {\n  height: auto;\n}\n",""),g=g.replace("html,body{overflow:visible !important;height:auto;}html{height:auto;}",""),d.text(g);return h.configs.doctype+"\n<html>\n"+j[0].outerHTML+"\n"}function q(){var a="";return $.useDefaultStyleByLink?a=' style="margin:10px;font-family:'+$.default_font_family+";font-size:"+$.default_font_size+';"':(a=' style="',$.default_font_family&&(a+="font-family:"+$.default_font_family+";"),$.default_font_size&&(a+="font-size:"+$.default_font_size+";"),$.default_line_height&&(a+="line-height:"+$.default_line_height+";"),a+='" '),a}function r(a,b){for(var c,d=a.length,e=R[0];d--;)c=a[d].compareDocumentPosition(b),(0===c||16&c)&&(e=a[d]);return e}function s(a,b){var c,e,f=[];if(a===b)return[a];c=a,e=new d(c,R[0]);do if(f.push(c),c=e.next(),c===b){f.push(c);break}while(c);return f}function t(a,b,c,d){return b+"&nbsp;"+d}function u(a){var b,c;for(b in j)c=new RegExp("(<"+b+"\\b[^>]*>)\\s*(?:<br(:?\\s*\\/)?>)+\\s*(<\\/"+b+">)","gi"),a=a.replace(c,t);return a=a.replace(/<p\b[^>]*><span\b[^>]*>(?:<br(:?\s*\/)?>)<\/span><\/p>/gi,function(a){return a.replace(/(?:<br(:?\s*\/)?>)/gi,"&nbsp;")})}function v(a,b){var c=a,d=b?"firstChild":"lastChild";if(!c||1!==c.nodeType)return a;for(;3!==c.nodeType&&c[d];)c=c[d];return c}function w(a,b,c){for(var d=c||0,e=a.length;d<e;d++)if(0===b.compareDocumentPosition(a[d]))return d;return-1}function x(b,c){1===b.nodeType&&a(c).appendTo(b)}function y(a,b,c){var d;return a&&3===a.nodeType&&a.length>b?(d=a.splitText(b),d=c?d:d.previousSibling):d=a,d}function z(a,b,c){var d=a;return c=!!c,1===a.nodeType&&a.childNodes.length>0?(a=a.childNodes["BODY"===a.nodeName?b-1:b],c||(0===b&&d.previousSibling?a=d.previousSibling:a||(a=d),a=v(a),b=3===a.nodeType?a.length:b)):3===a.nodeType&&(a.length===b?c&&(a=A(a),b=0):0!==b&&(a=y(a,b,c))),{node:a,offset:b}}function A(a){var b,c=a.nextSibling;if(c)return c;for(b=a.parentNode;b&&"BODY"!==b.nodeName;b=b.parentNode)if(c=b.nextSibling)return c}function B(a,b,c){var d,e,f;if(3===a.nodeType)if(e=a.parentNode,f=e.textContent||e.innerText,d=f.length,0!==b||d!==c&&c!==-1)a=y(a,c),a=y(a,b,!0);else for(;e.firstChild===a&&e.lastChild===a;)a=e,e=a.parentNode;else 1===a.nodeType&&b>=0&&a.childNodes.length>b&&(a=a.childNodes[b]);return a}function C(b,c,d){var e,f,g,h,i;if(/^(?:body|ol|ul|table)$/i.test(b.nodeName)&&(i=a(b).contents(),b=i[i.length>c?c:i.length-1],c=d?0:3===b.nodeType?b.length-1:1),/^(?:ol|ul|table|tr|td|th|tbody|tfoot|thead)$/i.test(b.nodeName)&&(i=a("p, h1, h2, h3, h4, h5, h6, li",b),b=d?i.first()[0]:i.last()[0]),b)return h=b,e=Z.getAncestors(b),f=F(e,j)[0],g=v(f,!d),3===b.nodeType&&b===g?d&&c===b.length?h=D(b,j,!0):d||0!==c||(h=D(b,j,!1)):b===g&&d&&1===c?h=D(b,j,!0):b!==g||d||0!==c||(h=D(b,j,!1)),d&&!j[h.nodeName]&&(e=Z.getAncestors(h),h=F(e,j)[0]),h}function D(a,b,c){for(var e,f=new d(a,R[0]),g=a;g;)if(g=c?f.next():f.prev(),g&&b[g.nodeName]){e=!0;break}return e?g:a}function E(a,b){var c,d,e,f;for(d=a.length,e=0;e<d&&(f=a[e],c=f.compareDocumentPosition(b),!(0===c||16&c));e++);return f}function F(a,b){var c,d,e=a.length,f=[];for(d=0;d<e;d++)c=a[d],c&&b[c.nodeName]&&f.push(c);return f}function G(a){for(var b=a;b&&"BODY"!==b.nodeName&&b.parentNode&&b.parentNode.lastChild===b;)b=b.parentNode;return b}function H(a,b,c,d,e){var f,g,h,i,j=a.nodeType,k=a.parentNode;return 1===j?a:(d?(f=b?b.compareDocumentPosition(a):0,b&&(16&f||a.previousSibling===b)?(g=c===a.length?a:a.splitText(c),b.appendChild(g)):(c===a.length?g=G(a):3===a.nodeType&&(g=a.splitText(c),g=g.previousSibling),h=Q.createElement("span"),g.parentNode.insertBefore(h,g),h.appendChild(g))):(f=k.firstChild.compareDocumentPosition(a),i=!e||a.nextSibling===e,i&&0===c&&0===f?h=k:(g=a.splitText(c),h=Q.createElement("span"),k.insertBefore(h,g),h.appendChild(g))),h)}function I(a,b){var c;return a=a||R[0],b=b||ea,c=a.querySelectorAll(b)}function J(a){var b=a;return _.test(b)&&(b=b.replace(/[\u200B\uFEFF]/g,"")),b}function K(a,b,c){var d,e,f=0,g=!0;if(a&&a.hasChildNodes()&&(d=b>0?b-1:0,a=a.childNodes[d],g=b!==d,"IMG"===a.nodeName&&a.nextSibling&&(a=a.nextSibling,g=!1)),a&&3===a.nodeType)return f=c||g?a.textContent.length:0,{node:a,offset:f,isRightside:g};for(;a&&a.hasChildNodes();){if(e=a.childNodes.length,a=a.childNodes[c||g?e-1:0],3===a.nodeType)return f=c||g?a.textContent.length:0,{node:a,offset:f,isRightside:g};f=c||g?a.textContent.length:0}return{node:a,offset:f,isRightside:g}}function L(a,b){var c,d,e,f=0,g=a.length-1;if(b)for(;f<=g;)if(c=f+g>>1,d=a[c],e=b.compareDocumentPosition(d),2&e)f=c+1;else{if(!(4&e))return c;g=c-1}return-1}function M(a,b,c,d){var e,f,g=-1,h=0,i=!1,j=I(),k=c(a,"p, li, h1, h2, h3, h4, h5, h6, div");return g=L(j,k),g=g!==-1?g+1:g,g>0?(1===a.nodeType&&(f=K(a,b,d),b=f.offset,a=f.node,i=f.isRightside),h=Z.getCol(k,a,b,i)):g===-1&&"BODY"===a.nodeName&&(a=j[0],g=1),a?e=3===a.nodeType?a.parentNode:a:(a=v(R[0],!0),e=a,b=0,g=0,h=0),{lineElement:k,element:e,node:a,offset:b,line:g,col:h,isRightside:i}}var N,O,P,Q,R,S,T,U,V,W,X,Y,Z=this,$=h.configs||{},_=/[\u200B\uFEFF]/gi,aa=c.keys(c.HeadElements).join(",")+", "+c.keys(c.FormElements).join(",")+", "+c.keys(c.ForeignElements).join(","),ba=h.browser,ca=c.CURSOR_ELEM_ID,da=ba.ie&&ba.version<=10,ea=c.LineElementsStr,fa="false";
return P=h.getWin(),Q=h.getDoc(),R=a(h.getBody()),Y=Q.createDocumentFragment(),X=$.enable_invalid_item_alert||!1,U=($.invalid_elements||"SCRIPT")+",",U+=c.keys(c.ForeignElements).join(","),U+=c.keys(c.FormElements).join(","),V=$.invalid_attributes||c.InvalidAttributes,T=new g({apply_schema:!0,append_emptyline_at_last:!0,gather_head_element:!0,remove_empty_element:!0,use_singleline_element:!0,invalid_elements:U,invalid_attributes:V,comment_elements:"AUDIO,EMBED,IFRAME,OBJECT,PARAM,PROGRESS,TRACK,VIDEO,BASE,META,TITLE,SCRIPT",move_elements:"BASEFONT, BASE,LINK,META,TITLE,STYLE",notify_elements:$.invalid_elements,old_ms_ie:da,ms_ie:ba.ie,unsupported_elements:"",new_line_without_blank:$.new_line_without_blank,allow_blockquote:$.allow_blockquote}),S=new f(T),N=new e({invalid_elements:$.invalid_elements,invalid_attributes:V},h.browser),N.addFilter("unwrapelements",[],function(a){for(var b,c=a.find("div#"+k),d=c.length;d--;)b=c.eq(d),b.replaceWith(b[0].childNodes)}),N.addFilter("trimElements",["removesinglestyle"],function(b){var d,e,f,g,i=b.find(aa),j=i.length;for(e=0;e<j;e++)f=a(i[e]),g=f[0].nodeName,T.isNotifyElement(g)&&(W=!0),f.hasClass("cui-content-default")||!c.HeadElements[g]||d?f.remove():h.addCommentNode(f[0]);i.remove()}),Z.getDefaultRuleSet=function(){return T},N.addFilter("trimStylefromcolgroup",[],function(a){for(var b,c=a.find("colgroup"),d=c.length;d--;)b=m(c[d]),b.remove()}),N.addFilter("absoluteTableHandle",[],function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p=b.find("table"),q=p.length,r=[],s=[];for(h=0;h<q;h++)if(d=p[h],c=d.parentNode,"SPAN"===c.nodeName)if("absolute"===c.style.position){for(k=a(d).find("td"),g=k.length,i=0;i<g;i++)l=k[i],parseInt(l.width)&&r.push(parseInt(l.width)),parseInt(l.height)&&s.push(parseInt(l.height));for(e=a(d).find("img"),g=e.length,i=0;i<g;i++){for(f=e[i],n=parseInt(c.style.marginTop)?parseInt(c.style.marginTop):0,o=parseInt(c.style.marginLeft)?parseInt(c.style.marginLeft):0,j=0,l=f.parentNode;"TD"!==l.nodeName;)l=l.parentNode;for(;l.previousSibling;)l=l.previousSibling,"TD"===l.nodeName&&(j>0&&(o+=r[j-1]),j++);for(j=0,m=l.parentNode;"TR"!==m.nodeName;)m=m.parentNode;for(;m.previousSibling;)m=m.previousSibling,"TR"===m.nodeName&&(j>0&&(n+=s[j-1]),j++);f.style.position=c.style.position,f.style.marginTop=n+"px",f.style.marginLeft=o+"px",c.parentNode.insertBefore(f,c)}a(c).remove()}else a(d).unwrap()}),N.addFilter("imgHandle",[],function(b){var c,d,e,f,g,i,j,k,l,m=b.find("img"),n=m.length;if(n>0)for(m.attr("unselectable","on"),m.attr("data-cui-image")||m.attr("data-cui-media")||m.attr("data-cui-pagebreak")||m.attr("data-cui-image","true"),m.css("border-top-width")||m.css("border-width","0px");n--;)if(c=m[n],d=c.getAttribute("src"),e=c.getAttribute("cafeimg"),e||d&&h.pluginUtils.isSupportImageData(d))for(f=c.parentNode,g=parseInt(c.style.top)?parseInt(c.style.top):0,i=parseInt(c.style.left)?parseInt(c.style.left):0,j=parseInt(c.style.marginTop)?parseInt(c.style.marginTop):0,k=parseInt(c.style.marginLeft)?parseInt(c.style.marginLeft):0;"SPAN"===f.nodeName;)g+=parseInt(f.style.top)?parseInt(f.style.top):0,i+=parseInt(f.style.left)?parseInt(f.style.left):0,j+=parseInt(f.style.marginTop)?parseInt(f.style.marginTop):0,k+=parseInt(f.style.marginLeft)?parseInt(f.style.marginLeft):0,"absolute"===f.style.position?(c.style.position="absolute",0!==g&&(c.style.top=g+"px"),0!==i&&(c.style.left=i+"px"),0!==j&&(c.style.marginTop=j+"px"),0!==k&&(c.style.marginLeft=k+"px"),l=parseInt(f.style.zIndex),l&&(c.style.zIndex=l),f.parentNode.insertBefore(c,f)):f.firstChild===f.lastChild&&f.parentNode.insertBefore(c,f),f.firstChild?(f.style.zIndex="",f=f.parentNode):(a(f).remove(),f=c.parentNode);else a(c).remove()}),N.addFilter("emptySpan",[],function(b){for(var c,d,e=b.find("span"),f=e.length;f--;)c=e[f],d="true"===c.getAttribute("data-cui-pageBreak"),c&&c.childNodes&&!d&&0===c.childNodes.length&&a(c).remove()}),N.addFilter("distinguishDivAndTable",[],function(a){var b=a.find("table"),c=a.find("td"),d={originalDiv:{table:"cui-div",td:"cui-div-cell"},originalTable:{table:"cui-real-table",td:"cui-real-td"}},e=function(a,b,c){for(var d,e=a.length;e--;)d=a[e],d.classList.contains(c.originalDiv[b])?d.classList.contains(c.originalTable[b])&&d.classList.remove(c.originalTable[b]):d.classList.add(c.originalTable[b])};e(b,"table",d),e(c,"td",d)}),ba.ie||N.addFilter("appendBR",[],function(a){for(var b,c=a.find("li"),d=c.length;d--;)b=c.eq(d),0===b.contents().length&&b.append(Q.createElement("br"))}),O=new e({invalid_elements:$.invalid_elements,invalid_attributes:V},h.browser),ba.ie&&O.addFilter("addTargetToLink",[],function(a){for(var b,c=a.find("a"),d=c.length;d--;)b=c[d],b.hasAttribute("target")||b.setAttribute("target","_blank")}),O.addFilter("changeFontTag",[],function(a){var b,c,d,e;for(b=a.find("font"),c=b.length;c--;){for(d=b[c],e=document.createElement("span"),e.style.color=d.color,e.style.fontFamily=d.face;d.childNodes.length;)e.appendChild(d.childNodes[0]);d.parentNode.replaceChild(e,d)}}),O.addFilter("trimSpan",[],function(a){for(var b,c=a.find("span"),d=c.length,e=/^[\u200B\uFEFF]$/i;d--;)b=c.eq(d),e.test(b[0].innerHTML)&&!b.attr("data-cui-pagebreak")?(1===b[0].parentNode.childNodes.length&&(b[0].parentNode.innerHTML="&nbsp;"),b.remove()):0===b[0].attributes.length?b[0].childNodes.length>0?b.contents().unwrap():b.remove():b[0].getAttribute("id")===ca&&b.remove()}),ba.safari&&O.addFilter("removeDummyLine",[],function(b){var c=b.find("div.cui-dummyline");c&&0!==c.length&&a(c[0]).remove()}),(!ba.ie||ba.version<=10)&&N.addFilter("removeEbrAttr",null,function(a){for(var b,c=a[0].querySelectorAll("br[cui-ebr]"),d=c.length;d--;)b=c[d],b.removeAttribute("cui-ebr")}),N.addFilter("removeEmptyP",[],function(b,c){var d,e,f;if("public"===c||"html"===c)for(d=b.find("p"),f=d.length;f--;)e=d[f],e&&e.childNodes&&0===e.childNodes.length&&e.attributes&&0===e.attributes.length&&a(e).remove()}),Z.getDefaultFilter=function(a){return a===!0?O:N},Z.setHtmlParser=function(a){a&&(S=a)},Z.getHtmlParser=function(){return S},P.getSelection?Z.getSel=function(){return P.getSelection()}:Q.selection&&Q.selection.createRange&&"None"!==Q.selection.type&&(Z.getSel=function(){return Q.getSelection()}),Z.addGetFilter=function(a,b,c){a&&c&&(b=b?b:[],O.addFilter(a,b,c))},Z.addSetFilter=function(a,b,c){a&&c&&(b=b?b:[],N.addFilter(a,b,c))},Z.addParsingElemHandler=function(a,b,c,d){S&&a&&b&&c&&d&&S.addElementHandler(a,b,c,d)},Z.addParsingAttrHandler=function(a,b,c,d){S&&a&&b&&c&&d&&S.addAttrHandler(a,b,d)},Z.appendDummyLine=function(b){var c,d,e,f;return h.browser.safari?(c=a(b),f=h.getDoc(),d=f.createElement("div"),e=f.createTextNode("Â "),d.setAttribute("data-cui-filter","true"),d.className="cui-dummyline",d.appendChild(e),c.append(d),b):b},Z.isDummyLine=function(a){return h.browser.safari&&a&&"cui-dummyline"===a.className},Z.isFirstLeafNodeInSafari=function(a){var b,c,d,e,f;for(a=a||this.getRange(),b=a.startContainer,c=this.getAncestors(b),d=c.length;d--;)if(e=c[d],e.previousSibling&&(f=e.previousSibling,!Z.isDummyLine(f)))return!1;return!0},Z.isFirstOffsetOfFirstNodeInSafari=function(a){var b=this.getRange();return!!Z.isFirstLeafNodeInSafari(b)&&!(0!==b.startOffset||!b.collapsed&&!a.shiftKey)},Z.setContent=function(c,d){var e,f,g,i,j=this,k=d||{};return null!==c&&c!==b&&(a("table,th,td",R).removeData(),"string"==typeof c&&(e=c.match(/src="data:image[^"]*/g)),f=k.format||"html",g=!!k.skip,i=e&&e.length>0&&!(/text/i.test(f)||/dom/i.test(f)),j.insertContent(i?h.contentUtils.filterDataUriSrc(c,e):c,R[0],g,f,!0,i?e:null)),c},Z.insertContent=function(b,c,d,e,f,g){var i,j,k,l,m,o,p,q,r=this,s=c,t=h.editorManager.browser;if(s||(i=r.getRange(),i&&(s=i.startContainer,3===s.nodeType&&(s=H(s,null,i.startOffset)),i.collapsed||(s=s.previousSibling,h.execCommand("delete")))),s=a(s),W=!1,"string"==typeof b&&(b=J(b)),/text/i.test(e))f&&(R.contents().remove(),j=h.getBody(),k=h.createEmptyLine(),j=r.appendDummyLine(j),j.appendChild(k),i=r.createRange(),i.setStart(k,0),i.setEnd(k,0),i.collapse(!0)),""!==b&&(b=r.replaceSpaceWithNoBreakSpace(b),b=r.replaceTabWithNoBreakSpace(b),k&&k.lastChild&&k.removeChild(k.lastChild),h.contentUtils.insertTextByRange(b,i));else if(/dom/i.test(e)){if(f)for(l=R[0];l.firstChild;)l.removeChild(l.firstChild);for(j=a(b),/-valid$/i.test(e)||(j=N.parseDom(j),0===j.contents().length&&(b=h.createEmptyLine(!0),j.append(a(b)))),s=s[0],j=j[0].cloneNode?j[0].cloneNode(!0):j.clone()[0],s=r.appendDummyLine(s);j.firstChild;)s.appendChild(j.firstChild);Y.appendChild(j),Y.removeChild(j)}else{if(t.ie&&parseInt(t.version,10)<=9&&(b=b.replace(/<\!doctype\b[^>]*>/gi,"")),d||(o=N.extractHeadComments(b),b=o.contents,b=N.trimContent(b),b=N.colgroupFilter(b)),f&&(R.contents().remove(),/public/i.test(e)&&a(h.getHead()).contents().filter(function(a,b){var c=!1;return(8===b.nodeType||1===b.nodeType&&"cui-content-default"!==b.getAttribute("class"))&&(c=!0),c}).remove()),/text\-decoration\-line/i.test(b)&&(b=S.replaceTextDecoration(b)),j=N.parse(b,e),g&&g.length>0&&h.contentUtils.restoreDataUriSrc(j.find("img"),g),0===j.contents().length?(b=h.createEmptyLine(!0),j.append(a(b))):j=a(S.validDoc(j[0],T)),s=r.appendDummyLine(s),j.is("[data-cui-filter]")?(s.append(j.contents()),j.remove()):s.append(j),o&&o.comments.length>0)for(p=0,q=o.comments.length;p<q;p++)h.addCommentNode(o.comments[p]);m=v(R[0]),n(m),X&&(S.hasInvalidItem()||N.hasInvalid())&&h.alert(h.getText("alert.parser.invaliditem"))}},Z.getAncestors=function(a){var b,c,d=this,e=[];for(a||(c=d.getRange(),a=c.startContainer!==c.endContainer&&3===c.startContainer.nodeType&&c.startContainer.length===c.startOffset?c.endContainer:c.startContainer),b=a;b&&"BODY"!==b.nodeName;)e.push(b),b=b.parentNode;return e},Z.getClosest=function(a,b){var c,d,e;if(!a||!b)return null;for(e=b.toUpperCase().split(/[\s,]+/),d=e.length;a&&"BODY"!==a.nodeName;){for(c=0;c<d;c++)if(a.nodeName===e[c])return a;a=a.parentNode}return null},Z.getLineElement=function(a){var b=I(),c=b.length;return a=a-1>c?c-1:a-1,b[a]},Z.getLineCount=function(){var a=I();return a?a.length:1},Z.isCursor=function(){var a,b=this;return a=b.getRange(),a.collapsed||!1},Z.appendLinefeed=function(a){return a=a.replace(new RegExp("(<br(s?.*?)>)","ig"),"\n$1"),a=a.replace(new RegExp("\n<br></p>","ig"),"<br></p>"),a=a.replace(new RegExp("(</)("+c.LineElementsArr.join("|")+")>","ig"),"\n</$2>")},Z.getContent=function(b){var c,d,e,f,g,i=b||{},j=i.format||"html",l="";return e=h.getBody(),/text/i.test(j)?(l=e.innerHTML,l=l.replace(/<div.+?cui-dummyline.+?<\/div>/i,""),l=Z.appendLinefeed(l),c=h.getDoc().createElement("div"),d=a(c),d.append(l),o(c),l=h.pluginUtils.getPlainText(c),l=l.replace(/\u000A$/,""),d.remove()):/dom/i.test(j)?(h.pluginUtils.deselectItem(),l=e.cloneNode?e.cloneNode(!0):a(e).clone()[0],a(l).find("div.cui-dummyline").remove()):(f=p(),e=a(e).clone(),e=O.parse(e,j),g=q(),/public/i.test(j)?(h.configs.useDefaultStyleByLink&&(f=f.replace(h.configs.default_skins_path+h.configs.skin+"/view"+h.suffix+".css",h.configs.default_skins_path.replace(/https?\:\/\/([^\/:?#]+)(?:\:\d+)?/i,"http://www.samsung.net")+h.configs.skin+"/view"+h.suffix+".css")),l+=/^true$/i.test(fa)?f+"<body>"+a.trim(e.html())+"</body>\n</html>":f+"<body>"+a.trim(e.wrapInner('<div id="'+k+'"'+g+"></div>").html())+"</body>\n</html>"):(l+=O.toString(e,g),/html/i.test(j)&&(l=f+l+"\n</html>")),Y.appendChild(e[0]),Y.removeChild(e[0]),e=null,!da&&$.new_line_without_blank||(l=u(l))),"string"==typeof l&&(l=J(l)),l},Z.getContentWithBody=function(b,c){var d,e,f,g,i,j,l="";if(c=c||"html",b.find("div.cui-dummyline").remove(),/text/i.test(c))for(d=b.contents(),f=0,g=d.length;f<g;f++)e=d.eq(f),l+=e.text()+"\n";else i=p(),b=O.parse(b,c),j=q(),/public/i.test(c)?(h.configs.useDefaultStyleByLink&&(i=i.replace(h.configs.default_skins_path+h.configs.skin+"/view"+h.suffix+".css",h.configs.default_skins_path.replace(/https?\:\/\/([^\/:?#]+)(?:\:\d+)?/i,"http://www.samsung.net")+h.configs.skin+"/view"+h.suffix+".css")),l+=/^true$/i.test(fa)?i+"<body>"+a.trim(b.html())+"</body>\n</html>":i+"<body>"+a.trim(b.wrapInner('<div id="'+k+'"'+j+"></div>").html())+"</body>\n</html>"):(l+=O.toString(b,j),/html/i.test(c)&&(l=i+l+"\n</html>")),Y.appendChild(b[0]),Y.removeChild(b[0]),b=null,!da&&$.new_line_without_blank||(l=u(l));return l=J(l)},Z.createRange=function(){var a;return Q.createRange?a=Q.createRange():Q.selection.createRange&&(a=Q.selection.createRange()),a},Z.getCurrentNode=function(){var a,b,c,d=this;return(a=d.getRange())?(a.collapsed?c=a.commonAncestorContainer||a.startContainer:(b=d.getAncestors(a.startContainer),c=r(b,a.endContainer),"BODY"===c.nodeName&&(c=a.startContainer)),3===c.nodeType?c=c.parentNode:1!==c.nodeType&&(c=R[0]),c):R[0]},Z.getLeafNode=function(a,b){return v(a||R[0],b)},Z.getCurrentCol=function(a,b,c){var e,f,g=0;if(a||b){for(c=c||Z.getClosest(a,ea),e=v(c,!0),f=new d(e,c);e;){if(a===e){g+=b;break}3===e.nodeType?g+=e.length:1===e.nodeType&&"IMG"===e.nodeName&&(g+=1),e=f.next()}return g}},Z.compressSiblings=function(a,c){var d,e,f,g,h,j,k=[],l=a.length;for(h=c||i,d=0;d<l;d++){if(e=a[d],1===e.nodeType){if(j=h[e.nodeName],j=j!==b&&j,j?(f=v(e),g=w(a,f,d+1)):g=-1,g===-1)continue;d=g}k.push(e)}return k},Z.wrapElements=function(b,c){var d,e,f,g,h,i=[];for(c=c?a.trim(c.toUpperCase()):"SPAN",d=b.length,g=0;g<d;g++)f=b[g],h=f.nodeType,3===h?(e=Q.createElement(c),f.parentNode.insertBefore(e,f),x(e,f),i.push(e)):1===h&&(f.nodeName!==c&&(e=Q.createElement(c),x(e,f.childNodes),f.appendChild(e),f=e),i.push(f));return i},Z.getSelectedElements=function(a){var b,c,d,e,f,g,h,i,j,k,l,m;if(a=a||Z.getRange(),a.collapsed)g=[a.startContainer];else{if(a.startContainer===a.endContainer){if(3===a.startContainer.nodeType)d=a.startOffset,e=a.endOffset,h=[a.startContainer];else if(1===a.startContainer.nodeType){for(l=a.startContainer.childNodes,h=[],m=a.startOffset,k=l.length;m<k;m++)l[m]&&m<a.endOffset&&h.push(l[m]);d=0,i=h[h.length-1],e=3===i.nodeType?i.length:-1}}else i=z(a.startContainer,a.startOffset,!0),d=i.offset,b=i.node,b=b||v(a.startContainer,!0),i=z(a.endContainer,a.endOffset,!1),e=i.offset,c=i.node,c=c||v(a.endContainer,!1),h=s(b,c);if(k=h.length,1===k)g=B(h[0],d,e),g=s(g,v(g));else for(g=[],0===d&&(j=B(h[0],d,-1),j&&j!==h[0]&&g.push(j)),g.push(h[0]),f=1;f<k;f++)g.push(h[f])}return!a.collapsed&&g.length>0&&a.setStartBefore&&a.setEndAfter&&(a=Z.createRange(),f=g.length-1,i=g[f],a.setStartBefore(g[0]),a.setEndAfter(i),Z.setSingleRange(a)),g},Z.getSelectedBlocks=function(a,b){var c,d,e,f,g,i,k=this;return a=a||k.getRange(),b=b||j,a.collapsed||a.startContainer===a.endContainer&&a.startOffset===a.endOffset?(e=k.getAncestors(a.startContainer),e.length>0?(c=F(e,b),d=c[0]?[c[0]]:[]):1===a.startContainer.nodeType&&"BODY"===a.startContainer.nodeName?(d=[].slice.call(a.startContainer.children)||[],g=h.selectionChange.getLastSelectionNode(),g&&(d=[E(d,g)])):d=[a.startContainer]):(c=C(a.startContainer,a.startOffset,!0),i=C(a.endContainer,a.endOffset,!1),f=s(c,i),d=F(f,b)),d},Z.wrapSelection=function(a,b,c){var d,e,f=this;return a&&a.rangeCount>0&&(e=a.getRangeAt(0)||f.getRange()),d=f.getSelectedElements(e),d=f.compressSiblings(d,c),d=f.wrapElements(d,b)},Z.getCursorElement=function(a){var b,c,e,f,g,h=a.col;if(b=I()[a.line-1],b&&h>=0)for(f=v(b,!0),c=new d(f,b);f;){if(3===f.nodeType){if(h>f.length)h-=f.length;else if(0===h||h<=f.length){g=f,e=h;break}}else 1===f.nodeType&&"IMG"===f.nodeName&&(h=h>0?h-1:0);if(0===h){g=f,e=h;break}f=c.next()}return{node:g,elem:3===g.nodeType?g.parentNode:g,offset:e,lineElement:b}},Z.setCursorPosition=function(a){var b,c,e,f,g=this,h=R[0],i=g.createRange(),j=a.node,k=a.offset,l=a.line,m=a.lineElement,n=a.col,o=a.isRightside;if((!j||1&h.compareDocumentPosition(j))&&(j=null,n>=0&&(!m&&l>=0&&(f=I(),b=f.length,m=b>=l?f[l-1]:f[b-1]),m)))for(e=v(m,!0),c=new d(e,m);e;){if(3===e.nodeType){if(n>e.length)n-=e.length;else if(0===n||n<=e.length){j=e,k=n;break}}else 1===e.nodeType&&"IMG"===e.nodeName&&(n=n>0?n-1:0);if(0===n){j=e,k=n;break}e=c.next()}j?"BR"===j.nodeName?(i.setStartBefore(j),i.setEndBefore(j)):/^(:?hr|img)$/i.test(j.nodeName)?o?(i.setStartAfter(j),i.setEndAfter(j)):(i.setStartBefore(j),i.setEndBefore(j)):(i.setStart(j,k),i.setEnd(j,k)):(j=v(R[0],!1),3===j.nodeType?(i.setStart(j,j.length),i.setEnd(j,j.length)):1===j.nodeType&&("BR"===j.nodeName?(i.setStartBefore(j),i.setEndBefore(j)):(i.setStart(j,j.textContent.length),i.setEnd(j,j.textContent.length)))),i.collapse(!0),g.setSingleRange(i)},Z.setTextRange=function(a,b){var c,d,e=R[0],f=a.parentNode,g=f.firstChild,h=0;if(3===a.nodeType&&g!==f.lastChild){for(;g&&g!==a;)h+=g.textContent.length,g=g.nextSibling;b=h+b}c=3===a.nodeType?a.parentNode:1===a.nodeType?a:null,c&&(d=e.createTextRange(),d.moveToElementText(c),d.moveStart("character",b),d.moveEnd("character",b),d.collapse(!0),d.select())},Z.replaceSpaceWithNoBreakSpace=function(a){return a.replace(/\u0020/g,"Â ")},Z.replaceTabWithNoBreakSpace=function(a){var b,d=c.TAB_COUNT,e="";for(b=0;b<d;b++)e+="Â ";return a.replace(/\u0009/g,e)},Z.getCol=function(a,b,c,e){for(var f=0,g=v(a,!0),h=new d(g,a);g;){if(3===g.nodeType&&b!==g?f+=g.length:1===g.nodeType&&"IMG"===g.nodeName&&(f+=1),g===b){1===g.nodeType?("IMG"!==g.nodeName||e||(f-=1),f+=g.innerText.length):f+=c;break}g=h.next()}return f},Z.getCursorPosition=function(a,b){var c,d,e,f=this,g=null,i=!0;return e=b?b.cloneRange():f.getRange().cloneRange(),e?(c=a?e.endContainer:e.startContainer,d=a?e.endOffset:e.startOffset,f.isDummyLine(c)&&(c=c.nextSibling,d=0),i=e.collapsed):(c=R[0].firstChild,h.browser.safari&&(c=c.nextSibling),d=0),g=M(c,d,f.getClosest,a),g.offset=g.node!==c?0:d,g.collapsed=i,g.range=e,g},Z.getRange=function(){var a,b,c,d,e,f=this;return a=f.getSel(),a.rangeCount>0?b=a.getRangeAt(0):h.lastRange?b=h.lastRange:(b=a.createRange?a.createRange():Q.createRange(),c=R[0].firstChild||R[0],b.setStart(c,0),b.setEnd(c,0)),ba.safari&&(d=f.getClosest(b.startContainer,"div"),d&&f.isDummyLine(d)&&(d.nextSibling?b.setStart(d.nextSibling,0):(e=h.createEmptyLine(),h.getBody().appendChild(e),b.setStart(e,0))),d=f.getClosest(b.endContainer,"div"),d&&f.isDummyLine(d)&&b.setEnd(d.nextSibling,0)),b},Z.selectAll=function(){var a,b,c=this,d=R[0],e="selectAll",f=function(){var a,d,e,f,g;b=c.getRange(),ba.ie||!b||b.collapsed||"HTML"!==b.commonAncestorContainer.nodeName||(a=b.startContainer,a&&"HTML"===a.nodeName&&(d=b.startOffset,e=a.childNodes,f=e[d<e.length?d:0],f&&"BODY"===f.nodeName&&(a=f.firstChild,g=f.lastChild,b.setStart(a,0),b.setEnd(g,3===g.nodeType?g.length:g.childNodes.length),c.setSingleRange(b))))},g=function(){var a,b=c.getRange(),d=b.endContainer,e=b.endOffset,f=c.getClosest(b.startContainer,"div");f&&c.isDummyLine(f)&&(a=f.nextSibling,h.contentUtils.isLineNode(a)?(b.setStart(a.firstChild,0),b.setEnd(d,e)):(b.setStart(a,0),b.setEnd(d,e))),c.setSingleRange(b)};h.browser.ie&&h.isEmpty()||(Q.queryCommandSupported&&Q.queryCommandSupported(e)?(a=c.getSel(),h.browser.ie&&0===a.rangeCount&&(b=c.getRange(),a.addRange(b)),Q.execCommand(e),h.browser.safari?g():f()):d.createTextRange?(b=d.createTextRange(),b.moveToElementText(d),b.select()):(b=c.createRange(),b.selectNodeContents(d),c.setSingleRange(b)),h.selectionChange.contentChanged())},Z.setRange=function(a,b,c,d,e){var f=this,g=f.createRange();return a===c&&b===d&&b>=0?"IMG"===a.nodeName||"BR"===a.nodeName?(g.setStartBefore(a),e?g.setEndBefore(a):g.setEndAfter(c)):g.setStart(a,b):(b<0?g.setStartBefore(a):g.setStart(a,b),d<0?g.setEndAfter(c):g.setEnd(c,d)),f.setSingleRange(g)},Z.setSingleRange=function(a){var b;if(a)try{b=Z.getSel(),b.removeAllRanges(),b.addRange(a),h.lastRange=a.cloneRange()}catch(a){console&&console.log(a.toString())}return a},Z.selectElement=function(a){var b=this,c=b.createRange();return c.setStartBefore(a),c.setEndAfter(a),b.setSingleRange(c)},Z.getSelectionFromIFrame=function(a){var b=a.contentWindow,c=b.document;return b.getSelection?b.getSelection():c.selection&&c.selection.createRange&&"None"!==c.selection.type?c.getSelection():void 0},Z.getRangeFromIFrame=function(a){var b,c,d=this,e=d.getSelectionFromIFrame(a),f=a.contentWindow,g=f.document,h=g.getElementsByTagName("body")[0];return e.rangeCount>0?b=e.getRangeAt(0):(b=e.createRange?e.createRange():Q.createRange(),c=h.firstChild||h,b.setStart(c,0),b.setEnd(c,0)),b},Z.addRangeToIframe=function(a,b){var c=this,d=c.getSelectionFromIFrame(a);d&&b&&(d.removeAllRanges(),d.addRange(b))},Z.getRangeFromEvent=function(a){var b,c,d=h.getDoc();if(d.caretPositionFromPoint)c=d.caretPositionFromPoint(a.clientX,a.clientY),b=d.createRange(),b.setStart(c.offsetNode,c.offset),b.collapse(!0);else if(d.caretRangeFromPoint)b=d.caretRangeFromPoint(a.clientX,a.clientY);else if(d.body.createTextRange){b=d.body.createTextRange();try{b.moveToPoint(a.clientX,a.clientY),b.collapse(!0),b.select()}catch(c){b.collapse(a.clientY<d.body.clientHeight)}b=Z.getRange()}return b},Z.evadeVoidElement=function(a){var b,d,e,f,g,h=this,i=a.startContainer;if(a.collapsed&&c.VoidElements[i.nodeName]){for(b=i.parentNode,d=b.childNodes,e=0,f=d.length;e<f;e++)if(i===d[e]){g=e;break}g>=0&&(a=null,a=h.createRange(),a.setStart(b,g),a.setEnd(b,g),a.collapse(!0))}return a},Z.destroy=function(){var a=Z.getSel();ea=null,a&&a.removeAllRanges(),S.destroy(),P=null,Q=null,R=null,Y=null,X=null,U=null,V=null,T=null,S=null,N=null,O=null,Z=null,$=null,_=null,aa=null,ba=null,ca=null,da=null,fa=null,W=null},Z}var i={SPAN:!0,TABLE:!1,THEAD:!1,TBODY:!1,TR:!1,TD:!0,TH:!0,EM:!1,STRONG:!1,STRIKE:!1,I:!1,B:!1,U:!1,SUB:!1,SUP:!1,H1:!1,H2:!1,H3:!1,H4:!1,H5:!1,H6:!1},j=c.LineBlockElements,k=c.CONTENTS_ID;return h}),d("HistoryManager",["jqueryCafe","utilities/EditorConstants"],function(a,c){function d(d){function e(a){var b,c;if(a&&a.images){for(c=a.images.length,b=0;b<c;b++)a.images[b]=a.images[b].cloneNode();f(a.snapShot.getElementsByClassName("cui-temp-img-wrap"),a.images),a.images=null}}function f(a,b){var c;if(a&&b)for(c=b.length-1;c>=0;c--)a[c].parentNode.replaceChild(b[c],a[c])}function g(){var a,b="dom";F&&(D=C.length-1,D=D>0?D:0,F=!1,G=!0),D>0&&(a=C[--D],a&&a.snapShot&&(a.visited===!0&&(b+="-valid"),e(a),y.setContent(a.snapShot,{format:b}),a.visited=!0,s(a.cursor)))}function h(){var a,b,c="dom";D<C.length-1&&(D++,a=C[D],a||(a={}),e(a),b=a.snapShot||x,a.visited===!0&&(c+="-valid"),y.setContent(b,{format:c}),a.visited=!0,a.cursor&&s(a.cursor))}function i(){G&&(G=!1,F=!0,x=null,D=-1)}function j(){v&&(A=setTimeout(function(){A=null,d.trigger("documentmodified")},0))}function k(a){return a&&a.snapShot&&(z.appendChild(a.snapShot),z.removeChild(a.snapShot),a.snapShot=null,a.command=null,a.type=null,a.cursor=null,a.images=null),a}function l(a){var b,c,e=C.length;G&&(e>D&&(b=C.splice(D+1,e-1),k(b),b=null),i()),e>=w&&(b=C.shift(),k(b),b=null),c=C[C.length-1],c&&c.snapShot===a.snapShot||(C.push(a),/createdocument/.test(a.command)||(d.trigger("historyadded",a.command),j()))}function m(a,b,c){var d,e=C.length;b&&(e>a||e>=a&&c)&&(d=C[a],k(d),b.isReplaced=!0,C[a]=b)}function n(b,c,e){var g,h,i,j,k,l,m={command:b?b:"typing",type:c?c:3,snapShot:null,images:null};for(i=a("img",d.getBody()),h=i.length,h>0&&(k=y.getRange(),l={startContainer:k.startContainer,startOffset:k.startOffset,endContainer:k.endContainer,endOffset:k.endOffset}),g=0;g<h;g++)j=d.getDoc().createElement("DIV"),j.className="cui-temp-img-wrap",i[g].parentNode.replaceChild(j,i[g]);return m.images=i,m.snapShot=y.getContent({format:"dom"}),f(d.getBody().getElementsByClassName("cui-temp-img-wrap"),i),l&&y.setRange(l.startContainer,l.startOffset,l.endContainer,l.endOffset),m.cursor=e||y.getCursorPosition(!0),m}function o(){return G&&D!==-1&&D<C.length-1}function p(){var a,b=!1;return E&&(a=n("typing"),l(a),H=!0,b=!0),E=!1,b}function q(){var a;return E||(E=!0,H=!1,o()&&(a=C.splice(D+1,C.length-1),k(a),a=null,i(),d.trigger("historyadded"))),E}function r(a,b){var c,d=C.length,e=d>1?C[d-1]:null,f=/^(?:delete|newline|symbol)$/gi;E?f.test(a)||p():H&&e&&"typing"===e.command&&!I?H=!1:(c=n(a,8,b),!I&&f.test(a)&&e&&e.command===a&&!G?m(d-1,c):(H&&!I&&(c.command="typing",H=!1),l(c),I=!1))}function s(a){a&&(a.line===-1&&(a.line=1,a.col=0),y.setCursorPosition({line:a.line,col:a.col,isRightside:a.isRightside}),d.scrollTo(),j(),d.trigger("historychanged"),d.selectionChange.contentChanged())}function t(a){var b,c=d.browser.safari?a.children[1]:a.firstChild,e=c?c.nodeName:"";c!==a.lastChild||J[e]||(c?(b=d.getDoc().createElement("P"),a.appendChild(b),b.appendChild(c)):b=d.insertEmptyLine(a),d.selectionManager.setRange(b,0,b,0))}function u(){var b=d.getBody(),c=d.browser,e=function(){var a=b.firstChild;return c.ie?a&&a===b.lastChild&&null===a.firstChild:d.isEmpty()};a(b).on("keydown.cafe",function(a){var b=a.keyCode;if(d.isSpellcheckMode&&d.isSpellcheckMode())return void(8===b&&(a.stopPropagation(),a.preventDefault()));switch(b){case 8:return(e()||c.safari&&y.isFirstOffsetOfFirstNodeInSafari(a))&&(a.stopPropagation(),a.preventDefault()),void p();case 37:return void(e()||c.safari&&y.isFirstOffsetOfFirstNodeInSafari(a)?(a.preventDefault(),a.stopPropagation()):(p(),I=!0));case 38:case 39:case 40:case 33:case 34:case 35:case 36:return p(),void(I=!0);case 13:case 27:case 45:case 46:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:case 123:return void p();case 112:return a.stopPropagation(),a.preventDefault(),void p()}(b>=65&&b<=90||b>=48&&b<=57||229===b||190===b||32===b)&&(a.altKey||a.ctrlKey||a.metaKey||q())}).on("keyup.cafe",function(a){var e,f=a.keyCode;if(!d.isSpellcheckMode||!d.isSpellcheckMode()){switch(f){case 8:case 46:if(a.altKey||a.shiftKey)return;c.webkit&&t(b),e="delete";break;case 13:a.altKey||a.ctrlKey||a.metaKey||(e="newline")}e&&r(e)}}),a(d.getDoc()).on("click mousedown",function(){d.isSpellcheckMode&&d.isSpellcheckMode()||(p(),I=!1)}),d.on("editorcreate newdocumentcommand",function(a){var b=/editorcreate/i.test(a.type)?"createdocument":"newdocument";d.historyManager.clean(),l(n(b))}),d.on("documentchanged",function(a,b){var c,d;d=b&&b.range?b.range:null,d&&(c=y.getCursorPosition(!1,d)),r("documentchanged",c),a.preventDefault(),a.stopPropagation()}),d.on("historypushed",function(){r("historypushed")}),d.on("historyinitialize",function(){d.initRecord=n("initHistory"),m(0,d.initRecord,!0)})}var v,w,x,y,z,A,B=this,C=[],D=0,E=!1,F=!0,G=!1,H=!1,I=!1,J=c.toMap("p,h1,h2,h3,h4,h5,h6,ol,ul,table,blockquote");w=d.configs.history_max_length||20,d.configs.enable_doc_modified_event===b&&(d.configs.enable_doc_modified_event=!1),v=d.configs.enable_doc_modified_event,z=d.getDoc().createDocumentFragment(),y=d.selectionManager,B.stopTyping=function(){return p()},B.push=function(a){a&&l(a)},B.undo=function(){var a=this;return p(),!!a.canUndo()&&(g(),!0)},B.redo=function(){var a=this;return p(),!!a.canRedo()&&(h(),!0)},B.canUndo=function(){if(C.length>=1){if(F)return 1!==C.length;if(G&&D>=1&&D<C.length)return!0}return!1},B.canRedo=function(){return o()},B.clean=function(){var a,b;for(a=0,b=C.length;a<b;a++)k(C[a]),C[a]=null;C=[],D=0,E=!1,F=!0,G=!1},B.current=function(){return{queue:C,idx:D}},u(),B.destroy=function(){B.clean(),A&&clearTimeout(A),A=null,B=null,C=null,D=null,E=null,F=null,G=null,H=null,I=null,v=null,J=null,w=null,x=null,y=null,z=null}}return d}),d("CommandHelper",["jqueryCafe","utilities/EditorConstants"],function(a,b){function c(b){function c(){var a=[{command:"indent",tag:"p",type:d,style:{name:"marginLeft",value:"20px"}},{command:"outdent",tag:"p",type:d,style:{name:"marginLeft",value:"20px"}},{command:"ForeColor",tag:"span",type:d,style:{name:"color",value:"20px"}},{command:"BackColor",tag:"span",type:d,style:{name:"color",value:"20px"}},{command:"fontName",tag:"span",type:d,style:{name:"fontFamily",value:"20px"}},{command:"justifyCenter",tag:"p",type:d,style:{name:"align",value:"center"}},{command:"justifyLeft",tag:"p",type:d,style:{name:"align",value:"left"}},{command:"justifyRight",tag:"p",type:d,style:{name:"align",value:"right"}}],c=[{command:"fontSize",type:e,tag:"span",style:{name:"fontSize",value:"10pt"}}],h=[{command:"undo",type:f,shortcut:i?"command+Z":"Ctrl+Z",action:function(){return b.historyManager.undo()}},{command:"redo",type:f,shortcut:i?"command+Y":"Ctrl+Y",action:function(){return b.historyManager.redo()}},{command:"copy",type:f,shortcut:i?"command+C":"Ctrl+C",action:function(){return b.commandManager.copy({command:"copy",type:f}),!0}},{command:"cut",type:f,shortcut:i?"command+X":"Ctrl+X",action:function(){return b.commandManager.cut({command:"cut",type:f}),!0}},{command:"paste",type:f,shortcut:i?"command+V":"Ctrl+V",action:function(){return b.commandManager.paste({command:"paste",type:f}),!0}}];i&&h.push({command:"redo4mac",type:f,shortcut:"command+shift+Z",action:function(){return b.historyManager.redo()}}),g(a),g(c),g(h)}function g(a){for(var c,d=a.length;d--;)c=a[d],j&&"paste"===c.command||b.addCommand(c)}var h=this,i=!(!b.os||!b.os.mac),j=b.isPluginLoaded("expaste");h.applyStyle=function(c,d,f){var g,h,i,j,k,l;if(d.style){for(j=b.selectionManager,d.type===e&&(c=j.compressSiblings(c,d.validTags),c=j.wrapElements(c,d.tag)),k=d.style.name,l=f||d.style.value,c=c.get?c:a(c),h=c.children(),g=h.length;g--;)i=h.eq(g),i.css(k,"");for(g=c.length;g--;)i=c.eq(g),i.css(k,l);return!0}return!1},h.destroy=function(){h=null,i=null,j=null},c()}var d=b.CommandTypes.NATIVE_COMMAND,e=b.CommandTypes.CUSTOM_COMMAND,f=b.CommandTypes.SYSTEM_COMMAND;return c}),d("CommandManager",["jqueryCafe","utilities/EditorConstants"],function(a,b){function c(b,c){function e(a){var b=m.getContent({format:"dom"}),c=m.getCursorPosition(!0);return{command:a.command,type:a.type,cursor:{line:c.line,col:c.col,isRightside:c.isRightside},snapShot:b}}function j(a){var b,c,d;if("[object Array]"===Object.prototype.toString.call(a))for(b={},c=a.length;c--;)d=a[c],"string"==typeof d&&(b[d.toUpperCase()]=!0);return b}function k(a){var c,d,e=b.pluginUtils,f=b.lockUtils,g=function(a){var c,d,e,g,h;if(c=a?a.length:0)for(d=0;d<c;d++){if(e=b.selectionUtils.getSelectedElements(!0,!1,a[d]),g=e.shift(),f.hasLockedStyleWithParent(g))return!0;if(h=e.pop(),h&&g!==h&&f.hasLockedStyleWithParent(h))return!0;if(f.hasLockedStyle(e))return!0}return!1};if("textmode"!==a&&"editmode"!==a&&"import.template"!==a&&"findreplace_replace"!==a&&"findreplace_replaceAll"!==a){if(/paragraphformat|fontname|fontsize|bold|italic|underline|strikethrough|superscript|subscript|fontcolor|fontbgcolor/.test(a)||(c=!0),d=e.getSelectedCells(),d&&d.length&&f.hasLockedCell(d))return!0;switch(a){case"paragraphformat":case"changeliststyle":case"releaselist":case"bulletedlist":case"numberedlist":case"indent":case"outdent":case"alignment.left":case"alignment.center":case"alignment.right":case"alignment.justify":if(g(m.getSelectedBlocks()))return!0;break;default:if(f.isLockedSelection(c))return!0}}return!1}var l,m,n,o,p,q,r,s,t=this,u={};u={},l=b.configs,m=b.selectionManager,q=b.shortcutManager,p=b.historyManager,n=b.getDoc(),s=n.createDocumentFragment(),r=l.use_collaborate||!1,t.addCommand=function(a){var b,c,d,e=this;return!!a&&(b=a.command,c=a.type,!(1===c&&!e.canUseCommand(b))&&(a.shortcut&&(d=q.addShortcut(a.shortcut,a.command)),a.shortcut=d,a.tag=a.tag||"span",a.validTags=j(a.validTags),u[b.toLowerCase()]=a,!0))},t.execCommand=function(d,j){var l,n,q,r,t,v,w,x=this,y=null;if("string"==typeof d&&(d=d.toLowerCase(),n=u[d])){if(y=n.action,r=n.type,b.trigger(d+"beforecommand"),r!==i){w=/^custom_/.test(d),w||(l=e(n),p.stopTyping());try{k(d)?v=!1:r===f?(t=!0,v=o(n.command,!1,j,t)):r===h?v=!!y&&y.call(x,m.getRange(),j,n):(y=y||c.applyStyle,r===g?(b.selectionUtils.reRangeByShiftEnd(),q=m.getSelectedBlocks(null,n.validTags)):q=m.getSelectedElements(),v=y.call(x,q,a.extend({},n),j))}catch(a){console.error(a),v=!1}if(w)return!0;v?(s.appendChild(l.snapShot),s.removeChild(l.snapShot),l=null,l=e(n),p.push(l)):(b.uiManager.isAlertOpened()||b.focus(),m.setContent(l.snapShot,{format:"dom"}),m.setCursorPosition(l.cursor),v=!1)}else d.match("checklock")&&k(d)?(y(!0),v=!1):(y(null,a.extend({},n),j),v=!0);return v?b.trigger(d+"command",n):b.trigger("executionfailed",n),!0}return!1},t.canUseCommand=function(a){
return a=a.toLowerCase(),n.queryCommandSupported(a)},t.getShortcut=function(a){var b;return a=d(a.toLowerCase()),b=u[a],b&&b.shortcut?b.shortcut:""},o=t.canUseCommand("styleWithCSS")?function(a,b,c,d){var e=!!d&&d;return n.execCommand("styleWithCSS",e,e),n.execCommand(a,b,c)}:function(a,b,c){return n.execCommand(a,b,c)},t.copy=function(){return!0},t.cut=function(a){var b=e(a);return p.push(b),!0},t.paste=function(a){var b=e(a);return p.push(b),!0},t.destroy=function(){t=null,u=null,l=null,m=null,n=null,o=null,p=null,q=null,r=null,s=null}}var d=a.trim,e=b.CommandTypes,f=e.NATIVE_COMMAND,g=e.CUSTOM_COMMAND_BLOCK,h=e.CUSTOM_COMMAND_RANGE,i=e.SYSTEM_COMMAND;return c}),d("ShortcutManager",["jqueryCafe"],function(a){function b(a){return a>=112&&a<=123}function c(a){function b(a){return f.keyCode?void(f.keyCode=-1):void(f.keyCode=a)}for(var c,d=a.toLowerCase().split("+"),e=d.length,f={alt:!1,ctrl:!1,shift:!1,meta:!1,charCode:null,keyCode:null};e--;)switch(c=d[e]){case"alt":case"ctrl":case"shift":f[c]=!0;break;case"command":f.meta=!0;break;case"option":f.alt=!0;break;case"backspace":b(8);break;case"tab":b(9);break;case"enter":b(13);break;case"pageup":b(33);break;case"pagedown":b(34);break;case"end":b(35);break;case"home":b(36);break;case"left":b(37);break;case"up":b(38);break;case"right":b(39);break;case"down":b(40);break;case"insert":b(45);break;case"delete":b(46);break;default:if(h[c])b(h[c]);else{if(1!==c.length){f.keyCode=-1;break}f.charCode=c.charCodeAt(0),b(h[c]||c.toUpperCase().charCodeAt(0))}}return f}function d(a){var c;return c=a>=65&&a<=90||a>=48&&a<=57?String.fromCharCode(a):b(a)?"F"+(a-111):a}function e(e){function h(a,b,c,d,e){var f="";return f+=a?"ctrl+":"",b&&(f+=l?"command+":"meta+"),c&&(f+=l?"option+":"alt+"),f+=d?"shift+":"",f+=e}function i(a,b){var e=c(a);return e.keyCode&&e.keyCode!==-1?(e.command=b,e.pattern=h(e.ctrl,e.meta,e.alt,e.shift,e.keyCode),e.stringPattern=h(e.ctrl,e.meta,e.alt,e.shift,d(e.keyCode)).toUpperCase(),e):null}function j(a,b,c){var d,h=!1;return n.done||(c?(d=c.command,g.indexOf(d)>=0&&("cut"===d&&(e.historyManager.stopTyping(),f=e.lastRange.collapsed),n.keydownKeyCode=b,n.definedValue=c.definedValue,n.command=d,n.done=!1,h=!0)):n.keydownKeyCode===b&&(d=n.command,g.indexOf(d)>=0&&("cut"===d&&f||(e.execCommand(d,n.definedValue),n.done=!0),h=!0))),"keyup"===a&&n.keydownKeyCode===b&&(n={}),h}var k=this,l=!(!e.os||!e.os.mac),m={},n={};k.genPattern=h,a(e.getBody()).on("keydown",function(a){var c,d="";(a.altKey||a.ctrlKey||a.metaKey||b(a.keyCode))&&(d=h(a.ctrlKey,a.metaKey,a.altKey,a.shiftKey,a.keyCode),c=m[d]),(!e.isSpellcheckMode||!e.isSpellcheckMode()||c&&"spellcheck"===c.command)&&(j(a.type,a.keyCode,c)||c&&(a.preventDefault(),a.stopPropagation(),e.execCommand(c.command,c.definedValue)))}).on("keyup",function(a){e.isSpellcheckMode&&e.isSpellcheckMode()||j(a.type,a.keyCode)}),k.addShortcut=function(a,b){var c;return"string"==typeof b&&(c=i(a,b))?(m[c.pattern]=c,c.stringPattern):null},k.getCommand=function(a){var b,c;return a?(c=k.getParsedPattern(a),b=m[c],b?b.command:null):null},k.getParsedPattern=function(a){var b,d;return a?(b=c(a),b.keyCode&&b.keyCode!==-1?d=h(b.ctrl,b.meta,b.alt,b.shift,b.keyCode):null):null},k.externalKeyDownCallbacks={},k.externalKeyDownHandler=function(a){var b,c=h(a.ctrlKey,a.metaKey,a.altKey,a.shiftKey,a.keyCode),d="custom_"+c;b=k.externalKeyDownCallbacks[d],b&&b.worksOnPreview&&(a.preventDefault(),b.callback())},k.destroy=function(){k=null,l=null,m=null,n=null}}var f,g=["copy","paste","cut"],h={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123};return e}),d("FocusManager",[],function(){function a(a){function b(b,d){var e;d&&(e=d.$,d.on("editorcreate",function(){var b=d.browser,f=d.getDoc(),g=d.getBody(),h=e(g),i=d.selectionManager;d.on("editorfocus",function(){var a,b,c,h,j=d.lastRange;j||(j=i.getRange()),j.startContainer?(a=f.createRange(),a.setStart(j.startContainer,j.startOffset),a.setEnd(j.endContainer,j.endOffset)):a=j,j.startContainer===g&&(b=e("p",g).last()[0],b?d.contentUtils.isEmptyLine(b)&&(h=b.parentNode,c=d.createEmptyLine(),h.replaceChild(c,b),b=c):(b=d.createEmptyLine(),g.appendChild(b)),a.selectNodeContents(b),a.collapse(!1)),i.setSingleRange(a),d.isFocused()||d.focus(!0)}),h.on("focus"+c,function(){d.trigger("editorfocused")}).on("blur"+c,function(){d.isFocused()&&(a.focusedEditor=null)}),b.ie&&9===parseInt(b.version,10)&&h.on("mouseup"+c,function(a){2===a.button&&h.focus()})}))}var c=".cui-focus-manager";a.on("editoradd",b)}return a.prototype.removeFocusEventHandlers=function(a){var b;a&&(b=a.$(a.getBody()),a.off("editorfocus"),b.off(".cui-focus-manager"))},a}),d("utilities/ContentUtils",["utilities/NodeTracker","utilities/EditorConstants"],function(a,c){function d(d){function m(){var a;return!(!L||(a=d.pluginUtils,!a.getSelectedItem()))&&(a.deselectItem(!0),!0)}function n(a){var b,f,g,h,i,j=a||H.getRange(),k=j.startContainer,l=j.endContainer,m=j.endOffset;if(!j.collapsed)if(d.isEmpty()&&e[k.nodeName])j.setStart(k,0),j.setEnd(k,0),H.setSingleRange(j);else if(k===l&&A(k))j.setStart(k,0),j.setEnd(k,0),H.setSingleRange(j);else if(K.ie&&"BODY"===l.nodeName&&(m=m===l.childNodes.length?l.childNodes.length-1:m-1,"TABLE"!==l.childNodes[m].nodeName&&(l=H.getLeafNode(l.childNodes[m],!1),j.setEndAfter(l))),H.setSingleRange(j),I.execCommand("Delete",!0,null),j.collapsed||(j=H.getRange()),K.ie&&(b=H.getSelectedBlocks(),b&&b.length>0&&(f=b[0],f.firstChild&&c.StyleElements[f.firstChild.nodeName]&&""===f.textContent&&f.removeChild(f.firstChild))),"BODY"===j.startContainer.nodeName){for(b=H.getSelectedBlocks(),i=b.length,h=i-1;h>=0;h--)f=b[h],"BR"===f.nodeName&&(f.remove(),b.pop());b.length!==i&&(k=j.startContainer,g=I.createElement("P"),0===b.length?k.appendChild(g):k.childNodes&&k.childNodes.length>j.startOffset&&k.insertBefore(g,k.childNodes[j.startOffset]),j.setStart(g,0),j.setEnd(g,0),H.setSingleRange(j)),j=H.getRange()}return j}function o(a,b){var c,d=I.createElement(a);if(b)for(c in b)d.setAttribute(c,b[c]);return d}function p(a){var b=a.endContainer,c=b.parentNode;a.collapsed&&("A"===b.nodeName?b.childNodes.length===a.endOffset?(a.setStartAfter(b),a.setEndAfter(b)):0===a.endOffset&&(a.setStartBefore(b),a.setEndBefore(b)):c&&"A"===c.nodeName&&3===b.nodeType&&(c.lastChild===b&&b.length===a.endOffset?(a.setStartAfter(c),a.setEndAfter(c)):c.firstChild===b&&0===a.endOffset&&(a.setStartBefore(c),a.setEndBefore(c))))}function q(b,c,e,f,g){var h,i,k,l,m=new a(e,c),n=f,o="",p=!1;for(h=m.current();h&&h!==c;){if(3===h.nodeType&&n>=0){if(k=h.textContent,o=k+o,d.zwsUtils.isZeroWidthSpaceChar(k)&&1===n&&h===e)break;if(i=r(k,n,g),0===i&&h!==e){p&&g&&0!==h.length&&(l=k.lastIndexOf("Â "),l=l===-1?k.lastIndexOf(" "):l,l!==-1&&l+1<k.length&&b.setStart(h,l+1));break}if(i!==-1){i!==f?g&&i+1<=k.length?b.setStart(h,i+1):!g&&i+1<=k.length&&b.setEnd(h,i):!g&&0!==i&&h.length>i&&b.setEnd(h,i);break}g?b.setStart(h,0):b.setEnd(h,k.length),p=!0}else if(1===h.nodeType&&!j[h.nodeName])break;g?(h=m.prev(),n=h&&3===h.nodeType?h.length-1:0):(h=m.next(),n=h&&3===h.nodeType?0:1)}}function r(a,b,c){for(var d,e=a.length,f=0!==e&&b===e?b-1:b,g=!1;f<e&&f>=0&&(d=a[f],!(g=/\s/.test(d)));)f=c?f-1:f+1;return g?f:-1}function s(a,b,c){for(var d,e,f=a;f&&"BODY"!==f.nodeName&&(d=b[f.nodeName],!d||(e=f,c));)f=f.parentNode;return e}function t(a,b,c){for(var d,e,f=a;f&&"BODY"!==f.nodeName&&(d=b(f),!d||(e=f,c));)f=f.parentNode;return e}function u(a,b,c){var d,e=a,f=e.nodeType,g=a.parentNode;return 1===f&&(e=c?a.previousSibling:a.nextSibling,e&&1!==e.nodeType||(e=I.createTextNode(""),c?g.insertBefore(e,a):g.insertBefore(e,a.nextSibling))),3===e.nodeType&&(d=c?0:e.length,e.nodeValue=C(e.nodeValue,d,b)),e}function v(a,b,c,d){var e,f,g,h,i;if(f=a.parentNode,d?(a.appendChild(b),f=a):c?f.insertBefore(b,a):(e=a.nextSibling,e?f.insertBefore(b,e):f.appendChild(b)),O.isLineNode(f))for(g=N(f).children("br"),i=g.length;i--;)h=g[i],f===h.parentNode&&h.parentNode.removeChild(h);return b}function w(a){for(var b,c=!0,d=a.length;d--;)if(b=a[d],"BR"!==b.nodeName){c=!1;break}return c}function x(a){for(var b,c=a.childNodes,d=c.length,e=!1;d--;)if(b=c[d],8===b.nodeType){e=!0;break}return e}function y(a,b){return a.length<1&&"â"===b||(!!(a.length<1&&2===b.length&&/\u200B\u00A0|\u00A0\u200B/.test(b))||(1===a.length&&"BR"===a[0].nodeName&&"â"===b||!(2!==a.length||!j[a[0].nodeName]||"â"!==b||"BR"!==a[1].nodeName)))}function z(a,b,c){var d=a.textContent||"",e=a.children||[];return!(0!==d.length||x(a)||0!==e.length&&!w(e))||(!!(!b&&e.length<1&&1===d.length&&/[\s\uFEFF\xA0\n]/.test(d))||!!c&&c(e,d))}function A(d){var f=!1,g=d.firstChild,h=l,i=new a(g,O),j=c.NodeTypes;if(!e[d.nodeName])return f;if(h[d.nodeName])return!1;if(O.nodeType===j.ELEM_NODE&&null===g)return!0;for(;g&&g!==d;){switch(g.nodeType){case j.ELEM_NODE:f=h[g.nodeName],f=f===b||!f;break;case j.TEXT_NODE:f=0===g.textContent.length;break;case j.COMMENT_NODE:f=!1}if(!f)break;g=i.next()}return f}function B(a){var b,c=N(a).children(),d=a.innerText||a.textContent;M||0!==c.length||0!==d.length||(b=I.createElement("br"),b.setAttribute("class","cui-temp-br"),a.appendChild(b))}function C(a,b,c){var d=a.length;return b>=0?a.substring(0,b)+c+a.substring(b,d):c+a}function D(a){var b=a.nodeName||a.tagName;return h[b]}function E(a,b){var c="br"+(b?"."+b:"");O.isEmptyLine(a)||N(a).children(c).remove()}function F(a,b,c){var d,e,f=a.nodeName||a.tagName;if(d=H.createRange(),!a.parentNode)return d;if("IMG"===f||"BR"===f||"HR"===f)d.setStartAfter(a),d.setEndAfter(a);else if(/^(?:MAP|AREA)$/i.test(f)){if("AREA"===a.nodeName&&(a=s(a,{MAP:!0})),!a)return;d.setStartBefore(a),d.setEndBefore(a)}else e=3===a.nodeType?a.length:a.childNodes.length,b=b>e?e:b,d.setStart(a,b),d.setEnd(a,b);return d.collapse(!0),c&&H.setTextRange(a,b),H.setSingleRange(d),d}function G(a,b,c){var d,e,f;if(a&&3===a.nodeType)return d=H.createRange(),c&&N.isFunction(c)?(f=t(a,c),f=f.parentNode):f=a.parentElement,d.setStart(a,b),d.setEndAfter(f),e=d.extractContents(),d.insertNode(e),f.nextElementSibling}var H,I,J,K,L,M,N=d.$,O=this;I=d.getDoc(),J=d.getBody(),K=d.browser,H=d.selectionManager,M=K.ie&&K.version<=10,L=K.webkit,O.isLineContainer=function(a){var b=a?a.nodeName||a.tagName:null;return!!b&&f[b]},O.isFormattedEmptyLine=function(a){var b,c,d=this;if(d.isLineContainer(a)){for(b=a,c=b.childNodes||[];1===c.length&&1===c[0].nodeType;)b=c[0],c=b.childNodes;return 1!==b.nodeType||j[b.nodeName]||e[b.nodeName]||(b=b.parentNode),z(b,!1,y)}return!1},O.filterDataUriSrc=function(a,b){var c,e,f,g=b.length;for(c=0;c<g;c++)f=b[c].indexOf(","),f<6||(e=b[c].substr(5,f),d.pluginUtils.isSupportImageData(e)?a=a.replace(b[c],'src="" cafeimg="__s-cafe_image_data_'+c+"__"):(a=a.replace(b[c],'src="'),b[c]=""));return a},O.restoreDataUriSrc=function(a,b){var c,d,e,f,g;if(a&&a.length>0)for(c=a.length,d=b.length,f=0;f<c;f++)for(e=a[f],g=0;g<d;g++)e&&e.getAttribute("cafeimg")==="__s-cafe_image_data_"+g+"__"&&(e.setAttribute("src",b[g].substr(5).replace(/&#43;/g,"+").replace(/&#10;/g," ").replace(/&#61;/g,"=")),e.removeAttribute("cafeimg"))},O.isEmptyLine=function(a,b){var c=this;return!!c.isLineNode(a)&&z(a,b,!1)},O.mergeElement=function(a,b,c,d){var f,g,i,j,k,l=a,m=O.isLineNode(b),n=b.nodeName||l.tagName;if(h[n]?l=s(l,e):O.isEmptyLine(l)&&(l.lastChild||(i=I.createElement("br"),l.appendChild(i)),l=l.lastChild),g=l.parentNode,m&&g.nodeName===b.nodeName)v(l,b,c);else if(m&&O.isLineNode(g))return v(g,b,c),f=b.lastChild,d&&(N(b).append(a),N(g).remove()),f;if(m)if(j=b.getAttribute("style"),d&&O.isLineNode(g)||!j){for(j&&g.setAttribute("style",j);b.firstChild;)f=g.insertBefore(b.firstChild,b);g.removeChild(b),E(g)}else{for(i=I.createElement("span"),k=g.getAttribute("style"),O.isLineNode(g)&&!k?g.setAttribute("style",j):i.setAttribute("style",j),g.insertBefore(i,b);b.firstChild;)i.appendChild(b.firstChild);"BODY"!==g.nodeName&&g.removeChild(b),f=i}else h[n]||(f=b);return f},O.isLineNode=function(a){var b=a?a.nodeName||a.tagName:null;return null!==a&&e[b]},O.cloneContents=function(a){var b,c=a;return c||(c=H.getRange()),c=c.cloneRange(),b=c.cloneContents()},O.getAllChildren=function(a,b){for(var c=[],d=!0,e=a?a.childNodes[0]:null;e&&e!==a;)if(d=!b||b(e),d&&c.push(e),e.hasChildNodes())e=e.firstChild;else{for(;e&&null===e.nextSibling&&e!==a;)e=e.parentNode;e!==a&&(e=e.nextSibling)}return c},O.getLeafElement=function(a,b){var c=a,d=b?"firstChild":"lastChild";if(c&&1!==c.nodeType)return a;for(;c&&3!==c.nodeType&&c[d];)c=c[d];return c},O.getLeafNode=function(a,b){for(var c=a,d=b?"firstChild":"lastChild";c&&c[d];)c=c[d];return c},O.getLeafContainer=function(c,d){var e,f,g;for(d===b&&(d=3===c.nodeType?c.length:c.childNodes.length);c&&c.hasChildNodes();)c=c.childNodes[d],c&&(d=3===c.nodeType?0:c.hasChildNodes.length);if(K.ie&&c&&3===c.nodeType&&0===d){for(e=new a(c);g=e.prev();)if(3===g.nodeType&&g.length>0){f=g;break}f&&(c=f,d=f.length)}return{node:c,offset:d}},O.hasParentElement=function(a,b){var c,d=b,e=!1;return d||(d=H.getRange()),d=d.cloneRange(),c=N(d.collapsed&&d.startContainer?d.startContainer:d.commonAncestorContainer&&"BODY"!==d.commonAncestorContainer.nodeName?d.commonAncestorContainer:d.cloneContents().childNodes),e=c.is(a),e||(e=c.parents(a).length>0),e},O.insertElement=function(a,b,c){var d;return d=b&&3===b.nodeType?F(b,c):H.getRange(),this.insertElementByRange(a,d)},O.insertElementByRange=function(a,b){var c,d,e=0,f=b;return f&&!m()||(f=H.getRange()),f=f.cloneRange(),f.collapsed||(f=n(f)),p(f),c=f.startContainer,3===c.nodeType&&3===a.nodeType?(d=a.nodeValue,e=f.startOffset+d.length,c.nodeValue=C(c.nodeValue,f.startOffset,d),a=c):1!==a.nodeType&&3!==a.nodeType||(f.insertNode(a),1===a.nodeType&&"TABLE"!==(a.nodeName||a.tagName)&&(a=O.getLeafNode(a)),e=1===a.nodeType?1:a.length),F(a,e),a},O.insertHtmlBlockByRange=function(a,b,c){var d,e,f=this;return d=N(I.createDocumentFragment()).append(N(a)),c&&c.length>0&&(f.restoreDataUriSrc(d.children().find("img"),c),c={}),e=f.insertElementsByRange(d.contents(),b),N(d).remove(),e},O.insertElementsByRange=function(a,b){function d(a,b){return!(!a||!b)&&(!!G.isLineNode(b)&&("OL"!==a.nodeName&&"UL"!==a.nodeName))}function f(a){var b=!1,c=a.startContainer,d=a.startOffset,e=a.endContainer,f=a.endOffset,g=N(J).contents().length;return"BODY"===c.nodeName&&c===e&&d===f&&(d!==g&&0!==d||(b=!0)),b}var g,h,j,k,l,p,q,r,t,u,w,x,y,z,B,C,E,G=this,M=a.length,O=o("span",{class:"cui-position"}),P=null,Q=null,R=!0,S=-1,T=function(){var a;a=j.parentNode,3===j.nodeType&&j.length===k&&a&&"A"===a.nodeName&&a.lastChild===j&&(j=a.parentNode,k=N(j.childNodes).toArray().indexOf(a)+1)};if(b&&!m()||(b=H.getRange()),b.collapsed||(b=n(b)),0===M)return b;if(8===b.startContainer.nodeType&&(C=b.startContainer,C.previousSibling?(b.setStartAfter(C.previousSibling),b.setEndAfter(C.previousSibling)):C.nextSibling?(b.setStartBefore(C.nextSibling),b.setEndBefore(C.nextSibling)):(b.setStart(C.parentElement,0),b.setEnd(C.parentElement,0))),"BODY"===b.startContainer.nodeName&&(B=f(b),!B&&b.collapsed&&(x=b.startContainer.childNodes[b.startOffset],x.nodeType===c.NodeTypes.ELEM_NODE&&x.nodeName===c.NodeNames.BR&&x.nextSibling&&(x=x.nextSibling,S=0),S=S===-1&&b.startContainer.childNodes.length-1===b.startOffset?1:0,b=H.setRange(x,S,x,S))),h=b.cloneRange(),z=I.createElement("div"),y=N(z).attr("style","display:none"),N(J).append(y),r=s(b.startContainer,e),r||(B&&(r=N("p, h1, h2, h3, h4, h5, h6, li",J).first()[0]),r=r||b.startContainer),t=G.isEmptyLine(r),A(r)&&r.childNodes.length>0&&N(r.childNodes).remove(),y.append(a),z.lastChild&&"TABLE"===z.lastChild.nodeName&&(p=z.lastChild),j=G.getLeafNode(z),l=G.getAllChildren(y[0],function(a){var b=a.nodeType,c=a.textContent,d=a.parentNode.nodeName;return!(3!==b||!i[d]||!/^[\s\uFEFF\xA0]+$/.test(c))}),N(l).remove(),t?(j=G.getLeafNode(z),N(O).insertAfter(j),"LI"===r.nodeName&&(Q=r,N(o("span",{class:"cui-position"})).appendTo(Q),t=!1)):(h.insertNode(O),l=G.getAllChildren(r,function(a){var b=a.nodeType,c=a.textContent||"";return 3===b&&0===c.length}),N(l).remove(),G.getLeafNode(r,!0)===O?P=r:G.getLeafNode(r)===O?(Q=r,R=!1):M>1||D(z.firstChild)?(h.setStartBefore(O),h.setEndBefore(O),P="LI"===r.nodeName?G.splitListByRange(h,!0):G.splitLineByRange(h),Q=P.previousSibling,N(o("span",{class:"cui-position"})).appendTo(Q),N(O).prependTo(P),r=P):(h.setStartAfter(O),h.setEndAfter(O),G.splitLineByRange(h,function(a,b){var c=o("span",{class:"cui-position"}),d=b.firstChild,e=N(b);N(".cui-position",a).remove(),a.appendChild(c),d&&"SPAN"===d.nodeName&&0===d.childNodes.length&&N(d).remove(),e.contents().insertAfter(N(c)),e.remove()},!0),Q=r)),w=r,g=N(z.firstChild),1===M&&d(Q||P,g[0]))g.contents().insertBefore(N(".cui-position",Q||P)),g.remove();else for(;z.firstChild;)g=N(z.firstChild),g=v(w,g[0],R),R||(w=g),G.isLineNode(g)&&0===g.childNodes.length&&g.parentNode.removeChild(g);return u=N(".cui-cursor",I),p?(q=N(p).nextAll("P, H1, H2, H3, H4, H5, H6")[0],q||(q=I.createElement("p"),L&&G.isEmptyLine(q)&&(q.lastChild&&"BR"===q.lastChild.nodeName||q.appendChild(I.createElement("br"))),N(q).insertAfter(p)),j=q,k=3===j.nodeType?j.length:0):k=3===j.nodeType?j.length:1,N(".cui-position",I).remove(),t&&!p&&"LI"!==r.nodeName&&N(r).remove(),Q&&(E=G.getLeafNode(Q),E&&"BR"===E.nodeName&&(E===j&&(j.nextSibling?(j=j.nextSibling,k=0):(j=j.parentNode,k=3===j.nodeType?j.length:j.childNodes.length)),N(E).remove())),P&&(E=G.getLeafNode(P),E&&"BR"===E.nodeName&&(E===j&&(j=j.previousSibling?j.previousSibling:j.parentNode,k=3===j.nodeType?j.length:j.childNodes.length),N(E).remove())),K.ie&&T(),b=F(j,k,K.ie&&K.version>10),u.remove(),y.remove(),b},O.insertTextByRange=function(a,b){var d,f,g,h,i,j,k=this,l=a,o=c.UNICODE_CHAR_CODE.NBSP,p=c.UNICODE_CHAR_CODE.SPACE;return b&&!m()||(b=H.getRange()),a=l.replace(/\r\n/g,"\n"),0===a.indexOf("\n")&&(a=a.slice(1)),a=a.replace(/&lt;/g,"<"),a=a.replace(/&gt;/g,">"),a=a.replace(/&amp;/g,"&"),a=a.replace(/\u0009/g,o+p),a=a.replace(/\u0020/g,o),a=a.replace(/\u00A0\u00A0/g,o+p),a=a.replace(/(\S)\u00A0(\S)/g,"$1"+p+"$2"),a=a.replace(/(\S)\u00A0(\S)/g,"$1"+p+"$2"),a=a.replace(/\u0020(\n)|\u0020$/g,o+"$1"),d=a.split("\n"),f=d.length,b.collapsed||(b=n(b)),h=b.startContainer,i=b.startOffset,1===f?(j=k.getLeafNode(h,0===i),h!==j&&j.nodeType===c.NodeTypes.TEXT_NODE?(u(j,d[0],0===i),b=F(h,i,K.ie&&K.version>10)):(g=I.createTextNode(d[0]),k.insertElementByRange(g,b))):(k.splitBlockByRange(b,e,!1,function(a,b){var e,g,j,l,m,n,o,p,q,r=b.nodeName,s=["SPAN","SUB","SUP","EM","U","STRIKE","STRONG"],t=c.LineBlockElements;for(a.firstChild.nodeName!==c.NodeNames.BR?o=k.getLeafNode(a):b.firstChild.nodeName!==c.NodeNames.BR&&(o=k.getLeafNode(b,!0));o&&!t[o.nodeName];)o.nodeType===c.NodeTypes.ELEM_NODE&&s.indexOf(o.nodeName)!==-1&&(p=o.cloneNode(),q&&p.appendChild(q),q=p),o=o.parentNode;for(j=k.getLeafNode(a),a===j?a.appendChild(I.createTextNode(d[0])):j.nodeName===c.NodeNames.BR&&a.firstChild===j&&a.lastChild===j?q?(j.parentNode.removeChild(j),a.appendChild(q.cloneNode(!0)),j=k.getLeafNode(a,!1),j.appendChild(I.createTextNode(d[0]))):(n=!0,u(j,d[0],n)):q&&j.nodeName===q.nodeName?(j.parentNode.replaceChild(q.cloneNode(!0),j),j=k.getLeafNode(a,!1),j.appendChild(I.createTextNode(d[0]))):u(j,d[0],n),j=k.getLeafNode(b,!0),b===j?b.appendChild(I.createTextNode(d[f-1])):q?j.nodeName!==c.NodeNames.BR||b.firstChild!==j&&b.firstChild.nodeName!==q.nodeName?j.nodeType===c.NodeTypes.ELEM_NODE?(j.nodeName===q.nodeName&&(j.parentNode.replaceChild(q.cloneNode(!0),j),j=k.getLeafNode(b,!0)),j.appendChild(I.createTextNode(d[f-1]))):j=u(j,d[f-1],!0):(j.parentNode.removeChild(j),b.firstChild&&b.firstChild.nodeName===q.nodeName?(b.firstChild.outerHTML!==q.outerHTML?b.insertBefore(q.cloneNode(!0),b.firstChild):b.replaceChild(q.cloneNode(!0),b.firstChild),j=k.getLeafNode(b,!0)):(b.appendChild(q.cloneNode(!0)),j=k.getLeafNode(b,!1)),j.appendChild(I.createTextNode(d[f-1]))):j=u(j,d[f-1],!0),l=b.parentElement,e=1;e<f-1;e++)g=d[e],m=I.createElement(r),0!==g.length||M?q?(m.appendChild(q.cloneNode(!0)),p=k.getLeafNode(m,!1),p.appendChild(I.createTextNode(g))):m.appendChild(I.createTextNode(g)):q?(m.appendChild(q.cloneNode(!0)),p=k.getLeafNode(m,!1),p.appendChild(I.createElement("BR"))):m.appendChild(I.createElement("BR")),l.insertBefore(m,b);h=j,i=d[f-1].length,M||(E(a,"cui-temp-br"),E(b,"cui-temp-br"))}),b=F(h,i)),b},O.replaceElementByRange=function(a,b){var c=b;return c&&!m()||(c=H.getRange()),c=c.cloneRange(),c.deleteContents(),c.insertNode(a),a},O.selectWordRange=function(a,b){var c,d,f,g,h,i=this;if(a||(a=H.getRange()),c=a.cloneRange(),c.collapsed){if(f=c.startContainer,3===f.nodeType)g=c.startOffset;else{if(h=i.getLeafContainer(c.startContainer,c.startOffset),!h.node)return a;f=h.node,g=h.offset}if(d=s(f,e),q(c,d,f,g,!0),c.startContainer===f&&c.startOffset===g)return a;if(q(c,d,f,g,!1),c.endContainer===f&&c.endOffset===g)return a;b||H.setSingleRange(c)}return c},O.splitLine=function(a,b,c,f,g){var h,i,j=this;return a&&3===a.nodeType?(b=b>a.length?a.length-1:b,i=H.createRange(),i.setStart(a,b),i.setEnd(a,b),i.collapse(!0)):a&&1===a.nodeType?(i=H.createRange(),j.isContentElementInLine(a)||"BR"===a.nodeName?(d.browser.ie&&!a.nextSibling&&f&&(h=I.createTextNode("â"),N(h).insertAfter(a),a=h),i.setStartBefore(a)):j.isLineNode(a)&&i.setStart(a,b||0),i.setEnd(a,b||0),i.collapse(!0)):i=H.getRange(),j.splitBlockByRange(i,e,!1,c,g)},O.splitLineByRange=function(a,b,c){return this.splitBlockByRange(a,e,!1,b,c)},O.splitListByRange=function(a,b){return this.splitBlockByRange(a,g,b)},O.splitBlockByRange=function(a,b,c,d,e){var f,g,h,i,j,k;if(j=H.getSel(),a||j.rangeCount>0&&(a=j.getRangeAt(0)),f=a.cloneRange(),f.collapsed||(f=n(f)),h=f.commonAncestorContainer,g=s(h,b,c)){if(f.setEndAfter(g),i=f.extractContents(),e||B(g),f.setStartAfter(g),f.collapse(!0),i.firstChild&&!e){for(k=i.firstChild;L&&k.children.length>0&&3!==k.firstChild.nodeType&&"HR"!==k.firstChild.nodeName&&"BR"!==k.firstChild.nodeName;)k=k.firstChild;B(k)}f.insertNode(i),d&&N.isFunction(d)&&d(g,g.nextElementSibling),f.setStartAfter(g),f.collapse(!0),H.setSingleRange(f),g=g.nextElementSibling}return g},O.splitTextNode=function(a,b,c){var d;return a&&3===a.nodeType&&a.length>b?(d=a.splitText(b),d=c?d:d.previousSibling):d=a,d},O.splitNodeByRange=function(a,b){var c,d,e,f;return e=H.getSel(),a||e.rangeCount>0&&(a=e.getRangeAt(0)),c=a.cloneRange(),d=c.commonAncestorContainer,!c.collapsed&&d&&(G(c.endContainer,c.endOffset,b),f=G(c.startContainer,c.startOffset,b)),f},O.wrapContent=function(a,b){var c,d=b;return d||(d=H.getRange()),d=d.cloneRange(),a&&(c=d.cloneContents(),N(a).append(c.childNodes),d.deleteContents(),d.insertNode(a)),a},O.getAttributesString=function(a,b){var c,d,e,f,g,h="";for(b=b||{},d=a.attributes,g=0,c=d.length;g<c;g++)e=d[g].name,b[e.toUpperCase()]||(f=d[g].value,f?(f="boolean"==typeof f?f+"":f,f=f.replace(/\"/gi,"'"),h+=e+'="'+f+'" '):h+=e+" ");return h},O.copyAttribute=function(a,b,c){var d,e,f,g,h;for(c=c||{},e=a.attributes,h=0,d=e.length;h<d;h++)f=e[h].name,g=e[h].value||"",c[f]||b.setAttribute(f,g)},O.isContentElementInLine=function(a){var b=a?a.nodeName||a.tagName:null;return!!b&&k[b]},O.isPagebreak=function(a){var b=a?a.nodeName||a.tagName:null;return!(!b||"SPAN"!==b||!a.hasAttribute("data-cui-pagebreak"))},O.removeUnnecessaryUnicode=function(a){return a?a.replace(/[\u202a-\u202e]/g,""):a},O.trimEmptyTextElem=function(a){!a||a.nodeType!==c.NodeTypes.ELEM_NODE||0!==a.textContent.length||a.querySelector("img")||a.querySelector("br")||a.parentNode.removeChild(a)},O.destroy=function(){N=null,O=null,H=null,I=null,J=null,K=null,L=null,M=null}}var e={P:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,LI:!0,TD:!0},f={P:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,UL:!0,OL:!0},g={OL:!0,UL:!0},h={DIV:!0,OL:!0,PRE:!0,TABLE:!0,UL:!0,BLOCKQUOTE:!0},i={BODY:!0,OL:!0,UL:!0,TABLE:!0,TBODY:!0,THEAD:!0,TFOOT:!0,TR:!0},j={A:!0,B:!0,EM:!0,FONT:!0,I:!0,SPAN:!0,STRONG:!0,STRIKE:!0,SUB:!0,SUP:!0,U:!0},k={A:!0,IMG:!0,IFRAME:!0,OBJECT:!0,EMBED:!0,VIDEO:!0,AUDIO:!0},l=c.toMap("iframe video audio object script area base basefont col frame hr img input isindex link meta param embed source track");return d}),d("utilities/LockUtils",[],function(){function a(a){var b=this,c=a.$,d=!!a.isPluginLoaded("lock"),e="data-cui-lock";b.hasLockedCell=function(a){if(d&&(c("[data-cui-lock]",a).length||b.hasLockedStyleWithParent(a[0])))return!0},b.hasLockedStyle=function(a){var b,c,f,g,h=[];if(!d)return!1;for(c=0,b=a.length;c<b;c++)f=a[c],1===f.nodeType&&("IMG"===f.nodeName&&h.push(f),"true"===f.getAttribute(e)&&(g=!0));return!!g},b.hasLockedStyleWithParent=function(c){return!!d&&b.hasLockedStyle(a.selectionManager.getAncestors(c))},b.isLockedSelection=function(c){var e,f,g;return!!d&&(e=a.selectionUtils.getSelectedElements(c),f=e.shift(),!!b.hasLockedStyleWithParent(f)||(g=e.pop(),!(!g||f===g||!b.hasLockedStyleWithParent(g))||!!b.hasLockedStyle(e)))},b.destroy=function(){b=null,c=null,d=null,e=null}}return a}),d("utilities/StyleUtils",["utilities/StyleParser","utilities/EditorConstants","utilities/UnitConverter"],function(a,b){function c(c){function d(a,b){var c,d,e,f=l[b];if(f.reg.test(a.style[f.attrName]))return!0;for(d=f.tag.length,c=0;c<d;c++)if(e=f.tag[c],e===a.nodeName)return!0;return!1}function e(a,b){var c;h.map(k,function(d,e){c=e,null!==a[c]&&a[c]!==b[c]&&(/textDecoration/i.test(c)?a[c]=f(a[c],b[c]):a[c]=null)})}function f(a,b){var c,d,e=a.split(/\s+/),f=b.split(/\s+/),g=[];for(d=0,c=e.length;d<c;d++)f.indexOf(e[d])!==-1&&g.push(e[d]);return g.length>0?g.join(" "):null}var g=this,h=c.$,i=c.browser,j=["H1","H2","H3","H4","H5","H6"],k=b.ComputedStyles,l=b.NodeStyles;g.getStyleObject=function(b){if(b)return a.parse(b.getAttribute("style"),{plain:!0})},g.isOnlyFontSizeSpan=function(a){var b;return!!a&&(b=g.getStyleObject(a),!(1!==Object.keys(b).length||!h(a).css("fontSize")||1!==a.attributes.length))},g.hasStyle=function(a,b){var c,e,f,g;if(!a)return!1;for(g=Array.isArray(a),c=g?a.length:1,e=0;e<c;e++)if(f=g?a[e]:a,1===f.nodeType&&d(f,b))return!0;return!1},g.checkStyle=function(a,b){var c,d,f,g,i,j=this,l={},m=0;for(a?m=0:(a=j.getComputedStyle(3===b[0].nodeType?b[0].parentNode:b[0]),m=1),h.map(k,function(b,d){c=d,l[c]=a[c]}),d=m,f=b.length;d<f;d++)g=b[d],g=3===g.nodeType?g.parentNode:g,i=j.getComputedStyle(g),e(l,i);return a=null,l},g.isStyledNodeWithParents=function(a,b){var d,e,f,g=0,h=0;for(e=0,f=a.length;e<f;e++)d=a[e],3!==d.nodeType&&"BR"!==d.nodeName||(g++,c.styleUtils.hasStyle(c.selectionManager.getAncestors(d),b)&&h++);return 0!==g&&g===h},g.getStyledColor=function(a,b){var c,d,e;for(d=0,c=a.length;d<c;d++)if(e=a[d],1===e.nodeType){if(e.style&&e.style[b])return e.style[b];if("FONT"===e.nodeName&&e.color&&"color"===b)return e.color}return null},g.getComputedStyle=function(a,b){var d,e,f,j=c.getWin(),l=c.styleUtils,m=function(a){var b=i.ie?1.44:1.1999;return parseFloat(a)*b+"px"},n=function(a,b){var c;return/^[0-9]+\.*[0-9]*$/.test(a)?a:(a=parseFloat(a)/parseFloat(b),a=a.toFixed(1)+"",c=a.split("."),2!==c.length||parseInt(c[1],10)||(a=c[0]),a)},o=function(a){var c;return c="baseline"===a?"SUB"===e?"sub":"SUP"===e?"super":l.hasStyle(b,"subscript")?"sub":l.hasStyle(b,"superscript")?"super":a:a},p=function(){var a={};return h.map(k,function(b,c){"fontWeight"===c&&"700"===d[c]?a.fontWeight="bold":a[c]=d[c]}),a},q=function(){var a=d.textDecoration,c="";return(l.hasStyle(b,"underline")||/underline/i.test(a))&&(c="underline "),(l.hasStyle(b,"strikethrough")||/line\-through/i.test(a))&&(c+="line-through"),c=h.trim(c),""===c?"none":c},r=function(){var a,e,f=c.colorUtils;return a=d.backgroundColor,e=c.colorUtils.toHEX8(a),"00000000"===e&&b&&(a=g.getStyledColor(b,"backgroundColor")),"transparent"===f.toName(a)?"transparent":f.toHEX(a)};if(a&&1===a.nodeType){if(!c.getBody().contains(a)&&a.getAttribute("style"))d=a.style;else{if(!j.getComputedStyle)return;d=j.getComputedStyle(a)}return e=a.nodeName,d=p(),b=b||c.selectionManager.getAncestors(a),d.verticalAlign=o(d.verticalAlign),i.webkit&&(d.textDecoration=q()),f=d.verticalAlign,"super"!==f&&"sub"!==f||(d.fontSize=m(d.fontSize),d["line-height"]=m(d["line-height"])),d["line-height"]=n(d["line-height"],d.fontSize),i.webkit&&(d.backgroundColor=r()),d}},g.destroy=function(){g=null,h=null,i=null,j=null,k=null,l=null}}return c}),d("utilities/PluginUtils",["utilities/NodeTracker","utilities/EditorConstants","utilities/UnitConverter"],function(a,b,c){function d(d){function e(a){var b,c,d;if(a){if(c=a.lastIndexOf("."),d=a.lastIndexOf("/"),c>d&&(b=a.substring(c+1,a.length)),!b||u.isAllowedImageExtension(b))return 0;if(u.isAllowedImageExtension(b))return 1}return-1}function f(a){var b,c,e,f=a.originalEvent.dataTransfer.getData("text");f&&f.indexOf("caferes")!==-1&&(e=f.substring(7,f.length),e&&(a.preventDefault(),a.stopPropagation(),c=v('img[data-cui-id="'+e+'"]',d.getBody()).get(0),b=y.getRangeFromEvent(a.originalEvent),u.deselectItem(),d.contentUtils.insertElementByRange(c,b),d.trigger("documentchanged")))}function g(a){var b=v(a.target);if(w.ie){if(b.hasClass("cui-wrapper"))b=v(a.target).children().eq(0);else if(!h(a))return void a.preventDefault()}else if(!h(a)||!b.hasClass("cui-resizable"))return void a.preventDefault();b.attr("data-cui-id")||b.attr("data-cui-id",d.getUniqueId()),a.originalEvent.dataTransfer&&a.originalEvent.dataTransfer.setData("text","caferes"+b.attr("data-cui-id"))}function h(a){var b,c,e;return"IMG"===a.target.nodeName&&((!d.isSpellcheckMode||!d.isSpellcheckMode())&&(b=v(a.target),c=b.attr("data-cui-image"),e=b.attr("data-cui-media"),c||e))}function i(a){h(a)?u.selectItem(a.target):u.deselectItem()}function j(a){var b;return!(!a||a.firstChild||a.style.height&&a.style.height<t||d.lockUtils.hasLockedStyle([a]))&&(b=d.createEmptyLine(),a.appendChild(b),!0)}function k(a){u.fillEmptyCellsWithLineInTable(a.currentTarget)}function l(a){var c,d,e,f,g,h=function(b){var c,d,e,g,h,i;d=v("> thead > tr, > tbody > tr, > tfoot > tr",b),e=a===x.LEFT||a===x.UP?d.last():d.first(),g=v("> td, > th",e),h=a===x.LEFT?g.last():g.first(),i=v(f,h),c=a===x.UP?i.last()[0]:i.first()[0],c&&y.setRange(c,0,c,0)};a!==x.LEFT&&a!==x.UP&&a!==x.RIGHT&&a!==x.DOWN||(c=y.getRange(),f=b.keys(b.LineBlockElements).join(","),g=y.getClosest(c.startContainer,f),g&&(d=a===x.LEFT||a===x.UP?g.previousSibling:g.nextSibling,e=u.fillEmptyCellsWithLineInTable(d),e&&h(d)))}function m(a){l(a.keyCode),z&&(u.deselectItem(!0),w.ie&&9===a.keyCode&&a.preventDefault())}function n(a){var b,c;0===a.button?h(a)&&!a.target.hasAttribute("data-cui-selected")?(u.selectItem(a.target),a.preventDefault()):w.ie&&"cui-wrapper"===a.target.className&&(b=y.getSel(),c=y.getRange(),0===b.rangeCount?(u.deselectItem(),a.preventDefault()):c.collapsed===!0&&a.preventDefault(),w.version<10&&a.offsetX<a.target.clientWidth/2&&a.preventDefault()):1===a.button||4===a.button?u.deselectItem():2===a.button&&(w.ie?(a.target&&"cui-wrapper"!==a.target.className&&u.deselectItem(),w.version<10&&(a.preventDefault(),a.stopPropagation())):a.target&&!a.target.hasAttribute("data-cui-selected")&&u.deselectItem())}function o(a){var b;return!!(a&&a.style&&"absolute"===a.style.position&&(b=z?a.parentNode.parentNode:a.parentNode,"P"===b.nodeName&&b.parentNode&&"TD"===b.parentNode.nodeName&&b.nextSibling&&"TABLE"===b.nextSibling.nodeName))}function p(b,c,d,e){var f=new a(b,d),g=e?f.prev():f.next();if(g)return!1;if(3===b.nodeType){if(!e&&b.textContent.length!==c)return!1;if(e&&0!==c)return!1}return!0}function q(a,b){var c,d,e;if("LI"!==a.nodeName&&"LI"!==b.nodeName){for(c=a;c!==b;){if(d=c,c=c.nextSibling,!c)return null;d.parentNode.removeChild(d)}c.innerText=D.NBSP,e=c}return e}function r(a){function c(b){var c=b.style;if(""!==c.textAlign&&"left"!==c.textAlign)c.textAlign="left";else{if(!parseInt(c.marginLeft,10))return!1;c.marginLeft="0px"}return a.preventDefault(),a.stopPropagation(),!0}function e(a){var b;if(0!==a.startOffset)for(b=a.startOffset-1;b>=0;b--){if(3===a.commonAncestorContainer.nodeType)return!1;if(""!==a.commonAncestorContainer.childNodes[b].innerText&&a.commonAncestorContainer.childNodes[b].innerText!==D.ZWS)return!1}
return!0}var f,g,h,i,j,k,l,m,n,r,s,t,y,A,B,C,E,F="b, em, i, s, span, strong, strike, sub, sup, u, mark, small",G=a.keyCode,H=d.selectionManager,I=H.getRange(),J=b.LineElementsStr;if(G===x.BACKSPACE||G===x.DELETE){if(f=u.getSelectedItem("image"),o(f))return g=z?f.parentNode.parentNode:f.parentNode,g&&1===g.childNodes.length?v(g).remove():v(f).remove(),w.ie&&d.trigger("documentchanged"),d.blur(),!1;if(w.ie&&!I.collapsed){if(j=H.getClosest(I.startContainer,J),k=H.getClosest(I.endContainer,J),!j||!k||j===k)return;if(!p(I.startContainer,I.startOffset,j,!0)||!p(I.endContainer,I.endOffset,k,!1))return;l=q(j,k),l&&(a.preventDefault(),H.setRange(l,0,l,0))}if(G===x.BACKSPACE){if(E=I.startContainer,!b.LineBlockElements[3===E.nodeType?"":E.nodeName])for(;!b.LineBlockElements[3===E.nodeType?"":E.nodeName]&&"BODY"!==E.nodeName;)E=E.parentNode;if(d.contentUtils.isEmptyLine(E)?!(C=c(E))&&d.browser.ie&&1===d.getBody().childNodes.length&&""!==E.getAttribute("style")&&E.removeAttribute("style"):I.collapsed&&(!I.startContainer.previousSibling&&0===I.startOffset||e(I))&&(C=c(E)),h=H.getClosest(I.startContainer,J),!h)return;if(w.ie&&p(I.startContainer,I.startOffset,h,!0)){if(m=h.previousSibling,!m||!b.LineBlockElements[m.nodeName])return;if(C)return;if(m&&(0===m.textContent.length||"â"===m.textContent))return m.style&&"0px"!==m.style.marginLeft?void 0:(v(m).remove(),void a.preventDefault());for(t=m.childNodes[m.childNodes.length-1],t&&3===t.nodeType&&1===t.textContent.length&&"â"===t.textContent[0]&&v(t).remove(),r=m.childNodes[m.childNodes.length-1],n=H.getLeafNode(r,!1),"BR"===n.nodeName?(n=n.parentNode,n.setAttribute("cui-caret-target",!0),s=n.childNodes.length-1):3===n.nodeType?(y=n.parentNode,y.setAttribute("cui-caret-target-parent",!0),y.setAttribute("cui-caret-target-offset",y.childNodes.length-1),s=n.textContent.length):(n.setAttribute("cui-caret-target",!0),s=n.childNodes.length),A=0,B=h.childNodes.length;A<B;A++)m.appendChild(h.childNodes[A].cloneNode(!0));n=v("[cui-caret-target]",d.getBody())[0],n?(H.setRange(n,s,n,s),1===n.childNodes.length&&"BR"===n.firstChild.nodeName&&n.removeChild(n.firstChild),n.removeAttribute("cui-caret-target")):(n=v("[cui-caret-target-parent]",d.getBody())[0],n=n.childNodes[parseInt(n.getAttribute("cui-caret-target-offset"),10)],H.setRange(n,s,n,s),n.parentNode.removeAttribute("cui-caret-target-parent"),n.parentNode.removeAttribute("cui-caret-target-offset")),a.preventDefault(),h.parentNode.removeChild(h)}}else if(w.ie&&G===x.DELETE&&I.collapsed){if(h=H.getClosest(I.startContainer,J),!h)return;if(p(I.startContainer,I.startOffset,h)){if(i=h.nextSibling,!i)return;""===i.innerText&&0===v(":not("+F+")",i).length&&(a.preventDefault(),i.parentNode.removeChild(i))}}}}function s(){function a(){return d.getDialog("imageformatquality")}function b(){return a().getWidget("imageType")}function c(){return a().getWidget("imageQuality")}var e,f={},g=d.getText("imageformatquality.dialog.title"),h=d.getText("imageformatquality.dialog.type"),i=d.getText("imageformatquality.dialog.original"),j=d.getText("imageformatquality.dialog.quality");u.setActionDataForImageFormatQuality=function(a){f=a},u.convertImage=function(a,b){var c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s=!1,t=d.getDoc();return c=d.getDialog("imageformatquality"),e=c.getWidget("imageType"),f=c.getWidget("imageQuality"),g=e.selectedValue,h="data:image/",i=b.indexOf(h),j=b.indexOf(";base64,"),k=b.slice(i+h.length,j),l=d.getText("imageformatquality.dialog.original"),k===g&&("jpeg"===g&&"100%"!==f.selectedValue||(s=!0)),s||g===l||(m="image/"+g,n=parseInt(f.selectedValue.replace("%",""))/100,o=t.createElement("canvas"),o.width=a.width,o.height=a.height,p=o.getContext("2d"),p.fillStyle="#ffffff",p.fillRect(0,0,o.width,o.height),p.drawImage(a,0,0),q=t.createElement("img"),r=o.toDataURL(m,n),q.setAttribute("src",r),q.setAttribute("unselectable","on"),q.setAttribute("data-cui-image","true"),q.style.borderWidth="0px",a=q),a},e={title:g,modal:!0,resizable:!1,contentOverflow:!0,width:450,items:[{type:"container",items:[{type:"columns",items:[{type:"selectmenu",name:"imageType",label:h,align:"left",autoCloseViaScroll:!1,options:{label:i,maxHeight:100,menuItems:[{text:"<span>"+i+"</span>",click:function(){c().disable()}},{text:"<span>png</span>",click:function(){c().disable()}},{text:"<span>jpeg</span>",click:function(){c().enable()}}]}},{type:"selectmenu",name:"imageQuality",label:j,align:"left",options:{label:"100%",maxHeight:100,disabled:!0,menuItems:[{text:"<span>100%</span>",click:function(){}},{text:"<span>70%</span>",click:function(){}},{text:"<span>50%</span>",click:function(){}},{text:"<span>30%</span>",click:function(){}}]}}]}]}],buttons:[{name:"okbutton",text:d.getText("ok"),click:function(){"expaste"===f.from&&f.callback(this.options.imageData,null,!0),"dragdrop"===f.from&&f.callback(f.result,f.range,!0),a().close()}},{name:"cancelbutton",text:d.getText("cancel"),click:function(){this.close()}}],open:function(){b().index(0).option("label",i),c().index(0).option("label","100%"),c().disable(),d.selectionChange.refreshLastRange()},close:function(){f.setLastRangeToNull&&f.setLastRangeToNull(),a().options.imageData=null}},d.addDialog("imageformatquality",e)}var t,u=this,v=d.$,w=d.browser,x=v.ui.keyCode,y=d.selectionManager,z=!1,A=!1,B=[],C={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"," ":"&nbsp;"},D={ZWS:"â",NBSP:"Â "},E=function(a){return new RegExp("^"+a+"[-A-Z0-9+&@#\\/%?=~_|!\\:,.;\\^\\\\]*[-A-Z0-9+&@#\\/%=~_|\\:\\\\]$","i")},F=E("(?:(?:https?):\\/\\/)"),G=E("(?:(?:mailto):)"),H=E("(?:(?:ftp):\\/\\/)"),I=E("(?:(?:file):\\/\\/\\/*)");u.isMatchedLinkScheme=function(a){return/^(?:(?:(?:ftp|https?):\/\/)|(?:(?:www)\.[^\.])|(?:(?:mailto):)|(?:(?:file):\/\/\/*))/i.test(a)},u.getProtocolInURL=function(a){var b;return F.test(a)?b="http":H.test(a)?b="ftp":I.test(a)?b="file":G.test(a)&&(b="mailto"),b},u.validLinkTarget=function(b,c){var e,f,g={A:!0,B:!0,EM:!0,FONT:!0,I:!0,SPAN:!0,STRONG:!0,STRIKE:!0,SUB:!0,SUP:!0,U:!0};if(!b)return!1;for(b=d.contentUtils.getLeafNode(b,!1),e=new a(b,c);b&&3!==b.nodeType&&(1!==b.nodeType||g[b.nodeName]||(f=!0),b!==c);)b=e.prev();return!f},u.escapeHtml=function(a){return String(a).replace(/[&<>"'\/\s]/g,function(a){return C[a]})},u.removeWhiteSpace=function(a,b){var c,d=a,e=!0,f=!0;return d=d.replace(/[\u200B|\u000A]/g,""),b&&(e=null===b.nextSibling,f=null===b.previousSibling),c=d.length,d=d.replace(/\u0020{1,}/g,function(a,b){return 0===b&&f||b===c-a.length&&e?"":a.length>1?" ":a})},u.getPlainText=function(c){var e,f,g,h,i,j=c,k=b.LineBlockElements,l="";for(g=d.contentUtils.getLeafNode(c),f=new a(c,g);null!==j&&(h=j.nodeName,k[h]?(e=j.textContent,i&&i!==j&&l&&e&&""!==e.replace(/\n/g,"")&&(l+="\n"),i=j):h===b.NodeNames.BR?l+="\n":h!==b.NodeNames.PRE&&j.nodeType!==b.NodeTypes.TEXT_NODE||(e=j.textContent,e=u.removeWhiteSpace(e,j),l+=e),j!==g);)j=/^(?:script|style)$/i.test(h)?f.nextSibling():f.next();return w.ie?l.replace(/\s+$/,""):l.trimEnd()},u.unwrapChildNodes=function(b,c){for(var d,e,f=[],g=b.parentNode,h=new a(b,b);b&&(b.nodeName===c&&f.push(b),b!==g);)b=h.next();for(e=f.length,d=0;d<e;d++)v(f[d].childNodes).unwrap()},u.isTextMode=function(){var a=d.uiManager.getContainer();return!(!a||!a.attr("data-cui-text"))},u.getActiveTabName=function(){var a,b=this,c=d.uiManager.getContainer();return a=b.isTextMode()?"text":c.find(".cui-tabs-active.cui-state-active > a").attr("data-cui-name")},u.isEditTab=function(){var a,b=this;return a=b.getActiveTabName(),/^edit$/i.test(a)},u.setTextMode=function(a){var b=d.uiManager.getContainer();a?b.attr("data-cui-text",!0):b.removeAttr("data-cui-text")},u.checkImageSource=function(a){return!!a&&("http://"===a.substring(0,7).toLowerCase()||"https://"===a.substring(0,8).toLowerCase()?e(a)>=0:this.isSupportImageData(a)>0)},u.isAllowedImageDataType=function(a){return d.getSupportImageType().indexOf(a.toLowerCase())>=0},u.isSupportImageData=function(a){var b,c;if(a){if("data:"===a.substring(0,5).toLowerCase())return b=a.indexOf(","),c=a.slice(5,b).split(";"),c&&2===c.length&&u.isAllowedImageDataType(c[0])>=0&&"base64"===c[1]?1:0;if("file:"===a.substring(0,5).toLowerCase())return 0}return-1},u.isAllowedImageExtension=function(a){return b.SupportImageExtensionAll.indexOf(a.toLowerCase())>=0},u.fillEmptyCellsWithLineInTable=function(a){var b,c,e,f,g,h,i,k,l=!1,m=d.lockUtils;if(a&&"TABLE"===a.nodeName&&!m.hasLockedStyleWithParent(a)&&!v(a).data("emptyCellCorrection")){for(h=v("> thead, > tbody, > tfoot",a),b=h.length-1;b>=0;b--)if(f=h[b],!m.hasLockedStyle([f]))for(i=v("> tr",f),c=i.length-1;c>=0;c--)if(g=i[c],!m.hasLockedStyle([g]))for(k=v("> th, > td",g),e=k.length-1;e>=0;e--)j(k[e])&&!l&&(l=!0);return v(a).data("emptyCellCorrection",!0),l}},u.isSelectedImageItem=function(a){if(w.ie){if(a&&"cui-wrapper"===a.className)return!0}else if(a&&"IMG"===a.nodeName&&a.hasAttribute("data-cui-selected"))return!0;return!1},u.isItemWrapper=function(a){return!(!a.classList.contains("cui-resizable-handle")&&!a.classList.contains("cui-wrapper"))},u.getSelectedItem=function(a){var b;return z?(b=a?v("img[data-cui-selected][data-cui-"+a+"]",d.getDoc()):v("img[data-cui-selected]",d.getDoc()),1===b.length?b[0]:null):null},u.setItemButtonState=function(){var a=d.getToolButton("image"),b=u.getSelectedItem("image"),c=d.getText("image.toolbutton.inserttext"),e=d.getText("image.toolbutton.edittext"),f=d.getToolButton("media"),g=u.getSelectedItem("media"),h=d.getText("media.toolbutton.inserttext"),i=d.getText("media.toolbutton.edittext");a&&(b?(a.option("pressed",!0),a.option("label",e)):(a.option("pressed",!1),a.option("label",c))),f&&(g?(f.option("pressed",!0),f.option("label",i)):(f.option("pressed",!1),f.option("label",h)))},u.deselectItem=function(a,b){var c,e,f=b||u.getSelectedItem();f&&(c=v(f),c.hasClass("cui-resizable")&&c.resizable("instance")&&(z=!1,c.resizable("destroy").removeAttr("data-cui-selected").css("display","inline-block"),w.ie&&c.attr("unselectable","on"),a?y.selectElement(f):o(f)?(e=y.createRange(),e.setStartAfter(f.parentNode),e.setEndAfter(f.parentNode),y.setSingleRange(e),d.blur()):(e=y.getRange(),e.collapse(!1),y.setSingleRange(e))),d.selectionChange.contentChanged()),u.setItemButtonState()},u.selectItem=function(a){var b,c,e,f=u.getSelectedItem();a&&!a.getAttribute("data-cui-lock")&&(f&&u.deselectItem(),z=!0,c=v(a),e=a.src,w.ie&&e.match(/base64/)&&(e=e.replace(/&#10;/g," ").replace(/&#61;/g,"="),c.attr("src",e)),c.resizable({aspectRatioPoint:"se",controlPoint:!0,display:"inline-block",doc:d.getDoc(),stop:function(){d.trigger("documentchanged")}}).attr("data-cui-selected","true").attr("data-cafe-filter","image"),b=v(a),b.parent().attr("data-cafe-filter","unwrap").find(".cui-resizable-handle"),w.ie?y.selectElement(b.parent()[0]):y.selectElement(b[0]),u.setItemButtonState(),d.selectionChange.contentChanged())},u.getCurrentCell=function(){var a=d.selectionManager,b=a.getRange(),c="td, th";return a.getClosest(b.startContainer,c)},u.getSelectedCells=v.noop,u.isEndOfLine=p,u.fixNewLineAfterNoneParagraph=function(a){var b,c,e,f,g,h=null;return y=d.selectionManager,a=a||y.getRange(),b=a.startContainer,c=d.browser.ie?y.getClosest(b,"H1,H2,H3,H4,H5,H6"):y.getClosest(b,"DIV, H6"),e=new RegExp("^H1|H2|H3|H4|H5|H6$","i"),g=d.contentUtils.getLeafNode(c,!0),c&&(1===c.childNodes.length&&""===c.textContent&&3===g.nodeType||"BR"===g.nodeName||2===c.childNodes.length&&c.textContent===D.ZWS+D.NBSP)&&(c.previousSibling&&e.test(c.previousSibling.nodeName)?(h=d.createEmptyLine(),h.innerHTML=c.innerHTML,c.previousSibling.style.lineHeight&&(h.style.lineHeight=c.previousSibling.style.lineHeight),v(c).after(h).remove()):c.parentNode&&"LI"===c.parentNode.nodeName&&(f=c.parentNode.previousSibling&&c.parentNode.previousSibling.firstChild?c.parentNode.previousSibling.firstChild.nodeName:"p",h=d.getDoc().createElement(f),h.innerHTML=d.browser.ie?"&nbsp;":"<br>",v(c).after(h).remove())),h},u.addInitialWidgetState=function(a,b,c){B.push({name:a,value:b,type:c||1})},u.getInitialWidgetState=function(){return B},u.isCharKeyCode=function(a){switch(a){case x.LEFT:case x.UP:case x.RIGHT:case x.DOWN:case x.BACKSPACE:case x.DELETE:case x.HOME:case x.END:case x.PAGE_UP:case x.PAGE_DOWN:case x.TAB:break;default:if(a)return!0}return!1},u.fillEmptyCellsInRange=function(b,c){var e,f,g,h,i,j=d.getDoc(),k=d.selectionManager.getLeafNode,l=b.startContainer,m=b.endContainer,n=new a(l,b.commonAncestorContainer),o=l;for(1===l.nodeType&&(o=k(l,!0)),1===m.nodeType&&(m=k(m));o&&o!==m;)1===o.nodeType?("TD"!==o.nodeName&&"TH"!==o.nodeName||(0===o.childNodes.length?c?(e=j.createElement(c),f=j.createElement("br"),d.browser.ie?d.browser.version>10?e.appendChild(f.setAttribute("cui-ebr","true")):e.appendChild(j.createTextNode("&nbsp;")):e.appendChild(f),o.appendChild(e)):o.appendChild(d.createEmptyLine()):w.ie&&w.ie.version>10&&(g=v("br[cui-ebr]",o),h=!!g.length,g.remove(),h&&""===o.textContent&&(i=k(o),1===i.nodeType&&"BR"!==i.nodeName&&(f=j.createElement("BR"),f.setAttribute("cui-ebr","true"),i.appendChild(f))))),o=n.next()):o=n.next()},u.unselectAllTable=function(){var a,b,c,e=v("table[data-cui-selected=true]",d.getBody());if(u.unselectTable&&u.unselectCells)for(a=e.length;a--;)b=e.eq(a),c=b.find("[data-cui-selected=true]"),c&&c.length>0&&u.unselectCells(c),u.unselectTable(b)},d.one("editorcreate",function(){var a=v(d.getDoc());a.on("click",i).on("mousedown","*",n).on("keydown",m).on("drop",f),w.ie?a.delegate("div","dragstart",g):a.delegate("img","dragstart",g),v(d.getBody()).on("mousedown.cafe","table",k).on("keydown.cafe",r),t=c.toPX(v(d.getBody()).css("font-size")),s()}),d.on("tabsbeforeactivate",function(){u.deselectItem()}),v(d.uiManager.getContainer()).on("dialogbeforeclose",".cui-dialog",function(){var a=d.pluginUtils,b=a.getSelectedItem();b&&a.deselectItem(!1,b)}),u.destroy=function(){u=null,v=null,w=null,x=null,y=null,z=null,A=null,t=null,B=null,C=null,E=null,F=null,G=null,H=null,I=null}}return d}),d("utilities/SelectionChange",["utilities/NodeTracker"],function(a){function c(c){function d(a){var b,c=a,d=c.length;if(d===w.length)for(b=d;b>=0&&c[b]===w[b];b--)if(0===b)return w=c,!1;return w=c,!0}function e(a){var b=!1;return a.compareDocumentPosition(v)>0&&(b=a!==v),b}function f(a,b){return!(!a||!b)&&(a.startContainer===b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset)}function g(a){var b,c,d,e;if(a)for(c=0,b=a.length;c<b;c++)d=a[c].parentNode,d&&!u.contains(d)&&"SPAN"===d.nodeName&&(e=p(d),a[c]=e.data("target"),e.remove()),e=d=null}function h(a,c){var f,g,h=!0,i=a.startContainer;3===i.nodeType&&(i=i.parentNode),x&&a.collapsed===x.collapsed&&a.collapsed&&(r<9?(f=s.getAncestors(i),h=d(f)):h=!(!y&&!z)||e(i)),h&&(g=x.startContainer,y=z,g&&3===g.nodeType&&"unknown"!=typeof g.nodeValue&&g.nodeValue!==b||(g=null),q.contentChanged(a,i,f,c,g)),v=i}function i(a){var b={};return a=a||s.getRange().cloneRange(),r?(b.commonAncestorContainer=a.commonAncestorContainer,b.startContainer=a.startContainer,b.startOffset=a.startOffset,b.endContainer=a.endContainer,b.endOffset=a.endOffset,b.collapsed=a.collapsed):b=a,b}function j(a){var b=s.getRange().cloneRange(),d=i(b),e=!!c.pluginUtils.getSelectedItem(),g=s.getClosest(d.commonAncestorContainer,"TD TH"),j=c.isPluginLoaded("table");z=g&&g.hasAttribute("data-cui-selected"),(!f(d,x)||g&&j||x.hasSelectedImage!==e)&&(h(d,a),c.trigger("selectionrangechange")),m=null,x=d,x.hasSelectedImage=e,c.lastRange=b}function k(a){return!(!a.collapsed||a.startContainer.nodeName!==c.constants.NodeNames.P||0!==a.startOffset)}function l(a){a.preventDefault(),p(t).off("mousedown.safari")}var m,n,o,p=c.$,q=this,r=c.browser.ie&&parseInt(c.browser.version,10),s=c.selectionManager,t=c.getDoc(),u=c.getBody(),v=u,w=[],x={},y=!1,z=!1;q.findLeafNode=function(a,b){for(;a&&a.hasChildNodes()&&a.childNodes[b];)a=a.childNodes[b],a&&(b=3===a.nodeType?a.length:a.childNodes.length);return a},q.getTempTextNode=function(a){var b,d=c.getDoc(),e=d.createTextNode(""),f=d.createElement("span");return p(f).data("target",a),f.appendChild(e),b=c.styleUtils.getComputedStyle(a,s.getAncestors(a)),p.map(b,function(a,c){f.style[c]=b[c]}),e},q.getSelectedTextNodes=function(b){var d,e,f,g,h,i,j=c.contentUtils,k=[];for(b=b||s.getRange(),d=b.startContainer,e=b.endContainer,g=b.startOffset,h=b.endOffset,i=b.commonAncestorContainer,3!==e.nodeType&&(d===e&&"BODY"===d.nodeName&&(e=j.getLeafNode(d.lastChild,!1),d=d.firstChild),e===i&&(e=q.findLeafNode(e,h),h=0),d===i&&(d=q.findLeafNode(d,g))),f=new a(d,i),3===d.nodeType&&d.length===g&&(d=f.next());d;){if(3===d.nodeType){if(d===e&&0===h)break;k.push(d)}else c.contentUtils.isEmptyLine(d.parentNode,!0)&&k.push(q.getTempTextNode(d));if(d===e)break;d=f.next()}return k},q.getSelectedTextNodesInTable=function(b,d){for(var e=s.getClosest(b[0],"table"),f=s.getLeafNode(b[b.length-1]),g=b[0],h=[],i=new a(g,e);g&&(3===g.nodeType?h.push(g):c.contentUtils.isEmptyLine(g.parentNode,!0)&&h.push(q.getTempTextNode(g)),g!==f);)"TABLE"===g.nodeName||/^(?:td|th)$/i.test(g.nodeName)&&!d&&"true"!==g.getAttribute("data-cui-selected")?g.nextSibbling?g=i.nextSibbling():(g=s.getLeafNode(g),i.current(g),g=i.next()):g=i.next();return h},q.contentChanged=function(a,b,d,e,f){var h,i,j,l,m,n,o,r=c.styleUtils,t=c.pluginUtils;if(a=a||s.getRange(),b=b||s.getCurrentNode(),h=s.getCursorPosition(),a.collapsed?(m=t.getSelectedCells(),m&&s.getClosest(m[0],"table")===s.getClosest(a.startContainer,"table")?j=q.getSelectedTextNodesInTable(m):(l=t.getCurrentCell())?a.startContainer.nodeType===c.constants.NodeTypes.TEXT_NODE?j=[a.startContainer]:k(a)?(n=a.startContainer,j=[]):j=q.getSelectedTextNodesInTable([l],!0):j=[]):j=q.getSelectedTextNodes(a),j&&j.length>0?(n=j[0].parentNode,u.contains(n)||(j=j.shift(),n=p(n).data("target").parentNode)):n=h.element,8!==n.nodeType&&"BR"!==n.nodeName||(n=n.parentNode),d=d||s.getAncestors(n),i=r.getComputedStyle(n,d),(!a.collapsed||m)&&j.length>=2&&(i=r.checkStyle(i,j),g(j)),c.pluginUtils.getSelectedItem())for(o in i)i[o]="";c.trigger("selectionchange",{node:b,parents:d,textNodes:j,range:a,keyCode:e,lastTextNode:f,styles:i,cursor:h})},q.refreshLastRange=function(){c.lastRange=s.getRange().cloneRange(),x=i(c.lastRange),v=c.lastRange.startContainer},p(t).on("mousedown mouseup",function(a){m&&clearTimeout(m),m=setTimeout(function(){j(a.keyCode)},20)}),p(t).on("keydown",function(a){m&&clearTimeout(m),s.getRange().collapsed||p.ui.isNavigationKeyCode[a.keyCode]||(o=!0,m=setTimeout(function(){j(a.keyCode)},20))}),p(t).on("keyup",function(a){n&&clearTimeout(n),c.pluginUtils.isCharKeyCode(a.keyCode)&&!o||(o=!1,n=setTimeout(function(){j(a.keyCode)},20))}),c.browser.safari&&p(t).on("mousedown",function(a){c.isEmpty(!0)&&"HTML"===a.target.nodeName&&a.preventDefault()}).on("click",function(){c.isEmpty(!0)&&p(t).on("mousedown.safari",l)}).on("mouseout",function(){p(t).off("mousedown.safari")}),q.destroy=function(){m&&clearTimeout(m),p=null,q=null,r=null,s=null,t=null,u=null,v=null,w=null,x=null,m=null,y=null,z=null}}return c.prototype={getLastSelectionNode:function(){return this.lastNode}},c}),d("utilities/SelectionUtils",["utilities/NodeTracker"],function(a){function b(b){function c(a){var b,d;return a&&(d=a.previousSibling,d||(b=a.parentNode,b&&"BODY"!==b.nodeName&&(d=c(b)))),d}function d(a){var b,c;return a&&(c=a.nextSibling,c||(b=a.parentNode,b&&"BODY"!==b.nodeName&&(c=d(b)))),c}function e(a,b){var d;if(!a||b&&l.indexOf(a.nodeName)!==-1)return null;if(3===a.nodeType)return a;if(1===a.nodeType){if("BR"===a.nodeName)return a;d=a.lastChild}return d?e(d,b):e(c(a),b)}function f(a,b){var c;if(!a||b&&l.indexOf(a.nodeName)!==-1)return null;if(3===a.nodeType)return a;if(1===a.nodeType){if("BR"===a.nodeName)return a;c=a.firstChild}return c?f(c,b):f(d(a),b)}function g(a){var c,d=a.startContainer,e=a.endContainer,f=function(a,b){var c,d,e=m.length;for(c=0;c<e;c++)if(d=m[c],b.nodeName===d&&a.nodeName!==d)return!0;return!1};return!a.collapsed&&f(d,e)&&(c=a.endOffset-1,e=e.childNodes[c<0?0:c],b.selectionManager.getClosest(d,e.nodeName)===e)?e:null}function h(a,c,d,e){var f=a;return a&&1===a.nodeType&&a.childNodes.length>0&&(d?a=a.childNodes[c]:(a=a.childNodes["BODY"===a.nodeName?c-1:c],0===c&&!b.contentUtils.isLineNode(f)&&f.previousSibling?a=f.previousSibling:a||(a=f),e||(a=b.selectionManager.getLeafNode(a)))),a}function i(a){var c,d,e,f,g,h=a.startContainer,i=a.endContainer,j=a.startOffset,k=a.endOffset,l=function(a){for(;a&&"BODY"!==a.nodeType&&!(g=a.nextSibling);)a=a.parentNode;return g};if(b.browser.ie&&!a.collapsed&&3===h.nodeType&&h.length===a.startOffset)for(c=b.selectionManager.getAncestors(h),f=c.length,e=0;e<f;e++)if(d=c[e],b.lockUtils.hasLockedStyle([d])){g=l(h),g&&a.setStart(g,0);break}return!b.browser.ie||a.collapsed||"BODY"!==h.nodeName&&"BODY"!==i.nodeName||("BODY"===h.nodeName&&(h=h.childNodes[a.startOffset],j=0),"BODY"===i.nodeName&&(i=i.childNodes[a.endOffset-1],1===i.nodeType?k=i.childNodes.length:3===i.nodeType&&(k=i.textContent.length)),b.selectionManager.setRange(h,j,i,k),a=b.selectionManager.getRange()),a}var j=this,k=b.$,l="META PARAM EMBED SOURCE WBR TRACK AREA BASE BASEFONT BR COL FRAME HR IMG INPUT ISINDEX LINK P H1 H2 H3 H4 H5 H6 TD TH DIV UL OL LI TABLE DL DT DD HEADER FOOTER ADDRESS PRE CENTER ARTICLE SECTION NAV".split(" "),m=["BODY","UL","OL","TD"];j.getStartTextNodeByRange=function(a,b){var c,d;if(a)return 3===a.nodeType?c=b>0?a.splitText(b):a:(d=a.childNodes,c=d&&d.length>b?this.getStartTextNodeByRange(d[b],0):f(a)),c},j.getEndTextNodeByRange=function(a,b){var d,f;if(a)return 3===a.nodeType?(b>=0&&b<a.data.length&&a.splitText(b),d=a):(f=a.childNodes,f&&f.length>0&&0!==b?(b=b===-1?f.length-1:b-1,d=this.getEndTextNodeByRange(f[b],-1)):d=e(c(a))),d},j.getTextNodeListByRange=function(a,b,c,e){var g,h,i,j=[];if(3===a.nodeType&&a===c)a.splitText(e),i=a.splitText(b),j.push(i);else{for(g=this.getStartTextNodeByRange(a,b),h=this.getEndTextNodeByRange(c,e);g&&h&&g!==h;)j.push(g),g=f(d(g));g&&j.push(g)}return j},j.getWord=function(a,b,g){function h(a){var b,d,f,g=a?a.data:null;if(g){if(d=g.lastIndexOf(" "),f=g.lastIndexOf("Â "),b=d>f?d:f,b===g.length)return;b>=0?(a=a.splitText(b),n.unshift(a)):(n.unshift(a),h(e(c(a),!0)))}}function i(a){var b,c,e,g=a?a.data:null;if(g){if(c=g.indexOf(" "),e=g.indexOf("Â "),b=c<0?e:e<0?c:c<e?c:e,0===b)return;b>=0?(a.splitText(b),o.push(a)):(o.push(a),i(f(d(a),!0)))}}var j,k,m,n=[],o=[];return 3===a.nodeType?b<=0?(m=c(a),m&&l.indexOf(m.nodeName)===-1&&(j=e(m),k=a)):b<a.length?(j=a,k=a.splitText(b)):(j=a,k=f(d(a),!0)):a.childNodes&&a.childNodes.length>b&&(a=a.childNodes[b],3===a.nodeType?(m=c(a),m&&l.indexOf(m.nodeName)===-1||(m=a)):m=a,j=e(m),k=f(a)),h(j),g||i(k),n.concat(o)},j.reRangeByShiftEnd=function(){var a,c,d=b.selectionManager;return a=d.getRange(),b.browser.ie&&(c=g(a),c&&1===c.nodeType&&(a.setEndAfter(c.lastChild||c),d.setSingleRange(a))),a},j.getValidOffset=function(a,b){return 3===a.nodeType?b=b>a.length?a.length:b:1===a.nodeType&&(b=b>a.childNodes.length?a.childNodes.length:b),b},j.setValidRange=function(a,c,d,e){k(a).parents("body")[0]&&k(d).parents("body")[0]&&b.selectionManager.setRange(a,j.getValidOffset(a,c),d,j.getValidOffset(d,e))},j.getSelectedElements=function(c,d,e){var f,g,j,k,l,m,n,o=[],p=b.selectionManager;for(e?(g=e,k=p.getLeafNode(e,!1)):(f=p.getRange(),f=f.collapsed&&!c?b.contentUtils.selectWordRange(f,!0):i(f),j=h(f.startContainer,f.startOffset,!0),g=j,k=h(f.endContainer,f.endOffset,!1,f.startContainer===f.endContainer)),l=new a(g,k),g&&3===g.nodeType&&!d&&o.push(g);g&&(d?3===g.nodeType&&o.push(g):1===g.nodeType&&o.push(g),g!==k);)g=l.next();return k&&j!==k&&3===k.nodeType&&!d&&o.push(k),d&&f&&(1===f.endContainer.nodeType?m=0:(k=f.endContainer,m=f.endOffset),n=o.length-1,3===k.nodeType&&0===m&&o[n]&&o[n]===k&&(o=o.splice(0,n)),j=f.startContainer,m=f.startOffset,3===j.nodeType&&m===j.length&&o[0]===j&&(o=o.splice(1))),o},j.destroy=function(){j=null,k=null,l=null,m=null}}return b}),d("utilities/ZWSUtils",["utilities/EditorConstants"],function(a){function b(b){function c(a,b){var c;return!(!a.collapsed||(c=j(b).find(a.startContainer),1!==c.length))}function d(a){a&&3===a.nodeType&&""===a.nodeValue&&j(a).remove()}function e(){return b.getDoc().createTextNode("")}function f(a){var b=i.createZeroWidthSpaceNode();return a.insertNode(b),d(b.nextSibling),d(b.previousSibling),b}function g(a){var c=a.lastTextNode,d=a.textNodes,e=a.range,f=a.node,g=function(a){var b,d;if(a)for(b=a.length,d=0;d<b;d++)if(c===a[d])return!0;return!1};!d.length&&e.collapsed&&(d=b.contentUtils.getAllChildren(f,function(a){return a&&3===a.nodeType})),g(d)||e.startContainer===c||e.endContainer===c||c&&c.nodeValue&&c.nodeValue.length>2&&m.test(c.nodeValue)&&(c.nodeValue=i.removeZeroWidthSpaceChar(c.nodeValue))}function h(){var a,d,e,f,g,h,k,m,n,o,p=[],q=b.selectionManager;if(a=j(b.getBody()).find(".cui-zws"),d=q.getRange(),m=a.length){for(k=0;k<m;k++)f=a[k],g=j(f),c(d,f)||(n=g.find("img"),h=f.textContent,!n[0]&&i.isZeroWidthSpaceChar(h)?(b.browser.ie||(e=q.getClosest(f,l),e&&e.textContent===h&&f.parentNode&&f.parentNode.insertBefore(b.getDoc().createTextNode("Â "),f)),p.push(f)):(g.removeClass("cui-zws"),o=f.firstChild,1===f.childNodes.length&&3===o.nodeType&&1===o.length&&(o.nodeValue=i.removeZeroWidthSpaceChar(o.nodeValue)),""===g.attr("class")&&(g.removeAttr("class"),f.attributes.length||"SPAN"!==f.nodeName||j(f.childNodes).unwrap())));j(p).remove()}}var i=this,j=b.$,k=a.StyleElements,l=a.keys(a.LineBlockElements).join(","),m=/[\u200B\uFEFF]/g;i.createZeroWidthSpaceNode=function(){var b=e();return b.nodeValue=a.UNICODE_CHAR_CODE.ZERO_WIDTH_SPACE,b},i.getZeroWidthSpace=function(a){var c,d=a.startContainer;return c=3===d.nodeType&&b.zwsUtils.isZeroWidthSpaceChar(d.nodeValue)?d:f(a)},i.startWithZeroWidthSpaceChar=function(a){return/^[\u200B\uFEFF]/g.test(a)},i.isZeroWidthSpaceChar=function(a){return/^[\u200B\uFEFF]$/g.test(a)},i.isZeroWidthSpaceTextNode=function(a){return!(!a||!i.isZeroWidthSpaceChar(a.nodeValue))},i.isOnlyZeroWidthSpaceLine=function(a){var b=a.lineElement,c=a.node,d=b.childNodes.length,e=function(a){for(;a&&a.firstChild;){if(1!==a.childNodes.length)return null;a=a.firstChild}return a};return!(1!==a.offset||1!==a.col||3!==c.nodeType||!i.isZeroWidthSpaceChar(c.nodeValue)||e(b.firstChild)!==c||1!==d&&(2!==d||"BR"!==b.lastChild.nodeName))},i.insertZWSInEmptyLines=function(c,d,e){var f,g,h,i,k,l,m,n=0,o=[],p={},q=b.zwsUtils,r=a.NodeStyles,s=function(a){return!(0!==a.textContent.length&&!b.zwsUtils.isZeroWidthSpaceChar(a.textContent))},t=function(a){var b,c,d,e;if(a&&s(a)){for(b=a;b&&1===b.childNodes.length;)b=b.firstChild;if(!b)return null;if(c=b.childNodes,e=b.nodeType,d=b.firstChild,3===e&&s(b)||1===e&&0===c.length)return b;if(2===c.length&&1===d.nodeType&&0===d.childNodes.length&&"BR"===b.lastChild.nodeName&&0===d.textContent.length)return d}return null};for(g=c.length,f=0;f<g;f++)h=c[f],h.childNodes.length||o.push(h),(l=t(h))&&(n++,i=j(l),3===l.nodeType?q.isZeroWidthSpaceTextNode(l)?k=l:(k=q.createZeroWidthSpaceNode(),i.before(k),i.remove()):(m=l.firstChild,m&&q.isZeroWidthSpaceTextNode(m)?(k=m,j(k).wrap(r[d].wrap)):m||"BR"!==l.nodeName?i.prepend(r[d].wrap):i.wrap(r[d].wrap)),e&&j(k.parentNode).css(r[d].attrName,e));return p.isAllEmptyLines=g===n,p.pEmptyLines=o,p},i.removeZeroWidthSpaceChar=function(a){return a.replace(m,"")},i.removeZeroWidthSpace=function(){var a,c,d,e=b.selectionManager;a=e.getCursorPosition(),a&&(c=a.node,d=a.offset,3===c.nodeType&&i.startWithZeroWidthSpaceChar(c.nodeValue)&&(c.parentNode.normalize(),c.nodeValue=i.removeZeroWidthSpaceChar(c.nodeValue),a.offset=d?d-1:0,e.setCursorPosition(a)))},i.removeZWSTextNode=function(a){a&&3===a.nodeType&&a.parentNode&&b.zwsUtils.isZeroWidthSpaceChar(a.nodeValue)&&a.parentNode.removeChild(a)},i.removeZWS=function(a,c){b.pluginUtils.isCharKeyCode(c.keyCode)||(h(),g(c))},i.removeTaggingZeroWidthSpace=function(a){var b;a&&(b=j(a),b.removeClass("cui-zws"),""===b.attr("class")&&b.removeAttr("class"))},i.taggingZeroWidthSpace=function(a){var c,d=b.selectionManager.getCursorPosition();a&&!i.isZeroWidthSpaceChar(d.lineElement.textContent)&&(c=a.parentNode,c&&k[c.nodeName]&&1===c.childNodes.length&&j(c).addClass("cui-zws"))},i.destroy=function(){i=null,j=null,k=null,l=null,m=null}}return b}),d("Editor",["jqueryCafe","utilities/ColorUtils","utilities/EditorConstants","utilities/ScriptLoader","utilities/SelectionChange","utilities/SelectionUtils","utilities/NodeTracker","utilities/CSSParser","utilities/UnitConverter","UIManager","SelectionManager","utilities/ContentUtils","utilities/LockUtils","utilities/StyleUtils","utilities/PluginUtils","utilities/ZWSUtils","ShortcutManager","HistoryManager","CommandManager","CommandHelper"],function(a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){function v(b){var c,d,e,f;for(e=b.indexOf(",")?b.split(","):[b],c=0,d=e.length;c<d;c++)f=a.trim(e[c]),(/\./g.test(f)&&f&&!/[\[\]\#]/g.test(f)||/^\#/g.test(f)&&!/^\#cafe-note-contents/g.test(f))&&(e[c]="#"+C+" "+f);return e.join(",")}function w(a){var b,c,d="",e=[],f=[],g=/(\s|^|\\,|\\>|\\+|\\~)(table)(\W|\\-|$)/gim,h=/(\s|^|\\,|\\>|\\+|\\~)(td)(\W|\\-|$)/gim;if(e=a.split(g),e.length>=2)for(c=e.length,b=0;b<c;b++)d+=g.test(e[b])?".cui-real-table":e[b];if(d&&(a=d,d=""),f=a.split(h),f.length>=2){for(c=f.length,b=0;b<c;b++)d+=h.test(f[b])?".cui-real-td":f[b];return d}return a}function x(a){var b,c,d=/>\s*div/gim;if(!a.match(d))return null;for(b=c=a;b.match(d);)b=b.replace("div","p"),c=c.replace("div","table");return{p:b,table:c}}function y(b,f,g){var h,i,j,l,m,n="SCRIPT";if(this.configs=f=a.extend({id:b,plugins:"",blockElement:"p",doctype:"<!DOCTYPE html>",useDefaultStyleByLink:!0,theme:"deploy",enable_object_contents:!1,exclude_content_protect_style:!1},f),f.panel&&"string"==typeof f.panel&&""!==f.panel||(f.panel="edit codeview preview"),f.height&&(f.height=parseInt(f.height,10)),f.editor_max_height&&(f.editor_max_height=parseInt(f.editor_max_height,10)),(!f.height||f.height<g.editorConstants.EDITOR_MIN_HEIGHT)&&(f.height=g.editorConstants.EDITOR_MIN_HEIGHT),f.invalid_elements?/(?:^script$)|(?:^script[\,\s\uFEFF\xA0])|(?:[\,\s\uFEFF\xA0]script[\,\s\uFEFF\xA0])|(?:[\,\s\uFEFF\xA0]script$)/gi.test(f.invalid_elements)||(f.invalid_elements+=", SCRIPT"):f.invalid_elements=n,f.ignore_head_elements=d.IgnoreHeadElements,this.$=a,this.language=f.language||"ko_KR",this.id=b,this.baseURL=g.baseURL,this.browser=g.browser,this.os=g.os,this.suffix=g.suffix,this.editorManager=g,this.scriptLoader=new e,this.uiManager=new k,this.buttons={},this.menuItems={},this.panels={},this.commands={},this.shortcuts={},this.theme={},this.dialogs={},this.style="",this.colorUtils=c,this.constants=d,this.finalTasks=[],f.default_skins_path||(f.useDefaultStyleByLink=!1,f.default_skins_path=this.baseURL+"skins/"),/\/$/.test(f.default_skins_path)||(f.default_skins_path+="/"),f.support_svg&&(d.SupportImageType.push("image/svg+xml"),d.SupportImageExtension.push("svg")),f.default_font_size=f.default_font_size||d.DEFAULT_FONT_SIZE,f.default_font_family){for(i=f.default_font_family.split(","),j=0,l=i.length,m=[];j<l;j++)h=this.$.trim(i[j]),/[^A-Za-z-]|\s/g.test(h)&&(h="'"+h.replace(/[\'|\"]/g,"")+"'"),m.push(h);f.default_font_family=m.join(",")}else f.default_font_family=d.DEFAULT_FONT_FAMILY;f.default_font_family=f.default_font_family||d.DEFAULT_FONT_FAMILY,f.default_line_height=f.default_line_height||d.DEFAULT_LINE_HEIGHT,A=this.browser.ie?this.configs.new_line_without_blank&&this.browser.version>10?"<br cui-ebr='true'>":"&nbsp;":"<br>",z=a("<p>"+A+"</p>")[0]}var z,A,B=["newdocument","fontfamily","fontsize","fontcolor","fontbgcolor","italic","bold","underline","strikethrough","information","alignment","codeview","colorpicker","copy","cut","paste","preview","selectall","undo","redo","indent","spanstyle","commonformat","blockformat"],C=d.CONTENTS_ID,D="false",E={};return y.prototype={setup:function(){function b(){var b=h.language.indexOf("_");h.language=a.trim(h.language.substr(0,b).toLowerCase()+h.language.slice(b).toUpperCase()),h.editorManager.i18n.getLanguagePack(h.language)||h.scriptLoader.addQueue(h.baseURL+"langs/"+h.language+h.suffix+".js");
}function c(){k.panel?k.panel.indexOf("preview")===-1&&k.plugins.indexOf("readonly")!==-1&&(k.panel+=" preview",h.previewAddedByReadonly=!0):k.panel="edit codeview preview"}function d(){var b,d,e,f,g=h.editorManager.pluginManager;if(g.setExceptions(B),c(),k.plugins){for(a.isArray(k.plugins)&&(k.plugins=k.plugins.join(" ")),k.plugins=k.plugins.replace(/(:?\s|,){1,}/g," "),k.plugins=a.trim(k.plugins.toLowerCase()),k.plugins=k.plugins.split(" "),f=a.inArray("core",k.plugins);f!==-1;)k.plugins.splice(f,1);k.plugins.unshift("core")}else k.plugins=["core"];for(d=0,e=k.plugins.length;d<e;d++)b=k.plugins[d],g.get(b)||g.load(h.scriptLoader,b,{prefix:h.baseURL+"plugins/",plugin:b,suffix:"/plugin"+h.suffix+".js"})}function e(){return h.editorManager.themeManager.load(h,"deploy",{prefix:h.baseURL+"themes/",theme:"deploy",suffix:h.suffix+".js"}),!0}function f(){function b(b){var c,d="#"+C,e="body",f=e+d,n="div"+d,o=k.default_font_size,p=k.default_font_family,q=k.default_line_height;b=b||"",c=i.parse("<style>"+b+"</style>",{trimSpace:!0})||{},c[d]||(c[d]={}),o&&(isNaN(o)?/px$/i.test(o)&&(o=j.convertPXToPT(o)+"pt"):o+="pt",c[d]["font-size"]=o,k.default_font_size=o),p&&(k.default_font_family=p,/\\AD74 \\B9BC /i.test(p)&&window.unescape&&(p=p.replace(/\\AD74 \\B9BC /gi,window.unescape("%uAD74%uB9BC"))),c[d]["font-family"]=p),q&&(isNaN(q)&&/\%$/i.test(q)&&(q=parseFloat(q),q/=100),c[d]["line-height"]=q,k.default_line_height=q),h.cssObj=g(a.extend({},c),d),q&&(h.cssObj.P&&(h.cssObj.P["line-height"]=q),h.cssObj.LI&&(h.cssObj.LI["line-height"]=q)),/^true$/i.test(D)?h.style='\n<style class="cui-content-default" data-cafe-default="true">'+b+'</style>\n<style class="cui-content-default" data-user-config="true">\n'+e+" {margin: 10px; font-size: "+k.default_font_size+"; font-family:"+k.default_font_family+"; line-height:"+k.default_line_height+";}\np {line-height:"+k.default_line_height+";}\n"+e+","+e+" p,"+e+" li,"+e+" h1,"+e+" h2, "+e+" h3,"+e+" h4,"+e+" h5,"+e+" h6 {font-family:"+k.default_font_family+"; line-height:"+k.default_line_height+";}\n</style>":(h.configs.useDefaultStyleByLink?(h.style='<link rel="stylesheet" type="text/css" class="cui-content-default cui-content-view" href="'+l+'">\n',h.configs.exclude_content_protect_style||(h.style+='<link rel="stylesheet" type="text/css" class="cui-content-default cui-content-browser-default" href="'+m+'">\n')):h.style='<style class="cui-content-default" data-cafe-default="true">'+b+"</style>",h.style+='<style class="cui-content-default" data-user-config="true">\n'+f+","+n+" {margin: 10px; font-size: "+k.default_font_size+"; font-family:"+k.default_font_family+"; line-height:"+k.default_line_height+";}\n"+f+","+n+","+f+" p,"+f+" li,"+f+" h1,"+f+" h2, "+f+" h3,"+f+" h4,"+f+" h5,"+f+" h6,"+n+" p,"+n+" li,"+n+" h1,"+n+" h2, "+n+" h3,"+n+" h4,"+n+" h5,"+n+" h6 {font-family:"+k.default_font_family+"; line-height:"+k.default_line_height+";}</style>\n")}function c(){var a=0,c="";d===e&&(1===e?b(n.view):(a=n.view.indexOf("#cafe-note-contents {"),a===-1&&(a=n.view.indexOf("#cafe-note-contents{")),a>-1&&(c=n.view.slice(0,a),c+=n.browserDefaultStyle,c+=n.view.slice(a,n.view.length)),b(c)))}var d=0,e=1,f=h.configs.default_skins_path+h.configs.skin,l=f+"/view"+h.suffix+".css",m=f+"/protectview"+h.suffix+".css",n={view:"",browserDefaultStyle:""};/^true$/i.test(D)||h.configs.exclude_content_protect_style||(e=2,h.scriptLoader.loadContentAjax(m,function(a){a=a.slice(a.indexOf("*/")+2,a.length),n.browserDefaultStyle=a,h.brorwseDefStyleStr=a,d++,c()},function(){})),h.scriptLoader.loadContentAjax(l,function(a){n.view=a,d++,c()},function(){var a="#"+C,b="__BODY_ID__ table td,__BODY_ID__ table th {min-width:20px;min-height:22px;padding-left:2px;padding-bottom:2px;padding-right:2px;padding-top:2px;}\n__BODY_ID__ li, __BODY_ID__ p {line-height:1.2;margin-top:0;margin-bottom:0;}\nbody__BODY_ID__,div__BODY_ID__ {font-family:'ë§ì ê³ ë';font-size:10pt;word-wrap:break-word;margin-left:10px;margin-bottom:10px;margin-right:10px;margin-top:10px;}\n";b=b.replace(/__BODY_ID__/g,a),h.style='<style class="cui-content-default">\nbody'+a+", div"+a+" {"+b+"}</style>\n"})}function g(b,c){function d(c,d,e,h){var i,j,k,l,m;for(c=c.indexOf(",")?c.split(","):[c],i=0,j=c.length;i<j;i++)k=a.trim(c[i]),d.test(k)&&(l=k.replace(e,"").toUpperCase(),m=f[l]||h||g,f[l]=a.extend({},m,b[c]))}var e,f={},g=b[c]||{},h=new RegExp("^(?:body|div)?\\"+c+"(?: table)? \\w+?$","i"),i=new RegExp("^(?:body|div)?(?:)\\"+c+"(?: table)? ","i"),j=new RegExp(c+"(?: (?:ul|ol))+","i"),k=new RegExp(c+" ","i");g=a.extend({},b[c+" *,"+c]||b[c+","+c+" *"],b[c]),g=a.extend({},g,b["div"+c+" *,body"+c+" *"]||b["body"+c+" *,div"+c+" *"]),f={defaultStyle:g};for(e in b)/^(?:div|body)/i.test(e)||d(e,h,i);for(e in b)/^(?:div|body)/i.test(e)||d(e,j,k,f.UL);for(e in b)/^(?:div|body)/i.test(e)&&d(e,h,i);return f}var h=this,k=h.configs;f(),b(),d(),e(),h.scriptLoader.loadQueue(function(){h.init()}),h.getDefaultStyle=function(a){var b;return a=a?a.toUpperCase():"defaultStyle",h.cssObj&&(b=h.cssObj[a]||h.cssObj.defaultStyle),b}},init:function(){function a(a,b){function c(){return a.apply(this,b)}return c.prototype=a.prototype,new c}function b(c){var d,e,f,h,j,k,l,m=g.editorManager.pluginManager;if("core"===c)for(j=0,k=B.length;j<k;j++)b(B[j]);else if(d=m.get(c),l=[g],d&&!i[c]){for(f=m.getDependencies(c),e=0,h=f.length;e<h;e++)b(f[e]),l.push(i[f[e]]);i[c]=a(d,l)}}function c(a){var b,d=g.editorManager.themeManager,e=d.get(a);e&&(b=d.getParent(a),b&&c(b),g.theme=e(g,g.theme))}var d,e,f,g=this,h=g.configs,i={};for(this.addPanel("edit",{label:g.getText("edit"),contextmenu:["cut","copy","paste","pasteastext","|","alignment","|","copytable","pastetable","nesttable","overwritecells","|","image","media","link","|","selecttable","deletetable","tableproperties","|","tableindent","tableoutdent","|","insertcell","deletecells","mergecells","splitcell","|","tableselection","|","cellsize","|","cellproperties"].join(" ")}),e=0,f=h.plugins.length;e<f;e++)d=h.plugins[e],b(d);g.isPluginLoaded=function(a){return!!i[a]},g.commandHelper=new u(this),c(h.theme),g.one("uicreate",function(){g.off("uicreatefail"),g.initEditorDoc()}),g.one("uicreatefail",function(){g.off("uicreate"),g.editorManager.destroy(g,!0),window.alert("ìëí°ë¥¼ ì ìì ì¼ë¡ ìì±í  ì ììµëë¤.\n\nì²´í¬ì ì°¸ê³ ì¬í­:\n- ëë©ì¸ ì¤ì  íì¸\n    * Same-origin policyì ìë°í ì½ë ëë ëë©ì¸ ì¤ì  íì¸\n    * Same-origin policyì íí¼íê¸° ìí ì½ë ëë ê´ë ¨ ëë©ì¸ ì¤ì \n    ë±\n\n\nCannot launch the editor.\n\nIf you need, refer to the following:\n- Domain settings verification\n    * Checks the same-origin policy violation codes or\n      the domain name configuration.\n    * Checks the source codes for relaxing the same-origin policy or\n      checking the domain name configuration.\n    etc.")}),this.uiManager.create(this,{targetId:this.id,configs:this.configs,menuItems:this.menuItems,buttons:this.buttons,panels:this.panels,dialogs:this.dialogs})},getVerifyLog:function(a){var b,c,e,f,g=this.language,h=d.verify(),i=function(a){var b,c=h.d,d=c.y,e=c.m,f=c.d;return"en_US"===g&&(b=["Jan.","Feb.","Mar.","Apr.","May","Jun.","Jul.","Aug.","Sep.","Oct.","Nov.","Dec."],e=b[e-1]),a=a.replace("_YYYY_",d),a=a.replace("_MM_",e),a=a.replace("_DD_",f)};return h.t&&h.e>=h.c?(c=this.getText("license.trial"),c=c.replace("_REMAIN_",h.r),b="warning",f=i(this.getText("license.enddate")),a?c=this.getText("license.trial.guide")+"<br>"+c+"<br>"+f:c+=" "+f):3!==h.u||12!==h.k||h.e>21201231?(c=this.getText("license.wrong"),b="danger"):h.e<h.c&&(c=i(this.getText("license.expire")),b="danger",f=i(this.getText("license.enddate")),c+=a?"<br>"+f+"<br>"+this.getText("license.expire.guide"):" "+f),c&&(e={message:c,type:b},h.fd&&(e.forceDestroy=h.fd,e.message="CafeNote "+e.message)),e},initEditorDoc:function(){var c,d,e,h,i,j=this.browser,k=this.configs,u=this.getDoc(),v=this.commands,w=this.shortcuts,x=this.getVerifyLog(),y=this,z="",A="",B=function(){i=y.getBody(),i.contentEditable=!0,y.selectionManager=new l(y),y.shortcutManager=new r(y),y.historyManager=new s(y),y.commandManager=new t(y,y.commandHelper),y.selectionChange=new f(y),y.selectionUtils=new g(y),y.contentUtils=new m(y),y.lockUtils=new n(y),y.styleUtils=new o(y),y.pluginUtils=new p(y),y.zwsUtils=new q(y);for(d in v)e=v[d],y.commandManager.addCommand(e);for(h in w)d=w[h],y.shortcutManager.addShortcut(h,d);j.ie&&j.version>10?a(i).on("mscontrolselect.cafe",function(a){a.preventDefault()}):j.firefox&&(u.execCommand("enableObjectResizing",!1,"false"),u.execCommand("enableInlineTableEditing",!1,"false")),y.browser.ie&&a(u.documentElement).on("mousedown.cafe",function(a){a.target===u.documentElement&&a.preventDefault()}),x?x.forceDestroy?y.on("editoraftercreate",function(){y.editorManager.destroy(y.id),window.alert(x.message)}):y.uiManager.notibar(x.type,"<strong>"+x.message+"</strong>","warning"===x.type):x=b,y.trigger("editareacreate"),y.trigger("editorinitialized"),y.trigger("editorcreate"),y.trigger("editoraftercreate")};c=k.doctype+"<html>\n<head>\n",c+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" class="cui-content-default">',c+=this.style,c+='<link type="text/css" rel="stylesheet" href="'+this.baseURL+"skins/"+k.skin+"/designarea"+this.suffix+'.css" class="cui-content-default"></head>',k.default_font_size&&(A+="font-size:"+k.default_font_size+";"),k.default_font_family&&(A+="font-family:"+k.default_font_family+";"),k.default_line_height&&(A+="line-height:"+k.default_line_height+";"),c+='<body id="'+C+'" spellcheck="false" style="'+(k.useDefaultStyleByLink?"margin:10px;":"")+z+A+'">',this.browser.safari&&(c+='<div data-cui-filter="true" class="cui-dummyline">&nbsp;</div>'),c+=this.createEmptyLine(!0),c+="</body></html>",u.open("text/html","replace"),u.write(c),u.close(),this.browser.ie?B():this.uiManager.getEditArea()[0].addEventListener("load",function(){B()})},final:function(){for(var a,b=this.finalTasks;b&&b.length;)a=b.pop(),"function"==typeof a&&a(),a=null},createEmptyLine:function(a){var b=z.cloneNode(!0);return a?b.outerHTML:b},insertEmptyLine:function(a){var b=this.createEmptyLine();return a=a||this.getBody(),a.appendChild(b),b},isFocused:function(){var a=this.editorManager.focusedEditor;return a===this},focus:function(a){var b;if(!a){if(b=this.getBody(),b.setActive)try{b.setActive()}catch(a){b.focus()}else b.focus();this.trigger("editorfocus")}this.editorManager.activeEditor=this,this.editorManager.focusedEditor=this},blur:function(){var a,b=this.editorManager.focusedEditor;b===this&&(this.editorManager.focusedEditor=null),this.browser.ie?(a=document.body,a.focus()):(a=this.getBody(),a.blur())},getResourcesUrl:function(){return this.configs.resourcesUrl?this.configs.resourcesUrl:this.baseURL+"resources/"},getText:function(a){return this.editorManager.i18n.getText(this.language,a)},addCommand:function(a){a&&a.command&&!this.commands[a.command]&&(this.commands[a.command]=a)},execCommand:function(a,b){this.commandManager.execCommand(a,b)},addShortcut:function(a,b){a&&b&&!this.shortcuts[a]&&(this.shortcuts[a]=b)},getShortcut:function(b){var c,d,e=[],f=this.shortcuts,g=this.commands;if(!b)return e;for(c in f)d=f[c],d===b&&a.inArray(c,e)===-1&&e.push(c);return g[b]&&(c=g[b].shortcut,c&&a.inArray(c,e)===-1&&e.push(c)),e},setContent:function(a,b,c){var d,e=this;return d=e.selectionManager.setContent(a,b),e.isReadOnly&&e.isReadOnly()&&e.updateReadOnly(),e.trigger("contentchanged"),c?e.trigger("historyinitialize"):e.trigger("historypushed"),d},getContent:function(a){return this.selectionManager.getContent(a)},getContentWithBody:function(a,b){return this.selectionManager.getContentWithBody(a,b)},getContentSize:function(a){var b,c,d,e=0;for(a=a||this.getContent({format:"public"}),c=a.length,b=0;b<c;b++)d=a.charCodeAt(b),e+=d<=127?1:d>127&&d<=2047?2:d>2047&&d<=65535?3:4;return e},getHeight:function(){return this.$(this.getWin()).height()},setHeight:function(b,c){var d,e,f,g,h,i,j,k=this.configs,l=this.$(this.getBody()),m=this.uiManager.getContainer();if(b&&(!k.autoresize||c))return b=parseInt(b,10),g=this.editorManager.editorConstants.EDITOR_MIN_HEIGHT,b<g&&(b=g),d=a(".cui-tabs-panel > .cui-panel",m),e=a("textarea.cui-panel[data-cui-title=codeview]",m),f=a("textarea.cui-panel[data-cui-title=textmode]",m),k.editor_max_height&&(h=d.css("max-height"),h&&b>parseInt(h,10)&&(b=parseInt(h,10))),d.height(b),e.length>0&&(e[0].style.height=b+"px"),f.length>0&&f.outerHeight(b),i=parseInt(l.css("margin-top"),10),j=parseInt(l.css("margin-bottom"),10),l.css("min-height",b-i-j+"px"),this.scrollTo(),b},scrollTo:function(a){var b,c,d,e,f,g,h,i=this.$(this.getDoc()),j=this.browser,k=5;if(a=a||this.selectionManager.getRange(),h=a.startContainer,j.ie&&parseInt(j.version,10)<=9?(f=document.createRange(),e=a.nodeName?a:a.endContainer||a.startContainer,f.selectNode(e)):f=a,f&&f.getClientRects&&(c=f.getClientRects(),c&&0===c.length&&(g=f.startContainer,g&&g.getClientRects&&(c=g.getClientRects()),0===c.length&&1===h.nodeType&&(c=[h.getBoundingClientRect()])),c&&c.length>0)){if(c=c[0],b=this.getHeight(),d=i.scrollTop(),c.top<k)d+=c.top-k;else{if(!(b<c.bottom+k))return;d+=c.bottom-b+k}i.scrollTop(d)}},getWin:function(){var a;return this.contentWindow||(a=this.uiManager.getEditArea(),a&&(a=a[0],this.contentWindow=a.contentWindow)),this.contentWindow},getDoc:function(){var a;return this.contentDocument||(a=this.getWin(),a&&(this.contentDocument=a.document)),this.contentDocument},getBody:function(){return this.getDoc().body},getHead:function(){return this.getDoc().head||a("HEAD",this.getDoc())[0]},getVersion:function(){return this.editorManager.version},getEdition:function(){return this.editorManager.edition},addButton:function(a,b){this.buttons[a]=b},addMenuItem:function(a,b){this.menuItems[a]=b},addContextMenuItem:function(a,b){this.menuItems[a+"ContextMenu"]=b},addPanel:function(a,b){this.panels[a]=b},addDialog:function(a,b){this.dialogs[a]=b},addFinalTask:function(a){this.finalTasks.push(a)},addCommentNode:function(b){var c,e,f,g,h,j,k,l,m,n=this,o=n.getDoc(),p=n.getHead(),q=p.firstChild,r=this.configs.ignore_head_elements,s=/(?:display\s*:\s*(\S+)\s*;)/g,t={},u="";if(E={},b&&o.createComment){if("string"==typeof b)k=b,j=o.createComment(k);else if(b.setAttribute(d.USERDATA_ATTRIBUTE_NAME,!0),k=b.outerHTML?b.outerHTML:b.toString(),n.browser.ie&&"META"===b.nodeName&&(u=n.contentUtils.getAttributesString(b),k="<meta"+a.trim(u)+">"),"STYLE"===b.nodeName)if(l=k,q=a("style[data-user-config=true]",p)[0].previousElementSibling,/(?:<\!--|-->)/.test(l)&&(c=!0,l=l.replace(/<\!--/gi,"").replace(/-->/gi,"")),l=a.trim(l),e=i.parse(l,{usePlainParse:!0})){for(f in e)g=v(f),g=w(g),t[f]=g,g.indexOf("#cafe-note-contents")!==-1&&s.test(e[f])&&(m=e[f].match(s)[0].split(":")[1],m=m.trim(),E[f]=m.slice(0,m.length-1)),(h=x(f))&&(i.addRule(e,h.p,e[f]),t[h.p]=v(h.p),i.addRule(e,h.table,e[f]),t[h.table]=v(h.table));k=i.serialize(e,{rename:!0},t),c&&(k="<!--\n"+k+"\n-->"),u=n.contentUtils.getAttributesString(b,{TYPE:!0}),j=a('<style type="text/css" '+a.trim(u)+" >\n"+k+"\n</style>")[0]}else j=a(k)[0];else r[b.nodeName]?j=a(k)[0]:(k=b.nodeType===d.NodeTypes.COMMENT_NODE?k.replace(/-->/g,"").replace(/<!--/g,""):k.replace(/-->/g,"--&gt;").replace(/<!--/g,"&lt;!--"),j=o.createComment(k));a(q).after(j)}},getDialog:function(a){return this.uiManager.getWidget("dialog_"+a)},getToolButton:function(a){return this.uiManager.getWidget("toolbar_"+a)},disableToolButton:function(a,b){var c=this.getToolButton(a);c&&(b?c.disable():c.enable())},getMenuItems:function(a){return this.uiManager.getMenuItems(a)},getDisplayValueByClass:function(a){return E[a]},disableMenuItem:function(a,b){return this.uiManager.disableMenuItem(a,b)},toggleMenuItem:function(a,b){return this.uiManager.toggleMenuItem(a,b)},disableContextMenuItem:function(a,b){return this.uiManager.disableMenuItem(a+"ContextMenu",b)},dialog:function(a){this.uiManager.dialog(a)},alert:function(a){this.uiManager.alert(a)},remove:function(){var b;this.removed||(!this.RemoveCallByManager&&console&&console.warn&&console.warn("[Warning] The editor.remove() API is deprecated and will be removed in a future release. Please use the cafe.destroy() API instead."),this.removed=!0,b=this.uiManager.getContainer(),a(this.getWin()).off(),a(this.getDoc()).off(),a(this.getBody()).off(),a(b).off(),a(b).remove())},destroy:function(){var b=this,c=b.getDoc(),d=c.body;this.removed||(b.final(),a(b.getWin()).off(),a(c).off(),b.off(),b.zwsUtils.destroy(),b.pluginUtils.destroy(),b.styleUtils.destroy(),b.lockUtils.destroy(),b.selectionChange.destroy(),b.commandManager.destroy(),b.historyManager.destroy(),b.shortcutManager.destroy(),b.selectionManager.destroy(),b.selectionUtils.destroy(),b.contentUtils.destroy(),b.commandHelper.destroy(),b.lastRange&&(b.lastRange=null),b.browser.ie?(a(d).off(".cafe").empty(),a(c.head).empty(),a(c.documentElement).off("mousedown.cafe")):a(d).off().parent().remove(),b.uiManager.destroy(),b.uiManager=null,b.zwsUtils=null,b.pluginUtils=null,b.styleUtils=null,b.lockUtils=null,b.contentUtils=null,b.selectionUtils=null,b.selectionChange=null,b.commandManager=null,b.historyManager=null,b.shortcutManager=null,b.selectionManager=null,b.commandHelper=null,b.finalTasks=null,b.theme=null,b.configs=null,b.language=null,b.id=null,b.baseURL=null,b.browser=null,b.os=null,b.suffix=null,b.scriptLoader=null,b.buttons=null,b.menuItems=null,b.panels=null,b.commands=null,b.shortcuts=null,b.theme=null,b.dialogs=null,b.style=null,b.colorUtils=null,b.constants=null,b.contentDocument=null,b.contentWindow=null,b.$=null,b.cssObj=null,b.isPluginLoaded=null,b.getDefaultStyle=null,b.initRecord=null)},off:function(b){a(this).off(b)},on:function(b,c){a(this).on(b,c)},one:function(b,c){a(this).one(b,c)},trigger:function(b,c){a(this).trigger(b,c)},isEmpty:function(a){var b,c,d,e=this.getBody(),f=e.firstChild,g=this.browser,h=!1;return f&&"cui-spellcheck-result"===f.className&&(f=f.nextSibling),this.selectionManager.isDummyLine(f)&&(f=f.nextSibling),f&&f===e.lastChild&&"P"===f.nodeName&&(b=f.firstChild,c=f.lastChild,d=b&&b===c,g.ie?b?d&&"BR"===b.nodeName?h=!0:d&&3===b.nodeType&&/^[\u200B\uFEFF]?\u00A0$/.test(b.textContent)?h=!0:2===f.childNodes.length&&3===b.nodeType&&3===c.nodeType&&(h=/^[\u200B\uFEFF]$/.test(b.textContent)&&/^\u00A0$/.test(c.textContent)):h=!0:h=d?"BR"===b.nodeName:!(2!==f.childNodes.length||3!==b.nodeType||1!==b.textContent.length||!/[\u200B\uFEFF]/.test(b.textContent)||"BR"!==f.lastChild.nodeName),h=h&&(a||0===f.attributes.length)),h},getUniqueId:function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},disableAllHeader:function(a){this.uiManager.disableAllHeader(a,!0)},enableAllHeader:function(a){this.uiManager.disableAllHeader(a,!1)},backupHeaderStates:function(){this.uiManager.backupHeaderStates()},restoreHeaderStates:function(){return this.uiManager.restoreHeaderStates()},getSupportImageType:function(){return d.SupportImageType}},y}),d("utilities/I18n",[],function(){var a={};return{add:function(b,c){a[b]=c},getText:function(b,c){return c&&a[b]&&a[b][c]?a[b][c.toLowerCase()]:"error: "+c},getLanguagePack:function(b){return b&&a[b]?a[b]:null},data:a}}),d("PluginManager",[],function(){var a={},b={},c={};return{changeUrl:function(a,b){return a.plugin=b,a},getDependencies:function(a){return a in b?b[a]:[]},setExceptions:function(a){var b,d;if(a instanceof Array)for(c={},d=a.length,b=0;b<d;b++)c[a[b]]=!0},load:function(b,d,e){var f,g=this;a[d]||(f=e.prefix+e.plugin+e.suffix,b.addQueue(f,function(){var a,f,h=g.getDependencies(d),i=h.length;for(a=0;a<i;a++)f=h[a],c[f]||g.load(b,f,g.changeUrl(e,f))}))},add:function(c,d,e){var f;a[c]||(CustomEvent.call?f=new CustomEvent(c+"pluginadded",{detail:{plugin:e}}):(f=document.createEvent("CustomEvent"),f.initCustomEvent(c+"pluginadded",!1,!1,{plugin:e})),a[c]=e,b[c]=d,f&&document.dispatchEvent(f))},get:function(b){return a[b]?a[b]:null}}}),d("EditorManager",["jqueryCafe","Editor","PluginManager","ThemeManager","FocusManager","utilities/I18n","utilities/EditorConstants","utilities/ScriptLoader"],function(a,b,c,d,e,f,g,h){function i(a){var b=n.match(a);return b&&b.length>1&&b[1]||""}function j(){var a=i(/(ipod|iphone|ipad)/i).toLowerCase(),b=/silk/i.test(n),c={};return/windows/i.test(n)?(c.name="windows",c.windows=!0,c.version=i(/Windows ((NT|XP)( \d\d?.\d)?)/i)):a||b||!/macintosh/i.test(n)?/linux/i.test(n)&&(c.name="linux",c.linux=!0):(c.name="mac",c.mac=!0,c.version=i(/Mac OS X (\d+([_\.\s]\d+)*)/i).replace(/[_\s]/g,".")),c}function k(){var a,b={};return a=i(/version\/(\d+(\.\d+)?)/i),/edge/i.test(n)?b={name:"Edge",edge:!0,version:i(/(?:edge)[ \/](\d+(\.\d+)?)/i)}:/opera|opr/i.test(n)?b={name:"Opera",opera:!0,version:a||i(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/msie|trident/i.test(n)?(b={name:"Internet Explorer",ie:!0,version:i(/(?:msie |rv:)(\d+(\.\d+)?)/i)},"11.0"!==b.version&&!window.ActiveXObject&&"ActiveXObject"in window&&(b.version="11.0")):/chrome|crios|crmo/i.test(n)?b={name:"Chrome",chrome:!0,version:i(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(n)?(b={name:"Firefox",firefox:!0,version:i(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(n)&&(b.firefoxos=!0)):/safari/i.test(n)&&(b={name:"Safari",safari:!0,version:i(/(?:safari)[ \/](\d+(\.\d+)?)/i)}),/(apple)?webkit/i.test(n)?(b.name=b.name||"Webkit",b.webkit=!0,!b.version&&a&&(b.version=a)):!b.opera&&/gecko\//i.test(n)&&(b.name=b.name||"Gecko",b.gecko=!0,b.version=b.version||i(/gecko\/(\d+(\.\d+)?)/i)),b}function l(a){var b,i,l,m,n,o=document.getElementsByTagName("script");for(i=0;i<o.length;i++)if(b=o[i].getAttribute("src",2),/cafe(?:[\.\_\-][a-z0-9]+)*(.min)?\.js/gi.test(b)&&(l=/(?:\w+\.*)*cafe(?:\-note)?\/(?:\w+\.*)+\/(cafe(?:\-note)?(?:\w+\.*)*(?:.min)?\.js)/.exec(b))){m=l[1],a.baseURL=b.substring(0,b.lastIndexOf(m)),a.suffix=/.min.js/.test(m)?".min":"";break}n=new h,a.pluginManager=c,a.browser=k(),a.os=j(),a.themeManager=d,a.focusManager=new e(a),a.i18n=f,a.editorConstants=g,a.initialed=!0}var m,n=window.navigator.userAgent;m={editors:{},loadedConfigs:{},loadedCSS:[],initialed:!1,suffix:"",version:"2.3.28.2",edition:"Professional",create:function(c,d,e,f){function g(b){var c={};return b?"object"==typeof b?c=a.extend(c,b):m.loadedConfigs[b]?c=m.loadedConfigs[b]:a.ajax({url:b,type:e,async:!1,dataType:"json",timeout:2e3,success:function(a){c=a,m.loadedConfigs[b]=c},error:function(a,b){c.errorMessage=b,c.errorCode=a.status,c.load_fail=!0}}):c.load_fail=!0,c}function h(b){var c,d;a.inArray(b,m.loadedCSS)===-1&&(c=document.createElement("link"),c.rel="stylesheet",c.type="text/css",c.href=b,d=document.getElementsByTagName("head")[0],d.appendChild(c),m.loadedCSS.push(b))}function i(a,b){var c="";c=a===n.ID_DUPLICATION?"ìì±íë ¤ë ìëí°ì IDì ëì¼í ìëí°ê° ì´ë¯¸ ì¡´ì¬í©ëë¤.\n\nì¤ë³µ ID : "+b+"\n\n\nAn editor already exists with the same ID as the editor you're trying to create.\n\nDuplicate ID : "+b:a===n.EXPIRED_LICENSE?"CAFE NOTE íê°í ë¼ì´ì ì¤ì ì¸ì¦ ê¸°ê°ì´ ë§ë£ëì´ ë ì´ì ëìíì§ ììµëë¤.\nCAFE NOTEë¥¼ ì¬ì©íê¸° ìí´ìë ì í ë¼ì´ì ì¤ë¥¼ êµ¬ë§¤íìì¼ í©ëë¤.\n\nYour trial period has expired and the CAFE NOTE is no longer working.\nTo use the CAFE NOTE you must purchase a genuine license.":a===n.TARGET_ELEMENT_ABSENCE?"ìì±íë ¤ë ìëí° IDì ëì¼í IDë¥¼ ê°ì§ Elementê° ì¡´ì¬íì§ ììµëë¤.\n\n\nNo element exists with the same ID as the editor ID you are trying to create.":"ìëí° ì¤ì  ì ë³´ë¥¼ ì ìì ì¼ë¡ ë¡ëí  ì ììµëë¤.\n\nì²´í¬ ì ì°¸ê³ ì¬í­:\n- í´ë¹ ë¸ë¼ì°ì  ë²ì  ë° ë³´ììì ì ì½ì¬í­\n- ìëí° ì¤ì íì¼ ê²½ë¡, ìëí° ìì± ì½ë ë± ìëí° ì¤ì ê°\n- JSON íì¼ì ëí ìë² ì¤ì  ì ì±\në±\n\n\nCannot load the editor configuration data.\n\nIf you need, refer to the following:\n- Your browser's security policy\n- Editor configuration data: Editor configuration file path, Source codes for creating Editor, etc. \n- Server configuration set about JSON file\netc.\n",window.alert(c)}var j,k,m=this,n={EXPIRED_LICENSE:0,INCORRECT_CONFIG:1,ID_DUPLICATION:2,TARGET_ELEMENT_ABSENCE:3};return m.get(c)?void i(n.ID_DUPLICATION,c):(m.initialed||l(m),"function"==typeof e?(f=e,e="GET"):"string"==typeof e&&(e=e.toUpperCase()),"GET"!==e&&"POST"!==e&&(e="GET"),d?(j=g(d),"string"==typeof d&&j.load_fail?void i(n.INCORRECT_CONFIG):(this.editors[c]={},j.skin=j.skin||"default-base",h(m.baseURL+"skins/"+j.skin+"/all"+m.suffix+".css"),void a(function(){k=m.add(new b(c,j,m)),document.getElementById(c)?("function"==typeof f&&k.on("editoraftercreate",function(){f(k)}),k.setup()):(m.destroy(c,!0),i(n.TARGET_ELEMENT_ABSENCE))}))):void i(n.INCORRECT_CONFIG))},get:function(a){return arguments.length&&a?a in this.editors?this.editors[a]:null:this.editors},add:function(a){return this.editors[a.id]=a,this.activeEditor=a,this.trigger("editoradd",a),a},remove:function(a){var b,c,d=this,e=this.editors;if(console&&console.warn&&console.warn("[Warning] The cafe.remove() API is deprecated and will be removed in a future release. Please use the cafe.destroy() API instead."),a){if(e[a.id]){if(delete e[a.id]){if(this.activeEditor===a)for(c in e){d.activeEditor=e[c];break}this.trigger("editordestroy",a)}return a.RemoveCallByManager=!0,a.remove(),a}}else for(b in e)d.remove(e[b])},destroy:function(b,c){var d,e,f=this,g=this.editors;if("string"==typeof b&&(d=b,b=g[d],!b))return!1;if(!b||!b.id||!g[b.id])return!1;if(delete g[b.id]){if(this.activeEditor===b)if(Object.keys(g).length)for(e in g){f.activeEditor=g[e];break}else this.activeEditor=null,a.clearCaches();c||this.focusManager.removeFocusEventHandlers(b)}return c||b.destroy(),b=null,!0},off:function(b){a(this).off(b)},on:function(b,c){a(this).on(b,c)},one:function(b,c){a(this).one(b,c)},trigger:function(b,c){a(this).trigger(b,c)},getContent:function(a,b){var c;if(a&&(c=this.get(a)))return b=b||{},b.format&&!/html/i.test(b.format)||(b.format="public"),c.execCommand("codeview.updatecontent"),c.getContent(b)},getContentSize:function(a){var b;return b=this.get(a),b&&b.getContentSize&&!b.pluginUtils.isTextMode()?(b.execCommand("codeview.updatecontent"),b.getContentSize()):-1},setContentToEditor:function(a,b,c,d){var e;if(a&&(c||"object"!=typeof b?"string"!=typeof b&&(b=""):(c=b,b=""),e=this.get(a),e&&(!e.isSpellcheckMode||!e.isSpellcheckMode())))return c=c||{},c.format&&!/html/i.test(c.format)||(c.format="public"),b=e.setContent(b,c,d),e.trigger("editorupdated"),b},setContent:function(a,b,c){return this.setContentToEditor(a,b,c)},clear:function(a){var b,c=!1;return b=a?this.get(a):null,b&&(c=b.execCommand("newdocument")||!0),c},setHeight:function(a,b){var c;if(a&&(c=this.get(a)))return c.setHeight(b)}},window.Cafe=window.cafe=m}),a.Cafe&&!a.Cafe.getModules&&(a.Cafe.getModules=function(){return e})}(this);